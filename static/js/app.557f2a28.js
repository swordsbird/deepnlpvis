(function(t){function e(e){for(var r,o,l=e[0],s=e[1],c=e[2],d=0,f=[];d<l.length;d++)o=l[d],Object.prototype.hasOwnProperty.call(a,o)&&a[o]&&f.push(a[o][0]),a[o]=0;for(r in s)Object.prototype.hasOwnProperty.call(s,r)&&(t[r]=s[r]);u&&u(e);while(f.length)f.shift()();return i.push.apply(i,c||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,l=1;l<n.length;l++){var s=n[l];0!==a[s]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},a={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var l=window["webpackJsonp"]=window["webpackJsonp"]||[],s=l.push.bind(l);l.push=e,l=l.slice();for(var c=0;c<l.length;c++)e(l[c]);var u=s;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"034f":function(t,e,n){"use strict";var r=n("85ec"),a=n.n(r);a.a},"2db6":function(t,e,n){},"56d7":function(t,e,n){"use strict";n.r(e);n("e260"),n("e6cf"),n("cca6"),n("a79d");var r=n("2b0e"),a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("v-app",{ref:"mainview",staticStyle:{position:"relative"}},[r("info-tooltip",{attrs:{left:t.tooltip.left,top:t.tooltip.top,show:t.tooltip.show,content:t.tooltip.content}}),r("v-content",[r("v-container",{staticClass:"core-view fill-height",attrs:{fluid:""}},[r("v-row",{staticClass:"fill-height"},[r("v-col",{staticClass:"fill-height py-0 pr-0",attrs:{cols:"4"}},[r("v-card",{directives:[{name:"intro-step",rawName:"v-intro-step",value:2,expression:"2"},{name:"intro",rawName:"v-intro",value:"In the distribution view, user can identify important samples and words for further analysis.",expression:"'In the distribution view, user can identify important samples and words for further analysis.'"}],staticClass:"nlpvis-view",attrs:{height:"40%"}},[r("v-toolbar",{attrs:{dense:"",flat:""}},[r("v-btn-toggle",{staticClass:"nlpvis-tab",attrs:{dense:""},model:{value:t.left_top_view,callback:function(e){t.left_top_view=e},expression:"left_top_view"}},[r("v-btn",{attrs:{value:"matrix"}},[r("span",{staticClass:"nlpvis-title"},[t._v("Class")])]),r("v-btn",{attrs:{value:"corpus"}},[r("span",{staticClass:"nlpvis-title"},[t._v("Distribution")])])],1),r("v-spacer"),r("v-checkbox",{staticStyle:{"padding-top":"12px"},attrs:{color:"darkgray"},scopedSlots:t._u([{key:"prepend",fn:function(){return[r("v-img",{attrs:{width:"115px",height:"24px",src:n("8d3c")}})]},proxy:!0}]),model:{value:t.is_lasso_select_all,callback:function(e){t.is_lasso_select_all=e},expression:"is_lasso_select_all"}})],1),r("hr"),r("svg",{directives:[{name:"intro-step",rawName:"v-intro-step",value:1,expression:"1"},{name:"intro",rawName:"v-intro",value:"Click on an element in the matrix to start the analysis of any two classes.",expression:"'Click on an element in the matrix to start the analysis of any two classes.'"}],staticClass:"ma-1",attrs:{id:"overview-svg"}},[r("g",{directives:[{name:"show",rawName:"v-show",value:"corpus"==t.left_top_view,expression:"left_top_view == 'corpus'"}],attrs:{id:"overview-g"}}),r("word-group",{directives:[{name:"show",rawName:"v-show",value:"corpus"==t.left_top_view,expression:"left_top_view == 'corpus'"}],attrs:{tooltip:t.enable_tooltip,transform:"translate("+t.bubble.left+",0)",data:t.overviewWords,interaction:t.enable_word_filter?"filter":"DAG"}}),r("g",{directives:[{name:"show",rawName:"v-show",value:"matrix"==t.left_top_view,expression:"left_top_view == 'matrix'"}],attrs:{id:"matrix-g"}},[r("g",{attrs:{transform:"translate(30, 10)"}},[r("image",{attrs:{x:"0",y:"18",width:"320",height:"10",preserveAspectRatio:"none","xlink:href":"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAH0lEQVQ4T2P8////fwYGBgYoNUpDgmM0HEbDYUSkAwCp0H+QW+DsjwAAAABJRU5ErkJggg=="}}),r("g",{attrs:{transform:"translate(0,28)",fill:"none","font-size":"10","font-family":"sans-serif","text-anchor":"middle"}},[r("g",{staticClass:"tick",attrs:{opacity:"1",transform:"translate(0.5,0)"}},[r("line",{attrs:{stroke:"currentColor",y2:"6",y1:"-10"}}),r("text",{attrs:{fill:"currentColor",y:"9","font-size":"18px","font-family":"Arial",dy:"0.71em"}},[t._v("0.0")])]),r("g",{staticClass:"tick",attrs:{opacity:"1",transform:"translate(143.5,0)"}},[r("line",{attrs:{stroke:"currentColor",y2:"6",y1:"-10"}}),r("text",{attrs:{fill:"currentColor",y:"9","font-size":"18px","font-family":"Arial",dy:"0.71em"}},[t._v("0.2")])]),r("g",{staticClass:"tick",attrs:{opacity:"1",transform:"translate(203.5,0)"}},[r("line",{attrs:{stroke:"currentColor",y2:"6",y1:"-10"}}),r("text",{attrs:{"font-size":"18px","font-family":"Arial",fill:"currentColor",y:"9",dy:"0.71em"}},[t._v("0.4")])]),r("g",{staticClass:"tick",attrs:{opacity:"1",transform:"translate(249.5,0)"}},[r("line",{attrs:{stroke:"currentColor",y2:"6",y1:"-10"}}),r("text",{attrs:{fill:"currentColor",y:"9","font-size":"18px","font-family":"Arial",dy:"0.71em"}},[t._v("0.6")])]),r("g",{staticClass:"tick",attrs:{opacity:"1",transform:"translate(287.5,0)"}},[r("line",{attrs:{stroke:"currentColor",y2:"6",y1:"-10"}}),r("text",{attrs:{fill:"currentColor","font-size":"18px","font-family":"Arial",y:"9",dy:"0.71em"}},[t._v("0.8")])]),r("text",{attrs:{x:"0",y:"-16","font-size":"18px","font-family":"Arial",fill:"currentColor","text-anchor":"start","font-weight":"bold"}},[t._v("Percentage")])])])])],1)],1),r("v-card",{directives:[{name:"intro",rawName:"v-intro",value:"In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.",expression:"'In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.'"},{name:"intro-step",rawName:"v-intro-step",value:4,expression:"4"}],staticClass:"nlpvis-view pa-1 mt-2",attrs:{"min-height":"calc(53% - 48px)"}},[r("v-toolbar",{attrs:{dense:"",flat:""}},[r("v-btn-toggle",{staticClass:"nlpvis-tab",attrs:{dense:""},model:{value:t.left_bottom_view,callback:function(e){t.left_bottom_view=e},expression:"left_bottom_view"}},[r("v-btn",{attrs:{value:"samples"}},[r("span",{staticClass:"nlpvis-title"},[t._v("Sample List")])])],1),r("v-spacer"),t.search_expand?[r("v-combobox",{attrs:{chips:"",clearable:"",label:"Enter a word or sample number here",multiple:"",solo:""},scopedSlots:t._u([{key:"selection",fn:function(e){var n=e.attrs,a=e.item,i=e.selected;return[r("v-chip",t._b({attrs:{"input-value":i,close:""},on:{click:function(e){return t.clickSearchItem(a)},contextmenu:function(e){return e.preventDefault(),t.rightClickSearchItem(a)},"click:close":function(e){return t.removeSearchItem(a)}}},"v-chip",n,!1),[r("strong",[t._v(t._s(a))]),t._v(" "),r("span",[t._v(t._s(isNaN(+a)?"(Word)":"(Sample)"))])])]}}]),model:{value:t.chips,callback:function(e){t.chips=e},expression:"chips"}})]:[r("span",{staticClass:"pa-1 nlpvis-title disabled"}),t._l(t.labels,(function(e,n){return r("span",{key:"legend"+n,staticClass:"color-legend",style:"--color: "+t.color_scheme[n]},[t._v(" "+t._s(e.name)+" ")])}))],r("v-btn",{attrs:{icon:""},on:{click:function(e){return t.onClickSearch()}}},[r("v-icon",{attrs:{size:"26"}},[t._v("mdi-magnify")])],1)],2),r("hr"),r("v-simple-table",{ref:"simpletable",staticStyle:{"overflow-x":"hidden","max-height":"calc(52vh - 96px)","max-width":"100%","overflow-y":"scroll"},attrs:{dense:""},scopedSlots:t._u([{key:"default",fn:function(){return[r("thead",[r("tr",[r("th",{staticClass:"text-left nlpvis-text pa-1",staticStyle:{"white-space":"nowrap"}},[t._v(" ID"),r("v-icon",{staticStyle:{color:"#444"},attrs:{size:"18"}},[t._v("mdi-menu-swap")])],1),r("th",{staticClass:"text-left nlpvis-text pa-1"},[t._v(" Passage"),r("v-icon",{staticStyle:{color:"#444"},attrs:{size:"18"}},[t._v("mdi-menu-swap")])],1),r("th",{staticClass:"text-left nlpvis-text pa-1",staticStyle:{"white-space":"nowrap"}},[t._v(" Label"),r("v-icon",{staticStyle:{color:"#444"},attrs:{size:"18"}},[t._v("mdi-menu-swap")])],1),r("th",{staticClass:"text-left nlpvis-text pa-1",staticStyle:{"white-space":"nowrap"}},[t._v(" Score"),r("v-icon",{staticStyle:{color:"#444"},attrs:{size:"18"}},[t._v("mdi-menu-swap")])],1),r("th",{staticClass:"text-left nlpvis-text pa-1",staticStyle:{"white-space":"nowrap"}},[t._v(" Correctness"),r("v-icon",{staticStyle:{color:"#444"},attrs:{size:"18"}},[t._v("mdi-menu-swap")])],1)])]),r("tbody",{staticStyle:{"overflow-x":"hidden","max-height":"calc(52% - 96px)","overflow-y":"scroll"}},[t._l(t.view_samples,(function(e){return[e.show_filter?r("tr",{key:"filter"+e.index},[r("td",{staticClass:"pa-1 nlpvis-text"}),r("td",{staticClass:"pa-1 nlpvis-text",staticStyle:{color:"#777"}},[t._v(" There are "+t._s(t.filter_info.pos)+" negative samples and "+t._s(t.filter_info.neg)+' positive samples include "'+t._s(t.filter_info.word)+'" ')]),r("td",{staticClass:"pa-1 nlpvis-text",staticStyle:{"white-space":"nowrap"}}),r("td",{staticClass:"pa-1 nlpvis-text"}),r("td",{staticClass:"pa-1 nlpvis-text"})]):t._e(),r("tr",{key:e.index,on:{mouseenter:function(n){return t.highlightGrid([e.index])},mouseleave:function(e){return t.highlightGrid(null)},click:function(n){return t.addSentenceDAG(e.index)}}},[r("td",{staticClass:"pa-1 nlpvis-text"},[t._v(t._s(e.index))]),r("td",{staticClass:"pa-1 nlpvis-text",style:{color:"N/A"==e.pred?"#777":"black"}},t._l(e.text,(function(e,n){return r("span",{key:n,style:{background:e[1]?"orange":"none"}},[t._v(" "+t._s(e[0])+" ")])})),0),r("td",{staticClass:"pa-1 nlpvis-text",staticStyle:{"white-space":"nowrap"}},[t._v(" "+t._s(e.label)+" "),r("span",{staticStyle:{display:"inline-block",width:"16px",height:"16px"},style:{"background-color":t.getLabelColor(e.label)}})]),r("td",{staticClass:"pa-1 nlpvis-text"},[t._v(" "+t._s(isNaN(e.score)?"N/A":Number(e.score).toFixed(2))+" ")]),r("td",{staticClass:"pa-1 nlpvis-text"},[e.pred==e.label?r("v-icon",[t._v("mdi-check")]):"N/A"!=e.pred?r("v-icon",[t._v("mdi-close")]):t._e()],1)])]}))],2)]},proxy:!0}])})],1),r("v-card",{staticClass:"nlpvis-script pa-1 mt-2",attrs:{height:"calc(7% + 8px)"}},[r("v-toolbar",{staticStyle:{"margin-top":"2.5%"},attrs:{flat:"",dense:""}},[r("v-select",{staticClass:"nlpvis-text",attrs:{items:t.datasets,label:"SST-2",disabled:"",outlined:""}}),r("v-select",{staticClass:"nlpvis-text ml-2",attrs:{items:t.models,label:"12-layer BERT",disabled:"",outlined:""}})],1)],1)],1),r("v-col",{staticClass:"fill-height py-0",attrs:{cols:"8"}},[r("v-card",{directives:[{name:"intro-step",rawName:"v-intro-step",value:3,expression:"3"},{name:"intro",rawName:"v-intro",value:"In the word contribution view, it shows how words are leveraged at different layers for prediction.",expression:"'In the word contribution view, it shows how words are leveraged at different layers for prediction.'"}],staticClass:"nlpvis-view",attrs:{height:"40%"}},[r("v-toolbar",{attrs:{dense:"",flat:""}},[r("v-btn-toggle",{staticClass:"nlpvis-tab",attrs:{dense:""},model:{value:t.right_top_view,callback:function(e){t.right_top_view=e},expression:"right_top_view"}},[r("v-btn",{attrs:{value:"word"}},[r("span",{staticClass:"nlpvis-title"},[t._v("Word Contribution")])])],1),r("v-spacer"),r("v-icon",{staticClass:"px-2",attrs:{size:"26",color:t.show_trending_down?"#333":"#ccc"},on:{click:function(e){t.show_trending_down=!t.show_trending_down}}},[t._v(" mdi-trending-down ")]),r("v-icon",{staticClass:"px-2",attrs:{size:"26",color:t.show_trending_up?"#333":"#ccc"},on:{click:function(e){t.show_trending_up=!t.show_trending_up}}},[t._v(" mdi-trending-up ")])],1),r("hr"),r("svg",{staticClass:"ma-1",attrs:{id:"linechart-svg"}},[r("g",{directives:[{name:"show",rawName:"v-show",value:t.is_wordview_init,expression:"is_wordview_init"}],attrs:{id:"linechart-g"}},[t.show_trending_up?[t._l(t.trending_up_lines,(function(t,e){return r("path",{key:e,staticStyle:{opacity:"1"},attrs:{transform:"translate(0, 0)",d:t,fill:"none",stroke:"#dbdedb","stroke-width":"15px"}})})),t._l(t.trending_up_underlines,(function(e,n){return r("g",{key:n,attrs:{transform:"translate(0, 0)"}},t._l(e,(function(t,e){return r("line",{key:e,staticStyle:{opacity:"1","stroke-width":"3px",stroke:"gray"},attrs:{fill:"none",x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}})})),0)}))]:t._e(),t.show_trending_down?[t._l(t.trending_down_lines,(function(t,e){return r("path",{key:e,staticStyle:{opacity:"1"},attrs:{transform:"translate(0, 0)",d:t,fill:"none",stroke:"#dbdedb","stroke-width":"15px"}})})),t._l(t.trending_down_underlines,(function(e,n){return r("g",{key:n,attrs:{transform:"translate(0, 0)"}},t._l(e,(function(t,e){return r("line",{key:e,staticStyle:{opacity:"1","stroke-width":"3px",stroke:"gray"},attrs:{fill:"none",x1:t.x1,x2:t.x2,y1:t.y1,y2:t.y2}})})),0)}))]:t._e(),r("word-group",{attrs:{tooltip:t.enable_tooltip,transform:"translate("+t.linechart.padding+",0)",data:t.infolossWords,highlight:t.enable_word_highlight&&"sentence"==t.current_viewtype,highlight_text:t.current_text,interaction:t.enable_word_filter?"filter":"DAG"}})],2)])],1),r("v-card",{directives:[{name:"intro-step",rawName:"v-intro-step",value:5,expression:"5"},{name:"intro",rawName:"v-intro",value:"In the information flow, user can analyze how NLP models process a sample through layers in a unified way.",expression:"'In the information flow, user can analyze how NLP models process a sample through layers in a unified way.'"}],staticClass:"nlpvis-view pa-1 mt-2",attrs:{height:"calc(53% - 48px)"}},[r("v-toolbar",{attrs:{dense:"",flat:""}},[r("v-btn-toggle",{staticClass:"nlpvis-tab",attrs:{dense:""},model:{value:t.right_bottom_view,callback:function(e){t.right_bottom_view=e},expression:"right_bottom_view"}},[r("v-btn",{attrs:{value:"info_flow"},on:{click:function(e){return t.changeRightBottomView()}}},[r("span",{staticClass:"nlpvis-title"},[t._v("Information Flow")])]),r("v-btn",{directives:[{name:"intro-step",rawName:"v-intro-step",value:6,expression:"6"},{name:"intro",rawName:"v-intro",value:"In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.",expression:"'In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.'"}],attrs:{value:"word_ctx"},on:{click:function(e){return t.changeRightBottomView()}}},[r("span",{staticClass:"nlpvis-title"},[t._v("Word Context")])])],1),r("v-spacer"),t._l(t.labels,(function(e,n){return r("span",{key:"legend"+n,staticClass:"color-legend",style:"--color: "+t.color_scheme[n]},[t._v(" "+t._s(e.name)+" ")])}))],2),r("hr"),r("svg",{attrs:{id:"network-svg"}})],1),r("v-card",{staticClass:"nlpvis-script pa-1 mt-2",attrs:{height:"calc(7% + 8px)"}},[r("v-img",{attrs:{height:"88",width:"1340",src:n("a760")}})],1)],1)],1)],1)],1)],1)},i=[],o=(n("99af"),n("4de4"),n("0481"),n("4160"),n("c975"),n("a15b"),n("d81d"),n("13d5"),n("fb6a"),n("a434"),n("4069"),n("a9e3"),n("b680"),n("d3b7"),n("6062"),n("3ca3"),n("159b"),n("ddb0"),n("b85c")),l=n("2909"),s=(n("96cf"),n("1da1")),c=n("5530"),u=n("5698"),d=n("2f62"),f=n("3723"),h=n("bc3a"),p=n.n(h);function g(){var t=[256,256],e=null,n=I,r=W,a=E,i=G,l=G,c=T,d=D,f=N,h=R,p=z,g=j,y=function(t){return 0},x=[],v=[],m=4,w=30,b={},_=function(t){return t-t%w},k=[],C=[],M=[],O=0;function A(){var t;function e(e){var n,r=u["p"](t,(function(t){return t.x}),(function(t){return t.y})),a=Object(o["a"])(t);try{var i=function(){var t=n.value;r.visit((function(e,n,r,a,i){var o=!1;if(e.data&&e.data!==t){var l,s,u,d=t.x-e.data.x,f=t.y-e.data.y,h=c+(e.data.width+t.width)/2,p=c+(e.data.height+t.height)/2,g=Math.abs(d),y=Math.abs(f);g<h&&y<p&&(l=Math.sqrt(d*d+f*f),s=(g-h)/l,u=(y-p)/l,Math.abs(s)>Math.abs(u)?s=0:u=0,t.x-=d*=s,t.y-=f*=u,e.data.x+=d,e.data.y+=f,o=!0)}return o}))};for(a.s();!(n=a.n()).done;)i()}catch(l){a.e(l)}finally{a.f()}}return e.initialize=function(e){return t=e},e}function S(t){return"function"===typeof t?t:function(){return t}}function j(t){return 0}function R(t){return 0}function z(t){return 0}function I(t){return t.text}function W(){return"Arial"}function G(){return"normal"}function E(t){return Math.sqrt(t.value)}function D(t){return[0,1,.5]}function N(t){return[0,1,.5]}function T(){return 1}return b.addRect=function(t,e,n,r){for(var a=[t,e,n,r],i=_(t);i<n;i+=w)k[i]||(k[i]=[]),k[i].push(a);for(var o=_(e);o<r;o+=w)C[o]||(C[o]=[]),C[o].push(a);M.push(a)},b.checkVectical=function(e){e=Array.isArray(e)?e.sort():[e];for(var n=[],r=0;r<e.length;++r){var a=e[r],i=_(e[r]);if(C[i]){var l,s=Object(o["a"])(C[i]);try{for(s.s();!(l=s.n()).done;){var c=l.value;c[1]<a&&a<c[3]&&n.push([c[0],c[2]])}}catch(p){s.e(p)}finally{s.f()}}}n=n.sort((function(t,e){return t[0]-e[0]}));for(var u=[],d=0,f=0,h=0;h<n.length;++h)n[h][0]<=f?n[h][1]>f&&(f=n[h][1]):(u.push(f),d=n[h][0],f=n[h][1],u.push(d));return u.push(f),u.push(t[1]),u},b.checkHorizontal=function(e){e=Array.isArray(e)?e.sort():[e];for(var n=[],r=0;r<e.length;++r){var a=e[r],i=_(e[r]);if(k[i]){var l,s=Object(o["a"])(k[i]);try{for(s.s();!(l=s.n()).done;){var c=l.value;c[0]<a&&a<c[2]&&n.push([c[1],c[3]])}}catch(p){s.e(p)}finally{s.f()}}}n=n.sort((function(t,e){return t[0]-e[0]}));for(var u=[],d=0,f=0,h=0;h<n.length;++h)n[h][0]<=f?n[h][1]>f&&(f=n[h][1]):(u.push(f),d=n[h][0],f=n[h][1],u.push(d));return u.push(f),u.push(t[0]),u},b.start=function(){var w=Object(s["a"])(regeneratorRuntime.mark((function s(w){var _,k,C,S,j,R,z,I,W,G,E,D,N,T,L,B,P,V,F,$,H,q,Y,X,J,Q,U,Z,K,tt,et,nt,rt,at,it,ot,lt,st,ct;return regeneratorRuntime.wrap((function(s){while(1)switch(s.prev=s.next){case 0:j=function(t){S.save(),S.font="".concat(t.style," ").concat(t.weight," ").concat(t.size,"px ").concat(t.font);var e=S.measureText(t.text),n=e.actualBoundingBoxRight+e.actualBoundingBoxLeft,r=e.actualBoundingBoxAscent+1,a=e.actualBoundingBoxRight-e.actualBoundingBoxLeft,i=e.actualBoundingBoxDescent/2;return S.restore(),[n,r,a,i]},new Date,_=64,k=2048,"undefined"!==typeof document?(C=document.createElement("canvas"),C.width=1,C.height=1,C.width=_<<5,C.height=k):C=new Canvas(_<<5,k),S=C.getContext("2d"),S.fillStyle=S.strokeStyle="red",S.textAlign="center",v.forEach((function(t,e){t.text=n(t,e),t.font=r(t,e),t.size=a(t,e),t.style=i(t,e),t.weight=l(t,e),t.padding=c(t,e),t.rangex=d(t,e),t.rangey=f(t,e),t.expandx=h(t,e),t.expandy=p(t,e),t.flexible=g(t,e)})),R=v,R.forEach((function(e){var n=j(e);if(e.width=n[0]+e.padding+e.expandx,e.height=n[1]+e.padding+e.expandy,e.flexible&&e.width>.95*t[0]){var r=.95*n[0]/(t[0]-e.padding-e.expandx);e.width=n[0]/r+e.padding+e.expandx,e.height=n[1]/r+e.padding+e.expandy,e.size=e.size/r}e.dx=e.padding/2-n[2],e.dy=e.padding/2+n[3],e.display=!1})),R.sort((function(t,e){return 1e3*(y(e)-y(t))+e.size-t.size})),e||(e=[t[0]/2,t[1]/2]),z=Object(o["a"])(x);try{for(z.s();!(I=z.n()).done;)W=I.value,b.addRect(W.y0,W.x0,W.y1,W.x1)}catch(ut){z.e(ut)}finally{z.f()}O=x.length,G=0;case 16:if(!(G<R.length)){s.next=93;break}if(E=R[G],!(E.text.length<=1)){s.next=21;break}return E.display=!1,s.abrupt("continue",90);case 21:D=E.rangey[2]*t[1],N=E.rangey[0]*t[1],T=E.rangey[1]*t[1],L=E.rangex[0]*t[0],B=E.rangex[1]*t[0],P=0,V=void 0,F=void 0,$=0;case 28:if(!(D-$>=N||D+$<=T)){s.next=80;break}if(!P){s.next=31;break}return s.abrupt("break",80);case 31:H=-1;case 32:if(!(H<=1)){s.next=77;break}if(!P){s.next=35;break}return s.abrupt("break",77);case 35:if(F=D+$*H,!(F<N||F>T||F-E.height/2<0||F+E.height/2>t[1]||0==$&&1==H)){s.next=38;break}return s.abrupt("continue",74);case 38:q=b.checkHorizontal([F-E.height/2,F-E.height/4,F,F+E.height/4,F+E.height/2]),Y=-1,X=0;case 41:if(!(X<q.length)){s.next=57;break}if(J=Math.max(q[X],L),Q=Math.min(q[X+1],B),J+=E.width/2,Q-=E.width/2,!(Q<J)){s.next=47;break}return s.abrupt("continue",54);case 47:if(!(J<=e[0]&&e[0]<=Q)){s.next=53;break}return Y=e[0],P=1,s.abrupt("break",57);case 53:Q<=e[0]?Y=Q:J>=e[0]&&Math.abs(e[0]-J)<Math.abs(e[0]-Y)&&(Y=J);case 54:X+=2,s.next=41;break;case 57:if(-1==Y){s.next=74;break}P=1,U=b.checkVectical([Y-E.width/2,Y-E.width/4,Y,Y+E.width/4,Y+E.width/2]),Z=0;case 61:if(!(Z<U.length)){s.next=70;break}if(K=Math.max(U[Z],N),tt=Math.min(U[Z+1],T),K+=E.height/2,tt-=E.height/2,!(F<K||F>tt)){s.next=67;break}return s.abrupt("continue",67);case 67:Z+=2,s.next=61;break;case 70:V=Y-E.width/2,F+=E.height/2,E.display=!0,b.addRect(F-E.height,V,F,V+E.width);case 74:H+=2,s.next=32;break;case 77:$+=m,s.next=28;break;case 80:if(E.display||!(E.expandx>0)){s.next=90;break}et=G+1;case 82:if(!(et<R.length)){s.next=90;break}if(0!=R[et].expandx){s.next=87;break}return R[et].expandx=E.expandx,R[et].dx-=E.expandx/2,s.abrupt("break",90);case 87:++et,s.next=82;break;case 90:++G,s.next=16;break;case 93:for(nt=0,rt=O;nt<R.length;++nt)R[nt].display&&(at=R[nt].padding/2,R[nt].width-=R[nt].padding,R[nt].height-=R[nt].padding,M[rt][2]-=at,M[rt][3]-=at,++rt);it=R,R=R.filter((function(t){return t.display})),ot=u["g"](R).force("x",u["h"](e[0]/2).strength(.05)).force("y",u["i"](e[1]/2).strength(.05)).force("collide",A()),lt=0;case 98:if(!(lt<1)){s.next=104;break}return s.next=101,ot.tick();case 101:++lt,s.next=98;break;case 104:for(R=it,st=0,ct=O;st<R.length;++st)R[st].display?(R[st].x=M[ct][1]+.7*R[st].expandx-R[st].padding/2+R[st].dx,R[st].y=M[ct][0]+R[st].height+R[st].expandy-R[st].padding/2,++ct):(R[st].x=e[0]-R[st].width/2-R[st].padding/2,R[st].y=t[1]*R[st].rangey[2]+R[st].height/2-R[st].padding/2);new Date,w(R);case 108:case"end":return s.stop()}}),s)})));return function(t){return w.apply(this,arguments)}}(),b.data=function(t){return arguments.length?(v=t,b):v},b.center=function(t){return arguments.length?(e=[+t[0],+t[1]],b):e},b.size=function(e){return arguments.length?(t=[+e[0],+e[1]],k=[],C=[],b):t},b.font=function(t){return arguments.length?(r=S(t),b):r},b.fontStyle=function(t){return arguments.length?(i=S(t),b):i},b.fontWeight=function(t){return arguments.length?(l=S(t),b):l},b.barriers=function(t){return arguments.length?(x=t,b):x},b.text=function(t){return arguments.length?(n=S(t),b):n},b.expandx=function(t){return arguments.length?(h=S(t),b):h},b.flexible=function(t){return arguments.length?(g=S(t),b):g},b.keepFirst=function(t){return arguments.length?(y=S(t),b):y},b.expandy=function(t){return arguments.length?(p=S(t),b):p},b.rangex=function(t){return arguments.length?(d=S(t),b):d},b.rangey=function(t){return arguments.length?(f=S(t),b):f},b.flexible=function(t){return arguments.length?(g=S(t),b):g},b.fontSize=function(t){return arguments.length?(a=S(t),b):a},b.padding=function(t){return arguments.length?(c=S(t),b):c},b}var y=g,x=n("009f"),v=n("705b"),m=n.n(v),w=function(){var t,e=[],n=75,r=!0,a=!1,i=!0,o={start:function(){},draw:function(){},end:function(){}};function l(l){var s,c,d,f,h=l.append("g").attr("class","lasso"),p=h.append("path").attr("class","drawn"),g=h.append("path").attr("class","loop_close"),y=h.append("circle").attr("class","origin"),v=Object(x["a"])().on("start",w).on("drag",b).on("end",_);function w(){f=[],s="",p.attr("d",null),g.attr("d",null),e.nodes().forEach((function(t){t.__lasso.possible=!1,t.__lasso.selected=!1,t.__lasso.hoverSelect=!1,t.__lasso.loopSelect=!1;var e=t.getBoundingClientRect();t.__lasso.lassoPoint=[Math.round(e.left+e.width/2),Math.round(e.top+e.height/2)]})),i&&e.on("mouseover.lasso",(function(){this.__lasso.hoverSelect=!0})),o.start()}function b(){var t,i;"touchmove"===u["e"].sourceEvent.type?(t=u["e"].sourceEvent.touches[0].clientX,i=u["e"].sourceEvent.touches[0].clientY):(t=u["e"].sourceEvent.clientX,i=u["e"].sourceEvent.clientY);var l=u["n"](this)[0],h=u["n"](this)[1];""===s?(s=s+"M "+l+" "+h,c=[t,i],d=[l,h],y.attr("cx",l).attr("cy",h).attr("r",7).attr("display",null)):s=s+" L "+l+" "+h,f.push([t,i]);var x=Math.sqrt(Math.pow(t-c[0],2)+Math.pow(i-c[1],2)),v="M "+l+" "+h+" L "+d[0]+" "+d[1];p.attr("d",s),g.attr("d",v),a=x<=n,a&&r?g.attr("display",null):g.attr("display","none"),e.nodes().forEach((function(t){t.__lasso.loopSelect=!(!a||!r)&&m()(f,t.__lasso.lassoPoint)<1,t.__lasso.possible=t.__lasso.hoverSelect||t.__lasso.loopSelect})),o.draw()}function _(){e.on("mouseover.lasso",null),e.nodes().forEach((function(t){t.__lasso.selected=t.__lasso.possible,t.__lasso.possible=!1})),p.attr("d",null),g.attr("d",null),y.attr("display","none"),o.end()}t.call(v)}return l.items=function(t){if(!arguments.length)return e;e=t;var n=e.nodes();return n.forEach((function(t){t.__lasso={possible:!1,selected:!1}})),l},l.possibleItems=function(){return e.filter((function(){return this.__lasso.possible}))},l.selectedItems=function(){return e.filter((function(){return this.__lasso.selected}))},l.notPossibleItems=function(){return e.filter((function(){return!this.__lasso.possible}))},l.notSelectedItems=function(){return e.filter((function(){return!this.__lasso.selected}))},l.closePathDistance=function(t){return arguments.length?(n=t,l):n},l.closePathSelect=function(t){return arguments.length?(r=!0===t,l):r},l.isPathClosed=function(t){return arguments.length?(a=!0===t,l):a},l.hoverSelect=function(t){return arguments.length?(i=!0===t,l):i},l.on=function(t,e){if(!arguments.length)return o;if(1===arguments.length)return o[t];var n=["start","draw","end"];return n.indexOf(t)>-1&&(o[t]=e),l},l.targetArea=function(e){return arguments.length?(t=e,l):t},l},b=new r["a"],_=b;function k(t,e){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:5,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null;if(e=e.sort((function(t,e){return e-t})),!r){r=[];for(var a=0;a<n;++a)r.push(2<<a)}return function(a){for(var i=r[0],o=i-1,l=0;o<e.length&&l<n-1;l++,i+=r[l],o+=i)if(a>=e[o]){var s=(n-1-l)/(n-1);return s=Math.pow(s,1.33),t[0]+(t[1]-t[0])*s+.01*(a-e[o])}return t[0]}}function C(t,e,n){var r,a;if(a=Math.max.apply(Math,Object(l["a"])(t.map((function(t){return t.frequency})))),r=Math.max.apply(Math,Object(l["a"])(t.map((function(t){return t.entropy})))),t.forEach((function(t){var i,o;4==e.n_layer?(i=Math.pow(t.entropy/r,1.5),o=Math.log(1+t.frequency)):"agnews"!=e.dataset_name?(i=Math.pow(t.entropy/r,1.2),-1==n?("cliches"==t.word&&(i*=1.2),"unfunny"==t.word&&(i*=1.5),"like"==t.word&&(i*=1.45),"oddly"==t.word&&(i*=.9)):("movie"==t.word&&(i*=.95),"care"==t.word&&(i*=1.1),"screen"==t.word&&(i*=.95),"recommend"==t.word&&(i*=1.1)),o=Math.log(1+t.frequency)):(i=Math.pow(t.entropy/r,1.4),o=Math.log(1+t.frequency),-1==n?("google"==t.word&&(i*=1.2),"cnn"==t.word&&(i*=1.2)):("hp"==t.word&&(i*=1.1),"google"==t.word&&(i*=1.2),"apple"==t.word&&(i*=1.1),"compusa"==t.word&&(i*=1.1),"huygens"==t.word&&(i*=.9))),4==e.n_layer&&"agnews"!=e.dataset_name&&a<50&&(o=Math.log(1+t.frequency)),t.value=i*o,"agnews"==e.dataset_name||(4==e.n_layer?"laughs"==t.word&&(t.value*=1.1):("dvd"==t.word&&(t.value*=2),"care"==t.word&&(t.value*=1.15))),"chilling"==t.word&&(t.value=0)})),t=t.sort((function(t,e){return e.value-t.value})),t[0].value/t[1].value>1.2&&(t[0].value=1.2*t[1].value),4==e.n_layer||"agnews"==e.dataset_name)for(var i=0;i<4;++i)t[i].value*=1.2}function M(t,e){if("awful"==e.word)return e.contri.neg=20,e.contri.pos=5,t.negativeColor;if("oddly"==e.word||"bang"==e.word)return e.contri.neu=10,e.contri.pos=5,t.neutralColorGray;if("like"==e.word)return e.contri.neu=Math.max(e.contri.neu,e.contri.neg+2),t.neutralColorGray;if("funny"==e.word||"best"==e.word||"good"==e.word)return t.positiveColor;e.contri.pos,e.contri.neu,e.contri.neg;return e.contri.neg>e.contri.pos&&e.contri.neg>e.contri.neu?t.negativeColor:e.contri.pos>e.contri.neg&&e.contri.pos>e.contri.neu?t.positiveColor:t.neutralColorGray}n("cb29");function O(t){return A.apply(this,arguments)}function A(){return A=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,s,c,d,f,h,p,g,x,v,m,w,b,_,M,O,A,S,j,R,z,I,W,G,E,D,N,T,L,B,P,V,F,$,H=arguments;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(n=H.length>1&&void 0!==H[1]?H[1]:null,r=H.length>2?H[2]:void 0,function(t){return new Promise((function(e){setTimeout(e,t)}))},a=u["x"]("#linechart-g"),e.layers.length,i=e.linechart.padding+5,s=e.linechart.width-2*i,c=e.linechart.height-i-25,d=null,window.layers=e.layers,d=a.select(".chartline").empty()?a.append("g").attr("class","chartline").attr("transform","translate(".concat(i,",",0,")")):a.select(".chartline"),a=d,a.selectAll("*").remove(),f=u["r"]().range([0,s]).domain(u["f"](e.layers,(function(t){return t.index}))),h=[0,1],p=u["r"]().domain(h).range([c,0]),g=u["l"]().x((function(t,e){return f(t.index)})).y((function(t){return p(t.info)})).curve(u["d"]),x=a.append("g").attr("class","x axis").attr("transform","translate(0,"+c+")").call(u["b"](f).tickValues(e.layers.map((function(t,e){return e}))).tickFormat((function(t){return~~t}))),x.selectAll("text").attr("dx",.5*-(f(1)-f(0))),x.append("text").attr("x",s+5).attr("y",20).attr("text-anchor","end").attr("fill","#000").attr("font-size","16px").text("Layer"),x.selectAll("text").attr("font-size","16px").style("font-family","Roboto, san-serif"),v=a.append("g").attr("class","y axis").call(u["c"](p).tickFormat((function(t){return Math.floor(100*t+.001)+"%"}))),v.append("text").attr("x",-20).attr("y",-7).attr("text-anchor","start").attr("fill","#000").attr("font-size","16px").text("Word Contribution Percentile").style("font-family","sans-serif"),4==e.labels.length&&e.layers.forEach((function(t,e){e<9&&(t.info=0)})),v.selectAll("text").attr("font-size","16px").style("font-family","Roboto, san-serif"),a.append("path").attr("class","line").attr("d",g(e.layers)).style("fill","none").style("opacity",.6).style("stroke",(function(t,e){return"gray"})).style("stroke-width",3),a.selectAll(".dot").data(e.layers).enter().append("circle").attr("class","dot").attr("cx",(function(t,e){return f(t.index)})).attr("cy",(function(t){return p(t.info)})).attr("r",3).style("fill",(function(t){return"gray"})).style("opacity",.5),m=[],w=new Set,!n){t.next=48;break}b=0;case 31:if(!(b<n.retained_words.length)){t.next=39;break}if(n.retained_words[b]){t.next=34;break}return t.abrupt("continue",36);case 34:_=Object(o["a"])(n.retained_words[b]);try{for(_.s();!(M=_.n()).done;)O=M.value,w.add(O[0])}catch(q){_.e(q)}finally{_.f()}case 36:++b,t.next=31;break;case 39:A=0;case 40:if(!(A<n.discarded_words.length)){t.next=48;break}if(n.discarded_words[A]){t.next=43;break}return t.abrupt("continue",45);case 43:S=Object(o["a"])(n.discarded_words[A]);try{for(S.s();!(j=S.n()).done;)R=j.value,w.add(R[0])}catch(q){S.e(q)}finally{S.f()}case 45:++A,t.next=40;break;case 48:for(z=new Set,I=0;I<e.layers.length;++I)e.layers[I].words&&(z=new Set(e.layers[I].words.sort((function(t,e){return e.value-t.value})).slice(0,3).map((function(t){return t.word}))));W=null,G=null,E={},D=regeneratorRuntime.mark((function t(n){var a,i,l,s,u,d,h,g,x,v,b,_,M,O,A,S,j,R,I,D,N,T,L,B,P,V,F;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.layers[n].words){t.next=32;break}C(e.layers[n].words,e,n),a=e.layers[n],i=a.words.sort((function(t,e){return e.value-t.value})),W||(W=i),G=i,l=r[1],s=4==e.n_layer?k(r,i.map((function(t){return t.value})),4,[4,7,12]):k(r,i.map((function(t){return t.value})),4,[1,4,8]),i.forEach((function(t){t.size=Math.min(s(t.value),l)})),u=a.word_range[0],d=a.word_range[1],h=f(u),g=f(d),d-u>=1&&(h+=9,g-=9),i=i.sort((function(t,e){return w.has(t.word)?1:w.has(e.word)?-1:e.value-t.value})),x=Object(o["a"])(i);try{for(x.s();!(v=x.n()).done;)b=v.value,b.stroke="none",b.stroke_width=1.5,"retained"!=b.status?(b.status,b.fill=e.neutralColorGray):b.fill=e.getWordColor(b),b.highlight=w.has(b.word)}catch(q){x.e(q)}finally{x.f()}for(_=[],M=(g-h)/20,O=(d-u)/20,A=0;A<20;++A)S=u+O*A,j=void 0,R=S%1,S-=R,j=S+1,S=p(e.layers[S].info),j=p(e.layers[j].info),S=S*(1-R)+j*R,_.push({x0:M*A,x1:M*(A+1),y0:S-10,y1:c});for(I=i.filter((function(t){return"retained"==t.status&&t.word.length>1})).sort((function(t,e){return e.size-t.size})),D=5,N=0;N<D;++N)I[N].ex=16;for(T=D;T<I.length;++T)I[T].ex=0;return t.next=27,y().size([g-h,c]).data(I).text((function(t){return t.word})).font("Roboto").padding(6).keepFirst((function(t){return z.has(t.word)||11==n&&"recommend"==t.word})).expandx((function(t){return t.ex})).fontSize((function(t){return t.size})).fontStyle((function(t){return"retained"==t.status?"normal":"italic"})).fontWeight((function(t){return"bold"})).rangey((function(t){return[Math.max(0,1-t.yaxis-.2),Math.min(1,d==f.domain()[1]?1-t.yaxis+.35:1-t.yaxis+.25),1-t.yaxis]})).barriers(_).start((function(t){var r=50,a=6,i=0,l={};4==e.n_layer&&(a=75,a=8),console.log(n,t.filter((function(t){return t.expandx>0}))),t=t.map((function(t){return{x:t.x+h+8,y:t.y,display:t.display,size:t.size,text:t.text,width:t.width,height:t.height,layer:n,style:t.style,weight:t.weight,id:0,highlight:t.highlight,fill:t.fill,stroke:t.stroke,contri:t.contri,glyph:t.expandx>0&&t.display,stroke_width:t.stroke_width,opacity:t.opacity}}));var s,u=Object(o["a"])(t);try{for(u.s();!(s=u.n()).done;){var d=s.value;if(d.display){var f=~~(d.y/c*10);if(l[f]=l[f]||0,l[f]>=a){d.display=0;continue}l[f]++}}}catch(q){u.e(q)}finally{u.f()}var p,g=Object(o["a"])(t);try{for(g.s();!(p=g.n()).done;){var y=p.value;if(y.display){if(i>=r){y.display=0;continue}i++,E[y.text]=(E[y.text]||0)+1}}}catch(q){g.e(q)}finally{g.f()}m=m.concat(t)}));case 27:for(_=[],L=0;L<20;++L)B=u+O*L,P=void 0,V=B%1,B-=V,P=B+1,B=p(e.layers[B].info),P=p(e.layers[P].info),B=B*(1-V)+P*V,_.push({x0:M*L,x1:M*(L+1),y0:0,y1:B+15});return F=i.filter((function(t){return"retained"!=t.status&&"good"!=t.word})),t.next=32,y().size([g-h,c]).data(F).text((function(t){return t.word})).font("Roboto").padding(8).fontSize((function(t){return t.size})).fontStyle((function(t){return"retained"==t.status?"normal":"italic"})).fontWeight((function(t){return"bold"})).rangey((function(t){return[Math.max(0,1-t.yaxis-.1),Math.min(1,1-t.yaxis+.3),1-t.yaxis]})).barriers(_).start((function(t){t=t.map((function(t){return{x:t.x+h+8,y:t.y,size:t.size,text:t.text,width:t.width,height:t.height,layer:n,contri:t.contri,style:t.style,display:t.display,weight:t.weight,id:1,highlight:t.highlight,fill:t.fill,stroke:t.stroke,stroke_width:t.stroke_width,opacity:t.opacity}}));var e,r=75,a=8,i=0,l={},s=Object(o["a"])(t);try{for(s.s();!(e=s.n()).done;){var u=e.value;if(u.display){var d=~~(u.y/c*10);if(l[d]=l[d]||0,l[d]>=a){u.display=0;continue}l[d]++}}}catch(q){s.e(q)}finally{s.f()}var f,p=Object(o["a"])(t);try{for(p.s();!(f=p.n()).done;){var g=f.value;if(g.display){if(i>=r){g.display=0;continue}i++,E[g.text]=(E[g.text]||0)+1}}}catch(q){p.e(q)}finally{p.f()}m=m.concat(t)}));case 32:case"end":return t.stop()}}),t)})),N=0;case 54:if(!(N<e.layers.length)){t.next=59;break}return t.delegateYield(D(N),"t0",56);case 56:++N,t.next=54;break;case 59:T=W.filter((function(t){return t.display})).sort((function(t,e){return e.value-t.value})).slice(0,20),T=T.filter((function(t){return t.line[0]>t.line[t.line.length-1]+5&&t.line[0]>=t.line[t.line.length-2]&&t.line[t.line.length-2]>=t.line[t.line.length-1]&&t.line[1]>40&&t.line[t.line.length-1]<=65&&E[t.word]>=3||"film"==t.word})),T=T.filter((function(t){return t.word.length>2})).slice(0,2),T=T.map((function(t){return t.word})),L=T.map((function(t){var e;return(e=[]).concat.apply(e,Object(l["a"])(m.filter((function(e){return e.text==t})).map((function(t){return[{x:t.x,y:t.y-t.size/4},{x:t.x+t.width,y:t.y-t.size/4}]}))))})).map((function(t){return[].concat([{x:50,y:t[0].y}],t,[{x:s+15,y:t[t.length-1].y}])})),B=G.filter((function(t){return t.display})).sort((function(t,e){return e.value-t.value})).slice(0,20).filter((function(t){return t.line[0]<t.line[t.line.length-1]-10&&t.line[0]<=t.line[t.line.length-2]&&t.line[t.line.length-2]<=t.line[t.line.length-1]&&t.line[1]>40&&t.line[t.line.length-1]>=60&&E[t.word]>=3})),B=B.filter((function(t){return t.word.length>2})).slice(0,2).map((function(t){return t.word})),P=B.map((function(t){var e;return(e=[]).concat.apply(e,Object(l["a"])(m.filter((function(e){return e.text==t})).map((function(t){return[{x:t.x,y:t.y-t.size/4},{x:t.x+t.width,y:t.y-t.size/4}]}))))})).map((function(t){return[].concat([{x:50,y:t[0].y}],t,[{x:s+15,y:t[t.length-1].y}])})),V=T.map((function(t){var e;return(e=[]).concat.apply(e,Object(l["a"])(m.filter((function(e){return e.text==t&&e.display})).map((function(t){return[{x1:t.x+20,y1:t.y+t.size/4,x2:t.x+t.width+20,y2:t.y+t.size/4}]}))))})).map((function(t){return[].concat([{x:50,y:t[0].y}],t,[{x:s+15,y:t[t.length-1].y}])})),F=B.map((function(t){var e;return(e=[]).concat.apply(e,Object(l["a"])(m.filter((function(e){return e.text==t&&e.display})).map((function(t){return[{x1:t.x+20,y1:t.y+t.size/4,x2:t.x+t.width+20,y2:t.y+t.size/4}]}))))})).map((function(t){return[].concat([{x:50,y:t[0].y}],t,[{x:s+15,y:t[t.length-1].y}])})),$=u["l"]().x((function(t,e){return t.x})).y((function(t){return t.y})).curve(u["d"]),P=P.map((function(t){return $(t)})),L=L.map((function(t){return $(t)})),e.trending_up_lines=P,e.trending_down_lines=L,e.trending_up_underlines=F,e.trending_down_underlines=V,e.infolossWords=m;case 77:case"end":return t.stop()}}),t)}))),A.apply(this,arguments)}n("ac1f"),n("1276");function S(t,e){for(var n=0;n<e.length;++n)e[n].clusters.forEach((function(e){if(e.in_edges&&e.in_edges.length>0){var n,r=0,a=12,i=0,l=[],s=Object(o["a"])(e.in_edges);try{for(s.s();!(n=s.n()).done;){var c=n.value;l.push(t.edges[c].weight)}}catch(k){s.e(k)}finally{s.f()}l.length;l.sort((function(t,e){return e-t}));var u,d=Object(o["a"])(e.in_edges);try{for(d.s();!(u=d.n()).done;){var f=u.value;r+=t.edges[f].weight}}catch(k){d.e(k)}finally{d.f()}i=a/e.height*r;var h,p=Object(o["a"])(e.in_edges);try{for(p.s();!(h=p.n()).done;){var g=h.value;t.edges[g].weight<i&&!t.edges[g].is_straight&&(r-=t.edges[g].weight,t.edges[g].weight=0)}}catch(k){p.e(k)}finally{p.f()}r=0;var y,x=Object(o["a"])(e.in_edges);try{for(x.s();!(y=x.n()).done;){var v=y.value;r+=t.edges[v].weight}}catch(k){x.e(k)}finally{x.f()}var m,w=0,b=Object(o["a"])(e.in_edges);try{for(b.s();!(m=b.n()).done;){var _=m.value;t.edges[_].x2=e.x,t.edges[_].y3=e.y+e.height*(w/r),w+=t.edges[_].weight,t.edges[_].y4=e.y+e.height*(w/r)}}catch(k){b.e(k)}finally{b.f()}}}));for(var r=0;r<e.length;++r)e[r].clusters.forEach((function(e){if(e.out_edges&&e.out_edges.length>0){for(var n=0;n<e.out_edges.length;++n){var r=e.out_edges[n];t.edges[r].x1=e.x+e.width,t.edges[r].y1=0==n?e.y:t.edges[e.out_edges[n-1]].y2,t.edges[r].y2=t.edges[r].y1+(t.edges[r].y4-t.edges[r].y3)}var a=e.out_edges[e.out_edges.length-1];if(t.edges[a].y2>e.y+e.height)for(var i=e.height/(t.edges[a].y2-e.y),o=0;o<e.out_edges.length;++o){var l=e.out_edges[o];t.edges[l].y1=(t.edges[l].y1-e.y)*i+e.y,t.edges[l].y2=(t.edges[l].y2-e.y)*i+e.y,t.edges[l].y4=(t.edges[l].y4-t.edges[l].y3)*i+t.edges[l].y3}}}));for(var a=0;a<e.length;++a)e[a].clusters.forEach((function(e){for(var n=0;n<e.in_edges.length;++n){var r=e.in_edges[n],a=t.edges[r].y4-t.edges[r].y3;t.edges[r].y3=0==n?e.y:t.edges[e.in_edges[n-1]].y4,t.edges[r].y4=t.edges[r].y3+a}}));for(var i=0;i<e.length;++i)e[i].clusters.forEach((function(e){var n=e.in_edges.length-1;if(!(n<0)){var r=e.in_edges[n];if(t.edges[r].y4<e.y+e.height){var a=e.y+e.height-t.edges[r].y4;a/=2;for(var i=0;i<e.in_edges.length;++i){var o=e.in_edges[i];t.edges[o].y3+=a,t.edges[o].y4+=a}}}})),e[i].clusters.forEach((function(e){var n=e.out_edges.length-1;if(!(n<0)){var r=e.out_edges[n];if(t.edges[r].y2<e.y+e.height){var a=e.y+e.height-t.edges[r].y2;a/=2;for(var i=0;i<e.out_edges.length;++i){var o=e.out_edges[i];t.edges[o].y1+=a,t.edges[o].y2+=a}}}}))}function j(t){return R.apply(this,arguments)}function R(){return R=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,o,l,s,c;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=u["x"]("#network-svg"),n.selectAll("*").remove(),r=n.selectAll("neuron-cluster").data(e.neuron_clusters).enter().append("g").attr("class","neuron-cluster").attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")})),a=null,i=function(t){var n=this;u["e"].pageX,u["e"].pageY;t.idxs&&(clearTimeout(a),a=setTimeout((function(){u["x"](n).style("stroke-width",2.5).style("fill-opacity",.3);"<p>".concat(t.idxs.length," samples in this cluster</p>\n      <p>The average prediction score is ").concat(Number(t.prediction_score).toFixed(4),"</p>"),e.highlightGrid(t.idxs)}),500))},o=function(t){clearTimeout(a),u["x"](this).style("stroke-width",1).style("fill-opacity",.2),t.idxs&&e.highlightGrid(null)},l=function(t){t.idxs&&(t.is_current_sample?(_.$emit("brush_grid",null),t.is_current_sample=0):(_.$emit("brush_grid",t.idxs),t.is_current_sample=1))},r.append("rect").attr("width",(function(t){return t.width+.5})).attr("height",(function(t){return t.height+.5})).style("fill",(function(t){return e.getWordFillColor(t)})).style("stroke",(function(t){return e.getWordFillColor(t)})).style("fill-opacity",(function(t){return.2})).style("stroke-width",1).style("stroke-opacity",.8).on("mouseover",i).on("mouseout",o).on("click",l),r.append("g").attr("class","wordcloud"),s=e.edges.filter((function(t){return t.y1&&t.y2&&t.y3&&t.y4&&t.y4!=t.y3&&t.y1!=t.y2})),console.log(s),n.selectAll(".cluster-edge").data(s.filter((function(t){return 1}))).enter().append("path").attr("class","cluster-edge").attr("d",(function(t){var e=(t.x1+t.x2)/2;return"M".concat(t.x1," ").concat((t.y1+t.y2)/2," C").concat(e," ").concat((t.y1+t.y2)/2," ").concat(e," ").concat((t.y3+t.y4)/2," ").concat(t.x2," ").concat((t.y3+t.y4)/2)})).style("stroke-width",(function(t){return t.y2-t.y1})).style("stroke","rgb(172,196,220)").style("opacity",.35).style("fill","none"),c=n.selectAll(".layer").data(e.current_layers).enter().append("g").attr("class","layer").attr("transform",(function(t){return"translate(".concat(t.x+t.width/2-80,",",30,")")})),c.append("text").attr("fill","#111").text((function(t){return 1==t.layer_id?"Input":t.layer_id>e.layers.length?"Prediction":"Layer ".concat(t.layer_id-1)})).style("font-size","18px").attr("text-anchor","middle");case 14:case"end":return t.stop()}}),t)}))),R.apply(this,arguments)}function z(t){var e=t.DAG.width+60,n=t.DAG.height-100,r=Object(l["a"])(new Set(t.neuron_clusters.map((function(t){return t.layer_id}))));r.sort((function(t,e){return t-e}));var a=r.length,i=r.map((function(t){return{layer_id:t,scale:(t.length?.5:1)/a}})),o=e/a*(1-t.config.network.node_scale),s=t.config.network.node_padding;t.neuron_clusters.forEach((function(t){t.width=0,t.height=0}));for(var c=function(r){i[r].width=e*i[r].scale,i[r].x=0==r?50:i[r-1].x+i[r-1].width,i[r].clusters=t.neuron_clusters.filter((function(t){return t.layer_id==i[r].layer_id}));var a=i[r].clusters.map((function(t){return t.size})).reduce((function(t,e){return t+e}),0),l=50,c=i[r].clusters.length,u=n-(c-1)*s;i[r].clusters.forEach((function(t){t.scale=1/i[r].clusters.length,t.height=Math.min(Math.max(3.5*s,u*t.size/a),u/2),t.show_cloud=!0,t.width=i[r].width-o,t.x=i[r].x}));for(var d=0;d<i[r].clusters.length;++d)i[r].clusters[d].y=0==d?50:i[r].clusters[d-1].y+i[r].clusters[d-1].height+s;if(i[r].clusters[c-1].y+i[r].clusters[c-1].height>n){var f=i[r].clusters.map((function(t){return t.height})).reduce((function(t,e){return t+e}),0);i[r].clusters.forEach((function(t){return t.height*=u/f}));for(var h=0;h<i[r].clusters.length;++h)i[r].clusters[h].y=0==h?l:i[r].clusters[h-1].y+i[r].clusters[h-1].height+s}else if(i[r].clusters[c-1].y+i[r].clusters[c-1].height<n)for(var p=(n-i[r].clusters[c-1].y-i[r].clusters[c-1].height)/2,g=0;g<i[r].clusters.length;++g)i[r].clusters[g].y+=p},u=0;u<i.length;++u)c(u);t.current_layers=i}function I(t){return W.apply(this,arguments)}function W(){return W=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,o,c,d,f;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:n=u["x"]("#network-svg"),r=[],a=regeneratorRuntime.mark((function t(n){var a,i,o,s,c,d,f,h,p,g;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(a=e.neuron_clusters[n],a.show_cloud){t.next=3;break}return t.abrupt("return","continue");case 3:if(i=0,o=u["u"]().exponent(1.5).domain([40,150]).range([21,27]),s=[16,Math.min(28,o(a.height))],c=[Math.min.apply(Math,Object(l["a"])(a.retained_keywords.map((function(t){return t[1]})))),Math.max.apply(Math,Object(l["a"])(a.retained_keywords.map((function(t){return t[1]}))))],c[0]==c[1]&&(s[0]=s[1]),d=k(s,a.retained_keywords.map((function(t){return t[1]})),4,[1,3,5]),f=a.retained_keywords.map((function(t){return{size:d(t[1]),text:t[0],type:1,opacity:.9,weight:(t[2],"bold"),fontstyle:"self"==t[2]?"normal":"italic",center:"self"==t[2]}})),f=f.sort((function(t,e){return t.center!=e.center?e.center-t.center:e.size-t.size})),12==a.layer_id&&(f=f.filter((function(t){return"enjoyment"!=t.text}))),h="#6D6761",1!=a.layer_id){t.next=20;break}p=f[0].text.split("$"),g=20,r.push({id:a.id,x:a.x+a.width/2,y:a.y+a.height/2+i,"font-size":"".concat(g+4,"px"),"font-weight":"bold","font-style":"normal",fill:h,opacity:.9,"text-anchor":"middle","font-family":"Roboto: sans-serif",text:p[0]}),r.push({id:a.id,x:a.x+a.width/2,y:a.y+a.height/2+g+i,"font-size":"".concat(g-2,"px"),"font-weight":"bold","font-style":"normal",fill:h,"text-anchor":"middle","font-family":"Roboto: sans-serif",opacity:.9,text:p[1]}),t.next=22;break;case 20:return t.next=22,y().size([a.width,a.height-i]).data(f).fontSize((function(t){return t.size})).font("Roboto").padding(6).flexible(1).fontWeight((function(t){return t.weight})).start((function(t){t=t.filter((function(t){return t.display})),r=r.concat(t.map((function(t){return{id:a.id,x:a.x+t.x,y:a.y+t.y+i,"font-size":"".concat(t.size,"px"),"font-weight":t.weight,"font-style":t.style,fill:h,"font-family":"Roboto: sans-serif","text-anchor":"start",opacity:t.opacity,text:t.text}})))}));case 22:case"end":return t.stop()}}),t)})),i=0;case 4:if(!(i<e.neuron_clusters.length)){t.next=12;break}return t.delegateYield(a(i),"t0",6);case 6:if(o=t.t0,"continue"!==o){t.next=9;break}return t.abrupt("continue",9);case 9:++i,t.next=4;break;case 12:c=null,d=function(t){clearTimeout(c),c=setTimeout((function(){var e=r.filter((function(e){return e.text==t.text})).map((function(t){return t.id}));e=new Set(e),n.selectAll(".word").filter((function(e){return e.text==t.text})).style("fill","#424242").style("opacity",1),n.selectAll(".cluster-edge").filter((function(t){return e.has(t.source)&&e.has(t.target)})).style("opacity",.6)}),250)},f=function(t){clearTimeout(c),n.selectAll(".word").style("fill",(function(t){return t["fill"]})).style("opacity",(function(t){return t["opacity"]}));var e=r.filter((function(e){return e.text==t.text})).map((function(t){return t.id}));e=new Set(e),n.selectAll(".cluster-edge").filter((function(t){return e.has(t.source)&&e.has(t.target)})).style("opacity",.35)},n.selectAll(".word").data(r).enter().append("text").attr("class","word").attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})).attr("font-size",(function(t){return t["font-size"]})).attr("font-weight",(function(t){return t["font-weight"]})).attr("font-style",(function(t){return t["font-style"]})).style("fill",(function(t){return t["fill"]})).style("font-family",(function(t){return t["font-family"]})).style("text-anchor",(function(t){return t["text-anchor"]})).style("opacity",(function(t){return t["opacity"]})).text((function(t){return t.text})).on("mouseover",d).on("mouseout",f).on("click",function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(n){var r;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:return t.next=2,e.fetchWordIndex(n.text);case 2:r=e.getWordIdxs(n.text),r.length>=8&&_.$emit("add_word_DAG",n.text);case 4:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}());case 16:case"end":return t.stop()}}),t)}))),W.apply(this,arguments)}var G=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("g",{staticClass:"word-group"},[t.hoverItem?n("g",{staticClass:"hover-item-parent"},[n("rect",{key:"new rect",staticClass:"word-hover-item",style:{fill:t.hoverItem.fill,opacity:.3,stroke:t.hoverItem.fill,"stroke-width":"1px"},attrs:{x:t.hoverItem.x,y:t.hoverItem.y-t.hoverItem.size+2,height:t.hoverItem.size,width:t.hoverItem.width}})]):t._e(),t._l(t.temp_items,(function(e,r){return n("g",{key:"tmp"+r,staticClass:"hover-item-parent",style:{opacity:t.hover_word&&e.text!=t.hover_word?.3:1}},[n("text",{staticClass:"word-hover-item",style:{fill:e.fill,stroke:e.stroke,"stroke-width":e.stroke_width},attrs:{x:e.x,y:e.y,dx:e.dx,dy:e.dy,"font-size":e.size,"font-style":e.style,"font-weight":e.weight}},[t._v(" "+t._s(e.text)+" ")])])})),n("transition-group",{attrs:{mode:"out-in",name:"word-list",tag:"g"}},["filter"==t.interaction?t._l(t.selected_items,(function(t){return n("rect",{key:t.key+"bg",staticClass:"word-list-item",style:{fill:t.fill,"fill-opacity":.15,stroke:t.fill,"stroke-width":"1px"},attrs:{x:t.x,y:t.y-t.size+2,height:t.size,width:t.width}})})):t._e(),t._l(t.items,(function(e){return n("g",{key:e.key,staticClass:"word-list-item",on:{mouseenter:function(n){return t.onMouseOver(e)},mouseout:function(n){return t.onMouseOut(e)},click:function(n){return t.onClick(e)},contextmenu:function(n){return n.preventDefault(),t.onRightClick(e)}}},[e.display?n("text",{class:{highlight:!t.highlight||-1!=t.highlight_text.indexOf(e.text)},style:{opacity:t.hover_word&&e.text!=t.hover_word?.3:1,fill:e.fill,stroke:e.stroke,"stroke-width":e.stroke_width},attrs:{x:e.x,y:e.y,dx:e.dx,dy:e.dy,"font-size":e.size,"font-style":e.style,"font-weight":e.weight}},[t._v(" "+t._s(e.text)+" ")]):t._e()])})),t._l(t.glyphed_items,(function(e){return n("g",{key:e.key+"glyph",attrs:{transform:"translate("+(e.x-5-(t.hover_word&&e.text==t.hover_word&&!e.glyph.show?10:0))+","+(e.y-e.size/2+5)+") rotate(-90)"}},[n("g",{style:{opacity:t.hover_word&&e.text!=t.hover_word?.3:1}},[n("path",{attrs:{d:e.glyph.neu,fill:t.neutralColor,stroke:"none"}}),n("path",{attrs:{d:e.glyph.pos,fill:t.positiveColor,stroke:"none"}}),n("path",{attrs:{d:e.glyph.neg,fill:t.negativeColor,stroke:"none"}})])])}))],2)],2)},E=[],D=function(t,e,n,r,a){var i=u["o"]();return i.arc(t,e,n,r,a),"M 0 0 L ".concat(n*Math.cos(r)," ").concat(n*Math.sin(r)," ").concat(i._," L 0 0")},N=function(t){return/^[a-zA-Z]+$/.test(t)},T=function(t){return N(t)&&t.length>1&&-1==t.indexOf("_")},L={data:function(){return{hoverItem:null,hoverEnterTime:500,glyphHeight:4,glyphRadius:7.5}},computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(d["e"])(["filtered_words","hover_word"])),Object(d["c"])(["positiveColor","checkWordIndex","negativeColor","neutralColor","getWordIdxs","getSamples"])),{},{items:function(){var t=this,e={},n=this.data.map((function(n){e[n.text]=(e[n.text]||0)+1;var r=n.contri&&n.contri.pos+n.contri.neg+n.contri.neu,a={show:n.glyph||0};if(n.contri){var i=n.contri.pos/r*Math.PI*2,o=n.contri.neg/r*Math.PI*2,l=(n.contri.neu,Math.PI,D(0,0,t.glyphRadius,0,i)),s=D(0,0,t.glyphRadius,i,i+o),c=D(0,0,t.glyphRadius,0,2*Math.PI);a={show:n.glyph,pos:l,neg:s,neu:c}}return{x:n.x,y:n.y,dx:(n.dx||0)+(n.glyph?5:0),dy:n.dy,display:n.display,glyph:a,size:n.size,width:n.width,height:n.height,weight:n.weight,style:n.style||"normal",text:n.text,key:"".concat(n.text).concat(n.layer,"_").concat(n.id),fill:n.fill,stroke:n.stroke,stroke_width:n.stroke_width}})).filter((function(t){return T(t.text)}));return n},temp_items:function(){var t=this;return this.items.filter((function(e){return!e.display&&e.text==t.hover_word}))},glyphed_items:function(){var t=this;return this.items.filter((function(e){return e.glyph.show||e.text==t.hover_word}))},selected_items:function(){var t=new Set(this.filtered_words);return this.items.filter((function(e){return t.has(e.text)}))}}),props:{data:Array,tooltip:{type:Boolean,default:!1},interaction:{type:String,default:"DAG"},highlight:{type:Boolean,default:!1},highlight_text:{type:String,default:""}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(d["b"])(["fetchWordIndex","changeFilteredWord"])),Object(d["d"])(["showTooltip","hideTooltip","addHoverTimer","removeHoverTimer","setHoverWord"])),{},{onHoverEvent:function(t,e,n){var r=this;return Object(s["a"])(regeneratorRuntime.mark((function a(){var i,o,l;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return r.hoverItem=t,r.setHoverWord(t.text),a.next=4,r.fetchWordIndex(t.text);case 4:if(r.hoverItem==t){a.next=6;break}return a.abrupt("return");case 6:return i=r.getWordIdxs(t.text),_.$emit("highlight_grid",i),o="<p>".concat(t.text,", ").concat(i.length," samples </p>"),a.next=11,r.getSamples(i);case 11:if(l=a.sent,r.hoverItem==t){a.next=14;break}return a.abrupt("return");case 14:a.prev=14,o+=l.slice(0,8).map((function(t,e){return"#".concat(t.index,": ").concat(t.text)})).join("</br>"),r.tooltip&&r.showTooltip({top:n,left:e,content:o}),a.next=22;break;case 19:return a.prev=19,a.t0=a["catch"](14),a.abrupt("return");case 22:case"end":return a.stop()}}),a,null,[[14,19]])})))()},onMouseOver:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=window.event.pageX,a=window.event.pageY,i=setTimeout((function(){e.onHoverEvent(t,r,a)}),e.hoverEnterTime),e.addHoverTimer(i);case 4:case"end":return n.stop()}}),n)})))()},onLeaveEvent:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:_.$emit("highlight_grid",null),e.setHoverWord(null),e.hoverItem=null,e.tooltip&&e.hideTooltip();case 4:case"end":return t.stop()}}),t)})))()},onMouseOut:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:e.removeHoverTimer(),e.onLeaveEvent(t);case 2:case"end":return n.stop()}}),n)})))()},onRightClick:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.fetchWordIndex(t.text);case 2:r=e.getWordIdxs(t.text),r.length>=8&&_.$emit("add_word_DAG",t.text);case 4:case"end":return n.stop()}}),n)})))()},onClick:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return n.next=2,e.fetchWordIndex(t.text);case 2:return n.next=4,e.changeFilteredWord(t.text);case 4:case"end":return n.stop()}}),n)})))()}})},B=L,P=(n("9cdc"),n("2877")),V=Object(P["a"])(B,G,E,!1,null,"29934476",null),F=V.exports,$=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{ref:"current_tooltip",staticClass:"custom-tooltip",style:{background:t.background,color:t.color,"font-size":t.fontsize+"px",width:t.width+"px",visibility:t.show?"visible":"hidden",opacity:t.show?1:0,left:t.fixed_left+"px",top:t.fixed_top+"px",transition:"all 1s"}})},H=[],q={data:function(){return{}},computed:{fixed_top:function(){var t=document.getElementsByTagName("body")[0].getBoundingClientRect(),e=t.height;return Math.min(e-this.width,this.top)},fixed_left:function(){var t=document.getElementsByTagName("body")[0].getBoundingClientRect(),e=t.width;return Math.min(e-this.width,this.left)}},props:{show:{type:Boolean,default:!1},left:{type:Number,default:0},top:{type:Number,default:0},content:{type:String,default:""},fontsize:{type:Number,default:18},width:{type:Number,default:250},background:{type:String,default:"rgba(250, 250, 250, .9)"},color:{type:String,default:"#222"}},watch:{content:function(t){this.$refs.current_tooltip.innerHTML=t}}},Y=q,X=(n("caadb"),Object(P["a"])(Y,$,H,!1,null,"ee1705e8",null)),J=X.exports,Q=(n("18a5"),n("3835"));function U(){var t,e=4;function n(n){var r,a=u["p"](t,(function(t){return t.x}),(function(t){return t.y})),i=Object(o["a"])(t);try{var l=function(){var t=r.value;a.visit((function(n,r,a,i,o){var l=!1;if(n.data&&n.data!==t){var s,c,u,d=t.x-n.data.x,f=t.y-n.data.y,h=e+(n.data.width+t.width)/2,p=e+(n.data.height+t.height)/2,g=Math.abs(d),y=Math.abs(f);g<h&&y<p&&(s=Math.sqrt(d*d+f*f),c=(g-h)/s,u=(y-p)/s,Math.abs(c)>Math.abs(u)?c=0:u=0,t.x-=d*=c,t.y-=f*=u,n.data.x+=d,n.data.y+=f,l=!0)}return l}))};for(i.s();!(r=i.n()).done;)l()}catch(s){i.e(s)}finally{i.f()}}return n.initialize=function(e){return t=e},n}var Z=0;function K(t){return tt.apply(this,arguments)}function tt(){return tt=Object(s["a"])(regeneratorRuntime.mark((function t(e){var n,r,a,i,c,d,f,h,p,g,y,x,v,m,w,b,_,k,C,M,O,A,S,j,R,z,I,W,G,E,D,N,T,L,B,P,V,F;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(F=function(){return F=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i,l,s,c,d,p,m,w,M,A,W,G,E,D,N,V,F,$,H,q,Y,X,J,Q,K,tt,et,nt,rt,at,it,ot,lt,st,ct,ut,dt,ft,ht,pt,gt,yt,xt,vt,mt,wt,bt,_t,kt,Ct,Mt;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(e=u["x"]("#network-svg"),e.selectAll("*").remove(),n=e.append("defs"),r=function(t){return/^[a-zA-Z]+$/.test(t)},a=e.append("g").attr("transform","translate(".concat(O.left,", ").concat(O.top,")")).attr("class","background"),i=a.append("g").attr("class","x axis").attr("transform","translate(0,"+(S-10)+")").call(u["b"](j).tickFormat((function(t){return 0==t?"Input":t}))),i.select(".domain").remove(),i.selectAll("text").attr("font-size","16px").style("font-family","Arial, san-serif"),i.selectAll("line").style("stroke","gray").style("stroke-width","2px"),l=x(h),s=v(l,h),c=1;c<l.length;++c)l[c].x==l[c-1].x&&(l[c].y3<l[c-1].y4&&(d=.5*(l[c].y3+l[c-1].y4),l[c].y3=d,l[c-1].y4=d),l[c].y1<l[c-1].y2&&(p=.5*(l[c].y1+l[c-1].y2),l[c].y1=p,l[c-1].y2=p));l=l.concat(s),l.forEach((function(t){t.path=B(j(t.x),j(t.x+1),t.y1,t.y2,t.y3,t.y4)})),m=a.append("g").attr("class","shade-group"),w=m.selectAll(".gray-shade").data(l.filter((function(t){return-1==t.fill.indexOf("neg")&&-1==t.fill.indexOf("pos")}))).enter().append("g").attr("class","gray-shade"),w.append("path").attr("d",(function(t){return t.path})).style("stroke","none").style("fill",(function(t){return t.fill})),M=m.selectAll(".colored-shade").data(l.filter((function(t){return-1!=t.fill.indexOf("neg")||-1!=t.fill.indexOf("pos")}))).enter().append("g").attr("class","colored-shade"),M.append("path").attr("d",(function(t){return t.path})).style("stroke","none").style("fill",(function(t){return t.fill})),A=a.append("g").attr("class","line-group"),A.selectAll(".line").data(h).enter().append("g").attr("class","line"),W=a.append("g").attr("class","glyph-group"),G=a.append("g").attr("class","label-group"),E=[],D=Object(o["a"])(h);try{for(D.s();!(N=D.n()).done;)V=N.value,E.push({anchor:"end",baseline:null,x0:0,y0:R(V.line[0].position)+5,fill:"rgb(27, 30, 35)",s1:V.text.slice(0,V.pos),s2:V.text.slice(V.pos,V.pos+V.len),s3:V.text.slice(V.pos+V.len)})}catch(Ot){D.e(Ot)}finally{D.f()}if(F=new Set([".","",","]),$=f.filter((function(t){return"phrase"==t.type&&t.layer<g})).filter((function(t){j(t.layer-1),j(t.layer);for(var e=0,n=t.top;n<t.bottom;++n)if(h[n].line[t.layer-1].label!=h[n+1].line[t.layer-1].label){e=n;break}return 0!=t.top&&h[e].line[t.layer].display&&h[e+1].line[t.layer].display})).filter((function(t){return!F.has(h[t.top].text)&&!F.has(h[t.bottom].text)})),H=f.filter((function(t){return"relation"==t.type})).filter((function(t){return t.layer<g})).filter((function(t){return h[t.top].line[t.layer-1].display&&h[t.bottom].line[t.layer].display})),H.forEach((function(t){return t.removed=!1})),H.forEach((function(t){"laudable"==h[t.top].text&&(t.layer-=1)})),12==g)for(q=0;q<H.length;++q)if(!H[q].removed)for(Y=H[q].top,X=H[q].bottom,J=q+1;J<H.length;++J)Q=H[J].top,K=H[J].bottom,(Y==Q&&X==K||Y==K&&X==Q)&&Math.abs(H[q].layer-H[J].layer)<=2&&(H[J].removed=!0);for(H=H.filter((function(t){return!t.removed})).slice(0,.7*y),tt=H.map((function(t){return{x:t.layer,y:t.bottom,left:h[t.bottom].line[t.layer-1].contri,right:h[t.bottom].line[t.layer].contri}})).filter((function(t){return t.x<g-2})),tt=tt.map((function(t){return{x:(j(t.x)+j(t.x-1))/2,y:(R(h[t.y].line[t.x].position)+R(h[t.y].line[t.x-1].position))/2,row:t.y,col:t.x,delta:Math.abs(t.left-t.right)*(t.left*t.right<0?2:1),left:t.left,right:t.right,removed:!1}})),tt=tt.filter((function(t){return L(t.left)!=L(t.right)})).sort((function(t,e){return e.delta-t.delta})).slice(0,5),et=0;et<tt.length;++et)if(!tt[et].removed)for(nt=et+1;nt<tt.length;++nt)Math.abs(tt[et].row-tt[nt].row)+Math.abs(tt[et].col-tt[nt].col)<=1&&(tt[nt].removed=!0);tt=tt.filter((function(t){return!t.removed})),tt.forEach((function(t){h[t.row].line[t.col-1].has_rseg=1})),rt=W.selectAll(".phrase").data($).enter().append("g").attr("class","phrase").style("display","none"),rt.append("path").attr("d",(function(t){for(var e=(3*j(t.layer-1)+j(t.layer))/4,n=0,r=t.top;r<t.bottom;++r)if(h[r].line[t.layer-1].label!=h[r+1].line[t.layer-1].label){n=r;break}if(!h[t.top].line[t.layer-1].display||!h[n+1].line[t.layer-1].display)return"";h[n].line[t.layer-1].has_rseg=1,h[n+1].line[t.layer-1].has_rseg=1;var a=R((h[n].line[t.layer-1].position+h[n+1].line[t.layer-1].position)/2),i=R(h[n].line[t.layer-1].position),o=R(h[n+1].line[t.layer-1].position);return"M".concat(e-20," ").concat(i," Q").concat(e-10," ").concat(a-2," ").concat(e," ").concat(a-2," M").concat(e-20," ").concat(o," Q").concat(e-10," ").concat(a+2," ").concat(e," ").concat(a+2)})).style("fill","none").style("stroke","rgb(27, 30, 35)").style("opacity",.6).style("stroke-width","2px"),rt.append("path").attr("transform",(function(t){for(var e=(3*j(t.layer-1)+j(t.layer))/4,n=0,r=t.top;r<t.bottom;++r)if(h[r].line[t.layer-1].label!=h[r+1].line[t.layer-1].label){n=r;break}if(!h[t.top].line[t.layer-1].display||!h[n+1].line[t.layer-1].display)return"";var a=R((h[n].line[t.layer-1].position+h[n+1].line[t.layer-1].position)/2);return"translate(".concat(e+3,",").concat(a,")")})).attr("d",(function(t){return"M".concat(6," ",0," L").concat(-3," ").concat(5.196," L").concat(-3," ").concat(-5.196," Z")})).style("fill","rgb(27, 30, 35)").style("stroke","none").style("opacity",.6).style("stroke-width","2px"),at=m.selectAll(".relation").data(H).enter().append("g").attr("class","relation"),at.append("path").attr("d",(function(t){var e=R(t.y1),n=R(t.y2);Z&&(2==t.top&&(t.top=6),3==t.top&&(t.top=4),6==t.top&&9==t.bottom&&(t.layer-=2),e=R(h[t.top].line[t.layer-1].position),n=R(h[t.bottom].line[t.layer].position));var r=j(t.layer-2),a=j(t.layer-1),i=j(t.layer),o=h[t.top].line[t.layer-1].contri,l=h[t.top].line[t.layer].contri,s=h[t.bottom].line[t.layer-1].contri,c=h[t.bottom].line[t.layer].contri,u=(T(o)+T(l))/4-.5,d=(T(s)+T(c))/4-.5,f=Math.min(u,d),p=(r+a)/2,g=(a+i)/2;Math.abs(R(h[t.top].line[t.layer-1].position)-R(h[t.top].line[t.layer-2].position))>12&&(p=a,e=R(h[t.top].line[t.layer-1].position)),Math.abs(R(h[t.bottom].line[t.layer-1].position)-R(h[t.bottom].line[t.layer].position))>12&&(g=i,n=R(h[t.bottom].line[t.layer].position)),u=Math.min(u,3*f),d=Math.min(d,3*f);var y=B(p,g,e-u,e+u,n-d,n+d,1);return y})).style("stroke-width",Z?2:.5).style("stroke",(function(t){var e=h[t.top].line[t.layer-2].contri,n=h[t.top].line[t.layer-1].contri,r=h[t.bottom].line[t.layer].contri;e=z(L(e)),n=z(L(n)),r=z(L(r));var a="url(#pattern-".concat(e,"-to-").concat(n,"-to-").concat(r,"-origin)");return a})).style("fill",(function(t){var e=h[t.top].line[t.layer-2].contri,n=h[t.top].line[t.layer-1].contri,r=h[t.bottom].line[t.layer].contri;e=z(L(e)),n=z(L(n)),r=z(L(r));var a="url(#pattern-".concat(e,"-to-").concat(n,"-to-").concat(r,"-origin)");return a})),it=W.selectAll(".represent").data(tt).enter().append("g").attr("class","represent").attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")})),Z?(it.append("rect").attr("x",-12).attr("y",(function(t){return-6.5})).attr("width",24).attr("height",(function(t){return 13})).attr("rx",2).attr("ry",2).style("stroke",(function(t){return L(t.right)})).style("stroke-width",1).style("fill",(function(t){return L(t.right)})),it.append("rect").attr("x",-12).attr("y",(function(t){return-6.5})).attr("width",12).attr("height",(function(t){return 13})).attr("rx",2).attr("ry",2).style("fill",(function(t){return L(t.left)}))):(it.append("rect").attr("x",-9).attr("y",(function(t){return-5})).attr("width",18).attr("height",(function(t){return 10})).attr("rx",2).attr("ry",2).style("stroke",(function(t){return L(t.right)})).style("stroke-width",1).style("fill",(function(t){return L(t.right)})),it.append("rect").attr("x",-9).attr("y",(function(t){return-5})).attr("width",9).attr("height",(function(t){return 10})).attr("rx",2).attr("ry",2).style("fill",(function(t){return L(t.left)}))),I(n),ot=[],h.forEach((function(t,e){for(var a=0;a+1<t.line.length;++a){t.line[a].has_shade=!1;var i=T(t.line[a].contri),o=T(t.line[a+1].contri);if(!t.line[a].display)break;t.line[a+1].display||(o=.5);var l=void 0,s=void 0,c=void 0,u=void 0;l=j(t.line[a].layer),s=j(t.line[a+1].layer),c=R(t.line[a].position)-.5*i,u=R(t.line[a+1].position)-.5*o;var d=n.append("linearGradient").attr("id","pattern-".concat(t.line[a].fill_id)).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");if(d.append("stop").attr("offset","0%").attr("stop-color",L(t.line[a].contri)),d.append("stop").attr("offset","100%").attr("stop-color",L(t.line[a+1].contri)),t.line[a].show_label&&r(t.text)){var f=k(t.text)[0],h=Math.min(c,u),p=Math.max(c+i,u+o),g=Math.max(l,(l+s)/2-f*(Z?"the"==t.text?.15:.45:.48)),y=Math.min(s,(l+s)/2+f*(Z?"the"==t.text?.15:.45:.48));n.append("clipPath").attr("id","clipping-".concat(t.line[a].fill_id)).append("path").attr("d","M".concat(l," ").concat(h," L").concat(l," ").concat(p," L").concat(g," ").concat(p," L").concat(g," ").concat(h," M").concat(y," ").concat(h," L").concat(y," ").concat(p," L").concat(s," ").concat(p," L").concat(s," ").concat(h))}ot.push({d:B(l,s,c,c+i,u,u+o),opacity:1,fill_id:t.line[a].fill_id,center:{x:(l+s)/2,y:(c+u)/2},baseline:t.line[a].show_label&&r(t.text)?[l,s,c,c+i,u,u+o]:null,label:t.line[a].show_label&&!t.line[a].has_rseg?{text:t.text,pos:t.pos,len:t.len}:null,x:a,y:e})}})),lt=A.selectAll(".segment").data(ot).enter().append("g").attr("class","segment"),lt.append("path").attr("d",(function(t){return t.d})).style("clip-path",(function(t){return t.label?"url(#clipping-".concat(t.fill_id,")"):"none"})).style("fill",(function(t){return"url(#pattern-".concat(t.fill_id,")")})).style("stroke","none").style("opacity",(function(t){return t.opacity})),st=0,ct=ot;case 52:if(!(st<ct.length)){t.next=60;break}if(ut=ct[st],null!=ut.baseline&&null!=ut.label){t.next=56;break}return t.abrupt("continue",57);case 56:E.push({anchor:"middle",x0:ut.center.x,y0:ut.center.y,fill:"rgb(27, 30, 35)",baseline:ut.baseline,s1:ut.label.text.slice(0,ut.label.pos),s2:ut.label.text.slice(ut.label.pos,ut.label.pos+ut.label.len),s3:ut.label.text.slice(ut.label.pos+ut.label.len)});case 57:st++,t.next=52;break;case 60:dt=Object(o["a"])(h);try{for(dt.s();!(ft=dt.n()).done;)ht=ft.value,E.push({anchor:"start",is_end:ht.end_point==ht.line.length-1?1:0,contri:Math.abs(ht.line[ht.end_point].contri),x0:j(ht.end_point)+8,y0:R(ht.line[ht.end_point].position)+3,baseline:null,fill:ht.end_point+1<ht.line.length?L(ht.line[ht.end_point].contri):"rgb(27, 30, 35)",s1:ht.text.slice(0,ht.pos),s2:ht.text.slice(ht.pos,ht.pos+ht.len),s3:ht.text.slice(ht.pos+ht.len)})}catch(Ot){dt.e(Ot)}finally{dt.f()}pt=G.selectAll(".end-label").data(h).enter().append("g").attr("class","end-label"),gt=pt.filter((function(t){return!t.line[g-1].display})),gt.append("circle").attr("cx",(function(t){return j(t.end_point)})).attr("cy",(function(t){return R(t.line[t.end_point].position)})).attr("r",3).style("fill",(function(t){return L(t.line[t.end_point].contri)})).style("stroke",(function(t){return L(t.line[t.end_point].contri)})).style("stroke-width",1.5),E.forEach((function(t){t.all_pieces=[[t.s1,.4],[t.s2,1],[t.s3,.4]].filter((function(t){return t[0].length>0})),t.pieces=[];var e,n="",r=Object(o["a"])(t.all_pieces);try{for(r.s();!(e=r.n()).done;){var a=e.value;if(a[0].length+n.length>C){var i=a[0].slice(0,C-n.length)+"...";t.pieces.push([i,a[1]]),n+=i;break}t.pieces.push(a),n+=a[0]}}catch(Ot){r.e(Ot)}finally{r.f()}var l=k(n);t.width=l[0],t.height=.7*l[1],"end"==t.anchor?(t.x0-=t.width,t.anchor="start"):"middle"==t.anchor&&(t.x0-=.5*t.width,t.y0+=t.height),t.x=t.x0,t.y=t.y0})),yt=E.filter((function(t){return t.is_end})).sort((function(t,e){return e.contri-t.contri})).slice(0,10),E=E.filter((function(t){return!t.is_end})),E=E.concat(yt),xt=u["g"](E).force("x",u["h"](0).strength(0)).force("y",u["i"](0).strength(0)).force("collide",U()),vt=0;case 71:if(!(vt<50)){t.next=77;break}return t.next=74,xt.tick();case 74:++vt,t.next=71;break;case 77:mt=a.selectAll(".label").data(E).enter().append("text").attr("class","label").attr("fill",(function(t){return t.fill})).attr("text-anchor",(function(t){return t.anchor})).style("font-size",b).style("font-family",_),wt=mt.filter((function(t){return t.baseline})),bt=mt.filter((function(t){return!t.baseline})),wt.append("defs").append("path").attr("id",(function(t,e){return"labelbaseline-".concat(e)})).attr("d",(function(t){var e=t.x-t.x0,n=t.y-t.y0,r=t.baseline;return P(r[0]+e,r[1]+e,r[2]+n,r[3]+n,r[4]+n,r[5]+n)})),_t=wt.append("textPath").attr("href",(function(t,e){return"#labelbaseline-".concat(e)})).attr("startOffset","50%"),_t.selectAll("tspan").data((function(t){return t.pieces})).enter().append("tspan").style("opacity",(function(t){return t[1]})).text((function(t){return t[0]})),kt=bt.attr("x",(function(t){return t.x})).attr("y",(function(t){return t.y})),kt.selectAll("tspan").data((function(t){return t.pieces})).enter().append("tspan").style("opacity",(function(t){return t[1]})).text((function(t){return t[0]})),u["x"]("body").selectAll(".svg-tooltip").remove(),Ct=u["x"]("body").append("div").attr("class","svg-tooltip").style("position","absolute").style("visibility","hidden"),Mt=function(t){Ct.selectAll("span").data(t.all_pieces).enter().append("span").text((function(t){return t[0]})),Ct.selectAll("span").data(t.all_pieces).style("opacity",(function(t){return t[1]})).text((function(t){return t[0]+" "})),Ct.selectAll("span").data(t.all_pieces).exit().remove()},wt.on("mouseover",(function(t){return Mt(t),Ct.style("visibility","visible")})).on("mousemove",(function(){return Ct.style("top",u["e"].pageY-10+"px").style("left",u["e"].pageX+10+"px")})).on("mouseout",(function(){return Ct.style("visibility","hidden")})),bt.on("mouseover",(function(t){return Mt(t),Ct.style("visibility","visible")})).on("mousemove",(function(){return Ct.style("top",u["e"].pageY-10+"px").style("left",u["e"].pageX+10+"px")})).on("mouseout",(function(){return Ct.style("visibility","hidden")}));case 90:case"end":return t.stop()}}),t)}))),F.apply(this,arguments)},V=function(){return F.apply(this,arguments)},a=e.positiveColor,i=e.neutralColor,c=e.negativeColor,d=e.layout,f=d.phrases,h=d.lines.map((function(t,e){var n={};n.text=t.text;for(var r=0,a=0,i=0;i<t.line.length;++i){var o=t.line[i];o.display&&(a=i),o.has_shade=!!o.has_shade,o.fill_id=t.line.length*e+i,i+1<t.line.length&&o.display?i>0&&t.line[i-1].show_label||i+2==t.line.length?o.show_label=0:o.show_label&&i-r>5&&(t.line[Math.floor((r+i)/2)].show_label=1):o.show_label=0,o.show_label&&(r=i)}return n.end_point=a,a+1<t.line.length&&(n.end_point+=1),a+=1,a-r>5&&(t.line[Math.floor((r+a)/2)].show_label=1),n.len=t.len,n.line=t.line,n})),p=0;p<h.length;++p)h[p].pos=0,""==h[p].text&&(h[p].text=h[p-1].text,h[p].pos=h[p-1].pos+h[p-1].len),console.log(h[p].text,h[p].line.map((function(t){return t.show_label}))),console.log(h[p].text,h[p].line.map((function(t){return t.display})));g=h[0].line.length,y=h.length,function(t,e,n){return-1!=t&&(!!h[e].line[t].display&&(!!h[n].line[t].display&&h[n].line[t].label==h[e].line[t].label))},x=function(t){for(var e=[],n=0;n+1<g;++n)for(var r=1,a=0;r<=y;++r)if(!(r<y&&t[r].line[n].label==t[r-1].line[n].label)){var i=r-1,o=function(e,n,r){while(e>n&&(0==r||!t[e].line[r-1].display))--e;while(e>n&&(0==r||!t[n].line[r-1].display))++n;for(var a=-1,i=n;i<=e;++i)if(t[i].line[r].display){1,a=i;break}return[e,n,a]},l=void 0,s=void 0,c=void 0,u=o(i,a,n),d=Object(Q["a"])(u,3);if(l=d[0],s=d[1],c=d[2],l-s>=1&&-1!=c){var f=T(t[s].line[n].contri),h=T(t[l].line[n].contri),p=R(t[s].line[n].position)-.5*f-8,x=R(t[l].line[n].position)+.5*h+8,v=void 0,m=void 0,w=o(i,a,n+1),b=Object(Q["a"])(w,3);v=b[0],m=b[1],b[2];var _=T(t[m].line[n+1].contri),k=T(t[v].line[n+1].contri),C=R(t[m].line[n+1].position),M=R(t[v].line[n+1].position);m!=v&&(C=C-.5*_-8,M=M+.5*k+8);for(var O=t[c].line[n+1].contri,A=t[c].line[n].contri,S=s;S<=l;++S)if(t[S].line[n].display){var j=t[S].line[n+1].contri;Math.abs(j)>Math.abs(O)&&(O=j),j=t[S].line[n].contri,Math.abs(j)>Math.abs(A)&&(A=j)}var I=L(O),W=L(A);W=z(W),I=z(I);var G="url(#pattern-".concat(W,"-to-").concat(I,")");e.push({y1:p,y2:x,y3:C,y4:M,top:s,bottom:l,c1:W,c2:I,fill:G,x:n,y:t[l].line[n].label})}a=r}return e},v=function(t,e){for(var n=[],r=0,a=0,i=0,o=0;o+2<g;++o){while(r<t.length&&t[r].x<o)++r;while(a<t.length&&t[a].x<o+1)++a;while(i<t.length&&t[i].x<o+2)++i;for(var l=new Set,s=r;s<a;++s)for(var c=t[s].top;c<=t[s].bottom;++c)l.add(c);if(r<a&&a<i){var u=r,d=a;while(u<a&&d<i)t[u].bottom<t[d].top?++u:(t[u].top>t[d].bottom||(t[u].c1==t[d].c2&&t[u].c2!=t[u].c1?(t[u].c2=t[d].c1=t[d].c2,t[u].fill="url(#pattern-".concat(t[u].c1,"-to-").concat(t[u].c2,")"),t[d].fill="url(#pattern-".concat(t[d].c1,"-to-").concat(t[d].c2,")")):t[u].c2!=t[d].c1&&(t[u].c2=t[d].c1,t[u].fill="url(#pattern-".concat(t[u].c1,"-to-").concat(t[u].c2,")")),(t[u].top>t[d].top||t[u].top<t[d].top)&&(t[u].y3=t[d].y1),++u),++d);u=a-1,d=i-1;while(u>=r&&d>=a)t[u].bottom<t[d].top?--d:t[u].top>t[d].bottom?--u:(t[u].c2!=t[d].c1&&(t[u].c2=t[d].c1,t[u].fill="url(#pattern-".concat(t[u].c1,"-to-").concat(t[u].c2,")")),(t[u].bottom>t[d].bottom||t[u].bottom<t[d].bottom)&&(t[u].y4=t[d].y2),--u,--d)}for(var f=a;f<i;++f){for(var h=1,p=t[f].top;p<=t[f].bottom;++p)if(l.has(p)){h=0;break}if(h){var y=t[f].y1,x=t[f].y2,v=t[f].c1,m=R(.5*(e[t[f].bottom].line[o].position+e[t[f].bottom].line[o].position)),w=e[t[f].top].line[o].contri,b=z(L(w)),_="url(#pattern-".concat(b,"-to-").concat(v,")");n.push({y1:m,y2:m,y3:y,y4:x,top:t[f].top,bottom:t[f].bottom,fill:_,x:t[f].x-1,y:t[f].label})}}}return n},m=document.createElement("canvas"),w=m.getContext("2d"),b=Z?"32px":"20px",_="Roboto, san-serif",w.font=b+" "+_,k=function(t){var e=w.measureText(t),n=e.actualBoundingBoxRight+e.actualBoundingBoxLeft,r=e.actualBoundingBoxAscent+1;return[n,r]},C=16,M=Math.max.apply(Math,Object(l["a"])(h.map((function(t){return k(t.text.slice(0,C))[0]})))),O={top:20,right:10+M,bottom:20,left:20+M},A=e.DAG.width-O.left-O.right,S=e.DAG.height-O.top-O.bottom,h.forEach((function(t,e){for(var n=1;n<t.line.length;++n)Z&&(t.line[n].display=1,e<=6&&(t.line[n].position+=.06,t.line[n].position=Math.min(t.line[n].position,t.line[n-1].position)),1==e&&3==n&&(t.line[n].position-=.02),1==e&&4==n&&(t.line[n].position+=.06),3==e&&2==n&&(t.line[n].position-=.02),3==e&&n>=3&&(t.line[n].position=t.line[n-1].position),9==e&&n>=3&&(t.line[n].position=t.line[10].position),e>6&&n>=6&&(t.line[n].label+=1),("the"==t.text||"a"==t.text)&&n>8&&(t.line[n].display=0,t.end_point=9),"was"==t.text&&n>9&&(t.line[n].display=0,t.end_point=10),"'"==t.text&&n>7&&(t.line[n].display=0,t.end_point=8),"the"==t.text&&4==n&&(t.line[n].position-=.12),"the"==t.text&&n>=4&&n<=9&&(t.line[n].label+=1),"good"==t.text&&n<6?t.line[n].contri=-Math.abs(t.line[n].contri):t.line[n].contri=Math.abs(t.line[n].contri),"good"==t.text&&6==n&&(t.line[n].contri=Math.abs(t.line[n+1].contri)),"good"==t.text&&(t.line[n].contri*=1.2),"n"==t.text&&(t.line[n].contri=1.2*Math.abs(h[8].line[n].contri)),"a"==t.text&&n<=5&&(t.line[n].label=-1)),"laughs"==t.text&&(t.line[n].contri*=.8),"been"==t.text&&4==t.line.length&&(t.line[n].contri=Math.abs(t.line[n].contri));console.log(t.text,t.line.map((function(t){return t.position})))})),j=u["t"]().domain(h[0].line.map((function(t){return t.layer}))).rangeRound([0,A]),R=u["r"]().domain([1,0]).range([10,S]),z=function(t){return t==a?"pos":t==c?"neg":t==i?"neu":"unknown"},I=function(t){for(var e=[[a,z(a)],[c,z(c)],["#BBDEFB","neu"]],n=[[a,z(a)],[c,z(c)],["gray","neu"]],r=0,i=e;r<i.length;r++){var l,s=i[r],d=Object(o["a"])(e);try{for(d.s();!(l=d.n()).done;){var f=l.value,h=t.append("linearGradient").attr("id","pattern-".concat(s[1],"-to-").concat(f[1])).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");h.append("stop").attr("offset","0%").attr("stop-color",u["k"]("white",s[0])(.2)),h.append("stop").attr("offset","100%").attr("stop-color",u["k"]("white",f[0])(.2))}}catch(C){d.e(C)}finally{d.f()}}for(var p=0,g=n;p<g.length;p++){var y,x=g[p],v=Object(o["a"])(n);try{for(v.s();!(y=v.n()).done;){var m,w=y.value,b=Object(o["a"])(n);try{for(b.s();!(m=b.n()).done;){var _=m.value,k=t.append("linearGradient").attr("id","pattern-".concat(x[1],"-to-").concat(w[1],"-to-").concat(_[1],"-origin")).attr("x1","0%").attr("y1","0%").attr("x2","100%").attr("y2","0%");k.append("stop").attr("offset","0%").attr("stop-color",u["k"]("white",x[0])(1)),k.append("stop").attr("offset","50%").attr("stop-color",u["k"]("white",w[0])(1)),k.append("stop").attr("offset","100%").attr("stop-color",u["k"]("white",_[0])(1))}}catch(C){b.e(C)}finally{b.f()}}}catch(C){v.e(C)}finally{v.f()}}},W=(n=[]).concat.apply(n,Object(l["a"])(d.lines.map((function(t){return t.line.map((function(t){return Math.abs(t.contri)}))})))).sort((function(t,e){return t-e})),G=W[~~(.6*W.length)],E=W[W.length-1],h.forEach((function(t){for(var e=1;e<t.line.length-1;++e){var n=t.line[e-1].contri,r=t.line[e+1].contri;Math.abs(n)<G&&Math.abs(r)<G&&n*r>0&&(t.line[e].contri=.5*(n+r))}})),D=(r=[]).concat.apply(r,Object(l["a"])(d.lines.map((function(t){return t.line.filter((function(t){return t.display})).map((function(t){return Math.abs(t.contri)}))})))).sort((function(t,e){return t-e})),N=D[~~(.66*D.length)],T=function(){var t=N,e=E,n=u["r"]().range([.8,1,12]).domain([0,t,e]);return Z&&(n=u["r"]().range([1.2,1.5,12]).domain([0,t,e])),function(t){return t=Math.abs(t),n(t)}}(),L=function(){var t=G,e=-t,n=t;return function(t){return t<=e?a:t>=n?c:i}}(),B=function(t,e,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,l=t+.5*(e-t),s=t+.5*(e-t),c=t+.15*(e-t),u=t+.85*(e-t);return(o||Math.abs(i-r)<40)&&(c=t,u=e,l=t+.5*(e-t),s=t+.5*(e-t)),"M".concat(t," ").concat(n,"L").concat(t," ").concat(r," L").concat(c," ").concat(r," C").concat(l," ").concat(r," ").concat(s," ").concat(i," ").concat(u," ").concat(i," L").concat(e," ").concat(i," L").concat(e," ").concat(a," L").concat(u," ").concat(a," C").concat(s," ").concat(a," ").concat(l," ").concat(n," ").concat(c," ").concat(n," z")},P=function(t,e,n,r,a,i){var o=arguments.length>6&&void 0!==arguments[6]?arguments[6]:.4,l=arguments.length>7&&void 0!==arguments[7]?arguments[7]:.6,s=t+(e-t)*o,c=t+(e-t)*l;if(n=r+8,r=i+8,Math.abs(n-r)<12){var u=(n+r)/2;n=r=u}return"M".concat(t-50," ").concat(n," L ").concat(t," ").concat(n,"C").concat(s," ").concat(n," ").concat(c," ").concat(r," ").concat(e," ").concat(r," L ").concat(e+50," ").concat(r)},V();case 42:case"end":return t.stop()}}),t)}))),tt.apply(this,arguments)}var et=K,nt=function(t){return/^[a-zA-Z]+$/.test(t)},rt={name:"App",computed:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(d["e"])(["DAG","linechart","bubble","showed_layers","config","labels","color_scheme","neuron_clusters","all_samples","selected_class","treemap","current_node","current_layers","edges","layers","sentenceclusters","scatterplot","current_viewtype","layout","tooltip","server_url","filter_info","matrix"])),Object(d["c"])(["getSamples","getWordIdxs","view_samples","selected_label","fontSizeRange","getSample","positiveColor","negativeColor","neutralColor","neutralColorGray","getLabelColor"])),{},{word_attrs:function(){return{frequency:this.frequency_weight/10,uncertainty:this.uncertainty_weight/10,entropy:this.entropy_weight/10}}}),components:{WordGroup:F,InfoTooltip:J},data:function(){return{datasets:["SST-2"],models:["BERT 12-Layer"],chips:[],is_lasso_select_all:!0,enable_word_filter:!1,left_top_view:"matrix",is_wordview_init:!1,right_bottom_view:"info_flow",left_bottom_view:"samples",right_top_view:"word",enable_word_attr:!1,enable_tooltip:!1,show_trending_up:!1,show_trending_down:!1,trending_down_lines:[],trending_up_lines:[],trending_down_underlines:[],trending_up_underlines:[],enable_word_highlight:!1,dataset_name:"",n_layer:0,sentences:null,current_text:"",frequency_weight:10,uncertainty_weight:10,entropy_weight:10,infolossWords:[],overviewWords:[],selectedSentence:null,current_items:[],current:{items:[],keywords:[]},currentGrids:null,currentGridsData:null,selectedGrids:null,lasso:null,listOrderKey:"p score",listOrder:1,word_cache:{},total_accuracy:100,search_expand:!1,is_refreshing:!1,lastInfoFlow:null,lastWordContext:null,labelColor:["#d7191c","#1a9641","#1f77b4","#ff7f0e"]}},methods:Object(c["a"])(Object(c["a"])(Object(c["a"])({},Object(d["d"])(["calcDAG","updatePosition","setViewtype","setLayers","setNetwork","setScatterplot","calcEdges","showTooltip","hideTooltip","addHoverTimer","removeHoverTimer","setHoverWord"])),Object(d["b"])(["changeCurrentSamples","fetchAllSample","fetchLayerInfo","fetchWordIndex","changeFilteredWord"])),{},{rightClickSearchItem:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!isNaN(+t)){n.next=7;break}return n.next=3,e.fetchWordIndex(t);case 3:r=e.getWordIdxs(t),r.length>=8&&_.$emit("add_word_DAG",t),n.next=7;break;case 7:case"end":return n.stop()}}),n)})))()},changeRightBottomView:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("word_ctx"!=t.right_bottom_view){e.next=6;break}return t.right_bottom_view="info_flow",e.next=4,t.addSentenceDAG(t.lastInfoFlow);case 4:e.next=9;break;case 6:return t.right_bottom_view="word_ctx",e.next=9,t.addWordDAG(t.lastWordContext);case 9:case"end":return e.stop()}}),e)})))()},clickSearchItem:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(!isNaN(+t)){n.next=7;break}return n.next=3,e.fetchWordIndex(t);case 3:return n.next=5,e.changeFilteredWord(t);case 5:n.next=10;break;case 7:return 145==+t&&(t-=10),n.next=10,e.addSentenceDAG(+t);case 10:case"end":return n.stop()}}),n)})))()},removeSearchItem:function(){this.chips.splice(this.chips.indexOf(item),1),this.chips=Object(l["a"])(this.chips)},onClickSearch:function(){0==this.search_expand?this.search_expand=!0:this.search_expand=!1},wordInteraction:function(t){var e=null,n=this;return t.on("click",function(){var t=Object(s["a"])(regeneratorRuntime.mark((function t(e){var r,a;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:r=n.word_cache[e.text],a=r.data.idxs,a.length>=10&&n.addWordDAG(e.text);case 3:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}()).on("mouseover",(function(t){if(nt(t.text)&&!(t.text.length<=1)&&-1==t.text.indexOf("_")){e=t.text;var r=u["e"].pageX+10,a=u["e"].pageY-10,i=function(){var i=Object(s["a"])(regeneratorRuntime.mark((function i(){var o,l,s,c,u;return regeneratorRuntime.wrap((function(i){while(1)switch(i.prev=i.next){case 0:if(o=null,!n.word_cache[t.text]){i.next=5;break}o=n.word_cache[t.text],i.next=9;break;case 5:return i.next=7,p.a.post("".concat(n.server_url,"/api/word"),{word:t.text});case 7:o=i.sent,n.word_cache[t.text]=o;case 9:for(l=o.data.idxs,s=o.data.info,c=1;c<s.length;++c)s[c]=Math.min(s[c-1],s[c]);return n.highlightGrid(l),u="<p>".concat(t.text,", ").concat(l.length," samples </p>"),i.next=16,n.getSamples(l);case 16:o=i.sent,u+=o.slice(0,8).map((function(t,e){return"#".concat(e+1,": ").concat(t.text)})).join("</br>"),e==t.text&&n.showTooltip({top:a,left:r,content:u});case 19:case"end":return i.stop()}}),i)})));return function(){return i.apply(this,arguments)}}();setTimeout((function(){e==t.text&&i()}),500)}})).on("mouseout",(function(t){e=null,n.hideTooltip(),n.highlightGrid(null)}))},brushGrid:function(t){t&&0!=t.length?(t=new Set(t),this.currentGrids.style("opacity",(function(e){for(var n=0;n<e.length;++n)if(t.has(e[n].index))return 1;return.4}))):(this.currentGrids.style("opacity",1),t=[]),this.changeCurrentSamples(Object(l["a"])(t))},getWordFillColor:function(t){var e=this.getWordColor(t);return e==this.neutralColorGray?"rgb(172, 196, 220)":e},getWordColor:function(t){return M(this,t)},highlightGrid:function(t){if(t&&0!=t.length){t=new Set(t);var e=this.currentGrids.filter((function(e){for(var n=0;n<e.length;++n)if(t.has(e[n].index))return!0;return!1})),n=this.currentGrids.filter((function(e){for(var n=0;n<e.length;++n)if(t.has(e[n].index))return!1;return!0}));n.select("path.hexagon").style("stroke","white").style("stroke-width",.5).style("opacity",.5),e.select("path.hexagon").style("stroke","orange").style("stroke-width",1).style("opacity",1)}else t=new Set,this.currentGrids.select("path.hexagon").style("stroke","white").style("stroke-width",.5).style("opacity",1)},svgResize:function(){var t=document.getElementById("network-svg").parentElement.getBoundingClientRect(),e=document.getElementById("overview-svg").parentElement.getBoundingClientRect(),n=document.getElementById("linechart-svg").parentElement.getBoundingClientRect();t.width-=8,e.width-=8,n.width-=8,t.height-=8,e.height-=38,n.height-=32,u["x"]("#network-svg").attr("width",t.width).attr("height",t.height),u["x"]("#overview-svg").attr("width",e.width).attr("height",e.height),u["x"]("#linechart-svg").attr("width",n.width).attr("height",n.height),this.updatePosition({network:t,bubble:e,linechart:n});u["x"]("#linechart-g").attr("transform","translate(".concat(this.linechart.x,",").concat(this.linechart.y,")"))},paintWordcloud:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,I(t);case 2:case"end":return e.stop()}}),e)})))()},paintMatrix:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,o,l,s,c,d,f,h,p,g,y,x,v,m,w,b,_,k;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:k=function(t){var e=u["x"](this).selectAll(".cell").data(t).enter().append("g").attr("class","cell").attr("transform",(function(t){return"translate(".concat(x(t.target),", 0)")}));e.append("rect").attr("width",x.bandwidth()).attr("height",x.bandwidth()).style("fill-opacity",1).style("stroke","lightgray").style("stroke-width",0).style("fill",(function(t){return m(t)})),e.append("text").attr("x",x.bandwidth()/2).attr("y",x.bandwidth()/2+7).style("text-anchor","middle").style("font-size","18px").style("font-weight",500).style("fill",(function(t){return t.val>.9?"white":"black"})).text((function(t){return Number(t.val).toFixed(3)})),e.on("mouseover",(function(t){u["y"](".cell").style("opacity","0.1"),u["y"](".cell").filter((function(e){return(e.source==t.source||e.source==t.target)&&(e.target==t.source||e.target==t.target)})).style("opacity","1").append("rect").attr("class","hovered").attr("width",x.bandwidth()).attr("height",x.bandwidth()).style("fill","none").style("stroke","gray").style("stroke-width",1.5),b.filter((function(e){return e[0].source===t.source})).style("fill","#000").style("font-weight","bold"),_.filter((function(e){return e[0].source===t.target})).style("fill","#000").style("font-weight","bold")})).on("mouseout",(function(){u["y"](".cell").style("opacity","1"),u["y"](".cell").select(".hovered").remove(),b.style("fill",null).style("font-weight",null),_.style("fill",null).style("font-weight",null)})).on("click",(function(){setTimeout((function(){n.left_top_view="corpus",n.is_wordview_init=1}),500)})),e.append("title").text((function(t){return t.val}))},m=function(t){var e=t.val;return t.source,t.target,h(+e)},n=t,r=u["x"]("#matrix-g").attr("class","matrixdiagram"),a={left:120,top:150,right:10,bottom:10},i=50,o=t.bubble.width,l=t.bubble.height,s=t.matrix,c=s.data.map((function(t){return t.reduce((function(t,e){return t+e}))})),d=s.labels,f=d.map((function(t,e){return d.map((function(n,r){return{source:t,target:n,val:s.data[e][r]/c[e]}}))})),h=u["v"]((function(t){return u["j"]("white","gray")(t)})),p=u["v"]((function(t){return u["j"]("white","gray")(t)})),p.domain([0,u["m"](f.flat().filter((function(t){return t.source!=t.target})).map((function(t){return Number(t.val)})))]),h.domain([0,u["m"](f.flat().filter((function(t){return t.source==t.target})).map((function(t){return Number(t.val)})))]),g=o-a.left-a.right,y=l-a.top-a.bottom,g=y=Math.min(g,y)-i,x=u["q"]().rangeRound([0,g]).paddingInner(0).align(0).domain(d),v=r.append("g").attr("transform","translate("+a.left+","+a.top+")"),v.append("text").attr("x",g/2).attr("y",-41).style("text-anchor","middle").text("Predicted Class"),v.append("text").attr("x",-g/2).attr("y",-100).attr("transform","rotate(270)").style("text-anchor","middle").text("Ground Truth"),w=v.selectAll("g.row").data(f).enter().append("g").attr("transform",(function(t){return"translate(10,".concat(x(t[0].source),")")})).each(k),b=w.append("text").attr("class","label").attr("x",-4).attr("y",x.bandwidth()/2).attr("dy","0.32em").attr("text-anchor","end").text((function(t){return t[0].source})),_=v.selectAll("g.column").data(f).enter().append("text").attr("class","column label").attr("transform",(function(t){return"translate(".concat(x(t[0].source),",").concat(-x.bandwidth()/2-10,")")})).attr("x",4).attr("y",x.bandwidth()/2).attr("dy","0.32em").attr("dx","0.32em").text((function(t){return t[0].source}));case 26:case"end":return e.stop()}}),e)})))()},paintScatterplot:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i,c,d,h,p,g,x,v,m,b,M,O,A,S,j,R,z,I,W,G,E,D,N,T,L,B,P;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:for(P=function(){return P=Object(s["a"])(regeneratorRuntime.mark((function t(){var e,n,r,a,i,o,s,c,b,M,O,A,G,E,D,P,V,F,$,H,q,Y,X,J,Q,U,Z,K,tt,et,nt,rt,at,it,ot,lt,st,ct,ut;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:for(at=function(t,n){var r=A.filter((function(e){return e&&e.y>=t&&e.y<n}));if(r=r.sort((function(t,e){return t.x-e.x})),0!=r.length)for(var a=r[0].x,i=1;i<=r.length;++i)if(!(i!=r.length&&r[i].x-r[i-1].x<=30*z)){var o=r[i-1].x+z;o+10*z>e&&(o=e),rt.push({x0:a-z-5,x1:o+5,y0:t-5,y1:n+5}),i!=r.length&&(a=r[i].x)}},e=d-(v+h/S),n=T(h,W),r=[10,e],a=u["r"](I,n),i=u["r"](R,r),o=u["c"](a).tickValues(I).tickFormat((function(t){return Number(t).toFixed(2)})),s=[h/S*.15,h/S*.4],c=u["w"](u["f"](W,(function(t){return t.counts[0]+t.counts[1]})),s),b=Object(f["a"])().radius(z).x((function(t){return t.x})).y((function(t){return t.y})),M=p.scatters.map((function(t,e){return{x:i(t.y),y:a(t.x),is_correct:t.is_correct,pred:t.pred,label:t.label,index:t.id}})),O=b(M),O.forEach((function(t,e){t.count=0,t.error=0,t.length>=1?t[0].pred==g.selected_label[0]?(t.color=g.positiveColor,t.error_color=g.negativeColor):(t.color=g.negativeColor,t.error_color=g.positiveColor):t.color="gray";for(var n=0;n<t.length;++n)t[n].is_correct?t.count+=1:t.error+=1})),A=O,g.currentGridsData=A,G=[0,1,Math.max.apply(Math,Object(l["a"])(O.map((function(t){return t.count}))))],E=u["r"](G,[0,.3,.8]),D=[0,1,Math.max.apply(Math,Object(l["a"])(O.map((function(t){return t.error||0}))))],P=u["r"](D,[0,.5,.8]),V=0,F=0,W.forEach((function(t,e){t.height=a(t.left)-a(t.right),t.r=c(t.counts[0]+t.counts[1]);var n=2*e+2<=S?t.counts[0]:t.counts[1];t.acc=Number(n/(t.counts[0]+t.counts[1])*100).toFixed(2),V+=n,F+=t.counts[0]+t.counts[1],console.log(e,n,t.counts[0]+t.counts[1],Number(n/(t.counts[0]+t.counts[1])*100).toFixed(2))})),g.total_accuracy=Number(V/F*100).toFixed(2),$=u["a"]().startAngle((function(t){return-t.p*Math.PI})).endAngle((function(t){return t.p*Math.PI})).innerRadius((function(t){return 0})).outerRadius((function(t){return c(t.counts[0]+t.counts[1])})),m.selectAll(".strip").data(W).join((function(t){var e=t.append("g").attr("class","strip").attr("transform",(function(t){return"translate(0, ".concat(a(t.right),")")}));e.append("rect").attr("width",d).attr("height",(function(t){return t.height})).attr("fill",(function(t,e){return W[e].is_top?g.negativeColor:g.positiveColor})).style("stroke","white").style("stroke-width",1).style("stroke-opacity",(function(t,e){var n=2*N(W[e].is_top?t.counts[0]:t.counts[1]);return n>.25?0:n})).style("fill-opacity",(function(t,e){return N(W[e].is_top?t.counts[0]:t.counts[1])})).on("dblclick",(function(t,e){null==j?(t.weight=5,j=t):j.index==e?(t.weight=1,j=null):null!=j&&(j.weight=1,t.weight=5,j=t),B()}));var n=e.filter((function(t){return t.counts[0]+t.counts[1]>0})).append("g").attr("class","percentage").attr("transform",(function(t,e){return"translate(".concat(d-v-8,", ").concat(t.height/2,")")}));return n.append("circle").attr("r",(function(t){return t.r})).attr("fill",(function(t,e){return t.counts[0]>=t.counts[1]?g.negativeColor:g.positiveColor})).style("opacity",1).on("click",(function(t){var e=p.scatters.filter((function(e){return e.x>=t.left&&e.x<t.right&&!e.is_correct})).map((function(t){return t.id}));_.$emit("brush_grid",e)})),n.append("path").attr("d",$).attr("fill",(function(t,e){return t.counts[0]<t.counts[1]?g.negativeColor:g.positiveColor})).style("opacity",1).on("click",(function(t){var e=p.scatters.filter((function(e){return e.x>=t.left&&e.x<t.right&&!e.is_correct})).map((function(t){return t.id}));_.$emit("brush_grid",e)})),e}),(function(t){t.transition().duration(x).attr("transform",(function(t){return"translate(0, ".concat(a(t.right),")")})),t.select("rect").transition().duration(x).attr("height",(function(t){return t.height})),t.filter((function(t){return t.counts[0]+t.counts[1]>0})).select("g.percentage").transition().duration(x).attr("transform",(function(t,e){return"translate(".concat(d-v-8,", ").concat(t.height/2,")")}))})),m.selectAll(".grid").data(A,(function(t){return Math.floor(t.y)*~~e+Math.floor(t.x)})).join((function(t){var e=t.append("g").attr("class","grid").style("opacity",0);e.append("path").attr("class","hexagon").attr("d",(function(t){return"M ".concat(t.x," ").concat(t.y," ").concat(b.hexagon())})).style("stroke",(function(t){return 0==t.count?"none":"white"})).style("stroke-width",1).style("fill",(function(t){return t.color})).style("fill-opacity",(function(t){return E(t.count)})),e.append("path").attr("class","cross").attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")})).attr("d","M -3 -3 L 3 3 M 3 -3 L -3 3").style("stroke",(function(t){return t.error_color})).style("stroke-width",2.5).style("opacity",(function(t){return P(t.error)}));e.on("mouseover",(function(t){t,u["x"](this).append("path").attr("class","hexagon_outline").attr("d",(function(t){return"M ".concat(t.x," ").concat(t.y," ").concat(b.hexagon())})).style("stroke","orange").style("stroke-width",2).style("fill","none")})).on("mouseout",(function(t){null,u["x"](this).select("path.hexagon_outline").remove()})).on("click",(function(t){var e=t.map((function(t){return t.index})),n=new Set(e);n.has(145)?g.addSentenceDAG(145):n.has(1733)?g.addSentenceDAG(1733):g.addSentenceDAG(e[0]),g.refreshSelection(e)})),e.transition().duration(x).style("opacity",1)}),(function(t){t.select("path.hexagon").transition().duration(x).attr("d",(function(t){return"M ".concat(t.x," ").concat(t.y," ").concat(b.hexagon())})).style("fill",(function(t){return t.color})).style("fill-opacity",(function(t){return E(t.count)})),t.select("path.cross").transition().duration(x).attr("transform",(function(t){return"translate(".concat(t.x,",").concat(t.y,")")})).style("stroke",(function(t){return t.error_color})).style("opacity",(function(t){return t.error?.7:0}))}),(function(t){t.transition().duration(x).style("opacity",0).remove()})),H=m.selectAll(".grid"),g.currentGrids=H,q=function(){},Y=0,X=function(){new Date-Y<=100||(Y=new Date,Q.possibleItems().style("opacity",1),Q.possibleItems().nodes().length>0?Q.notPossibleItems().style("opacity",.4):Q.notPossibleItems().style("opacity",1))},J=function(){setTimeout((function(){var t;if(!g.is_refreshing){Q.selectedItems().nodes().length>0?Q.notSelectedItems().style("stroke",.4):Q.notSelectedItems().style("stroke",1),Q.selectedItems().style("opacity",1);var e=Q.selectedItems().data(),n=(t=[]).concat.apply(t,Object(l["a"])(e.map((function(t){return t.map((function(t){return t.index}))}))));console.log("self.is_lasso_select_all",g.is_lasso_select_all),g.is_lasso_select_all||(n=n.filter((function(t){return g.all_samples[t].wrong}))),g.refreshSelection(n,e)}}),100)},Q=w().closePathDistance(305).closePathSelect(!0).targetArea(m).items(H).on("start",q).on("draw",X).on("end",J),g.lasso=Q,m.select("g.grid-lasso").remove(),m.append("g").attr("class","grid-lasso").call(Q),m.select("g.x-axis").remove(),U=m.append("g").attr("class","x-axis").attr("transform","translate(".concat(0,",",0,")")).call(o),U.select(".domain").remove(),U.selectAll("text").attr("font-size","16px").style("font-family","Roboto, san-serif"),Z=p.keywords,C(Z,g,-1),window.keywords=Z,Z=JSON.parse(JSON.stringify(Z)),u["f"](Z,(function(t){return t.value})),K=Z.filter((function(t){return g.getWordColor(t)==g.negativeColor})).sort((function(t,e){return e.value-t.value})),tt=Z.filter((function(t){return g.getWordColor(t)==g.positiveColor})).sort((function(t,e){return e.value-t.value})),et=0;et<tt.length&&et<K.length;++et)K[et].value<tt[et].value?K[et].value=tt[et].value-.001:tt[et].value=K[et].value-.001;for(Z=Z.sort((function(t,e){return e.value-t.value})),nt=4==g.n_layer?k(g.fontSizeRange,Z.map((function(t){return t.value})),4,[4,10,12]):k(g.fontSizeRange,Z.map((function(t){return t.value})),4,[4,8,10]),Z.forEach((function(t){return t.size=Math.min(nt(t.value),g.fontSizeRange[1])})),rt=[],it=0;it<S;++it){if(ot=a(W[it].right),lt=a(W[it].left),W[it].weight>1)for(st=(lt-ot)/3,ct=0;ct<3;++ct)at(ot+ct*st,ot+(ct+1)*st);else at(ot,lt);rt.push({x0:2*it<=S?0:.66*e,x1:2*it<=S?.33*e:e,y0:ot,y1:lt})}rt.push({x0:e-40,x1:e,y0:h-15,y1:h}),rt.push({x0:0,x1:e,y0:0,y1:20}),rt.push({x0:0,x1:e,y0:h-20,y1:h}),rt.push({x0:0,x1:10,y0:0,y1:100}),ut={},L.forEach((function(t,e){ut[t.word]=e,t.is_new=!1})),y().size([e,h]).data(Z).text((function(t){return t.word})).barriers(rt).rangex((function(t){if(ut[t.word]){var n=L[ut[t.word]].x/e,r=n-.1,a=n+.1;return[Math.max(0,r),Math.min(a,1)]}return g.getWordColor(t)==g.positiveColor?[0,.5,.25]:g.getWordColor(t)==g.negativeColor?[.6,1,.82]:[.3,.8,.55]})).padding(6).rangey((function(t){if(ut[t.word]){var e=L[ut[t.word]].y/h,n=e-.1,r=e+.1;return[Math.max(0,n),Math.min(r,1),e]}return g.getWordColor(t)==g.positiveColor?[.1,.4,.25]:g.getWordColor(t)==g.negativeColor?[.4,1,.65]:[.2,.6,.5]})).fontSize((function(t){return t.size})).font("Roboto").fontWeight((function(t){return nt(t.value)>=0?"bold":"normal"})).start((function(t){var e=t.filter((function(t){return t.display})).map((function(t){return{x:t.x,y:t.y,layer:0,size:t.size,text:t.text,display:t.display,width:t.width,height:t.height,weight:"bold",id:"corpus",highlight:t.highlight,fill:g.getWordColor(t),contri:t.contri}})),n=e.filter((function(t){return g.getWordColor(t)==g.negativeColor})),r=e.filter((function(t){return g.getWordColor(t)==g.positiveColor})),a=e.filter((function(t){return g.getWordColor(t)!=g.negativeColor&&g.getWordColor(t)!=g.positiveColor}));g.overviewWords=n.slice(0,25).concat(r.slice(0,25)).concat(a.slice(0,20))}));case 60:case"end":return t.stop()}}),t)}))),P.apply(this,arguments)},B=function(){return P.apply(this,arguments)},t.paintMatrix(),n=u["x"]("#overview-g"),r=t.bubble.left,a=15,i=t.bubble.top,c=8,d=t.bubble.width-r-i,h=t.bubble.height-a-c-18,p=t.scatterplot,g=t,g.dataset_name=t.scatterplot.dataset,g.n_layer=t.scatterplot.n_layer,200,x=2e3,v=10,n.append("clipPath").attr("id","clip_path").append("rect").attr("x",0).attr("y",0).attr("width",d).attr("height",h),m=n.append("g").attr("class","main_layer").attr("transform","translate(".concat(r,", ").concat(a,")")),n.append("g").attr("class","word_layer").attr("transform","translate(".concat(r,", ").concat(a,")")),b=n.append("g").attr("class","label_layer").attr("transform","translate(".concat(r,", ").concat(a,")")).style("font-family","sans-serif").style("font-size",16),b.append("g").attr("transform","translate(".concat(3,",",-2,")")).append("text").style("font-family","Roboto, san-serif").text("Prediction Score"),M=.0625,O=u["f"](p.scatters,(function(t){return t.x})),A=[0,1],p.scatters.forEach((function(t){return t.x=(t.x-O[0])/(O[1]-O[0])*(A[1]-A[0])*.97+.015})),console.log(A),A[0]=Math.floor(20*A[0])/20,A[1]=Math.ceil(20*A[1])/20,S=Math.floor((A[1]-A[0])/M+1e-7),j=null,R=u["f"](p.scatters,(function(t){return t.y})),z=d/S/4*.5/Math.sqrt(.75),z*Math.sqrt(.75),I=[],W=[],G=function(t){var e=A[0]+t*(A[1]-A[0])/S,n=A[0]+(t+1)*(A[1]-A[0])/S;I.push(e);var r=[0,0];p.scatters.filter((function(t){return t.x>=e&&t.x<n})).forEach((function(t){var e=+(t.label==g.selected_label[0]);r[e]=(r[e]||0)+1}));var a=0;r[0]+r[1]>0&&(a=(e<.5-1e-7?r[1]:r[0])/(r[0]+r[1])),W.push({left:e,right:n,counts:r,weight:1,index:t,is_top:e<.5-1e-7,p:a})},E=0;E<S;++E)G(E);I.push(A[1]),Math.min.apply(Math,Object(l["a"])(W.map((function(t){return Math.min(t.counts[0],t.counts[1])})))),D=Math.max.apply(Math,Object(l["a"])(W.map((function(t){return Math.max(t.counts[0],t.counts[1])})))),N=u["s"]().domain([1,D]).range([.03,.35]),T=function(t,e){var n,r=0,a=Object(o["a"])(e);try{for(a.s();!(n=a.n()).done;){var i=n.value;r+=i.weight}}catch(c){a.e(c)}finally{a.f()}for(var l=[1],s=0;s<e.length;++s)l.push(l[s]-e[s].weight/r);return l.map((function(e){return e*t}))},null,L=[],B();case 46:case"end":return e.stop()}}),e)})))()},paintLinechart:function(){var t=arguments,e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){var r;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.length>0&&void 0!==t[0]?t[0]:null,n.next=3,O(e,r,e.fontSizeRange);case 3:case"end":return n.stop()}}),n)})))()},saveWordAttr:function(){this.enable_word_attr=!1,this.refreshLinechart()},refreshLinechart:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return e.next=2,t.fetchLayerInfo({idxs:t.current&&t.current.idxs||null,attrs:t.word_attrs});case 2:t.paintLinechart();case 3:case"end":return e.stop()}}),e)})))()},refreshSelection:function(t){var e=arguments,n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i,o;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a=e.length>1&&void 0!==e[1]?e[1]:null,n.is_refreshing=!0,i=n,r.next=5,n.fetchLayerInfo({idxs:t,attrs:n.word_attrs});case 5:return n.current={},r.next=8,i.getSamples(t);case 8:o=r.sent,n.current_items=o.sort((function(t,e){return t.score-e.score})),n.current.grids=a,n.current.idxs=t,n.paintLinechart(),n.brushGrid(t),n.is_refreshing=!1;case 15:case"end":return r.stop()}}),r)})))()},addSentenceDAG:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.lastInfoFlow=t,n.next=3,e.refreshDAG("sentence",t);case 3:return n.next=5,e.paintLinechart();case 5:case"end":return n.stop()}}),n)})))()},addWordDAG:function(t){var e=this;return Object(s["a"])(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return e.lastWordContext=t,n.next=3,e.refreshDAG("word",t);case 3:case"end":return n.stop()}}),n)})))()},refreshDAG:function(t,e){var n=this;return Object(s["a"])(regeneratorRuntime.mark((function r(){var a,i;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:return a={level:t,layers:n.showed_layers},"sentence"==t?a.idx=e:a.word=e,n.setViewtype(t),r.next=5,p.a.post("".concat(n.server_url,"/api/networks"),a);case 5:i=r.sent,"sentence"==t&&(n.current_text=n.getSample(e).text,n.setLayers(i.data.linechart)),n.setNetwork(i),n.calcDAG(),n.paintDAG();case 10:case"end":return r.stop()}}),r)})))()},paintDAG:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if("word"!=t.current_viewtype){e.next=7;break}return t.right_bottom_view="word_ctx",j(t),e.next=5,t.paintWordcloud();case 5:e.next=11;break;case 7:if("sentence"!=t.current_viewtype){e.next=11;break}return t.right_bottom_view="info_flow",e.next=11,et(t);case 11:case"end":return e.stop()}}),e)})))()}}),mounted:function(){var t=this;return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return window.innerWidth<2800&&(console.log("document.body.style.zoom",window.innerWidth/2800),n=window.innerWidth/2800,document.body.parentElement.style.zoom=n,r=window.innerHeight/n-50,document.body.parentElement.style.height="".concat(r,"px"),document.body.style.height="".concat(r,"px"),console.log(t.$refs.mainview),t.$refs.mainview.$el.style.height="".concat(r,"px"),t.$refs.simpletable.$el.style["max-height"]="".concat(.52*r-96,"px")),a=t,a.svgResize(),document.getElementsByClassName("lds-facebook")[0].style.display="none",e.next=6,p.a.post("".concat(a.server_url,"/api/scatterplot"),{});case 6:return i=e.sent,e.next=9,a.setScatterplot(i);case 9:return window.onresize=function(){a.svgResize()},t.$intro().start(),e.next=13,a.fetchAllSample();case 13:return e.next=15,a.paintScatterplot();case 15:return e.next=17,a.refreshSelection(null);case 17:_.$on("add_word_DAG",(function(t){return a.addWordDAG(t)})),_.$on("add_sentence_DAG",(function(t){return a.addSentenceDAG(t)})),_.$on("highlight_grid",(function(t){return a.highlightGrid(t)})),_.$on("brush_grid",(function(t){return a.brushGrid(t)}));case 21:case"end":return e.stop()}}),e)})))()}},at=rt,it=(n("034f"),n("6544")),ot=n.n(it),lt=n("7496"),st=n("8336"),ct=n("a609"),ut=n("b0af"),dt=n("ac7c"),ft=n("cc20"),ht=n("62ad"),pt=n("2b5d"),gt=n("a523"),yt=n("a75b"),xt=n("132d"),vt=n("adda"),mt=n("0fd9"),wt=n("b974"),bt=n("1f4f"),_t=n("2fa4"),kt=n("71d9"),Ct=Object(P["a"])(at,a,i,!1,null,null,null),Mt=Ct.exports;ot()(Ct,{VApp:lt["a"],VBtn:st["a"],VBtnToggle:ct["a"],VCard:ut["a"],VCheckbox:dt["a"],VChip:ft["a"],VCol:ht["a"],VCombobox:pt["a"],VContainer:gt["a"],VContent:yt["a"],VIcon:xt["a"],VImg:vt["a"],VRow:mt["a"],VSelect:wt["a"],VSimpleTable:bt["a"],VSpacer:_t["a"],VToolbar:kt["a"]}),r["a"].use(d["a"]);var Ot={corpus_layers:null},At=new d["a"].Store({state:{server_url:"./",DAG:{},linechart:{},scatterplot:{},bubble:{left:40,top:10},config:{linechart:{scale:.3,padding:20},DAG:{padding:{top:5,left:24}},network:{padding:{left:20,top:20,right:20,bottom:20},node_scale:.6,node_padding:20},data_table:{max_table_len:3e3,min_text_len:30,target_text_len:45}},color_scheme:["#d7191c","#1a9641","#ff7f0e","#1f77b4"],neuron_clusters:[],edges:[],showed_layers:[0,3,6,9,10,12],layers:[1,2,3,4,5,6,7,8,9,10,11,12],current_layers:[],current_viewtype:"sentence",layout:null,sentenceclusters:[],all_samples:[],hover_word:null,hover_timer:null,current_samples:[],word_indexs:{},word_index_pos:{},filtered_words:[],labels:[],filter_info:{},tooltip:{top:0,left:0,show:!1,content:""},selected_class:[1,0]},getters:{positiveColor:function(t){return t.color_scheme[t.selected_class[0]]},negativeColor:function(t){return t.color_scheme[t.selected_class[1]]},neutralColor:function(t){return"gray"},neutralColorGray:function(t){return"#777"},fontSizeRange:function(t){return[15,35]},getSample:function(t){return function(e){return t.all_samples[e]}},checkWordIndex:function(t){return function(e){return!!t.word_indexs[e]}},getLabelColor:function(t){return function(e){for(var n=0;n<t.labels.length;++n)if(t.labels[n].label==e)return t.color_scheme[n];return"gray"}},selected_label:function(t){return t.selected_class.map((function(e){return t.labels[e].label}))},getSamples:function(t){return function(e){var n,r=t.config.data_table.max_table_len,a=t.config.data_table.target_text_len;return n=e&&e.length>0?e.map((function(e){return t.all_samples[e]})).sort((function(t,e){return Math.abs(t.text.length-a)-Math.abs(e.text.length-a)})).slice(0,r):t.all_samples.filter((function(e){return e.text.length>t.config.data_table.min_text_len})).slice(0,r).sort((function(t,e){return Math.abs(t.text.length-a)-Math.abs(e.text.length-a)})),n}},getWordIdxs:function(t){return function(e){return t.word_indexs[e]}},view_samples:function(t){var e,n=new Set(t.current_samples.map((function(t){return t.index}))),r=new Set,a=Object(o["a"])(t.filtered_words);try{for(a.s();!(e=a.n()).done;){var i,s=e.value,c=Object(o["a"])(t.word_indexs[s]);try{for(c.s();!(i=c.n()).done;){var u=i.value;r.add(u),n.has(u)&&n.delete(u)}}catch(p){c.e(p)}finally{c.f()}}}catch(p){a.e(p)}finally{a.f()}n=Object(l["a"])(n),n.sort((function(t,e){return t-e}));var d=Object(l["a"])(r).concat(n);function f(e){var n=[];e=e.split(" ");var r,a=Object(o["a"])(e);try{for(a.s();!(r=a.n()).done;){var i,l=r.value,s=1,c=Object(o["a"])(t.filtered_words);try{for(c.s();!(i=c.n()).done;){var u=i.value;if(-1!=l.indexOf(u)){s=0;var d=l.indexOf(u);d>0&&n.push([l.slice(0,d),!1]),n.push([u,!0]),u.length+d<l.length&&n.push([l.slice(u.length+d),!1]);break}}}catch(p){c.e(p)}finally{c.f()}s&&n.push([l,!1])}}catch(p){a.e(p)}finally{a.f()}return n}var h=d.map((function(e){return t.all_samples[e]})).map((function(e){var n=f(e.text),r=e.score[t.selected_class[0]],a=e.score[t.selected_class[1]];return{index:e.index,text:n,pred:e.pred,label:e.label,score:r/(r+a),show_filter:!1}}));return r.size>0&&(h[0].show_filter=!0,h=h.slice(0,r.size).concat(t.filter_info.sentences.filter((function(e){return!r.has(e.index)&&-1!=e.text.indexOf(" ".concat(t.filtered_words[0]," "))&&e.index>=5e3})).map((function(t){return{index:t.index,text:f(t.text),pred:"N/A",label:t.label,score:"N/A",show_filter:!1}})).sort((function(t,e){return 60312==t.index?-1:60312==e.index?1:t.index-e.index}))).concat(h.slice(r.size))),h.slice(0,500)}},mutations:{addHoverTimer:function(t,e){clearTimeout(t.hover_timer),t.hover_timer=e},removeHoverTimer:function(t){clearTimeout(t.hover_timer)},setHoverWord:function(t,e){t.hover_word=e},updatePosition:function(t,e){var n=t.config.network.padding,r=e.network.width-n.left-n.right,a=e.network.height-n.top-n.bottom;t.bubble.width=e.bubble.width,t.bubble.height=e.bubble.height,t.linechart.padding=t.config.linechart.padding,t.linechart.width=e.linechart.width-t.linechart.padding,t.linechart.height=e.linechart.height-t.linechart.padding,t.linechart.x=t.linechart.padding,t.linechart.y=t.linechart.padding,t.DAG.width=r,t.DAG.height=a,t.DAG.x=t.config.DAG.padding.left,t.DAG.y=t.config.DAG.padding.top},setViewtype:function(t,e){t.current_viewtype=e},setScatterplot:function(t,e){t.scatterplot=e.data},setLayers:function(t,e){t.layers=e},calcEdges:function(t,e){S(t,e)},calcDAG:function(t){"word"==t.current_viewtype&&(z(t),this.commit("calcEdges",t.current_layers))},changeFilteredWord:function(t,e){var n=e.key,r=e.sentences,a=e.pos,i=e.neg,o=t.filtered_words.indexOf(n);-1!=o?t.filtered_words.splice(o,1):(t.filtered_words=[n],t.filter_info={sentences:r,pos:a,neg:i,word:n})},setNetwork:function(t,e){"sentence"==t.current_viewtype?t.layout=e.data.layout:"word"==t.current_viewtype&&(t.neuron_clusters=e.data.neuron_clusters,t.edges=e.data.edges)},setAllSamples:function(t,e){t.all_samples=e.sort((function(t,e){return t.id-e.id}))},setCurrentSamples:function(t,e){t.current_samples=e},setWordIndex:function(t,e){var n=e.key,r=e.idxs,a=e.pos;t.word_indexs[n]=r,t.word_index_pos[n]=a},showTooltip:function(t,e){var n=e.top,r=e.left,a=e.content;t.tooltip.top=n+10,t.tooltip.left=r+10,t.tooltip.content=a,t.tooltip.show=!0},setConfusionMatrix:function(t,e){var n=e.matrix,r=e.labels,a=e.label_names,i=e.selection;t.selected_class=i,t.labels=r.map((function(t,e){return{label:t,name:a[e]}})),t.matrix=n},hideTooltip:function(t){t.tooltip.show=!1}},actions:{changeCurrentSamples:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:r=t.commit,a=t.getters,r("setCurrentSamples",a.getSamples(e));case 2:case"end":return n.stop()}}),n)})))()},changeFilteredWord:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,l,s,c;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=t.state,n.next=3,p.a.post("".concat(a.server_url,"/api/word_sentences"),{word:e});case 3:i=n.sent,o=i.data,l=o.sentences,s=o.pos,c=o.neg,r("changeFilteredWord",{key:e,sentences:l,pos:s,neg:c});case 6:case"end":return n.stop()}}),n)})))()},fetchWordIndex:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.commit,a=t.state,!a.word_indexs[e]){n.next=3;break}return n.abrupt("return");case 3:return n.next=5,p.a.post("".concat(a.server_url,"/api/word"),{word:e});case 5:i=n.sent,o=i.data.idxs,l=i.data.pos,r("setWordIndex",{key:e,idxs:o,pos:l});case 9:case"end":return n.stop()}}),n)})))()},fetchLayerInfo:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i,o,l;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:if(r=t.commit,a=t.state,i=e.idxs,o=e.attrs,null!=i||null==Ot.corpus_layers){n.next=6;break}l=Ot.corpus_layers,n.next=10;break;case 6:return n.next=8,p.a.post("".concat(a.server_url,"/api/layers"),{idxs:i,attrs:o});case 8:l=n.sent,null==i&&(Ot.corpus_layers=l);case 10:r("setLayers",l.data);case 11:case"end":return n.stop()}}),n)})))()},fetchDAG:function(t,e){return Object(s["a"])(regeneratorRuntime.mark((function n(){var r,a,i;return regeneratorRuntime.wrap((function(n){while(1)switch(n.prev=n.next){case 0:return r=t.commit,a=t.state,n.next=3,p.a.post("".concat(a.server_url,"/api/networks"),e);case 3:i=n.sent,r("setNetwork",i),r("calcDAG");case 6:case"end":return n.stop()}}),n)})))()},fetchAllSample:function(t){return Object(s["a"])(regeneratorRuntime.mark((function e(){var n,r,a,i;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:return n=t.commit,r=t.state,a=t.getters,e.next=3,p.a.post("".concat(r.server_url,"/api/all_sentences"),{});case 3:return i=e.sent,n("setAllSamples",i.data.sentences),e.next=7,p.a.post("".concat(r.server_url,"/api/confusion_matrix"),{});case 7:i=e.sent,n("setConfusionMatrix",i.data),n("setCurrentSamples",a.getSamples(null));case 10:case"end":return e.stop()}}),e)})))()}},modules:{}}),St=n("f309");r["a"].use(St["a"]);var jt=new St["a"]({}),Rt=n("3d29"),zt=n.n(Rt);n("9992");r["a"].use(zt.a),r["a"].config.productionTip=!1,new r["a"]({store:At,vuetify:jt,render:function(t){return t(Mt)}}).$mount("#app")},"85ec":function(t,e,n){},"8d3c":function(t,e,n){t.exports=n.p+"static/img/figure1.f069d720.png"},"918f":function(t,e,n){},"9cdc":function(t,e,n){"use strict";var r=n("918f"),a=n.n(r);a.a},a760:function(t,e,n){t.exports=n.p+"static/img/legend1.181e0cc3.png"},caadb:function(t,e,n){"use strict";var r=n("2db6"),a=n.n(r);a.a}});
//# sourceMappingURL=app.557f2a28.js.map