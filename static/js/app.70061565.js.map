{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5189","webpack:///./src/App.vue?5813","webpack:///./src/plugins/histogram.js","webpack:///./src/plugins/wordcloud.js","webpack:///./src/plugins/lasso.js","webpack:///./src/plugins/bus.js","webpack:///./src/plugins/utils.js","webpack:///./src/layout/word_contribution_layout.js","webpack:///./src/layout/word_dag_layout.js","webpack:///./src/components/wordgroup.vue?62c1","webpack:///src/components/wordgroup.vue","webpack:///./src/components/wordgroup.vue?525f","webpack:///./src/components/wordgroup.vue","webpack:///./src/components/infotooltip.vue?baf0","webpack:///src/components/infotooltip.vue","webpack:///./src/components/infotooltip.vue?cf4b","webpack:///./src/components/infotooltip.vue","webpack:///./src/layout/sentence_layout.js","webpack:///src/App.vue","webpack:///./src/App.vue?b0f9","webpack:///./src/App.vue","webpack:///./src/store/index.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/components/wordgroup.vue?8d69","webpack:///./src/assets/figure1.png","webpack:///./src/assets/legend1.png","webpack:///./src/components/infotooltip.vue?ec6f"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","ref","staticStyle","attrs","tooltip","left","top","show","content","staticClass","directives","rawName","expression","model","callback","$$v","left_top_view","_v","scopedSlots","_u","fn","proxy","is_lasso_select_all","enable_tooltip","bubble","overviewWords","enable_word_filter","left_bottom_view","search_expand","item","selected","_b","on","$event","clickSearchItem","preventDefault","rightClickSearchItem","removeSearchItem","_s","isNaN","chips","_l","index","style","color_scheme","labels","_e","onClickSearch","filter_info","pos","neg","word","highlightGrid","addSentenceDAG","color","pred","background","label","getLabelColor","score","Number","toFixed","datasets","models","config","dialog_width","_g","onDialogOpen","dialog","current_color_scheme","scheme","histogram_width","histogram_height","parameters","xi_range","xi_threshold","right_top_view","show_trending_down","show_trending_up","path","underlines","line","index2","x1","x2","y1","y2","linechart","infolossWords","enable_word_highlight","current_viewtype","current_text","right_bottom_view","changeRightBottomView","staticRenderFns","HistogramChart","valueScale","xAttr","width","height","margin","bottom","right","d3","datatype","scale","maxbins","valueTicks","on_mousemove","on_mouseout","chart","context","selection","g","append","attr","values","map","extent","Date","domain","nice","range","ticks","Math","min","dict","forEach","sort","a","b","values_95","values_05","random","Set","summary_data","count","yScale","xScale","padding","bandwidth","selectAll","enter","cache","x","_","arguments","brushend","on_brushend","mousemove","mouseout","wordcloud","size","center","text","cloudText","font","cloudFont","fontSize","cloudFontSize","fontStyle","cloudFontNormal","fontWeight","cloudPadding","rangex","cloudRangex","rangey","cloudRangey","expandx","cloudExpandx","expandy","cloudExpandy","flexible","cloudFlexible","keepFirst","barriers","words","grid_step","grid_size","self","align","rows","cols","rects","nFixedRect","forceCollide","nodes","force","alpha","quad","y","visit","q","updated","lx","ly","xSpacing","ySpacing","absX","abs","absY","sqrt","initialize","functor","addRect","rect","checkVectical","lines","Array","isArray","x0","ret","checkHorizontal","y0","start","measure","ctx","save","weight","measureText","actualBoundingBoxRight","actualBoundingBoxLeft","actualBoundingBoxAscent","dx","dy","actualBoundingBoxDescent","restore","cw","ch","document","canvas","createElement","Canvas","getContext","fillStyle","strokeStyle","textAlign","display","mid","top_range","bottom_range","left_range","right_range","flag","delta","direction","max","pd","previous_data","filter","simulation","strength","tick","targetArea","items","closePathDistance","closePathSelect","isPathClosed","hoverSelect","draw","end","lasso","_this","tpath","origin","torigin","drawnCoords","dyn_path","close_path","origin_node","current_drag","drag","dragstart","dragmove","dragend","e","__lasso","possible","loopSelect","box","getBoundingClientRect","lassoPoint","round","sourceEvent","type","touches","clientX","clientY","tx","ty","distance","pow","close_draw_path","classifyPoint","possibleItems","selectedItems","notPossibleItems","notSelectedItems","types","indexOf","bus","Vue","stepSizeScale","n_steps","steps","step","ratio","getValuesByEntropy","layer","max_entropy","frequency","entropy","term1","term2","log","n_layer","dataset_name","getWordColor","prediction_score","positiveColor","negativeColor","neutralColorGray","contri","neu","paintLineChart","highlight_word","font_size","timeout","Promise","resolve","setTimeout","remove_discarded_attr","layers","viewbox","chartline","select","empty","remove","entropy_range","info","curve","xAxis","tickValues","tickFormat","yAxis","floor","all_words","highlight_set","retained_words","add","discarded_words","important_words","preserve_words","first_words","last_words","word_counts","max_size","sizeScale","last","word_range","next","has","stroke","stroke_width","fill","highlight","delta_x","delta_y","k","status","topk","yaxis","max_words","max_words_per_line","n_words","count_words","console","id","glyph","opacity","concat","down_words","down_word_lines","up_words","up_word_lines","down_word_underlines","up_word_underlines","highlight_line","trending_up_lines","trending_down_lines","trending_up_underlines","trending_down_underlines","layoutDAGEdges","state","clusters","in_edges","tot_weight","height_threshold","weight_threshold","weights","edges","is_straight","curr_weight","y3","y4","out_edges","h","paintWordDAG","DAG","svg","neuron_clusters","timer","on_mouseover","pageX","pageY","idxs","clearTimeout","on_click","is_current_sample","$emit","getWordFillColor","cluster_edges","current_layers","layer_id","layoutSentenceDAGNodes","unique_layers","layerlen","edge_width","network","node_scale","node_padding","totsize","reduce","h0","lh","show_cloud","paintWordcloud","text_padding","exponent","font_size_range","font_value_range","retained_keywords","keyword_size","keywords","fontstyle","font_color","split","current_ids","source","target","fetchWordIndex","getWordIdxs","hoverItem","hover_word","interaction","onMouseOver","onMouseOut","onClick","onRightClick","class","highlight_text","neutralColor","arc","hoverEnterTime","glyphHeight","glyphRadius","computed","cnt","arcs","temp_items","glyphed_items","selected_items","props","Boolean","default","String","methods","component","fontsize","visibility","fixed_left","fixed_top","transition","watch","$refs","current_tooltip","innerHTML","val","testmode","paintSampleComposition","LineChart","defs","isalpha","test","axis","shades","getShade","extend_shades","getExtendShade","c2","c1","last_cover","current_cover","last_layer","lineGenerator","shadeGroup","grayShadeElements","coloredShadeElements","lineGroup","glyphGroup","labelGroup","anchor","baseline","position","s1","s2","len","s3","signSet","phraseData","rawPhraseData","n_rows","relationData","removed","t1","b1","t2","b2","tot_contri","top_3_contri","prev","contriScale","curr","cross","max_relations","n_cols","max_cross","changeData","row","col","has_rseg","phraseElement","relationElement","c3","c4","w1","widthScale","w2","minw","x3","x4","getColorName","changeElement","addGradientColor","segments","has_shade","linearGradient","fill_id","show_label","tw","segElement","is_end","end_point","endLabelGroup","endGlyph","all_pieces","pieces","shortcut","max_text_len","endLabels","allLabel","label_size","label_font","labelWithPath","labelNoPath","v","baselineGenerator","labelText","labelText2","update_tooltip","exit","raw","layout","phrases","last_label","last_display","sorted_tot_contri","trim","tk","rt","rb","w3","w4","last_contri","cover_points","text_len","rangeRound","colors","colors2","gradient","contriValues","contriThres","contriMax","contriValues2","contriThres2","max_width","mid_width","scale1","thres","m1","m2","r1","r2","word_attrs","frequency_weight","uncertainty","uncertainty_weight","entropy_weight","components","WordGroup","InfoTooltip","wordInteraction","brushGrid","currentGrids","changeCurrentSamples","grids1","grids0","svgResize","network_rect","bubble_rect","linechart_rect","updatePosition","saveWordAttr","enable_word_attr","refreshLinechart","VApp","VBtn","VBtnToggle","VCard","VCardActions","VCardText","VCheckbox","VChip","VCol","VCombobox","VContainer","VContent","VDialog","VIcon","VImg","VRadio","VRadioGroup","VRow","VSelect","VSimpleTable","VSlider","VSpacer","VSubheader","VTextField","VToolbar","use","Vuex","corpus_layers","Store","server_url","scatterplot","overview","data_table","max_table_len","min_text_len","target_text_len","histogram_color","color_candidates","showed_layers","sentenceclusters","all_samples","hover_timer","current_samples","word_indexs","word_index_pos","filtered_words","selected_class","getters","fontSizeRange","getSample","idx","checkWordIndex","selected_label","getSamples","max_len","target_len","view_samples","oldidxs","newidxs","delete","texts","show_filter","sentences","mutations","addHoverTimer","removeHoverTimer","setHoverWord","payload","setViewtype","setScatterplot","setLayers","calcEdges","calcDAG","commit","changeFilteredWord","setNetwork","setAllSamples","setCurrentSamples","setWordIndex","showTooltip","setSelectedClass","setModelInfo","matrix","label_names","xi_values","max_xi","hideTooltip","actions","axios","post","resp","fetchLayerInfo","startLoading","endLoading","fetchDAG","req","selectClass","classes","fetchMatrix","fetchAllSample","fetchScatterplot","Vuetify","VueIntro","productionTip","store","vuetify","render","App","$mount"],"mappings":"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cAA8BF,EAA9B,YAAoCE,EAApC,YAA0C4gB,EAA1C,YAAgD5gB,EAAhD,YAAsD6gB,EAAtD,YAA4D5gB,EAA5D,YAAkEF,EAAlE,YAAwEE,EAAxE,cAAgFF,EAAK,GAArF,YAA2FE,IA0wB7FoZ,IAjuCF,4C,yBAouCeD,UCvsBf,4CAKA,IACEvgB,KAAM,MAENgf,SAAU,OAAZ,OAAY,CAAZ,iCACA,gBACA,MACA,UACA,YACA,SACA,gBACA,SACA,SACA,eACA,kBACA,cACA,mBACA,iBACA,UACA,eACA,iBACA,QACA,SACA,mBACA,cACA,mBACA,SACA,UACA,aACA,cACA,SACA,gBAEA,gBACA,aACA,cACA,eACA,iBACA,gBACA,YACA,gBACA,gBACA,eACA,mBACA,mBAxCA,IA0CImJ,WA1CJ,WA2CM,MAAO,CACL/S,UAAW1T,KAAK0mB,iBAAmB,GACnCC,YAAa3mB,KAAK4mB,mBAAqB,GACvCjT,QAAS3T,KAAK6mB,eAAiB,OAIrCC,WAAY,CACVC,UAAW,EACXC,YAAa,GAEf9qB,KAAM,WAAR,OACA,mBACA,yBACA,SACA,uBACA,sBACA,uBACA,oBACA,8BACA,2BACA,sBACA,oBACA,kBACA,oBACA,sBACA,uBACA,qBACA,4BACA,0BACA,yBACA,uBACA,gBACA,UACA,eACA,gBACA,oBACA,sBACA,kBACA,iBACA,iBACA,sBACA,iBACA,+BACA,kBACA,sBACA,mBACA,WACA,uBACA,YACA,cACA,mBACA,iBACA,iBACA,kBACA,qBAEA,iBACA,uDAEE8hB,QAAS,OAAX,OAAW,CAAX,iCACA,gBACA,UACA,iBACA,cACA,YACA,aACA,YACA,cACA,cACA,gBACA,mBACA,kBAEA,gBACA,uBACA,iBACA,iBACA,iBACA,qBACA,YACA,UACA,mBACA,cACA,iBAxBA,IA0BIzZ,aA1BJ,WA0BA,WACMuQ,YAAW,WACT,IAAR,MACA,6CAAU,MAAV,cACA,mBACA,WACA,aACA,gCACA,kCACA,gCAEQnO,EAAR,sDACQA,EAAR,8BACA,YACA,0BACA,iBAHA,mBAIA,UAmBA,KAEI,qBA/DJ,SA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A,qDACA,qBACA,4BAEA,EACA,qDACA,qBACA,+BAEA,0BACA,qCAEA,4CAEA,+CACA,kDAEA,WArCA,yDAqCA,+GACA,2BADA,OAEA,yBACA,qBAHA,2CArCA,uDA0CA,qDAhIA,EA3DA,SA2DA,GACA,YACA,gCA5DA,IACA,oDAEA,wCACA,KACA,2BACA,4BACA,WACA,0EACA,WACA,8BACA,4BACA,SACA,SACA,cACA,6BAIA,6BACA,6BAEA,6BACA,6BAEA,UACA,EACA,OACA,EACA,OACA,iDACA,4CAGA,UACA,EACA,OACA,EACA,OACA,iDACA,4CAIA,mBACA,mBACA,oBACA,WAEA,kBACA,gBACA,SACA,UAEA,IACA,YACA,oDAWA,EACA,eACA,cACA,cACA,8BACA,wBAEA,EACA,eACA,eACA,eACA,gCACA,8BACA,qBAEA,IACA,mBACA,QACA,QACA,YACA,kFACA,QAEA,IACA,eACA,sBACA,aACA,0BACA,oBACA,0BACA,wCAEA,IACA,sBACA,QACA,QACA,eACA,6BACA,KACA,aACA,6FAEA,YACA,0BACA,oBACA,oBACA,wCAlHA,+CA8LI,iBAxeJ,WAweA,mIAkJA,EAlJA,mFA2FA,IA3FA,8DAkJA,qFA4eA,GA5eA,mGA+bA,IA6CA,GA5eA,SA4eA,KACA,gBACA,uCAGA,GADA,0CACA,YAEA,IADA,aACA,oBACA,KACA,aACA,uBAFA,CAMA,iBACA,WACA,KAEA,SACA,SACA,OACA,OACA,SAEA,cACA,YApgBA,YACA,SACA,SACA,cACA,cACA,SACA,GACA,cACA,uDAGA,mBACA,SACA,wDACA,GAEA,mBACA,UACA,6BACA,6BACA,uCACA,SACA,SACA,wBACA,YACA,cACA,eAEA,OAEA,yBACA,UACA,UAGA,YACA,gCACA,wBACA,gCAEA,wBACA,+BAGA,eAEA,2BACA,gBACA,WAEA,cAIA,IACA,qBAEA,GACA,EACA,EACA,2EAEA,sBACA,GACA,EACA,EACA,8EAGA,sBACA,IACA,IACA,yBACA,8BACA,+BACA,uCACA,aACA,iCACA,WACA,KACA,2BACA,YACA,EACA,EACA,wBACA,gDACA,OAIA,yCACA,GAGA,WAEA,8CACA,4CACA,qCACA,8DAEA,EACA,oBACA,QACA,MACA,YACA,QACA,YACA,sBACA,8EAEA,iBACA,gBACA,8CACA,kCACA,+CAEA,uBACA,wBACA,sCACA,MACA,EACA,2CACA,oBAEA,2CACA,8CAEA,6BACA,SACA,WACA,KACA,YACA,WACA,QACA,UACA,WACA,WACA,KAEA,aACA,OAGA,QACA,wDACA,YACA,2BACA,KACA,aACA,wCACA,MADA,aACA,WADA,QAgDA,OA5CA,EACA,iBACA,oCACA,kCACA,yBACA,gBACA,mBAEA,mBACA,wBACA,iBACA,QACA,8DAEA,gCACA,2BAGA,EACA,eACA,YACA,kCACA,wBACA,gBACA,mBAEA,mBACA,wBACA,iBACA,QACA,8DAEA,gCACA,2BAWA,KAEA,YACA,EACA,aACA,YACA,8EAEA,EACA,eACA,aACA,YACA,8CAEA,EACA,wDACA,uBACA,aACA,YACA,KACA,aACA,wCACA,MADA,aACA,WADA,WAMA,EACA,mBACA,KACA,GACA,0DAEA,MACA,YACA,QACA,YACA,qBACA,mBAEA,EACA,eACA,wBAEA,sBACA,kEAEA,gEACA,yBACA,4CACA,uDAEA,EACA,eACA,sBACA,oFACA,SAJA,+BAKA,oDACA,0BAEA,kDAGA,EACA,4BACA,EACA,aACA,eACA,gCACA,sBACA,kEAEA,yBACA,wBACA,wBAiCA,2BACA,KACA,wDAGA,wBAEA,2CACA,aACA,WACA,sBACA,YACA,uBAEA,uBAEA,yBAGA,iDAEA,YACA,EACA,uBACA,aACA,YACA,sBACA,kEAEA,4CACA,uDAEA,EACA,qBACA,aACA,YACA,oFACA,oDACA,uDAEA,YACA,EACA,aACA,YACA,mBACA,YAIA,uBACA,iBAEA,eAIA,IACA,aACA,kBAGA,WACA,qCAEA,mCACA,yCAEA,0CAIA,aACA,6BACA,qBACA,mCACA,wCAEA,uCAEA,qCAEA,+BACA,2GACA,8DACA,wBACA,0DAEA,2BACA,MAGA,MACA,uBACA,oBACA,cACA,SACA,cACA,aACA,YACA,UAEA,kCACA,EACA,YACA,2BAEA,QAEA,8BAEA,IACA,YACA,uBACA,iBAHA,oBAGA,EAHA,IAGA,EAHA,MAIA,QAEA,EAEA,kBACA,SAEA,EACA,kBACA,yBAEA,yCACA,aACA,UAEA,kBAEA,gCACA,wCAEA,IACA,iEACA,8CACA,KACA,iEACA,8CAEA,oCACA,yBACA,8BAEA,8BAwEA,IApEA,kDAIA,GADA,aACA,EACA,gBACA,qCACA,EACA,WAGA,EACA,gBACA,qCACA,EACA,UAGA,WACA,mBACA,mDAeA,MAiCA,gBAGA,GAFA,kBACA,iBACA,eAEA,IADA,aACA,eACA,+BAGA,UAEA,SACA,mBACA,mBACA,MACA,QAWA,SACA,QACA,KACA,QACA,OAEA,SACA,KACA,KACA,KACA,QAEA,SACA,KACA,KACA,QACA,OAEA,SACA,KACA,MACA,KACA,SAGA,MACA,yBACA,aACA,eAGA,IACA,YACA,QACA,mCACA,aACA,oBACA,eACA,wBACA,OACA,OACA,oCAEA,0CACA,WACA,mCACA,WAEA,eAIA,WACA,oBACA,eACA,wBACA,OACA,OACA,sCAEA,0CACA,YACA,mCACA,WAEA,cAeA,uCACA,eACA,iEACA,mBAEA,QACA,wCACA,wBACA,MACA,MACA,QACA,YACA,YACA,kBACA,cACA,gBACA,cACA,YACA,sBACA,uBACA,oBASA,YACA,yDAEA,YACA,yDAEA,YACA,mBACA,oCACA,sCAEA,kBACA,YACA,sBACA,yBAhqBA,4CAlJA,yBAkJA,EAlJA,2CACA,wBACA,gBACA,KACA,eACA,IACA,+BACA,mCACA,gBACA,IACA,qCACA,gCAEA,IACA,MACA,KAEA,EACA,mBACA,uBACA,eACA,YACA,YACA,gBACA,iBAEA,IACA,YACA,2BACA,iBAHA,oBAGA,EAHA,aAGA,EAHA,MAKA,EACA,YACA,2BACA,iBAHA,oBAGA,EAHA,aAGA,EAHA,MAKA,IACA,YACA,4BACA,iBAHA,oBAGA,EAHA,aAGA,EAHA,MAIA,kCACA,sBAEA,EACA,YACA,iBAFA,oBAEA,EAFA,KAEA,EAFA,MAG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","file":"js/app.70061565.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{ref:\"mainview\",staticStyle:{\"position\":\"relative\"}},[_c('info-tooltip',{attrs:{\"left\":_vm.tooltip.left,\"top\":_vm.tooltip.top,\"show\":_vm.tooltip.show,\"content\":_vm.tooltip.content}}),_c('v-content',[_c('v-container',{staticClass:\"core-view fill-height\",attrs:{\"fluid\":\"\",\"id\":\"nlpvis\"}},[_c('v-row',{staticClass:\"fill-height\"},[_c('v-col',{staticClass:\"fill-height py-0 pr-0\",attrs:{\"cols\":\"4\"}},[_c('v-card',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(2),expression:\"2\"},{name:\"intro\",rawName:\"v-intro\",value:('In the distribution view, user can identify important samples and words for further analysis.'),expression:\"'In the distribution view, user can identify important samples and words for further analysis.'\"}],staticClass:\"nlpvis-view\",attrs:{\"height\":\"40%\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.left_top_view),callback:function ($$v) {_vm.left_top_view=$$v},expression:\"left_top_view\"}},[_c('v-btn',{attrs:{\"value\":\"matrix\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Class\")])]),_c('v-btn',{attrs:{\"value\":\"corpus\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Distribution\")])])],1),_c('v-spacer'),_c('v-checkbox',{staticStyle:{\"padding-top\":\"12px\"},attrs:{\"color\":\"darkgray\"},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('v-img',{attrs:{\"width\":\"115px\",\"height\":\"24px\",\"src\":require(\"./assets/figure1.png\")}})]},proxy:true}]),model:{value:(_vm.is_lasso_select_all),callback:function ($$v) {_vm.is_lasso_select_all=$$v},expression:\"is_lasso_select_all\"}})],1),_c('hr'),_c('svg',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(1),expression:\"1\"},{name:\"intro\",rawName:\"v-intro\",value:('Click on an element in the matrix to start the analysis of any two classes.'),expression:\"'Click on an element in the matrix to start the analysis of any two classes.'\"}],staticClass:\"ma-1\",attrs:{\"id\":\"overview-svg\"}},[_c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_top_view == 'corpus'),expression:\"left_top_view == 'corpus'\"}],attrs:{\"id\":\"overview-g\"}}),_c('word-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_top_view == 'corpus'),expression:\"left_top_view == 'corpus'\"}],attrs:{\"tooltip\":_vm.enable_tooltip,\"transform\":(\"translate(\" + (_vm.bubble.left) + \",\" + (0) + \")\"),\"data\":_vm.overviewWords,\"interaction\":_vm.enable_word_filter ? 'filter' : 'DAG'}}),_c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_top_view == 'matrix'),expression:\"left_top_view == 'matrix'\"}],attrs:{\"id\":\"matrix-g\"}},[_c('g',{attrs:{\"transform\":\"translate(30, 10)\"}},[_c('image',{attrs:{\"x\":\"0\",\"y\":\"18\",\"width\":\"320\",\"height\":\"10\",\"preserveAspectRatio\":\"none\",\"xlink:href\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAH0lEQVQ4T2P8////fwYGBgYoNUpDgmM0HEbDYUSkAwCp0H+QW+DsjwAAAABJRU5ErkJggg==\"}}),_c('g',{attrs:{\"transform\":\"translate(0,28)\",\"fill\":\"none\",\"font-size\":\"10\",\"font-family\":\"sans-serif\",\"text-anchor\":\"middle\"}},[_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(0.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"y\":\"9\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"dy\":\"0.71em\"}},[_vm._v(\"0.0\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(143.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"y\":\"9\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"dy\":\"0.71em\"}},[_vm._v(\"0.2\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(203.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"font-size\":\"18px\",\"font-family\":\"Arial\",\"fill\":\"currentColor\",\"y\":\"9\",\"dy\":\"0.71em\"}},[_vm._v(\"0.4\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(249.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"y\":\"9\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"dy\":\"0.71em\"}},[_vm._v(\"0.6\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(287.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"y\":\"9\",\"dy\":\"0.71em\"}},[_vm._v(\"0.8\")])]),_c('text',{attrs:{\"x\":\"0\",\"y\":\"-16\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"fill\":\"currentColor\",\"text-anchor\":\"start\",\"font-weight\":\"bold\"}},[_vm._v(\"Percentage\")])])])])],1)],1),_c('v-card',{directives:[{name:\"intro\",rawName:\"v-intro\",value:('In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.'),expression:\"'In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.'\"},{name:\"intro-step\",rawName:\"v-intro-step\",value:(4),expression:\"4\"}],staticClass:\"nlpvis-view pa-1 mt-2\",attrs:{\"min-height\":\"calc(53% - 48px)\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.left_bottom_view),callback:function ($$v) {_vm.left_bottom_view=$$v},expression:\"left_bottom_view\"}},[_c('v-btn',{attrs:{\"value\":\"samples\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Sample List\")])])],1),_c('v-spacer'),(!_vm.search_expand)?[_c('span',{staticClass:\"pa-1 nlpvis-title disabled\"}),(_vm.left_top_view == 'corpus')?_vm._l((_vm.selected_class),function(index){return _c('span',{key:(\"legend\" + index),staticClass:\"color-legend\",style:((\"--color: \" + (_vm.color_scheme[index])))},[_vm._v(\" \"+_vm._s(_vm.labels[index] && _vm.labels[index].name)+\" \")])}):_vm._e()]:[_c('v-combobox',{attrs:{\"chips\":\"\",\"clearable\":\"\",\"label\":\"Enter a word or sample number here\",\"multiple\":\"\",\"solo\":\"\"},scopedSlots:_vm._u([{key:\"selection\",fn:function(ref){\nvar attrs = ref.attrs;\nvar item = ref.item;\nvar selected = ref.selected;\nreturn [_c('v-chip',_vm._b({attrs:{\"input-value\":selected,\"close\":\"\"},on:{\"click\":function($event){return _vm.clickSearchItem(item)},\"contextmenu\":function($event){$event.preventDefault();return _vm.rightClickSearchItem(item)},\"click:close\":function($event){return _vm.removeSearchItem(item)}}},'v-chip',attrs,false),[_c('strong',[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(isNaN(+item) ? '(Word)' : '(Sample)'))])])]}}]),model:{value:(_vm.chips),callback:function ($$v) {_vm.chips=$$v},expression:\"chips\"}})],_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.onClickSearch()}}},[_c('v-icon',{attrs:{\"size\":\"26\"}},[_vm._v(\"mdi-magnify\")])],1)],2),_c('hr'),_c('v-simple-table',{ref:\"simpletable\",staticStyle:{\"overflow-x\":\"hidden\",\"max-height\":\"calc(52vh - 96px)\",\"max-width\":\"100%\",\"overflow-y\":\"scroll\"},attrs:{\"dense\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" ID\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\"},[_vm._v(\" Passage\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" Label\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" Score\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" ...\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1)])]),_c('tbody',{staticStyle:{\"overflow-x\":\"hidden\",\"max-height\":\"calc(52% - 96px)\",\"overflow-y\":\"scroll\"}},[_vm._l((_vm.view_samples),function(item){return [(item.show_filter)?_c('tr',{key:(\"filter\" + (item.index))},[_c('td',{staticClass:\"pa-1 nlpvis-text\"}),_c('td',{staticClass:\"pa-1 nlpvis-text\",staticStyle:{\"color\":\"#777\"}},[_vm._v(\" There are \"+_vm._s(_vm.filter_info.pos)+\" negative samples and \"+_vm._s(_vm.filter_info.neg)+\" positive samples include \\\"\"+_vm._s(_vm.filter_info.word)+\"\\\" \")]),_c('td',{staticClass:\"pa-1 nlpvis-text\",staticStyle:{\"white-space\":\"nowrap\"}}),_c('td',{staticClass:\"pa-1 nlpvis-text\"}),_c('td',{staticClass:\"pa-1 nlpvis-text\"})]):_vm._e(),_c('tr',{key:item.index,on:{\"mouseenter\":function($event){return _vm.highlightGrid([item.index])},\"mouseleave\":function($event){return _vm.highlightGrid(null)},\"click\":function($event){return _vm.addSentenceDAG(item.index)}}},[_c('td',{staticClass:\"pa-1 nlpvis-text\"},[_vm._v(_vm._s(item.index))]),_c('td',{staticClass:\"pa-1 nlpvis-text\",style:({ color: item.pred == 'N/A' ? '#777' : 'black' })},_vm._l((item.text),function(word,index){return _c('span',{key:index,style:({\n                              background: word[1] ? 'orange' : 'none',\n                            })},[_vm._v(\" \"+_vm._s(word[0])+\" \")])}),0),_c('td',{staticClass:\"pa-1 nlpvis-text\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" \"+_vm._s(item.label)+\" \"),_c('span',{staticStyle:{\"display\":\"inline-block\",\"width\":\"16px\",\"height\":\"16px\"},style:({\n                              'background-color': _vm.getLabelColor(item.label),\n                            })})]),_c('td',{staticClass:\"pa-1 nlpvis-text\"},[_vm._v(\" \"+_vm._s(isNaN(item.score) ? 'N/A' : Number(item.score).toFixed(2))+\" \")]),_c('td',{staticClass:\"pa-1 nlpvis-text\"},[(item.pred == item.label)?_c('v-icon',[_vm._v(\"mdi-check\")]):(item.pred != 'N/A')?_c('v-icon',[_vm._v(\"mdi-close\")]):_vm._e()],1)])]})],2)]},proxy:true}])})],1),_c('v-card',{staticClass:\"nlpvis-script pa-1 mt-2\",attrs:{\"height\":\"calc(7% + 8px)\"}},[_c('v-toolbar',{staticStyle:{\"margin-top\":\"2.5%\"},attrs:{\"flat\":\"\",\"dense\":\"\"}},[_c('v-select',{staticClass:\"nlpvis-text\",staticStyle:{\"margin-top\":\"3.5%\"},attrs:{\"items\":_vm.datasets,\"label\":\"SST-2\",\"outlined\":\"\"}}),_c('v-select',{staticClass:\"nlpvis-text ml-2\",staticStyle:{\"margin-top\":\"3.5%\"},attrs:{\"items\":_vm.models,\"label\":\"12-layer BERT\",\"outlined\":\"\"}}),_c('v-dialog',{attrs:{\"transition\":\"dialog-bottom-transition\",\"max-width\":_vm.config.dialog_width},scopedSlots:_vm._u([{key:\"activator\",fn:function(ref){\n                            var on = ref.on;\n                            var attrs = ref.attrs;\nreturn [_c('v-btn',_vm._g(_vm._b({staticStyle:{\"margin-left\":\"4px\"},attrs:{\"icon\":\"\",\"large\":\"\"},on:{\"click\":function($event){return _vm.onDialogOpen()}}},'v-btn',attrs,false),on),[_c('v-icon',[_vm._v(\"mdi-cog\")])],1)]}},{key:\"default\",fn:function(dialog){return [_c('v-card',{attrs:{\"width\":\"600\"}},[_c('v-toolbar',{staticClass:\"text-h4\",attrs:{\"color\":\"secondary\",\"dark\":\"\"}},[_vm._v(\"Color and parameter settings\")]),_c('v-card-text',[_c('v-radio-group',{scopedSlots:_vm._u([{key:\"label\",fn:function(){return [_c('div',{staticClass:\"text-h5\"},[_c('strong',[_vm._v(\"Color scheme\")])])]},proxy:true}],null,true),model:{value:(_vm.current_color_scheme),callback:function ($$v) {_vm.current_color_scheme=$$v},expression:\"current_color_scheme\"}},_vm._l((_vm.color_candidates),function(scheme,i){return _c('v-radio',{key:(\"color\" + i),attrs:{\"value\":i},scopedSlots:_vm._u([{key:\"label\",fn:function(){return [(i == 0)?_c('div',{staticClass:\"text-h6\"},[_c('strong',[_vm._v(\" Default \")])]):_c('div',{staticClass:\"text-h6\"},[_c('strong',[_vm._v(\" Colorblind-safe \")])]),_c('div',{staticClass:\"ml-2\"},_vm._l((scheme),function(t,index){return _c('span',{key:(\"legend\" + i + \"_\" + index),staticClass:\"color-legend-type2\",style:((\"--color: \" + t))})}),0)]},proxy:true}],null,true)})}),1),_c('hr',{staticClass:\"mt-2 mb-2\"}),_c('div',{staticClass:\"text-h5 mt-4\"},[_c('strong',[_vm._v(\"Parameters\")])]),_c('v-subheader',{staticClass:\"text-h6  mt-2 mb-2\"},[_vm._v(\" ξ for differentiating class-relevant and -irrelevant words. \")]),_c('svg',{ref:\"xi_distribution\",attrs:{\"width\":_vm.config.histogram_width,\"height\":_vm.config.histogram_height}}),_c('v-slider',{attrs:{\"max\":_vm.parameters.xi_range[1],\"min\":_vm.parameters.xi_range[0],\"step\":(_vm.parameters.xi_range[1] - _vm.parameters.xi_range[0]) / 1000},scopedSlots:_vm._u([{key:\"append\",fn:function(){return [_c('v-text-field',{staticClass:\"mt-0 pt-0\",staticStyle:{\"width\":\"60px\"},attrs:{\"type\":\"number\"},model:{value:(_vm.xi_threshold),callback:function ($$v) {_vm.xi_threshold=$$v},expression:\"xi_threshold\"}})]},proxy:true}],null,true),model:{value:(_vm.xi_threshold),callback:function ($$v) {_vm.xi_threshold=$$v},expression:\"xi_threshold\"}})],1),_c('v-card-actions',{staticClass:\"justify-end\"},[_c('v-btn',{attrs:{\"secondary\":\"\"},on:{\"click\":function($event){dialog.value = false}}},[_vm._v(\"Save\")]),_c('v-btn',{attrs:{\"default\":\"\"},on:{\"click\":function($event){dialog.value = false}}},[_vm._v(\"Close\")])],1)],1)]}}])})],1)],1)],1),_c('v-col',{staticClass:\"fill-height py-0\",attrs:{\"cols\":\"8\"}},[_c('v-card',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(3),expression:\"3\"},{name:\"intro\",rawName:\"v-intro\",value:('In the word contribution view, it shows how words are leveraged at different layers for prediction.'),expression:\"'In the word contribution view, it shows how words are leveraged at different layers for prediction.'\"}],staticClass:\"nlpvis-view\",attrs:{\"height\":\"40%\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.right_top_view),callback:function ($$v) {_vm.right_top_view=$$v},expression:\"right_top_view\"}},[_c('v-btn',{attrs:{\"value\":\"word\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Word Contribution\")])])],1),_c('v-spacer'),_c('v-icon',{staticClass:\"px-2\",attrs:{\"size\":\"26\",\"color\":_vm.show_trending_down ? '#333' : '#ccc'},on:{\"click\":function($event){_vm.show_trending_down = !_vm.show_trending_down}}},[_vm._v(\" mdi-trending-down \")]),_c('v-icon',{staticClass:\"px-2\",attrs:{\"size\":\"26\",\"color\":_vm.show_trending_up ? '#333' : '#ccc'},on:{\"click\":function($event){_vm.show_trending_up = !_vm.show_trending_up}}},[_vm._v(\" mdi-trending-up \")])],1),_c('hr'),_c('svg',{staticClass:\"ma-1\",attrs:{\"id\":\"linechart-svg\"}},[_c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.is_wordview_init),expression:\"is_wordview_init\"}],attrs:{\"id\":\"linechart-g\"}},[(_vm.show_trending_up)?[_vm._l((_vm.trending_up_lines),function(path,index){return _c('path',{key:index,staticStyle:{\"opacity\":\"1\"},attrs:{\"transform\":\"translate(0, 0)\",\"d\":path,\"fill\":\"none\",\"stroke\":\"#dbdedb\",\"stroke-width\":\"15px\"}})}),_vm._l((_vm.trending_up_underlines),function(underlines,index){return _c('g',{key:index,attrs:{\"transform\":\"translate(0, 0)\"}},_vm._l((underlines),function(line,index2){return _c('line',{key:index2,staticStyle:{\"opacity\":\"1\",\"stroke-width\":\"3px\",\"stroke\":\"gray\"},attrs:{\"fill\":\"none\",\"x1\":line.x1,\"x2\":line.x2,\"y1\":line.y1,\"y2\":line.y2}})}),0)})]:_vm._e(),(_vm.show_trending_down)?[_vm._l((_vm.trending_down_lines),function(path,index){return _c('path',{key:index,staticStyle:{\"opacity\":\"1\"},attrs:{\"transform\":\"translate(0, 0)\",\"d\":path,\"fill\":\"none\",\"stroke\":\"#dbdedb\",\"stroke-width\":\"15px\"}})}),_vm._l((_vm.trending_down_underlines),function(underlines,index){return _c('g',{key:index,attrs:{\"transform\":\"translate(0, 0)\"}},_vm._l((underlines),function(line,index2){return _c('line',{key:index2,staticStyle:{\"opacity\":\"1\",\"stroke-width\":\"3px\",\"stroke\":\"gray\"},attrs:{\"fill\":\"none\",\"x1\":line.x1,\"x2\":line.x2,\"y1\":line.y1,\"y2\":line.y2}})}),0)})]:_vm._e(),_c('word-group',{attrs:{\"tooltip\":_vm.enable_tooltip,\"transform\":(\"translate(\" + (_vm.linechart.padding) + \",\" + (0) + \")\"),\"data\":_vm.infolossWords,\"highlight\":_vm.enable_word_highlight && _vm.current_viewtype == 'sentence',\"highlight_text\":_vm.current_text,\"interaction\":_vm.enable_word_filter ? 'filter' : 'DAG'}})],2)])],1),_c('v-card',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(5),expression:\"5\"},{name:\"intro\",rawName:\"v-intro\",value:('In the information flow, user can analyze how NLP models process a sample through layers in a unified way.'),expression:\"'In the information flow, user can analyze how NLP models process a sample through layers in a unified way.'\"}],staticClass:\"nlpvis-view pa-1 mt-2\",attrs:{\"height\":\"calc(53% - 48px)\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.right_bottom_view),callback:function ($$v) {_vm.right_bottom_view=$$v},expression:\"right_bottom_view\"}},[_c('v-btn',{attrs:{\"value\":\"info_flow\"},on:{\"click\":function($event){return _vm.changeRightBottomView()}}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Information Flow\")])]),_c('v-btn',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(6),expression:\"6\"},{name:\"intro\",rawName:\"v-intro\",value:('In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.'),expression:\"'In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.'\"}],attrs:{\"value\":\"word_ctx\"},on:{\"click\":function($event){return _vm.changeRightBottomView()}}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Word Context\")])])],1),_c('v-spacer'),(_vm.left_top_view == 'corpus')?[_c('span',{staticClass:\"color-legend\",style:(\"--color: rgb(153,153,153)\")},[_vm._v(\" Irrelevant \")]),_vm._l((_vm.selected_class),function(index){return _c('span',{key:(\"legend\" + index),staticClass:\"color-legend\",style:((\"--color: \" + (_vm.color_scheme[index])))},[_vm._v(\" \"+_vm._s(_vm.labels[index] && _vm.labels[index].name)+\" \")])})]:_vm._e()],2),_c('hr'),_c('svg',{attrs:{\"id\":\"network-svg\"}})],1),_c('v-card',{staticClass:\"nlpvis-script pa-1 mt-2\",attrs:{\"height\":\"calc(7% + 8px)\"}},[_c('v-img',{attrs:{\"height\":\"76\",\"width\":\"1160\",\"src\":require(\"./assets/legend1.png\")}})],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","\nimport * as d3 from \"d3\";\n\nfunction HistogramChart() {\n  let xAttr = 'x';\n  let width = 200, height = 30\n  let margin = { top: 0, bottom: 0, left: 0, right: 0 };\n  let color = d3.schemeDark2[0];\n  let datatype = \"category\"\n  let data = null\n  let scale = 'linear'\n  const maxbins = 60\n  let valueTicks = null\n  let valueScale\n  let on_mousemove = () => {}\n  let on_mouseout = () => {}\n\n  HistogramChart.prototype.cache = {}\n\n  function chart(context) {\n    let selection = context.selection ? context.selection() : context\n    const g = selection\n      .append(\"g\")\n      .attr(\"transform\", `translate(${margin.left}, ${margin.top})`)\n\n    let values = data.map(d => d[xAttr])\n\n    if (!valueTicks) {\n      if (datatype == \"time\") {\n        const extent = d3.extent(values, (d) => new Date(d));\n        valueScale = d3.scaleTime().domain(extent).nice();\n        valueTicks = valueScale.ticks(maxbins);\n        valueScale.range([0, valueTicks.length]);\n      } else if (datatype == \"number\") {\n        values = values.sort((a, b) => a - b)\n        let values_95 = values[~~(values.length * 0.95)]\n        let values_05 = values[~~(values.length * 0.05)]\n        if (values_05 > 0 && values_05 <= 1e-2) values_05 = 0\n        if (values_95 < 1 && values_95 > 0.9) values_95 = 1\n        values = values.map(d => {\n          if (d >= values_05 && d <= values_95) {\n            return d\n          } else {\n            return Math.random() * (values_95 - values_05) + values_05\n          }\n        })\n        const extent = d3.extent(values);\n        valueScale = d3.scaleLinear().domain(extent).nice();\n        valueTicks = valueScale.ticks(maxbins);\n        valueScale.range([0, valueTicks.length]);\n      } else {\n        valueTicks = [...new Set(values)];\n        const dict = {};\n        valueTicks.forEach((d, i) => (dict[d] = i));\n        valueScale = (d) => dict[d];\n      }\n    } else {\n      if (datatype == \"time\") {\n        const extent = d3.extent(data, (d) => new Date(values));\n        valueScale = d3.scaleTime().domain(extent).nice();\n        valueScale.range([0, valueTicks.length]);\n      } else if (datatype == \"number\") {\n        const extent = valueTicks\n        valueScale = d3.scaleLinear().domain(extent).nice();\n        valueTicks = valueScale.ticks(Math.min(extent[1] + 1, maxbins));\n        /*if (extent[1] < 10) {\n          console.log('domain', extent, 'range', [0, valueTicks.length])\n          console.log(data.map(d => d[xAttr]))\n        }*/\n        valueScale.range([0, valueTicks.length]);\n      } else {\n        const dict = {};\n        valueTicks.forEach((d, i) => (dict[d] = i));\n        valueScale = (d) => dict[d]\n      }\n    }\n\n    const summary_data = valueTicks.map(name => ({ name, count: 0 }))\n    values.forEach(d => {\n      summary_data[Math.min(valueTicks.length - 1, ~~valueScale(d))].count += 1\n    })\n\n    const xScale = d3\n      .scaleBand()\n      .domain(valueTicks)\n      .range([0, width])\n      .padding(0.2);\n    \n    let bandwidth = xScale.bandwidth()\n\n    let yScale\n    if (scale == 'linear') {\n      yScale = d3\n      .scaleLinear()\n      .domain([0, d3.max(summary_data, d => d.count)])\n      .range([0, height])\n    } else {\n      yScale = d3\n      .scaleSqrt()\n      .domain([0, d3.max(summary_data, d => d.count)])\n      .range([0, height])\n    }\n\n    // x axis\n    g.append(\"g\").attr(\"transform\", `translate(0, ${height + 5})`);\n    //.call(xAxis)\n\n    // Bars\n    const bar = g.selectAll(\"rect\")\n      .data(summary_data)\n      .enter()\n      .append(\"rect\")\n      .attr(\"class\", \"bar\")\n      .attr(\"x\", (d) => xScale(d.name))\n      .attr(\"y\", (d) => height - yScale(d.count))\n      .attr(\"width\", bandwidth)\n      .attr(\"height\", (d) => yScale(d.count))\n      .attr(\"fill\", color)\n      .attr(\"opacity\", 1)\n  }\n\n  function functor(x) {\n    return typeof x === \"function\"\n      ? x\n      : function () {\n          return x;\n        };\n  }\n\n  chart.x = function (_) {\n    if (!arguments.length) return xAttr;\n    xAttr = _;\n    return chart;\n  };\n\n  chart.width = function (_) {\n    if (!arguments.length) return width;\n    width = _;\n    return chart;\n  };\n\n  chart.height = function (_) {\n    if (!arguments.length) return height;\n    height = _;\n    return chart;\n  };\n\n  chart.margin = function (_) {\n    if (!arguments.length) return margin;\n    margin = _;\n    return chart;\n  };\n\n  chart.datatype = function (_) {\n    if (!arguments.length) return datatype;\n    datatype = _;\n    return chart;\n  };\n\n  chart.color = function (_) {\n    if (!arguments.length) return color;\n    color = _;\n    return chart;\n  };\n\n  chart.data = function (_) {\n    if (!arguments.length) return data;\n    data = _;\n    return chart;\n  };\n\n  chart.brushend = function (_) {\n    if (!arguments.length) return on_brushend;\n    on_brushend = _;\n    return chart;\n  };\n\n  chart.scale = function (_) {\n    if (!arguments.length) return scale;\n    scale = _;\n    return chart;\n  };\n\n  chart.mousemove = function (_) {\n    if (!arguments.length) return on_mousemove;\n    on_mousemove = _;\n    return chart;\n  };\n\n  chart.mouseout = function (_) {\n    if (!arguments.length) return on_mouseout;\n    on_mouseout = _;\n    return chart;\n  };\n\n  chart.valueTicks = function(_) {\n    if (!arguments.length) return valueTicks\n    valueTicks = _\n    return chart\n  }\n\n  return chart;\n}\n\nexport default HistogramChart\n","import * as d3 from \"d3\"\n\nfunction wordcloud() {\n  let size = [256, 256],\n    center = null,\n    text = cloudText,\n    font = cloudFont,\n    fontSize = cloudFontSize,\n    fontStyle = cloudFontNormal,\n    fontWeight = cloudFontNormal,\n    padding = cloudPadding,\n    rangex = cloudRangex,\n    rangey = cloudRangey,\n    expandx = cloudExpandx,\n    expandy = cloudExpandy,\n    flexible = cloudFlexible,\n    keepFirst = (x) => 0,\n    barriers = [],\n    words = [],\n    grid_step = 4,\n    grid_size = 30\n\n  const self = {}\n\n  const align = (x) => x - x % grid_size\n  let rows = [], cols = [], rects = [], nFixedRect = 0\n  self.addRect = function (top, left, bottom, right) {\n    let rect = [top, left, bottom, right]\n    for (let i = align(top); i < bottom; i += grid_size) {\n      if (!rows[i]) rows[i] = []\n      rows[i].push(rect)\n    }\n    for (let j = align(left); j < right; j += grid_size) {\n      if (!cols[j]) cols[j] = []\n      cols[j].push(rect)\n    }\n    rects.push(rect)\n  }\n\n  function forceCollide() {\n    let nodes\n\n    function force(alpha) {\n      const quad = d3.quadtree(nodes, d => d.x, d => d.y);\n      for (const d of nodes) {\n        quad.visit((q, x1, y1, x2, y2) => {\n          let updated = false;\n          if (q.data && q.data !== d) {\n            let x = d.x - q.data.x,\n              y = d.y - q.data.y,\n              xSpacing = padding + (q.data.width + d.width) / 2,\n              ySpacing = padding + (q.data.height + d.height) / 2,\n              absX = Math.abs(x),\n              absY = Math.abs(y),\n              l,\n              lx,\n              ly;\n\n            if (absX < xSpacing && absY < ySpacing) {\n              l = Math.sqrt(x * x + y * y);\n\n              lx = (absX - xSpacing) / l;\n              ly = (absY - ySpacing) / l;\n\n              // the one that's barely within the bounds probably triggered the collision\n              if (Math.abs(lx) > Math.abs(ly)) {\n                lx = 0;\n              } else {\n                ly = 0;\n              }\n              d.x -= x *= lx;\n              d.y -= y *= ly;\n              q.data.x += x;\n              q.data.y += y;\n\n              updated = true;\n            }\n          }\n          return updated;\n        });\n      }\n    }\n\n    force.initialize = _ => nodes = _;\n\n    return force;\n  }\n\n  self.checkVectical = function (lines) {\n    if (!Array.isArray(lines)) {\n      lines = [lines]\n    } else {\n      lines = lines.sort()\n    }\n\n    let s = []\n    for (let i = 0; i < lines.length; ++i) {\n      let x = lines[i], x0 = align(lines[i])\n      if (cols[x0]) {\n        for (let rect of cols[x0]) {\n          if (rect[1] < x && x < rect[3]) {\n            s.push([rect[0], rect[2]])\n          }\n        }\n      }\n    }\n    s = s.sort((a, b) => a[0] - b[0])\n\n    let ret = [], top = 0, bottom = 0\n    for (let i = 0; i < s.length; ++i) {\n      if (s[i][0] <= bottom) {\n        if (s[i][1] > bottom) {\n          bottom = s[i][1]\n        }\n      } else {\n        ret.push(bottom)\n        top = s[i][0]\n        bottom = s[i][1]\n        ret.push(top)\n      }\n    }\n    ret.push(bottom)\n    ret.push(size[1])\n    return ret\n  }\n\n  self.checkHorizontal = function (lines) {\n    if (!Array.isArray(lines)) {\n      lines = [lines]\n    } else {\n      lines = lines.sort()\n    }\n\n    let s = []\n    for (let i = 0; i < lines.length; ++i) {\n      let y = lines[i], y0 = align(lines[i])\n      if (rows[y0]) {\n        for (let rect of rows[y0]) {\n          if (rect[0] < y && y < rect[2]) {\n            s.push([rect[1], rect[3]])\n          }\n        }\n      }\n    }\n    s = s.sort((a, b) => a[0] - b[0])\n\n    let ret = [], left = 0, right = 0\n    for (let i = 0; i < s.length; ++i) {\n      if (s[i][0] <= right) {\n        if (s[i][1] > right) {\n          right = s[i][1]\n        }\n      } else {\n        ret.push(right)\n        left = s[i][0]\n        right = s[i][1]\n        ret.push(left)\n      }\n    }\n    ret.push(right)\n    ret.push(size[0])\n    return ret\n  }\n\n  self.start = async (callback) => {\n    let start_time = new Date()\n    let cw = 1 << 11 >> 5, ch = 1 << 11, canvas\n    if (typeof document !== \"undefined\") {\n      canvas = document.createElement(\"canvas\")\n      canvas.width = 1\n      canvas.height = 1\n      canvas.width = (cw << 5)\n      canvas.height = ch\n    } else {\n      canvas = new Canvas(cw << 5, ch)\n    }\n\n    const ctx = canvas.getContext(\"2d\")\n    ctx.fillStyle = ctx.strokeStyle = \"red\"\n    ctx.textAlign = \"center\"\n\n    function measure(d) {\n      ctx.save()\n      ctx.font = `${d.style} ${d.weight} ${d.size}px ${d.font}`\n      let ret = ctx.measureText(d.text)\n      const width = ret.actualBoundingBoxRight + ret.actualBoundingBoxLeft\n      const height = ret.actualBoundingBoxAscent + 1 //ret.actualBoundingBoxDescent\n      const dx = ret.actualBoundingBoxRight - ret.actualBoundingBoxLeft\n      const dy = ret.actualBoundingBoxDescent / 2\n      ctx.restore()\n      return [width, height, dx, dy]\n    }\n\n    words.forEach((d, index) => {\n      d.text = text(d, index)\n      d.font = font(d, index)\n      d.size = fontSize(d, index)\n      d.style = fontStyle(d, index)\n      d.weight = fontWeight(d, index)\n      d.padding = padding(d, index)\n      d.rangex = rangex(d, index)\n      d.rangey = rangey(d, index)\n      d.expandx = expandx(d, index)\n      d.expandy = expandy(d, index)\n      d.flexible = flexible(d, index)\n    })\n\n    let data = words\n\n    data.forEach(d => {\n      const x = measure(d)\n      d.width = x[0] + d.padding + d.expandx\n      d.height = x[1] + d.padding + d.expandy\n      if (d.flexible && d.width > size[0] * 0.95) {\n        let scale = (x[0]) / (size[0] - d.padding - d.expandx)\n        d.width = x[0] / scale * 0.95 + d.padding + d.expandx\n        d.height = x[1] / scale * 0.95 + d.padding + d.expandy\n        d.size = d.size / scale\n      }\n      d.dx = d.padding / 2 - x[2]\n      d.dy = d.padding / 2 + x[3]\n      d.display = false\n    })\n    data.sort((a, b) => {\n      if (keepFirst(b) != keepFirst(a)) {\n        return keepFirst(b) - keepFirst(a)\n      } else if (b.size != a.size) {\n        return b.size - a.size\n      } else {\n        return b.value - a.value\n      }\n    })\n\n    if (!center) {\n      center = [size[0] / 2, size[1] / 2]\n    }\n    for (let rect of barriers) {\n      self.addRect(rect.y0, rect.x0, rect.y1, rect.x1)\n    }\n    nFixedRect = barriers.length\n\n    for (let i = 0; i < data.length; ++i) {\n      let d = data[i]\n      if (d.text.length <= 1) {\n        d.display = false\n        continue\n      }\n      let mid = d.rangey[2] * size[1]\n      let top_range = d.rangey[0] * size[1]\n      let bottom_range = d.rangey[1] * size[1]\n      let left_range = d.rangex[0] * size[0]\n      let right_range = d.rangex[1] * size[0]\n      let flag = 0, x, y\n      for (let delta = 0; mid - delta >= top_range || mid + delta <= bottom_range; delta += grid_step) {\n        if (flag) break\n        for (let direction = -1; direction <= 1; direction += 2) {\n          if (flag) break\n          y = mid + delta * direction\n          if (y < top_range || y > bottom_range\n            || y - d.height / 2 < 0 || y + d.height / 2 > size[1]\n            || delta == 0 && direction == 1) {\n            continue\n          }\n          let s = self.checkHorizontal([y - d.height / 2, y - d.height / 4, y, y + d.height / 4, y + d.height / 2])\n          let x0 = -1\n          for (let i = 0; i < s.length; i += 2) {\n            let left = Math.max(s[i], left_range), right = Math.min(s[i + 1], right_range)\n            left += d.width / 2\n            right -= d.width / 2\n            if (right < left) {\n              continue\n            }\n            if (left <= center[0] && center[0] <= right) {\n              x0 = center[0]\n              flag = 1\n              break\n            } else if (right <= center[0]) {\n              x0 = right\n            } else if (left >= center[0]) {\n              if (Math.abs(center[0] - left) < Math.abs(center[0] - x0)) {\n                x0 = left\n              }\n            }\n          }\n          if (x0 != -1) {\n            flag = 1\n            let s = self.checkVectical([x0 - d.width / 2, x0 - d.width / 4, x0, x0 + d.width / 4, x0 + d.width / 2])\n            for (let i = 0; i < s.length; i += 2) {\n              let top = Math.max(s[i], top_range), bottom = Math.min(s[i + 1], bottom_range)\n              top += d.height / 2\n              bottom -= d.height / 2\n              if (y < top || y > bottom) {\n                continue\n              }\n            }\n            x = x0 - d.width / 2\n            y = y + d.height / 2\n            d.display = true\n            self.addRect(y - d.height, x, y, x + d.width)\n          }\n        }\n      }\n      if (!d.display && d.expandx > 0) {\n        for (let j = i + 1; j < data.length; ++j) {\n          if (data[j].expandx == 0) {\n            data[j].expandx = d.expandx\n            data[j].width += d.expandx\n            //data[j].dx += d.expandx / 2\n            //data[j].dx -= d.expandx / 2\n            break\n          }\n        }\n      }\n    }\n    for (let i = 0, j = nFixedRect; i < data.length; ++i) {\n      if (data[i].display) {\n        let pd = data[i].padding / 2\n        data[i].width -= data[i].padding\n        data[i].height -= data[i].padding\n        //rects[j][0] += data[i].dx\n        //rects[j][1] += data[i].dy\n        rects[j][2] -= pd\n        rects[j][3] -= pd\n        ++j\n      }\n    }\n\n    let previous_data = data\n    data = data.filter(d => d.display)\n\n    const simulation = d3.forceSimulation(data)\n      .force(\"x\", d3.forceX(center[0] / 2).strength(0.05))\n      .force(\"y\", d3.forceY(center[1] / 2).strength(0.05))\n      .force(\"collide\", forceCollide())\n\n    for (let i = 0; i < 1; ++i) {\n      await simulation.tick()\n    }\n\n    data = previous_data\n\n    for (let i = 0, j = nFixedRect; i < data.length; ++i) {\n      if (data[i].display) {\n        data[i].x = rects[j][1] + data[i].expandx * 0.66 - data[i].padding / 2 + data[i].dx\n        data[i].y = rects[j][0] + data[i].height + data[i].expandy - data[i].padding / 2\n        data[i].dx = 0\n        data[i].dy = 0\n        ++j\n      } else {\n        data[i].x = center[0] - data[i].width / 2 - data[i].padding / 2\n        data[i].y = size[1] * data[i].rangey[2] + data[i].height / 2 - data[i].padding / 2\n      }\n    }\n    let end_time = new Date()\n    // console.log('wordcloud time cost', end_time - start_time)\n    callback(data)\n    // console.log('callback time cost', +new Date() - start_time)\n  }\n\n  self.data = function (x) {\n    return arguments.length ? (words = x, self) : words\n  }\n\n  self.center = function (x) {\n    if (arguments.length) {\n      center = [+x[0], +x[1]]\n      return self\n    } else {\n      return center\n    }\n  }\n\n  self.size = function (x) {\n    if (arguments.length) {\n      size = [+x[0], +x[1]]\n      rows = []\n      cols = []\n      return self\n    } else {\n      return size\n    }\n  }\n\n  self.font = function (x) {\n    return arguments.length ? (font = functor(x), self) : font\n  }\n\n  self.fontStyle = function (x) {\n    return arguments.length ? (fontStyle = functor(x), self) : fontStyle\n  }\n\n  self.fontWeight = function (x) {\n    return arguments.length ? (fontWeight = functor(x), self) : fontWeight\n  }\n\n  self.barriers = function (x) {\n    return arguments.length ? (barriers = x, self) : barriers\n  }\n\n  self.text = function (x) {\n    return arguments.length ? (text = functor(x), self) : text\n  }\n\n  self.expandx = function (x) {\n    return arguments.length ? (expandx = functor(x), self) : expandx\n  }\n\n  self.flexible = function (x) {\n    return arguments.length ? (flexible = functor(x), self) : flexible\n  }\n\n  self.keepFirst = function(x) {\n    return arguments.length ? (keepFirst = functor(x), self) : keepFirst\n  }\n\n\n  self.expandy = function (x) {\n    return arguments.length ? (expandy = functor(x), self) : expandy\n  }\n\n\n  self.rangex = function (x) {\n    return arguments.length ? (rangex = functor(x), self) : rangex\n  }\n\n  self.rangey = function (x) {\n    return arguments.length ? (rangey = functor(x), self) : rangey\n  }\n\n  self.flexible = function (x) {\n    return arguments.length ? (flexible = functor(x), self) : flexible\n  }\n\n  self.fontSize = function (x) {\n    return arguments.length ? (fontSize = functor(x), self) : fontSize\n  }\n\n  self.padding = function (x) {\n    return arguments.length ? (padding = functor(x), self) : padding\n  }\n\n  function functor(x) {\n    return typeof x === \"function\" ? x : function () { return x }\n  }\n\n  function cloudFlexible(d) {\n    return 0\n  }\n\n  function cloudExpandx(d) {\n    return 0\n  }\n\n  function cloudExpandy(d) {\n    return 0\n  }\n\n  function cloudText(d) {\n    return d.text\n  }\n\n  function cloudFont() {\n    return \"Arial\"\n  }\n\n  function cloudFontNormal() {\n    return \"normal\"\n  }\n\n  function cloudFontSize(d) {\n    return Math.sqrt(d.value)\n  }\n\n  function cloudRangex(d) {\n    return [0, 1, 0.5]\n  }\n\n  function cloudRangey(d) {\n    return [0, 1, 0.5]\n  }\n\n  function cloudPadding() {\n    return 1\n  }\n\n  return self\n}\n\nexport default wordcloud\n","import * as d3 from \"d3\";\nimport { drag } from \"d3-drag\";\nimport classifyPoint from \"robust-point-in-polygon\";\n\nexport default function () {\n\n  var items = [],\n    closePathDistance = 75,\n    closePathSelect = true,\n    isPathClosed = false,\n    hoverSelect = true,\n    targetArea,\n    on = { start: function () { }, draw: function () { }, end: function () { } };\n\n  // Function to execute on call\n  function lasso(_this) {\n\n    // add a new group for the lasso\n    var g = _this.append(\"g\")\n      .attr(\"class\", \"lasso\");\n\n    // add the drawn path for the lasso\n    var dyn_path = g.append(\"path\")\n      .attr(\"class\", \"drawn\");\n\n    // add a closed path\n    var close_path = g.append(\"path\")\n      .attr(\"class\", \"loop_close\");\n\n    // add an origin node\n    var origin_node = g.append(\"circle\")\n      .attr(\"class\", \"origin\");\n\n    // The transformed lasso path for rendering\n    var tpath;\n\n    // The lasso origin for calculations\n    var origin;\n\n    // The transformed lasso origin for rendering\n    var torigin;\n\n    // Store off coordinates drawn\n    var drawnCoords;\n\n    // Apply drag behaviors\n    var current_drag = drag()\n      .on(\"start\", dragstart)\n      .on(\"drag\", dragmove)\n      .on(\"end\", dragend);\n\n    // Call drag\n    targetArea.call(current_drag);\n\n    function dragstart() {\n      // Init coordinates\n      drawnCoords = [];\n\n      // Initialize paths\n      tpath = \"\";\n      dyn_path.attr(\"d\", null);\n      close_path.attr(\"d\", null);\n\n      // Set every item to have a false selection and reset their center point and counters\n      items.nodes().forEach(function (e) {\n        e.__lasso.possible = false;\n        e.__lasso.selected = false;\n        e.__lasso.hoverSelect = false;\n        e.__lasso.loopSelect = false;\n\n        var box = e.getBoundingClientRect();\n        e.__lasso.lassoPoint = [Math.round(box.left + box.width / 2), Math.round(box.top + box.height / 2)];\n      });\n\n      // if hover is on, add hover function\n      if (hoverSelect) {\n        items.on(\"mouseover.lasso\", function () {\n          // if hovered, change lasso selection attribute to true\n          this.__lasso.hoverSelect = true;\n        });\n      }\n\n      // Run user defined start function\n      on.start();\n    }\n\n    function dragmove() {\n      // Get mouse position within body, used for calculations\n      var x, y;\n      if (d3.event.sourceEvent.type === \"touchmove\") {\n        x = d3.event.sourceEvent.touches[0].clientX;\n        y = d3.event.sourceEvent.touches[0].clientY;\n      }\n      else {\n        x = d3.event.sourceEvent.clientX;\n        y = d3.event.sourceEvent.clientY;\n      }\n\n\n      // Get mouse position within drawing area, used for rendering\n      var tx = d3.mouse(this)[0];\n      var ty = d3.mouse(this)[1];\n\n      // Initialize the path or add the latest point to it\n      if (tpath === \"\") {\n        tpath = tpath + \"M \" + tx + \" \" + ty;\n        origin = [x, y];\n        torigin = [tx, ty];\n        // Draw origin node\n        origin_node\n          .attr(\"cx\", tx)\n          .attr(\"cy\", ty)\n          .attr(\"r\", 7)\n          .attr(\"display\", null);\n      }\n      else {\n        tpath = tpath + \" L \" + tx + \" \" + ty;\n      }\n\n      drawnCoords.push([x, y]);\n\n      // Calculate the current distance from the lasso origin\n      var distance = Math.sqrt(Math.pow(x - origin[0], 2) + Math.pow(y - origin[1], 2));\n\n      // Set the closed path line\n      var close_draw_path = \"M \" + tx + \" \" + ty + \" L \" + torigin[0] + \" \" + torigin[1];\n\n      // Draw the lines\n      dyn_path.attr(\"d\", tpath);\n\n      close_path.attr(\"d\", close_draw_path);\n\n      // Check if the path is closed\n      isPathClosed = distance <= closePathDistance ? true : false;\n\n      // If within the closed path distance parameter, show the closed path. otherwise, hide it\n      if (isPathClosed && closePathSelect) {\n        close_path.attr(\"display\", null);\n      }\n      else {\n        close_path.attr(\"display\", \"none\");\n      }\n\n      items.nodes().forEach(function (n) {\n        n.__lasso.loopSelect = (isPathClosed && closePathSelect) ? (classifyPoint(drawnCoords, n.__lasso.lassoPoint) < 1) : false;\n        n.__lasso.possible = n.__lasso.hoverSelect || n.__lasso.loopSelect;\n      });\n\n      on.draw();\n    }\n\n    function dragend() {\n      // Remove mouseover tagging function\n      items.on(\"mouseover.lasso\", null);\n\n      items.nodes().forEach(function (n) {\n        n.__lasso.selected = n.__lasso.possible;\n        n.__lasso.possible = false;\n      });\n\n      // Clear lasso\n      dyn_path.attr(\"d\", null);\n      close_path.attr(\"d\", null);\n      origin_node.attr(\"display\", \"none\");\n\n      // Run user defined end function\n      on.end();\n    }\n  }\n\n  // Set or get list of items for lasso to select\n  lasso.items = function (_) {\n    if (!arguments.length) return items;\n    items = _;\n    var nodes = items.nodes();\n    nodes.forEach(function (n) {\n      n.__lasso = {\n        \"possible\": false,\n        \"selected\": false\n      };\n    });\n    return lasso;\n  };\n\n  // Return possible items\n  lasso.possibleItems = function () {\n    return items.filter(function () {\n      return this.__lasso.possible;\n    });\n  }\n\n  // Return selected items\n  lasso.selectedItems = function () {\n    return items.filter(function () {\n      return this.__lasso.selected;\n    });\n  }\n\n  // Return not possible items\n  lasso.notPossibleItems = function () {\n    return items.filter(function () {\n      return !this.__lasso.possible;\n    });\n  }\n\n  // Return not selected items\n  lasso.notSelectedItems = function () {\n    return items.filter(function () {\n      return !this.__lasso.selected;\n    });\n  }\n\n  // Distance required before path auto closes loop\n  lasso.closePathDistance = function (_) {\n    if (!arguments.length) return closePathDistance;\n    closePathDistance = _;\n    return lasso;\n  };\n\n  // Option to loop select or not\n  lasso.closePathSelect = function (_) {\n    if (!arguments.length) return closePathSelect;\n    closePathSelect = _ === true ? true : false;\n    return lasso;\n  };\n\n  // Not sure what this is for\n  lasso.isPathClosed = function (_) {\n    if (!arguments.length) return isPathClosed;\n    isPathClosed = _ === true ? true : false;\n    return lasso;\n  };\n\n  // Option to select on hover or not\n  lasso.hoverSelect = function (_) {\n    if (!arguments.length) return hoverSelect;\n    hoverSelect = _ === true ? true : false;\n    return lasso;\n  };\n\n  // Events\n  lasso.on = function (type, _) {\n    if (!arguments.length) return on;\n    if (arguments.length === 1) return on[type];\n    var types = [\"start\", \"draw\", \"end\"];\n    if (types.indexOf(type) > -1) {\n      on[type] = _;\n    }\n    return lasso;\n  };\n\n  // Area where lasso can be triggered from\n  lasso.targetArea = function (_) {\n    if (!arguments.length) return targetArea;\n    targetArea = _;\n    return lasso;\n  }\n\n\n\n  return lasso;\n};","import Vue from 'vue'\n\nconst bus = new Vue()\nexport default bus","\nexport function stepSizeScale(range, values, n_steps = 5, steps = null) {\n    values = values.sort((a, b) => b - a);\n    if (!steps) {\n      steps = [];\n      for (let i = 0; i < n_steps; ++i) {\n        steps.push(2 << i);\n      }\n    }\n    return (x) => {\n      for (\n        let step = steps[0], i = step - 1, j = 0;\n        i < values.length && j < n_steps - 1;\n        j++, step += steps[j], i += step\n      ) {\n        if (x >= values[i]) {\n          let ratio = (n_steps - 1 - j) / (n_steps - 1);\n          ratio = ratio ** 1.33;\n          return (\n            range[0] + (range[1] - range[0]) * ratio + (x - values[i]) * 0.01\n          );\n        }\n      }\n      return range[0];\n    }\n}\n  \nexport function getValuesByEntropy(words, self, layer) {\n    let max_entropy, max_freq;\n    max_freq = Math.max(...words.map((d) => d.frequency));\n    max_entropy = Math.max(...words.map((d) => d.entropy));\n    words.forEach((d) => {\n      let term1, term2;\n      term1 = (d.entropy / max_entropy) ** 1.4\n      term2 = Math.log(1 + d.frequency)\n      \n      if (self.n_layer == 4) {\n        if (words.length > 400) {\n          term1 = (d.entropy / max_entropy) * 1.4\n          term2 = Math.log(1 + d.frequency) ** .66\n        } else {\n          term1 = (d.entropy / max_entropy) * 1.2\n          term2 = Math.log(1 + d.frequency) ** .7\n        }\n      } else if (self.dataset_name != \"agnews\") {\n        term1 = (d.entropy / max_entropy) ** 1.2;\n        \n        if (layer == 12)\n          if (d.word == \"love\" || d.word == \"little\") term1 *= 1.2;\n          if (d.word == \"just\") term1 *= 1.4\n        if (d.word == \"funnier\") term1 *= 0.85\n        if (d.word == \"oddly\") term1 *= 0.85\n        if (layer == -1) {\n          if (d.word == \"like\") term1 *= 1.6;\n        } else {\n          if (d.word == \"movie\") term1 *= 0.95;\n          if (d.word == \"care\") term1 *= 1.2;\n        }\n        \n        term2 = Math.log(1 + d.frequency);\n      } else {\n        term1 = (d.entropy / max_entropy) ** 1.35;\n        term2 = Math.log(1 + d.frequency);\n      }\n      \n      d.value = term1 * term2;\n      if (self.dataset_name == \"agnews\") {\n        if (\"hp, google, apple, microsoft\".indexOf(d.word) != -1) d.value *= 1.15;\n        if (layer == 12) {\n          if (\"google\".indexOf(d.word) != -1) d.value *= 1.5;\n          if (\"apple, hp\".indexOf(d.word) != -1) d.value *= 1.5;\n          if (\"antitrust\".indexOf(d.word) != -1) d.value *= 2.8;\n        }\n        if ('bullet, jeopardizing, affect, drift, dealregulators, procurement, terrorized, disproportionately, mystery, consumer'.indexOf(d.word) != -1) d.value *= 0.8\n        if ('inspired, compusa, parce'.indexOf(d.word) != -1) d.value *= 0.6\n        if ('the, for, on, of, in, and, to, its, corp, but, end'.indexOf(d.word) != -1) d.value *= 0.8\n      } else {\n        if (self.n_layer == 4) {\n          if (words.length < 350 && d.word == 'deceptively') d.value = 0\n          if (d.word == \"sympathizing\")d.value *= .85\n          if (d.word == \"crucifixion\") d.value *= .85\n          if (d.word == \"anachronistic\") d.value *= .75\n          if (d.word == \"uncompromising\") d.value *= .85\n          if (d.word == \"minimalist\") d.value *= .8\n          /*\n          if (d.word == \"laughs\" || d.word == \"some\" || d.word == \"that\") d.value *= 1.1;\n          if (d.word == \"kosashvili\") d.value *= .85\n          if (d.word == \"morrison\") d.value *= 2\n          if (layer < self.n_layer && 'the, has, that, for, on, of, in, and, to, its, corp, but, end, canadian'.indexOf(d.word) != -1) d.value *= 0.9\n          */\n        } else {\n          if (d.word == \"dvd\") d.value *= 2;\n          if (d.word == \"care\") d.value *= 1.15;\n          if (d.word == \"attal\") d.value *= 1.2\n          if (d.word == \"screen\") d.value *= .9\n        }\n        \n      }\n    });\n  \n    words = words.sort((a, b) => b.value - a.value);\n    // console.log('layer', layer, words)\n}\n\nexport function getWordColor(self, d) {\n  if (d.prediction_score) {\n    if (d.prediction_score > 0.72) {\n      return self.positiveColor;\n    } else if (d.prediction_score < 0.29) {\n      return self.negativeColor;\n    } else {\n      return self.neutralColorGray;\n    }\n  }\n  /*\n  if (d.word == 'oddly') {\n    if (d.contri.neg < d.contri.pos) {\n      let delta = d.contri.pos - d.contri.neg\n      d.contri.neu += delta\n      d.contri.pos -= delta\n    }\n  }*/\n  if (d.word == 'funny') {\n    if (d.contri.neg > d.contri.pos) {\n      d.contri.neu += d.contri.neg - d.contri.pos\n      d.contri.neg = d.contri.pos\n    }\n  }\n  if (d.word == 'better' || d.word == 'its') {\n    if (d.contri.neg > d.contri.pos) {\n      d.contri.neu += d.contri.neg - d.contri.pos\n      d.contri.neg = d.contri.pos\n    }\n  }\n  if (d.word == 'awful' || d.word == 'halliburton' || d.word == 'housing') {\n    if (d.contri.neg <= d.contri.pos) {\n      let delta = d.contri.pos - d.contri.neg\n      d.contri.neg += delta + 1\n      d.contri.pos -= delta + 1\n    }\n  }\n  if (d.word == 'antitrust') {\n    if (d.contri.pos <= d.contri.neu) {\n      let delta = d.contri.neu - d.contri.pos\n      d.contri.pos += delta\n      d.contri.neu -= delta\n    }\n  }\n  const pos = d.contri.pos\n  const neg = d.contri.neg\n  const neu = d.contri.neu\n  if (neg > pos && neg >= neu - 1) {\n    return self.negativeColor;\n  } else if (pos > neg && pos >= neu - 1) {\n    return self.positiveColor;\n  } else {\n    return self.neutralColorGray;\n  }\n}","\nimport * as d3 from \"d3\"\nimport wordcloud from \"../plugins/wordcloud\"\nimport { stepSizeScale, getValuesByEntropy } from \"../plugins/utils\"\nimport bus from \"../plugins/bus\"\n\nexport async function paintLineChart(self, highlight_word = null, font_size) {\n    const sleep = (timeout) =>\n      new Promise((resolve) => {\n        setTimeout(resolve, timeout)\n      })\n  \n    const remove_discarded_attr = true\n    let linechart = d3.select(\"#linechart-g\")\n    let n = self.layers.length\n    let padding = self.linechart.padding + 5\n    let width = self.viewbox.linechart.width - padding * 2\n    let height = self.viewbox.linechart.height - padding - 25\n    let chartline = null\n    window.layers = self.layers\n  \n    if (linechart.select(\".chartline\").empty()) {\n      chartline = linechart\n        .append(\"g\")\n        .attr(\"class\", \"chartline\")\n        .attr(\"transform\", `translate(${padding},${0})`);\n    } else {\n      chartline = linechart.select(\".chartline\");\n    }\n  \n    linechart = chartline;\n    linechart.selectAll(\"*\").remove();\n  \n    // let xScale = d3.scaleLinear().domain([1, n]).range([0, width])\n    let xScale = d3\n      .scaleLinear()\n      .range([0, width])\n      .domain(d3.extent(self.layers, (d) => d.index));\n    let entropy_range = [0, 1];\n    let yScale = d3.scaleLinear().domain(entropy_range).range([height, 0]);\n  \n    let line = d3\n      .line()\n      .x(function (d, i) {\n        return xScale(d.index);\n      })\n      .y(function (d) {\n        return yScale(d.info);\n      })\n      .curve(d3.curveMonotoneX);\n  \n    // 3. Call the x axis in a group tag\n    let xAxis = linechart\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(\n        d3\n          .axisBottom(xScale)\n          .tickValues(self.layers.map((d, i) => i))\n          .tickFormat((d) => ~~d)\n      );\n    xAxis.selectAll(\"text\").attr(\"dx\", -(xScale(1) - xScale(0)) * 0.5); // Create an axis component with d3.axisBottom\n  \n    xAxis\n      .append(\"text\")\n      .attr(\"x\", width + 5)\n      .attr(\"y\", 20)\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"fill\", \"#000\")\n      .attr(\"font-size\", \"16px\")\n      .text(\"Layer\");\n  \n    xAxis\n      .selectAll(\"text\")\n      .attr(\"font-size\", \"16px\")\n      //.style('font-weight', 600)\n      .style(\"font-family\", \"Roboto, san-serif\");\n  \n    let yAxis = linechart\n      .append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .call(\n        d3.axisLeft(yScale).tickFormat((d) => Math.floor(d * 100 + 1e-3) + \"%\")\n      ); // Create an axis component with d3.axisLeft\n  \n    yAxis\n      .append(\"text\")\n      .attr(\"x\", -20)\n      .attr(\"y\", -7)\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"fill\", \"#000\")\n      .attr(\"font-size\", \"16px\")\n      .text(\"Word Contribution Percentile\")\n      .style(\"font-family\", \"sans-serif\");\n\n    yAxis\n      .selectAll(\"text\")\n      .attr(\"font-size\", \"16px\")\n      //.style('font-weight', 600)\n      .style(\"font-family\", \"Roboto, san-serif\");\n  \n    linechart\n      .append(\"path\")\n      .attr(\"class\", \"line\") // Assign a class for styling\n      .attr(\"d\", line(self.layers))\n      .style(\"fill\", \"none\")\n      .style(\"opacity\", 0.6)\n      .style(\"stroke\", (d, i) => \"gray\")\n      .style(\"stroke-width\", 3)\n      .style(\"display\", \"none\")\n  \n    let dots = linechart\n      .selectAll(\".dot\")\n      .data(self.layers)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"dot\")\n      .attr(\"cx\", function (d, i) {\n        return xScale(d.index);\n      })\n      .attr(\"cy\", function (d) {\n        return yScale(d.info);\n      })\n      .attr(\"r\", 3)\n      .style(\"fill\", (d) => \"gray\")\n      .style(\"opacity\", 0.5)\n      .style(\"display\", \"none\")\n  \n    let all_words = [];\n  \n    let highlight_set = new Set();\n    if (highlight_word) {\n      for (let i = 0; i < highlight_word.retained_words.length; ++i) {\n        if (!highlight_word.retained_words[i]) continue;\n        for (let d of highlight_word.retained_words[i]) {\n          highlight_set.add(d[0]);\n        }\n      }\n      for (let i = 0; i < highlight_word.discarded_words.length; ++i) {\n        if (!highlight_word.discarded_words[i]) continue;\n        for (let d of highlight_word.discarded_words[i]) {\n          highlight_set.add(d[0]);\n        }\n      }\n    }\n  \n    let important_words = new Set()\n    let preserve_words = new Set()\n    for (let i = 0; i < self.layers.length; ++i) {\n      if (self.layers[i].words) {\n        important_words = new Set(\n          self.layers[i].words\n            .sort((a, b) => b.value - a.value)\n            .slice(0, 3)\n            .map((d) => d.word)\n        )\n      }\n    }\n  \n    let first_words = null,\n      last_words = null;\n    let word_counts = {};\n    for (let i = 0; i < self.layers.length; ++i) {\n      if (self.layers[i].words) {\n        getValuesByEntropy(self.layers[i].words, self, i);\n        let layer = self.layers[i];\n        let words = layer.words.sort((a, b) => b.value - a.value);\n        if (!first_words) first_words = words;\n        last_words = words;\n        let max_size = font_size[1]\n        /*\n        let best_power = 2,\n          min_delta = 1e8;\n  \n        for (let power = 0.25; power <= 5; power += 0.05) {\n          const sizeScale = d3\n            .scalePow()\n            .exponent(power)\n            .domain(global_value_range)\n            .range(global_font_size_range);\n          let current = words\n            .map((d) => Math.min(sizeScale(d.value), max_size) / max_size)\n            .filter((d) => !isNaN(d));\n          let target = last_font_size_distribution;\n          let delta = 0;\n          for (let i = 0; i < current.length && i < target.length; ++i) {\n            delta += (current[i] - target[i]) * (current[i] - target[i]);\n          }\n          // break\n          if (delta < min_delta) {\n            min_delta = delta;\n            best_power = power;\n          }\n        }\n        const sizeScale = d3\n          .scalePow()\n          .exponent(best_power)\n          .domain(global_value_range)\n          .range(global_font_size_range)\n        */\n        let sizeScale;\n        if (self.n_layer == 4) {\n          sizeScale = stepSizeScale(\n            font_size,\n            words.map((d) => d.value),\n            4,\n            [4, 7, 12]\n          );\n        } else {\n          sizeScale = stepSizeScale(\n            font_size,\n            words.map((d) => d.value),\n            4,\n            [1, 4, 8]\n          );\n        }\n  \n        words.forEach((d) => {\n          d.size = Math.min(sizeScale(d.value), max_size);\n        });\n  \n        // console.log('best power', i, best_power, min_delta)\n  \n        let last = layer.word_range[0];\n        let next = layer.word_range[1];\n        let x0 = xScale(last);\n        let x1 = xScale(next);\n        if (next - last >= 1) {\n          x0 += 9;\n          x1 -= 9;\n        }\n  \n        words = words.sort((a, b) => {\n          if (highlight_set.has(a.word)) {\n            return 1;\n          } else if (highlight_set.has(b.word)) {\n            return -1;\n          }\n          return b.value - a.value;\n        });\n  \n        for (let d of words) {\n          d.stroke = \"none\";\n          d.stroke_width = 1.5;\n          d.fill = self.getWordColor(d);\n          /*\n          if (d.status != \"retained\") {\n            if (d.status == \"old_discarded\") {\n              d.fill = self.neutralColorGray //\"lightgray\";\n            } else {\n              d.fill = self.neutralColorGray\n            }\n          } else {\n            d.fill = self.getWordColor(d);\n          }*/\n          d.highlight = highlight_set.has(d.word);\n          // d.opacity = d.status == 'old_discarded' ? 0.5 : 1\n        }\n  \n        let barriers = [];\n        let delta_x = (x1 - x0) / 20;\n        let delta_y = (next - last) / 20;\n        for (let k = 0; k < 20; ++k) {\n          let y0 = last + delta_y * k,\n            y1;\n          let d = y0 % 1;\n          y0 -= d;\n          y1 = y0 + 1;\n          // console.log(y0, y1)\n          y0 = yScale(self.layers[y0].info);\n          y1 = yScale(self.layers[y1].info);\n          y0 = y0 * (1 - d) + y1 * d;\n          barriers.push({\n            x0: delta_x * k,\n            x1: delta_x * (k + 1),\n            y0: y0 - 3,\n            y1: height,\n          });\n        }\n        if (remove_discarded_attr) {\n          barriers = []\n        }\n        let retained_words = words\n\n        if (!remove_discarded_attr) {\n          retained_words = retained_words\n            .filter((d) => d.status == \"retained\" && d.word.length > 1)\n        }\n        retained_words = retained_words\n          .sort((a, b) => {\n            if (a.size != b.size) {\n              return b.size - a.size\n            } else {\n              return b.value - a.value\n            }\n          })\n        let topk = 5;\n        for (let k = 0; k < topk; ++k) {\n          retained_words[k].expandx = 16;\n        }\n        for (let k = topk; k < retained_words.length; ++k) {\n          retained_words[k].expandx = 0;\n        }\n  \n\n        // console.log(retained_words.map((d) => d.word).slice(0, 10));\n        await wordcloud()\n          .size([x1 - x0, height])\n          .data(retained_words)\n          .text((d) => d.word)\n          .font(\"Roboto\")\n          .padding(7)\n          .keepFirst(\n            (d) =>\n              important_words.has(d.word) || (i == 11)\n          )\n          .expandx((d) => d.expandx)\n          .expandy(0)\n          .fontSize((d) => d.size)\n          .fontStyle((d) => \"normal\")//(d.status == \"retained\" ? \"normal\" : \"italic\"))\n          .fontWeight((d) => \"bold\")\n          .rangey((d) => [\n            Math.max(0, 1 - d.yaxis - 0.1),\n            Math.min(\n              1,\n              next == xScale.domain()[1] ? 1 - d.yaxis + 0.3 : 1 - d.yaxis + 0.25\n            ),\n            1 - d.yaxis,\n          ])\n          .barriers(barriers)\n          .start((words) => {\n            // console.log(words.slice(0, 5))\n            let max_words = 100,\n              max_words_per_line = 6,\n              n_words = 0,\n              count_words = {};\n  \n            if (self.n_layer == 4) {\n              max_words_per_line = 120;\n              max_words_per_line = 8;\n            }\n            console.log(`layer${i}`, words) \n            words = words\n              // .filter((d) => d.display)\n              .map((d) => ({\n                x: d.x + x0 + 8,\n                y: d.y,\n                display: d.display,\n                size: d.size,\n                text: d.text,\n                width: d.width,\n                height: d.height,\n                layer: i,\n                style: d.style,\n                weight: d.weight,\n                id: 0,\n                highlight: d.highlight,\n                fill: d.fill,\n                stroke: d.stroke,\n                contri: d.contri,\n                glyph: d.expandx > 0 && d.display,\n                stroke_width: d.stroke_width,\n                opacity: d.opacity,\n              }));\n  \n            for (let d of words)\n              if (d.display) {\n                let y = ~~((d.y / height) * 10);\n                count_words[y] = count_words[y] || 0;\n                if (count_words[y] >= max_words_per_line && !preserve_words.has(d.text)) {\n                  d.display = 0;\n                  continue;\n                }\n                count_words[y]++;\n              }\n  \n            for (let d of words)\n              if (d.display) {\n                if (n_words >= max_words) {\n                  d.display = 0;\n                  continue;\n                }\n                n_words++;\n                word_counts[d.text] = (word_counts[d.text] || 0) + 1;\n              }\n            // .slice(0, 100);\n            all_words = all_words.concat(words);\n          });\n\n      \n        preserve_words = new Set(\n          retained_words\n            .filter(d => d.size > retained_words[retained_words.length - 1].size)\n            .map(d => d.word)\n        )\n  \n        if (remove_discarded_attr) {\n          continue\n        }\n\n        barriers = [];\n        for (let k = 0; k < 20; ++k) {\n          let y0 = last + delta_y * k,\n            y1;\n          let d = y0 % 1;\n          y0 -= d;\n          y1 = y0 + 1;\n          y0 = yScale(self.layers[y0].info);\n          y1 = yScale(self.layers[y1].info);\n          y0 = y0 * (1 - d) + y1 * d;\n          barriers.push({\n            x0: delta_x * k,\n            x1: delta_x * (k + 1),\n            y0: 0,\n            y1: y0 + 8,\n          });\n        }\n        let discarded_words = words.filter((d) => d.status != \"retained\");\n        await wordcloud()\n          .size([x1 - x0, height])\n          .data(discarded_words)\n          .text((d) => d.word)\n          .font(\"Roboto\")\n          .padding(8)\n          .fontSize((d) => d.size)\n          .fontStyle((d) => \"normal\")//(d.status == \"retained\" ? \"normal\" : \"italic\"))\n          .fontWeight((d) => \"bold\")\n          .rangey((d) => [\n            Math.max(0, 1 - d.yaxis - 0.1),\n            Math.min(1, 1 - d.yaxis + 0.3),\n            1 - d.yaxis,\n          ])\n          .barriers(barriers)\n          .start((words) => {\n            words = words\n              // .filter((d) => d.display)\n              .map((d) => ({\n                x: d.x + x0 + 8,\n                y: d.y,\n                size: d.size,\n                text: d.text,\n                width: d.width,\n                height: d.height,\n                layer: i,\n                contri: d.contri,\n                style: d.style,\n                display: d.display,\n                weight: d.weight,\n                id: 1,\n                highlight: d.highlight,\n                fill: d.fill,\n                stroke: d.stroke,\n                stroke_width: d.stroke_width,\n                opacity: d.opacity,\n              }));\n            let max_words = 75,\n              max_words_per_line = 8,\n              n_words = 0,\n              count_words = {};\n  \n            for (let d of words)\n              if (d.display) {\n                let y = ~~((d.y / height) * 10);\n                count_words[y] = count_words[y] || 0;\n                if (count_words[y] >= max_words_per_line) {\n                  d.display = 0;\n                  continue;\n                }\n                count_words[y]++;\n              }\n  \n            for (let d of words)\n              if (d.display) {\n                if (n_words >= max_words) {\n                  d.display = 0;\n                  continue;\n                }\n                n_words++;\n                word_counts[d.text] = (word_counts[d.text] || 0) + 1;\n              }\n            //.slice(0, 50);\n            all_words = all_words.concat(words);\n          });\n      }\n    }\n  \n    let down_words = first_words\n      .filter((d) => d.display)\n      .sort((a, b) => b.value - a.value)\n      .slice(0, 20);\n  \n    // for (let x of down_words) console.log('down', x.word, x.line)\n    down_words = down_words.filter(\n      (d) =>\n        (d.line[0] > d.line[d.line.length - 1] + 5 &&\n          d.line[0] >= d.line[d.line.length - 2] &&\n          d.line[d.line.length - 2] >= d.line[d.line.length - 1] &&\n          d.line[1] > 40 &&\n          d.line[d.line.length - 1] <= 65 &&\n          word_counts[d.word] >= 3) ||\n        d.word == \"film\"\n    );\n  \n    down_words = down_words.filter((d) => d.word.length > 2).slice(0, 2);\n  \n    down_words = down_words.map((d) => d.word);\n  \n    let down_word_lines = down_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d)\n            .map((e) => [\n              { x: e.x, y: e.y - e.size / 4 },\n              { x: e.x + e.width, y: e.y - e.size / 4 },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let up_words = last_words\n      .filter((d) => d.display)\n      .sort((a, b) => b.value - a.value)\n      .slice(0, 20)\n      .filter(\n        (d) =>\n          d.line[0] < d.line[d.line.length - 1] - 10 &&\n          d.line[0] <= d.line[d.line.length - 2] &&\n          d.line[d.line.length - 2] <= d.line[d.line.length - 1] &&\n          d.line[1] > 40 &&\n          d.line[d.line.length - 1] >= 60 &&\n          word_counts[d.word] >= 3\n      );\n  \n    up_words = up_words\n      .filter((d) => d.word.length > 2)\n      .slice(0, 2)\n      .map((d) => d.word);\n  \n    let up_word_lines = up_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d)\n            .map((e) => [\n              { x: e.x, y: e.y - e.size / 4 },\n              { x: e.x + e.width, y: e.y - e.size / 4 },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let down_word_underlines = down_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d && e.display)\n            .map((e) => [\n              {\n                x1: e.x + 20,\n                y1: e.y + e.size / 4,\n                x2: e.x + e.width + 20,\n                y2: e.y + e.size / 4,\n              },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let up_word_underlines = up_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d && e.display)\n            .map((e) => [\n              {\n                x1: e.x + 20,\n                y1: e.y + e.size / 4,\n                x2: e.x + e.width + 20,\n                y2: e.y + e.size / 4,\n              },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let highlight_line = d3\n      .line()\n      .x(function (d, i) {\n        return d.x;\n      })\n      .y(function (d) {\n        return d.y;\n      })\n      .curve(d3.curveMonotoneX);\n  \n    up_word_lines = up_word_lines.map((d) => highlight_line(d));\n    down_word_lines = down_word_lines.map((d) => highlight_line(d));\n  \n    self.trending_up_lines = up_word_lines;\n    self.trending_down_lines = down_word_lines;\n    self.trending_up_underlines = up_word_underlines;\n    self.trending_down_underlines = down_word_underlines;\n    /*\n    function wordInteraction(word) {\n      let hover_word_item = null;\n      return word\n        .on(\"click\", async (d) => {\n          if (self.enable_word_filter) {\n            let resp = self.word_cache[d.text];\n            let idxs;\n            if (resp) {\n              idxs = resp.data.idxs;\n            } else {\n              idxs = self.sentences\n                .filter((e, i) => e.text.indexOf(d.text) != -1)\n                .map((e) => e.index);\n            }\n            let oldidxs = new Set(self.current_items.map((e) => e.index));\n            idxs = idxs.filter((e) => !oldidxs.has(e));\n            resp = await self.getSamples(idxs);\n            self.current_items = resp\n              .concat(self.current_items)\n              .sort(\n                (a, b) =>\n                  (a.text.indexOf(d.text) == -1) - (b.text.indexOf(d.text) == -1)\n              );\n          } else {\n            let resp = self.word_cache[d.text];\n            let idxs;\n            if (resp) {\n              idxs = resp.data.idxs;\n            } else {\n              idxs = self.sentences\n                .filter((e, i) => e.text.indexOf(d.text) != -1)\n                .map((e) => e.index);\n            }\n            let oldidxs = new Set(self.current_items.map((e) => e.index));\n            idxs = idxs.filter((e) => !oldidxs.has(e));\n            if (idxs.length >= 10) self.addWordDAG(d.text);\n          }\n        })\n        .on(\"mouseover\", (d) => {\n          if (\n            !isalpha(d.text) ||\n            d.text.length <= 1 ||\n            d.text.indexOf(\"_\") != -1\n          ) {\n            return;\n          }\n          hover_word_item = d.text;\n          let left = d3.event.pageX + 10;\n          let top = d3.event.pageY - 10;\n          const show_detail = async () => {\n            let resp = null;\n            if (self.word_cache[d.text]) {\n              resp = self.word_cache[d.text];\n            } else {\n              resp = await axios.post(`${this.server_url}/api/word`, {\n                word: d.text,\n              });\n              self.word_cache[d.text] = resp;\n            }\n            let idxs = resp.data.idxs;\n  \n            if (self.enable_word_filter) {\n            } else {\n              let info = resp.data.info;\n              for (let i = 1; i < info.length; ++i) {\n                info[i] = Math.min(info[i - 1], info[i]);\n              }\n              info = info.map((e) => ({ info: e }));\n  \n              linechart\n                .append(\"path\")\n                .attr(\"class\", \"exline\") // Assign a class for styling\n                .attr(\"d\", line(info))\n                .style(\"fill\", \"none\")\n                .style(\"opacity\", 0.6)\n                .style(\"stroke\", d.fill)\n                .style(\"stroke-width\", 3);\n  \n              linechart\n                .selectAll(\".exdot\")\n                .data(info)\n                .enter()\n                .append(\"circle\")\n                .attr(\"class\", \"exdot\")\n                .attr(\"cx\", function (d, i) {\n                  return xScale(i + 1);\n                })\n                .attr(\"cy\", function (d) {\n                  return yScale(d.info);\n                })\n                .attr(\"r\", 3)\n                .style(\"fill\", d.fill)\n                .style(\"opacity\", 0.5);\n  \n              chartword.style(\"opacity\", 0.5);\n            }\n  \n            self.highlightGrid(idxs);\n  \n            if (self.enable_word_filter) {\n            } else {\n              let text = `<p>${d.text}, ${idxs.length} samples </p>`;\n  \n              resp = await self.getSamples(idxs);\n              text =\n                text +\n                resp\n                  .slice(0, 8)\n                  .map((e, index) => `#${index + 1}: ${e.text}`)\n                  .join(\"</br>\");\n              if (hover_word_item == d.text) {\n                self.showTooltip({ top, left, content: text });\n              }\n            }\n          };\n          setTimeout(() => {\n            if (hover_word_item == d.text) {\n              show_detail();\n            }\n          }, 500);\n        })\n        .on(\"mouseout\", (d) => {\n          hover_word_item = null;\n          self.hideTooltip();\n          self.highlightGrid(null);\n          linechart.selectAll(\".exline\").remove();\n          linechart.selectAll(\".exdot\").remove();\n          chartword.style(\"opacity\", 1);\n        });\n    }*/\n  \n    self.infolossWords = all_words\n  }\n  ","\nimport * as d3 from \"d3\"\nimport bus from \"../plugins/bus\"\nimport wordcloud from \"../plugins/wordcloud\"\nimport { stepSizeScale } from \"../plugins/utils\"\n\nexport function layoutDAGEdges(state, layers) {\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      if (d.in_edges && d.in_edges.length > 0) {\n        let tot_weight = 0\n        let height_threshold = 12\n        let weight_threshold = 0\n        let weights = []\n        for (let e of d.in_edges) weights.push(state.edges[e].weight)\n        let n = weights.length - 1\n        weights.sort((a, b) => b - a)\n\n        for (let e of d.in_edges) tot_weight += state.edges[e].weight\n        weight_threshold = height_threshold / d.height * tot_weight\n\n        for (let e of d.in_edges) {\n          if (state.edges[e].weight < weight_threshold && !state.edges[e].is_straight) {\n            tot_weight -= state.edges[e].weight\n            state.edges[e].weight = 0\n          }\n        }\n        tot_weight = 0\n        for (let e of d.in_edges) tot_weight += state.edges[e].weight\n\n        let curr_weight = 0\n        for (let e of d.in_edges) {\n          state.edges[e].x2 = d.x\n          state.edges[e].y3 = d.y + d.height * (curr_weight / tot_weight)\n          curr_weight += state.edges[e].weight\n          state.edges[e].y4 = d.y + d.height * (curr_weight / tot_weight)\n        }\n      }\n    })\n  }\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      if (d.out_edges && d.out_edges.length > 0) {\n        for (let j = 0; j < d.out_edges.length; ++j) {\n          let e = d.out_edges[j]\n          state.edges[e].x1 = d.x + d.width\n          state.edges[e].y1 = j == 0 ? d.y : (state.edges[d.out_edges[j - 1]].y2)\n          state.edges[e].y2 = state.edges[e].y1 + (state.edges[e].y4 - state.edges[e].y3)\n        }\n        let last = d.out_edges[d.out_edges.length - 1]\n        if (state.edges[last].y2 > d.y + d.height) {\n          let scale = d.height / (state.edges[last].y2 - d.y)\n          for (let j = 0; j < d.out_edges.length; ++j) {\n            let e = d.out_edges[j]\n            state.edges[e].y1 = (state.edges[e].y1 - d.y) * scale + d.y\n            state.edges[e].y2 = (state.edges[e].y2 - d.y) * scale + d.y\n            state.edges[e].y4 = (state.edges[e].y4 - state.edges[e].y3) * scale + state.edges[e].y3\n          }\n        }\n      }\n    })\n  }\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      for (let j = 0; j < d.in_edges.length; ++j) {\n        let e = d.in_edges[j]\n        let h = state.edges[e].y4 - state.edges[e].y3\n        state.edges[e].y3 = j == 0 ? d.y : (state.edges[d.in_edges[j - 1]].y4)\n        state.edges[e].y4 = state.edges[e].y3 + h\n      }\n    })\n  }\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      let last = d.in_edges.length - 1\n      if (last < 0) return\n      let e = d.in_edges[last]\n      if (state.edges[e].y4 < d.y + d.height) {\n        let delta = d.y + d.height - state.edges[e].y4\n        delta = delta / 2\n        for (let j = 0; j < d.in_edges.length; ++j) {\n          let e = d.in_edges[j]\n          state.edges[e].y3 += delta\n          state.edges[e].y4 += delta\n        }\n      }\n    })\n    layers[i].clusters.forEach(d => {\n      let last = d.out_edges.length - 1\n      if (last < 0) return\n      let e = d.out_edges[last]\n      if (state.edges[e].y2 < d.y + d.height) {\n        let delta = d.y + d.height - state.edges[e].y2\n        delta = delta / 2\n        for (let j = 0; j < d.out_edges.length; ++j) {\n          let e = d.out_edges[j]\n          state.edges[e].y1 += delta\n          state.edges[e].y2 += delta\n        }\n      }\n    })\n  }\n}\n\nexport async function paintWordDAG(self) {\n  let DAG = d3.select(\"#network-svg\")\n  DAG.selectAll(\"*\").remove();\n\n  let svg = DAG.selectAll(\"neuron-cluster\")\n    .data(self.neuron_clusters)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", \"neuron-cluster\")\n    .attr(\"transform\", (d) => `translate(${d.x},${d.y})`);\n\n  let timer = null\n  const on_mouseover = function (d) {\n    let left = d3.event.pageX + 10\n    let top = d3.event.pageY - 10\n    if (!d.idxs) return\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      d3.select(this)\n        .style(\"stroke-width\", 2.5)\n        .style(\"fill-opacity\", 0.3)\n      let text = \"\";\n      text = `<p>${d.idxs.length} samples in this cluster</p>\n      <p>The average prediction score is ${Number(d.prediction_score).toFixed(4)}</p>`\n      self.highlightGrid(d.idxs)\n      // self.showTooltip({ top, left, content: text })\n    }, 500)\n    /*\n    setTimeout(() => {\n      if (hover_grid_item == d) {\n        show_detail();\n      }\n    }, 500)*/\n  };\n  const on_mouseout = function (d) {\n    clearTimeout(timer)\n    d3\n      .select(this).style(\"stroke-width\", 1)\n      .style(\"fill-opacity\", 0.2)\n    if (!d.idxs) return\n    self.highlightGrid(null)\n    // self.hideTooltip()\n  };\n\n  const on_click = function (d) {\n    if (!d.idxs) return\n    if (!d.is_current_sample) {\n      bus.$emit(\"brush_grid\", d.idxs)\n      d.is_current_sample = 1\n    } else {\n      bus.$emit(\"brush_grid\", null)\n      d.is_current_sample = 0\n    }\n  };\n\n  svg\n    .append(\"rect\")\n    .attr(\"width\", (d) => d.width + 0.5)\n    .attr(\"height\", (d) => d.height + 0.5)\n    //.attr(\"rx\", 3)\n    //.attr(\"ry\", 3)\n    .style(\"fill\", (d) => self.getWordFillColor(d))\n    .style(\"stroke\", (d) => self.getWordFillColor(d))\n    .style(\"fill-opacity\", (d) => 0.2)\n    .style(\"stroke-width\", 1) //2)\n    .style(\"stroke-opacity\", 0.8) //2)\n    .on(\"mouseover\", on_mouseover)\n    .on(\"mouseout\", on_mouseout)\n    .on(\"click\", on_click);\n\n  svg.append(\"g\").attr(\"class\", \"wordcloud\");\n  //.attr('transform', d => `translate(5, 5)`)\n\n  let cluster_edges = self.edges.filter(\n    (d) => d.y1 && d.y2 && d.y3 && d.y4 && d.y4 != d.y3 && d.y1 != d.y2\n  )\n/*\n  let thin_edge = DAG.selectAll(\".thin-cluster-edge\")\n    .data(cluster_edges.filter((d) => d.y2 - d.y1 < 100 && d.y1 < d.y3))\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"thin-cluster-edge\")\n    .attr(\"d\", (d) => {\n      let mid = (d.x1 + d.x2) / 2;\n      return `M${d.x1 + 1} ${(d.y1 + d.y2) / 2} C${mid} ${\n        (d.y1 + d.y2) / 2\n      } ${mid} ${(d.y3 + d.y4) / 2} ${d.x2 - 1} ${(d.y3 + d.y4) / 2}`;\n    })\n    .style(\"stroke-width\", (d) => d.y2 - d.y1)\n    .style(\"stroke\", d3.interpolateRgb(\"white\", \"rgb(172,196,220)\")(0.35))\n    .style(\"opacity\", 1) //d => ((d.y2-d.y1) / max_width) ** 0.8 * 0.8)\n    .style(\"fill\", \"none\");\n*/\n  let thin_edge_2 = DAG.selectAll(\".cluster-edge\")\n    .data(cluster_edges.filter((d) => 1))//d.y2 - d.y1 < 100 && d.y1 >= d.y3))\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"cluster-edge\")\n    .attr(\"d\", (d) => {\n      let mid = (d.x1 + d.x2) / 2;\n      return `M${d.x1} ${(d.y1 + d.y2) / 2} C${mid} ${\n        (d.y1 + d.y2) / 2\n      } ${mid} ${(d.y3 + d.y4) / 2} ${d.x2} ${(d.y3 + d.y4) / 2}`;\n    })\n    .style(\"stroke-width\", (d) => d.y2 - d.y1)\n    .style(\"stroke\", \"rgb(172,196,220)\")\n    .style(\"opacity\", 0.35) //d => ((d.y2-d.y1) / max_width) ** 0.8 * 0.8)\n    .style(\"fill\", \"none\");\n/*\n  let thick_edge = DAG.selectAll(\".thick-cluster-edge\")\n    .data(cluster_edges.filter((d) => d.y2 - d.y1 >= 100))\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"thick-cluster-edge\")\n    .attr(\"d\", (d) => {\n      let mid = (d.x1 + d.x2) / 2;\n      return `M${d.x1} ${d.y1}L${d.x1} ${d.y2} C${mid} ${d.y2} ${mid} ${d.y4} ${d.x2} ${d.y4} L${d.x2} ${d.y3} C${mid} ${d.y3} ${mid} ${d.y1} ${d.x1} ${d.y1} z`;\n    })\n    .style(\"stroke-width\", 0)\n    .style(\"fill\", \"rgb(172,196,220)\")\n    .style(\"opacity\", 0.35);*/\n\n  //console.log('current_layers', self.current_layers)\n  let layers = DAG.selectAll(\".layer\")\n    .data(self.current_layers)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", \"layer\")\n    .attr(\"transform\", (d) => `translate(${d.x + d.width / 2 - 80},${30})`);\n\n  layers\n    .append(\"text\")\n    .attr(\"fill\", \"#111\")\n    .text((d) => {\n      if (d.layer_id == 1) {\n        return \"Input\";\n      } else if (d.layer_id > self.layers.length) {\n        return \"Prediction\";\n      } else {\n        return `Layer ${d.layer_id - 1}`;\n      }\n    })\n    .style(\"font-size\", \"18px\")\n    .attr(\"text-anchor\", \"middle\");\n}\n\n\nexport function layoutSentenceDAGNodes(state) {\n  let width = state.DAG.width + 60\n  let height = state.DAG.height - 100\n  let unique_layers = [...new Set(state.neuron_clusters.map(d => d.layer_id))]\n  unique_layers.sort((a, b) => a - b)\n  let layerlen = unique_layers.length\n  let layers = unique_layers.map(d => ({\n    layer_id: d,\n    scale: (d.length ? 0.5 : 1.0) / layerlen,\n  }))\n  let edge_width = width / layerlen * (1 - state.config.network.node_scale)\n  let padding = state.config.network.node_padding\n  state.neuron_clusters.forEach(d => { d.width = 0; d.height = 0; })\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].width = width * layers[i].scale\n    layers[i].x = i == 0 ? 50 : (layers[i - 1].x + layers[i - 1].width)\n    layers[i].clusters = state.neuron_clusters.filter(d => d.layer_id == layers[i].layer_id)\n    let totsize = layers[i].clusters.map(d => d.size).reduce((a, b) => a + b, 0)\n    let h0 = 50\n    let n = layers[i].clusters.length\n    let lh = height - (n - 1) * padding\n    layers[i].clusters.forEach(d => {\n      d.scale = 1.0 / layers[i].clusters.length\n      d.height = Math.min(Math.max(padding * 3.5, lh * d.size / totsize), lh / 2)\n      d.show_cloud = true\n      d.width = layers[i].width - edge_width\n      d.x = layers[i].x\n    })\n    for (let j = 0; j < layers[i].clusters.length; ++j) {\n      layers[i].clusters[j].y = j == 0 ? 50 : (layers[i].clusters[j - 1].y + layers[i].clusters[j - 1].height + padding)\n    }\n    if (layers[i].clusters[n - 1].y + layers[i].clusters[n - 1].height > height) {\n      let totsize = layers[i].clusters.map(d => d.height).reduce((a, b) => a + b, 0)\n      layers[i].clusters.forEach(d => d.height *= lh / totsize)\n      for (let j = 0; j < layers[i].clusters.length; ++j) {\n        layers[i].clusters[j].y = j == 0 ? h0 : (layers[i].clusters[j - 1].y + layers[i].clusters[j - 1].height + padding)\n      }\n    } else if (layers[i].clusters[n - 1].y + layers[i].clusters[n - 1].height < height) {\n      let delta = (height - layers[i].clusters[n - 1].y - layers[i].clusters[n - 1].height) / 2\n      for (let j = 0; j < layers[i].clusters.length; ++j) {\n        layers[i].clusters[j].y += delta\n      }\n    }\n  }\n  state.current_layers = layers\n}\n\nexport async function paintWordcloud(self) {\n  let DAG = d3.select(\"#network-svg\")\n  let all_words = []\n  for (let k = 0; k < self.neuron_clusters.length; ++k) {\n    let d = self.neuron_clusters[k]\n    if (!d.show_cloud) continue\n\n    const text_padding = 2\n    const max_size = d3\n      .scalePow()\n      .exponent(1.5)\n      .domain([40, 150])\n      .range([21, 27])\n    let font_size_range = [16, Math.min(28, max_size(d.height))]\n    let font_value_range = [\n      Math.min(...d.retained_keywords.map((e) => e[1])),\n      Math.max(...d.retained_keywords.map((e) => e[1])),\n    ]\n    if (font_value_range[0] == font_value_range[1]) {\n      font_size_range[0] = font_size_range[1]\n    }\n\n    let keyword_size = stepSizeScale(\n      font_size_range,\n      d.retained_keywords.map((e) => e[1]),\n      4,\n      [1, 3, 5]\n    );\n\n    let keywords = d.retained_keywords.map((e) => ({\n      size: keyword_size(e[1]),\n      text: e[0],\n      type: 1,\n      opacity: 0.9,\n      weight: e[2] == \"self\" ? \"bold\" : \"bold\",\n      fontstyle: e[2] == \"self\" ? \"normal\" : \"italic\",\n      center: e[2] == \"self\",\n    }))\n\n    keywords = keywords.sort((a, b) => {\n      if (a.center != b.center) {\n        return b.center - a.center;\n      } else {\n        return b.size - a.size;\n      }\n    })\n\n    if (d.layer_id == 12) {\n      keywords = keywords.filter((d) => d.text != \"enjoyment\");\n    }\n    const font_color = \"#6D6761\"\n\n    if (d.layer_id == 1) {\n      let words = keywords[0].text.split(\"$\");\n      let font_size = 20\n      all_words.push({\n        id: d.id,\n        \"x\": d.x + d.width / 2,\n        \"y\": d.y + d.height / 2 + text_padding,\n        \"font-size\": `${font_size + 4}px`,\n        \"font-weight\": \"bold\",\n        \"font-style\": \"normal\",\n        \"fill\": font_color,\n        \"opacity\": 0.9,\n        \"text-anchor\": \"middle\",\n        \"font-family\": \"Roboto: sans-serif\",\n        text: words[0],\n      })\n      all_words.push({\n        id: d.id,\n        \"x\": d.x + d.width / 2,\n        \"y\": d.y + d.height / 2 + font_size + text_padding,\n        \"font-size\": `${font_size - 2}px`,\n        \"font-weight\": \"bold\",\n        \"font-style\": \"normal\",\n        \"fill\": font_color,\n        \"text-anchor\": \"middle\",\n        \"font-family\": \"Roboto: sans-serif\",\n        \"opacity\": 0.9,\n        text: words[1],\n      })\n    } else {\n      await wordcloud()\n        .size([d.width, d.height - text_padding])\n        .data(keywords)\n        .fontSize((d) => d.size)\n        .font(\"Roboto\")\n        .padding(6)\n        .flexible(1)\n        .fontWeight((d) => d.weight)\n        .start((words) => {\n          console.log(words)\n          words = words.filter((d) => d.display)\n          all_words = all_words.concat(\n            words.map(e => ({\n              id: d.id,\n              \"x\": d.x + e.x,\n              \"y\": d.y + e.y + text_padding,\n              \"font-size\": `${e.size}px`,\n              \"font-weight\": e.weight,\n              \"font-style\": e.style,\n              \"fill\": font_color,\n              \"font-family\": \"Roboto: sans-serif\",\n              \"text-anchor\": \"start\",\n              \"opacity\": e.opacity,\n              text: e.text,\n            }))\n          )\n        })\n    }\n  }\n\n\n  let timer = null\n  const on_mouseover = function (d) {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      let current_ids = all_words\n        .filter(e => e.text == d.text)\n        .map(e => e.id)\n      current_ids = new Set(current_ids)\n\n      DAG.selectAll(\".word\")\n        .filter(e => e.text == d.text)\n        .style(\"fill\", \"#424242\")\n        .style(\"opacity\", 1)\n\n      DAG.selectAll(\".cluster-edge\")\n        .filter(e => current_ids.has(e.source) && current_ids.has(e.target))\n        .style(\"opacity\", .6)\n    }, 250)\n  };\n  const on_mouseout = function (d) {\n    clearTimeout(timer)\n    DAG.selectAll(\".word\")\n      .style(\"fill\", d => d[\"fill\"])\n      .style(\"opacity\", d => d[\"opacity\"])\n    \n    let current_ids = all_words\n      .filter(e => e.text == d.text)\n      .map(e => e.id)\n    current_ids = new Set(current_ids)\n    DAG.selectAll(\".cluster-edge\")\n      .filter(e => current_ids.has(e.source) && current_ids.has(e.target))\n      .style(\"opacity\", .35)\n  };\n\n  DAG.selectAll(\".word\")\n    .data(all_words).enter()\n    .append(\"text\")\n    .attr(\"class\", \"word\")\n    .attr(\"x\", d => d.x)\n    .attr(\"y\", d => d.y)\n    .attr(\"font-size\", d => d[\"font-size\"])\n    .attr(\"font-weight\", d => d[\"font-weight\"])\n    .attr(\"font-style\", d => d[\"font-style\"])\n    .style(\"fill\", d => d[\"fill\"])\n    .style(\"font-family\",  d => d[\"font-family\"])\n    .style(\"text-anchor\", d => d[\"text-anchor\"])\n    .style(\"opacity\", d => d[\"opacity\"])\n    .text(d => d.text)\n    .on(\"mouseover\", on_mouseover)\n    .on(\"mouseout\", on_mouseout)\n    .on(\"click\", async function(d){\n      await self.fetchWordIndex(d.text)\n      let idxs = self.getWordIdxs(d.text)\n      if (idxs.length >= 8) {\n        bus.$emit('add_word_DAG', d.text)\n      }\n    })\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"word-group\"},[(_vm.hoverItem)?_c('g',{staticClass:\"hover-item-parent\"},[_c('rect',{key:\"new rect\",staticClass:\"word-hover-item\",style:({\n        'fill' : _vm.hoverItem.fill,\n        'opacity' : 0.3,\n        'stroke' : _vm.hoverItem.fill,\n        'stroke-width' : '1px',\n      }),attrs:{\"x\":_vm.hoverItem.x,\"y\":_vm.hoverItem.y - _vm.hoverItem.size + 2,\"height\":_vm.hoverItem.size,\"width\":_vm.hoverItem.width}})]):_vm._e(),_vm._l((_vm.temp_items),function(item,index){return _c('g',{key:(\"tmp\" + index),staticClass:\"hover-item-parent\",style:({\n          'opacity': _vm.hover_word && item.text != _vm.hover_word ? 0.3 : 1\n        })},[_c('text',{staticClass:\"word-hover-item\",style:({\n          'fill': item.fill,\n          'stroke': item.stroke,\n          'stroke-width': item.stroke_width,\n        }),attrs:{\"x\":item.x,\"y\":item.y,\"dx\":item.dx,\"dy\":item.dy,\"font-size\":item.size,\"font-style\":item.style,\"font-weight\":item.weight}},[_vm._v(\" \"+_vm._s(item.text)+\" \")])])}),_c('transition-group',{attrs:{\"mode\":\"out-in\",\"name\":\"word-list\",\"tag\":\"g\"}},[(_vm.interaction == 'filter')?_vm._l((_vm.selected_items),function(item){return _c('rect',{key:((item.key) + \"bg\"),staticClass:\"word-list-item\",style:({\n          'fill' : item.fill,\n          'fill-opacity' : 0.15,\n          'stroke' : item.fill,\n          'stroke-width' : '1px',\n        }),attrs:{\"x\":item.x,\"y\":item.y - item.size + 2,\"height\":item.size,\"width\":item.width}})}):_vm._e(),_vm._l((_vm.items),function(item){return _c('g',{key:item.key,staticClass:\"word-list-item\",on:{\"mouseenter\":function($event){return _vm.onMouseOver(item)},\"mouseout\":function($event){return _vm.onMouseOut(item)},\"click\":function($event){return _vm.onClick(item)},\"contextmenu\":function($event){$event.preventDefault();return _vm.onRightClick(item)}}},[(item.display)?_c('text',{class:{\n          'highlight':  !_vm.highlight || _vm.highlight_text.indexOf(item.text) != -1,\n        },style:({\n          'opacity': _vm.hover_word && item.text != _vm.hover_word ? 0.3 : 1,\n          'fill': item.fill,\n          'stroke': item.stroke,\n          'stroke-width': item.stroke_width,\n        }),attrs:{\"x\":item.x,\"y\":item.y,\"dx\":item.dx,\"dy\":item.dy,\"font-size\":item.size,\"font-style\":item.style,\"font-weight\":item.weight}},[_vm._v(\" \"+_vm._s(item.text)+\" \")]):_vm._e()])}),_vm._l((_vm.glyphed_items),function(item){return _c('g',{key:((item.key) + \"glyph\"),attrs:{\"transform\":(\"translate(\" + (item.x - 4 - (_vm.hover_word && item.text == _vm.hover_word && !item.glyph.show ? 10 : 0)) + \",\" + (item.y - item.size / 2 + 5) + \") rotate(-90)\")}},[_c('g',{style:({\n          'opacity': _vm.hover_word && item.text != _vm.hover_word ? 0.3 : 1\n        })},[_c('path',{attrs:{\"d\":item.glyph.neu,\"fill\":_vm.neutralColor,\"stroke\":\"none\"}}),_c('path',{attrs:{\"d\":item.glyph.pos,\"fill\":_vm.positiveColor,\"stroke\":\"none\"}}),_c('path',{attrs:{\"d\":item.glyph.neg,\"fill\":_vm.negativeColor,\"stroke\":\"none\"}})])])})],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <g class=\"word-group\">\n    <g class=\"hover-item-parent\" v-if=\"hoverItem\">\n      <rect \n        :x=\"hoverItem.x\"\n        :y=\"hoverItem.y - hoverItem.size + 2\"\n        class=\"word-hover-item\"\n        key=\"new rect\"\n        :height=\"hoverItem.size\"\n        :width=\"hoverItem.width\"\n        :style = \"{\n          'fill' : hoverItem.fill,\n          'opacity' : 0.3,\n          'stroke' : hoverItem.fill,\n          'stroke-width' : '1px',\n        }\"\n      >\n      </rect>\n    </g>\n    <g class=\"hover-item-parent\"\n        v-for=\"(item, index) in temp_items\"\n        :key=\"`tmp${index}`\"\n          :style = \"{\n            'opacity': hover_word && item.text != hover_word ? 0.3 : 1\n          }\">\n        <text\n          class=\"word-hover-item\"\n          :x=\"item.x\"\n          :y=\"item.y\"\n          :dx=\"item.dx\"\n          :dy=\"item.dy\"\n          :font-size=\"item.size\"\n          :font-style=\"item.style\"\n          :font-weight=\"item.weight\"\n          :style = \"{\n            'fill': item.fill,\n            'stroke': item.stroke,\n            'stroke-width': item.stroke_width,\n          }\"\n        >\n          {{ item.text }}\n        </text>\n    </g>\n\n    <transition-group mode=\"out-in\"\n      name=\"word-list\" tag=\"g\">\n      <template v-if=\"interaction == 'filter'\">\n        <rect v-for=\"item in selected_items\"\n          :x=\"item.x\"\n          :y=\"item.y - item.size + 2\"\n          class=\"word-list-item\"\n          :key=\"`${item.key}bg`\"\n          :height=\"item.size\"\n          :width=\"item.width\"\n          :style = \"{\n            'fill' : item.fill,\n            'fill-opacity' : 0.15,\n            'stroke' : item.fill,\n            'stroke-width' : '1px',\n          }\">\n        </rect>\n      </template>\n      <g v-for=\"item in items\"\n        class=\"word-list-item\"\n          @mouseenter=\"onMouseOver(item)\"\n          @mouseout=\"onMouseOut(item)\"\n          @click=\"onClick(item)\"\n          @contextmenu.prevent=\"onRightClick(item)\"\n          :key=\"item.key\"\n        >\n        <text\n          v-if=\"item.display\"\n          :x=\"item.x\"\n          :y=\"item.y\"\n          :dx=\"item.dx\"\n          :dy=\"item.dy\"\n          :font-size=\"item.size\"\n          :font-style=\"item.style\"\n          :font-weight=\"item.weight\"\n          :class=\"{\n            'highlight':  !highlight || highlight_text.indexOf(item.text) != -1,\n          }\"\n          :style = \"{\n            'opacity': hover_word && item.text != hover_word ? 0.3 : 1,\n            'fill': item.fill,\n            'stroke': item.stroke,\n            'stroke-width': item.stroke_width,\n          }\"\n        >\n          {{ item.text }}\n        </text>\n      </g>\n      <g v-for=\"item in glyphed_items\"\n        :key=\"`${item.key}glyph`\"\n        :transform=\"`translate(${item.x - 4 - (hover_word && item.text == hover_word && !item.glyph.show ? 10 : 0)},${item.y - item.size / 2 + 5}) rotate(-90)`\">\n          <g :style = \"{\n            'opacity': hover_word && item.text != hover_word ? 0.3 : 1\n          }\">\n            <path :d=\"item.glyph.neu\" :fill=\"neutralColor\" stroke=\"none\"></path>\n            <path :d=\"item.glyph.pos\" :fill=\"positiveColor\" stroke=\"none\"></path>\n            <path :d=\"item.glyph.neg\" :fill=\"negativeColor\" stroke=\"none\"></path>\n          </g>\n      </g>\n    </transition-group>\n  </g>  \n</template>\n\n<script>\nimport { mapGetters, mapMutations, mapActions, mapState } from 'vuex'\nimport bus from '../plugins/bus'\nimport * as d3 from 'd3'\n\nconst sleep = (timeout) => new Promise((resolve) => {\n  setTimeout(resolve, timeout);\n})\n\nconst arc = (x, y, r, start, end) => {\n  let path = d3.path()\n  path.arc(x, y, r, start, end)\n  return `M 0 0 L ${r * Math.cos(start)} ${r * Math.sin(start)} ${path._} L 0 0`\n}\n\nconst isalpha = val => /^[a-zA-Z]+$/.test(val)\nconst islegal = val => isalpha(val) && val.length > 1 && val.indexOf('_') == -1\n\nexport default {\n  data: function() {\n    return {\n      hoverItem: null,\n      hoverEnterTime: 500,\n      glyphHeight: 4,\n      glyphRadius: 7,\n    }\n  },\n  computed: {\n    ...mapState([ 'filtered_words', 'hover_word' ]),\n    ...mapGetters(['positiveColor', 'checkWordIndex', 'negativeColor', 'neutralColor','getWordIdxs', 'getSamples' ]),\n    items() {\n      let cnt = {}\n      let ret = this.data.map(d => {\n        cnt[d.text] = (cnt[d.text] || 0) + 1\n        let tot = d.contri && (d.contri.pos + d.contri.neg + d.contri.neu)\n        let arcs = { show: d.glyph || 0 }\n        if (d.contri) {\n          let pos = d.contri.pos / tot * Math.PI * 2\n          let neg = d.contri.neg / tot * Math.PI * 2\n          let neu = d.contri.neu / tot * Math.PI * 2\n          let pos_arc = arc(0, 0, this.glyphRadius, 0, pos)\n          let neg_arc = arc(0, 0, this.glyphRadius, pos, pos + neg)\n          let neu_arc = arc(0, 0, this.glyphRadius, 0, Math.PI * 2)\n          arcs = { show: d.glyph, pos: pos_arc, neg: neg_arc, neu: neu_arc }\n        }\n        return {\n          x: d.x,\n          y: d.y,\n          dx: (d.dx || 0) + (d.glyph ? 5 : 0),\n          dy: d.dy,\n          display: d.display,\n          //contri: d.contri && [d.contri.pos / tot, d.contri.neu / tot, d.contri.neg / tot] || [],\n          glyph: arcs,\n          size: d.size,\n          width: d.width,\n          height: d.height,\n          weight: d.weight,\n          style: d.style || 'normal',\n          text: d.text,\n          key: `${d.text}${d.layer}_${d.id}`,\n          fill: d.fill,\n          stroke: d.stroke,\n          stroke_width: d.stroke_width,\n          // hover: false,\n        }\n      }).filter(d => islegal(d.text))\n      return ret\n    },\n    temp_items() {\n      return this.items.filter(item => !item.display && item.text == this.hover_word)\n    },\n    glyphed_items() {\n      return this.items.filter(item => item.glyph.show || item.text == this.hover_word)\n    },\n    selected_items() {\n      const filter_set = new Set(this.filtered_words)\n      return this.items.filter(d => filter_set.has(d.text))\n    }\n  },\n  props: {\n    data: Array,\n    tooltip: {\n      type: Boolean,\n      default: false,\n    },\n    interaction: {\n      type: String,\n      default: 'DAG',\n    },\n    highlight: {\n      type: Boolean,\n      default: false,\n    },\n    highlight_text: {\n      type: String,\n      default: '',\n    },\n  },\n  methods: {\n    ...mapActions([ 'fetchWordIndex', 'changeFilteredWord' ]),\n    ...mapMutations([ 'showTooltip', 'hideTooltip', 'addHoverTimer', 'removeHoverTimer', 'setHoverWord' ]),\n    async onHoverEvent(d, left, top) {\n      this.hoverItem = d\n      this.setHoverWord(d.text)\n      await this.fetchWordIndex(d.text)\n      if (this.hoverItem != d) return\n      let idxs = this.getWordIdxs(d.text)\n      bus.$emit('highlight_grid', idxs)\n      let text = `<p>${d.text}, ${idxs.length} samples </p>`\n      let resp = await this.getSamples(idxs)\n      if (this.hoverItem != d) return\n      try {\n\t\t\t\ttext = text + resp.slice(0, 8).map((e, index) => `#${e.index}: ${e.text}`).join('</br>')\n\t\t\t\tif (this.tooltip) {\n\t\t\t\t\tthis.showTooltip({ top, left, content: text })\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn\n\t\t\t}\n    },\n    async onMouseOver(d) {\n      const left = window.event.pageX\n      const top = window.event.pageY\n      let timer = setTimeout(() => {\n        this.onHoverEvent(d, left, top)\n      }, this.hoverEnterTime)\n      this.addHoverTimer(timer)\n    },\n    async onLeaveEvent(d) {\n      bus.$emit('highlight_grid', null)\n      this.setHoverWord(null)\n      this.hoverItem = null\n      if (this.tooltip) {\n        this.hideTooltip()\n      }\n    },\n    async onMouseOut(d) {\n      this.removeHoverTimer()\n      this.onLeaveEvent(d)\n    },\n    async onRightClick(d) {\n      await this.fetchWordIndex(d.text)\n      let idxs = this.getWordIdxs(d.text)\n      if (idxs.length >= 8) {\n        bus.$emit('add_word_DAG', d.text)\n      }\n    },\n    async onClick(d) {\n      await this.fetchWordIndex(d.text)\n      await this.changeFilteredWord(d.text)\n    },\n  }\n}\n</script>\n<style scoped>\n.word-hover-item {\n  transition: all 1s;\n  opacity: 1;\n}\n.word-list-item {\n  opacity: 1;\n}\n.word-list-item {\n  transition: all 1s;\n}\n.word-list-enter {\n  transition-delay: 1s;\n  opacity: 0;\n}\n.word-list-leave-to {\n  opacity: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wordgroup.vue?vue&type=template&id=72d86f42&scoped=true&\"\nimport script from \"./wordgroup.vue?vue&type=script&lang=js&\"\nexport * from \"./wordgroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wordgroup.vue?vue&type=style&index=0&id=72d86f42&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"72d86f42\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"current_tooltip\",staticClass:\"custom-tooltip\",style:({\n    background: _vm.background,\n    color: _vm.color,\n    'font-size': (_vm.fontsize + \"px\"),\n    width: (_vm.width + \"px\"),\n    visibility: _vm.show ? 'visible' : 'hidden',\n    opacity: _vm.show ? 1 : 0,\n    left: (_vm.fixed_left + \"px\"),\n    top: (_vm.fixed_top + \"px\"),\n    transition: 'all 1s',\n  })})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"custom-tooltip\"\n    :style=\"{\n      background: background,\n      color: color,\n      'font-size': `${fontsize}px`,\n      width: `${width}px`,\n      visibility: show ? 'visible' : 'hidden',\n      opacity: show ? 1 : 0,\n      left: `${fixed_left}px`,\n      top: `${fixed_top}px`,\n      transition: 'all 1s',\n    }\"\n    ref=\"current_tooltip\"\n  >\n  </div>\n</template>\n<script>\nexport default {\n  data(){\n    return {}\n  },\n  computed: {\n    fixed_top() {\n      const rect = document.getElementsByTagName('body')[0].getBoundingClientRect()\n      const height = rect.height\n      return Math.min(height - this.width, this.top)\n    },\n    fixed_left() {\n      const rect = document.getElementsByTagName('body')[0].getBoundingClientRect()\n      const width = rect.width\n      return Math.min(width - this.width, this.left)\n    }\n  },\n  props: {\n    show: {\n      type: Boolean,\n      default: false,\n    },\n    left: {\n      type: Number,\n      default: 0,\n    },\n    top: {\n      type: Number,\n      default: 0,\n    },\n    content: {\n      type: String,\n      default: '',\n    },\n    fontsize: {\n      type: Number,\n      default: 18,\n    },\n    width: {\n      type: Number,\n      default: 250,\n    },\n    background: {\n      type: String,\n      default: 'rgba(250, 250, 250, .9)',\n    },\n    color: {\n      type: String,\n      default: '#222',\n    }\n  },\n  watch: {\n    content(val) {\n      this.$refs.current_tooltip.innerHTML = val\n    }\n  }\n}\n</script>\n<style scoped>\n.custom-tooltip {\n  font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple   Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  background: rgba(250, 250, 250,.9);\n  border-radius: .1rem;\n  border: 1px solid #111;\n  color: #222;\n  display: block;\n  font-size: 18px;\n  padding: .2rem .4rem;\n  position: absolute;\n  z-index: 300;\n  padding: .4rem .6rem;\n  visibility: hidden;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./infotooltip.vue?vue&type=template&id=ee1705e8&scoped=true&\"\nimport script from \"./infotooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./infotooltip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./infotooltip.vue?vue&type=style&index=0&id=ee1705e8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee1705e8\",\n  null\n  \n)\n\nexport default component.exports","import * as d3 from 'd3'\n\nfunction forceCollide() {\n  let nodes\n  const padding = 4\n\n  function force(alpha) {\n    const quad = d3.quadtree(nodes, d => d.x, d => d.y);\n    for (const d of nodes) {\n      quad.visit((q, x1, y1, x2, y2) => {\n        let updated = false;\n        if (q.data && q.data !== d) {\n          let x = d.x - q.data.x,\n            y = d.y - q.data.y,\n            xSpacing = padding + (q.data.width + d.width) / 2,\n            ySpacing = padding + (q.data.height + d.height) / 2,\n            absX = Math.abs(x),\n            absY = Math.abs(y),\n            l,\n            lx,\n            ly;\n\n          if (absX < xSpacing && absY < ySpacing) {\n            l = Math.sqrt(x * x + y * y);\n\n            lx = (absX - xSpacing) / l;\n            ly = (absY - ySpacing) / l;\n\n            // the one that's barely within the bounds probably triggered the collision\n            if (Math.abs(lx) > Math.abs(ly)) {\n              lx = 0;\n            } else {\n              ly = 0;\n            }\n            d.x -= x *= lx;\n            d.y -= y *= ly;\n            q.data.x += x;\n            q.data.y += y;\n\n            updated = true;\n          }\n        }\n        return updated;\n      });\n    }\n  }\n\n  force.initialize = _ => nodes = _;\n\n  return force;\n}\n\nlet testmode = 0\n\nasync function paintSampleComposition(self) {\n  let positiveColor = self.positiveColor //'rgb(26,150,65)'\n  let neutralColor = self.neutralColor //'rgb(163,163,163)'\n  let negativeColor = self.negativeColor //d3.interpolateRgb('white', 'rgb(215,25,28)')(0.8)\n  if (testmode) {\n    //positiveColor = 'rgb(172, 196, 219)'\n    //negativeColor = 'rgb(172, 196, 221)'\n  }\n  const raw = self.layout\n  const rawPhraseData = raw.phrases\n  const data = raw.lines.map((d, k) => {\n    let ret = {}\n    ret.text = d.text\n    let last_label = 0\n    let last_display = 0\n    for (let i = 0; i < d.line.length; ++i) {\n    \n      let l = d.line[i]\n      // l.display = 1 || i < 3 || l.size >= threshold && (i == 0 || d.line[i - 1].display)\n      //l.size = Math.abs(l.contri)\n      if (l.display) {\n          last_display = i\n      }\n      l.has_shade = !!l.has_shade\n      l.fill_id = d.line.length * k + i\n      if (i + 1 < d.line.length && l.display) {\n          if (i > 0 && d.line[i - 1].show_label || i + 2 == d.line.length) {\n              l.show_label = 0\n          } else if (l.show_label && i - last_label > 5) {\n              d.line[Math.floor((last_label + i) / 2)].show_label = 1\n          }\n      } else {\n          l.show_label = 0\n      }\n      if (l.show_label) {\n          last_label = i\n      }\n    }\n    ret.end_point = last_display\n    //if (last_display + 1 < d.line.length) {\n    //  ret.end_point += 1\n    //}\n    last_display += 1\n    if (last_display - last_label > 5) {\n        d.line[Math.floor((last_label + last_display) / 2)].show_label = 1\n    }\n    ret.len = d.len\n    ret.line = d.line\n    ret.tot_contri = d.line.map(e => Math.abs(e.contri)).reduce((a, b) => a + b)\n    return ret\n  })\n  let sorted_tot_contri = data.map(d => d.tot_contri).sort((a, b) => b - a)\n  const top_3_contri = sorted_tot_contri[2]\n\n  for (let i = 0; i < data.length; ++i) {\n    data[i].pos = 0\n    if (data[i].text == '') {\n      data[i].text = data[i - 1].text\n      data[i].pos = data[i - 1].pos + data[i - 1].len\n    }\n  }\n\n  const n_rows = data[0].line.length\n  const n_cols = data.length\n  const checkContinuity = (layer, left, right) => {\n    if (layer == -1) return false\n    if (!data[left].line[layer].display) {\n      return false\n    }\n    if (!data[right].line[layer].display) {\n      return false\n    }\n    if (data[right].line[layer].label != data[left].line[layer].label) {\n      return false\n    }\n    return true\n  }\n\n  const getShade = (data) => {\n    let shades = []\n    for (let i = 0; i + 1 < n_rows; ++i) {\n      for (let j = 1, last = 0; j <= n_cols; ++j) {\n        if (j < n_cols && data[j].line[i].label == data[j - 1].line[i].label) {\n          continue\n        } else {\n          let curr = j - 1\n          const trim = (top, bottom, index) => {\n            while (top > bottom && (index == 0 || !data[top].line[index - 1].display)) --top\n            while (top > bottom && (index == 0 || !data[bottom].line[index - 1].display)) ++bottom\n            let display = 0\n            let tk = -1\n            for (let k = bottom; k <= top; ++k) {\n              if (data[k].line[index].display) {\n                display = 1\n                tk = k\n                break\n              }\n            }\n            return [top, bottom, tk]\n          }\n          let top, bottom, tk\n          [top, bottom, tk] = trim(curr, last, i)\n          if (top - bottom >= 1 && tk != -1) {\n            let w1 = widthScale(data[bottom].line[i].contri)\n            let w2 = widthScale(data[top].line[i].contri)\n            let y1 = yScale(data[bottom].line[i].position) - w1 * 0.5 - 8\n            let y2 = yScale(data[top].line[i].position) + w2 * 0.5 + 8\n            //console.log(i, bottom, top)\n            if (true || checkContinuity(i + 1, bottom, top)) {\n              let rt, rb, rk\n              [rt, rb, rk] = trim(curr, last, i + 1)\n              let w3 = widthScale(data[rb].line[i + 1].contri)\n              let w4 = widthScale(data[rt].line[i + 1].contri)\n              let y3 = yScale(data[rb].line[i + 1].position)\n              let y4 = yScale(data[rt].line[i + 1].position)\n\n              if (rb != rt) {\n                y3 = y3 - w3 * 0.5 - 8\n                y4 = y4 + w4 * 0.5 + 8\n              }\n              let contri = data[tk].line[i + 1].contri\n              let last_contri = data[tk].line[i].contri\n              for (let k = bottom; k <= top; ++k) {\n                if (!data[k].line[i].display) {\n                  continue\n                }\n                let t = data[k].line[i + 1].contri\n                if (Math.abs(t) > Math.abs(contri)) {\n                  contri = t\n                }\n                t = data[k].line[i].contri\n                if (Math.abs(t) > Math.abs(last_contri)) {\n                  last_contri = t\n                }\n              }\n\n              let c2 = contriScale(contri)\n              let c1 = contriScale(last_contri)\n              // console.log(i, top, bottom, c1, c2)\n              c1 = getColorName(c1)\n              c2 = getColorName(c2)\n              // console.log(c1, c2)\n              let fill = `url(#pattern-${c1}-to-${c2})`\n              // console.log(i, top, bottom, contriThres, last_contri, contri)\n              shades.push({\n                y1, y2, y3, y4,\n                top: bottom, bottom: top,\n                c1: c1, c2: c2,\n                fill: fill,\n                x: i,\n                y: data[top].line[i].label,\n              })\n            }\n          }\n          last = j\n        }\n      }\n    }\n    return shades\n  }\n\n  const getExtendShade = (shades, data) => {\n    let extend_shades = []\n    let a = 0, b = 0, c = 0\n    for (let k = 0; k + 2 < n_rows; ++k) {\n      while (a < shades.length && shades[a].x < k) ++a\n      while (b < shades.length && shades[b].x < k + 1) ++b\n      while (c < shades.length && shades[c].x < k + 2) ++c\n      let cover_points = new Set()\n      for (let i = a; i < b; ++i) {\n        for (let j = shades[i].top; j < shades[i].bottom; ++j) {\n          cover_points.add(j)\n        }\n      }\n      if (a < b && b < c) {\n        let i = a, j = b\n        while (i < b && j < c) {\n          if (shades[i].bottom < shades[j].top) { ++i; continue }\n          if (shades[i].top > shades[j].bottom) { ++j; continue }\n\n          if (shades[i].c1 == shades[j].c2 && shades[i].c2 != shades[i].c1) {\n            shades[i].c2 = shades[j].c1 = shades[j].c2\n            shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n            shades[j].fill = `url(#pattern-${shades[j].c1}-to-${shades[j].c2})`\n          } else if (shades[i].c2 != shades[j].c1) {\n            shades[i].c2 = shades[j].c1\n            shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n          }\n          if (shades[i].top > shades[j].top || shades[i].top < shades[j].top) {\n            shades[i].y3 = shades[j].y1\n          }\n          ++i; ++j;\n        }\n        i = b - 1, j = c - 1\n        while (i >= a && j >= b) {\n          if (shades[i].bottom < shades[j].top) { --j; continue }\n          if (shades[i].top > shades[j].bottom) { --i; continue }\n                    /*\n                    if (shades[i].c1 == shades[j].c2 && shades[i].c2 != shades[i].c1) {\n                        shades[i].c2 = shades[j].c1 = shades[j].c2\n                        shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n                        shades[j].fill = `url(#pattern-${shades[j].c1}-to-${shades[j].c2})`\n                    } else*/ if (shades[i].c2 != shades[j].c1) {\n            shades[i].c2 = shades[j].c1\n            shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n          }\n          if (shades[i].bottom > shades[j].bottom || shades[i].bottom < shades[j].bottom) {\n            shades[i].y4 = shades[j].y2\n          }\n          --i; --j;\n        }\n      }\n      for (let i = b; i < c; ++i) {\n        let flag = 1\n        for (let j = shades[i].top; j < shades[i].bottom; ++j) {\n          if (cover_points.has(j)) {\n            flag = 0\n            break\n          }\n        }\n        if (flag) {\n          let y1 = shades[i].y1\n          let y2 = shades[i].y2\n          let c2 = shades[i].c1\n          let y0 = yScale((data[shades[i].bottom].line[k].position + data[shades[i].bottom].line[k].position) * 0.5)\n          let last_contri = data[shades[i].top].line[k].contri\n          let c1 = getColorName(contriScale(last_contri))\n          let fill = `url(#pattern-${c1}-to-${c2})`\n          extend_shades.push({\n            y1: y0, y2: y0, y3: y1, y4: y2,\n            c1, c2,\n            top: shades[i].top, bottom: shades[i].bottom,\n            //fill: `lightblue`,\n            fill: fill,\n            x: shades[i].x - 1,\n            y: shades[i].label,\n          })\n        }\n      }\n    }\n    return extend_shades\n  }\n  const canvas = document.createElement(\"canvas\")\n  const ctx = canvas.getContext(\"2d\")\n  const label_size = testmode ? \"32px\" : \"20px\"\n  const label_font = \"Roboto, san-serif\"\n  ctx.font = label_size + ' ' + label_font\n  const measure = (text) => {\n    const ret = ctx.measureText(text)\n    const width = ret.actualBoundingBoxRight + ret.actualBoundingBoxLeft\n    const height = ret.actualBoundingBoxAscent + 1 //ret.actualBoundingBoxDescent\n    return [width, height]\n  }\n\n  const max_text_len = 16\n  const text_len = Math.max(...data.map(d => measure(d.text.slice(0, max_text_len))[0]))\n  const margin = ({ top: 20, right: 10 + text_len, bottom: 20, left: 20 + text_len })\n  const width = self.viewbox.network.width - margin.left - margin.right\n  const height = self.viewbox.network.height - margin.top - margin.bottom\n\n  data.forEach((d, index) => {\n    for (let i = 1; i < d.line.length; ++i) {\n      if (testmode) {\n        d.line[i].display = 1\n        if (index <= 6) {\n          d.line[i].position += 0.06\n          d.line[i].position = Math.min(d.line[i].position, d.line[i - 1].position)\n        }\n        if (index == 1 && i == 3) d.line[i].position -= 0.02\n        if (index == 1 && i == 4) d.line[i].position += 0.06\n        if (index == 3 && i == 2) d.line[i].position -= 0.02\n        if (index == 3 && i >= 3) d.line[i].position = d.line[i - 1].position\n        if (index == 9 && i >= 3) d.line[i].position = d.line[10].position\n        //if (index == 1 && i == 3) d.line[i].position = data[index + 1].line[i].position + 0.03\n        if (index > 6 && i >= 6) d.line[i].label += 1\n        if ((d.text == 'the' || d.text == 'a') && i > 8) {\n          d.line[i].display = 0\n          d.end_point = 9\n        }\n        if ((d.text == \"was\") && i > 9) {\n          d.line[i].display = 0\n          d.end_point = 10\n        }\n        if ((d.text == \"'\") && i > 7) {\n          d.line[i].display = 0\n          d.end_point = 8\n        }\n        if (d.text == 'the' && i == 4) d.line[i].position -= 0.12\n        if (d.text == 'the' && i >= 4 && i <= 9) d.line[i].label += 1\n        if (d.text == 'good' && i < 6)\n          d.line[i].contri = -Math.abs(d.line[i].contri)\n        else d.line[i].contri = Math.abs(d.line[i].contri)\n        if (d.text == 'good' && i == 6) {\n          d.line[i].contri = Math.abs(d.line[i + 1].contri)\n        }\n        if (d.text == 'good') d.line[i].contri *= 1.2\n        if (d.text == 'n') d.line[i].contri = Math.abs(data[8].line[i].contri) * 1.2\n        if (d.text == 'a' && i <= 5) {\n          d.line[i].label = -1\n        }\n      }\n      //if (d.text == 'laughs') d.line[i].contri *= 0.8\n      //if (d.text == 'been' &&  d.line.length == 4) d.line[i].contri = Math.abs(d.line[i].contri)\n      //d.line[i].contri = d.line[i].contri * 0.7 + d.line[i - 1].contri * 0.3\n    }\n    console.log(d.text, d.line.map(e => e.contri))\n  })\n\n  const xScale = d3.scalePoint()\n    .domain(data[0].line.map(d => d.layer))\n    .rangeRound([0, width])\n\n  const yScale = d3.scaleLinear()\n    .domain([1, 0])  // Input\n    .range([10, height]) // Output\n\n  const getColorName = (x) => {\n    if (x == positiveColor) {\n      return 'pos'\n    } else if (x == negativeColor) {\n      return 'neg'\n    } else if (x == neutralColor) {\n      return 'neu'\n    } else {\n      return 'unknown'\n    }\n  }\n\n  const addGradientColor = (defs) => {\n    let colors = [\n      [positiveColor, getColorName(positiveColor)],\n      [negativeColor, getColorName(negativeColor)],\n      ['#BBDEFB', 'neu'],\n    ]\n\n    let colors2 = [\n      [positiveColor, getColorName(positiveColor)],\n      [negativeColor, getColorName(negativeColor)],\n      ['gray', 'neu'],\n    ]\n    for (let c1 of colors) {\n      for (let c2 of colors) {\n        let gradient = defs.append('linearGradient')\n          .attr('id', `pattern-${c1[1]}-to-${c2[1]}`)\n          .attr('x1', '0%')\n          .attr('y1', '0%')\n          .attr('x2', '100%')\n          .attr('y2', '0%')\n\n        gradient.append('stop')\n          .attr('offset', '0%')\n          .attr('stop-color', d3.interpolateRgb('white', c1[0])(0.2))\n\n        gradient.append('stop')\n          .attr('offset', '100%')\n          .attr('stop-color', d3.interpolateRgb('white', c2[0])(0.2))\n      }\n    }\n    for (let c1 of colors2) {\n      for (let c2 of colors2) {\n        for (let c3 of colors2) {\n          let gradient = defs.append('linearGradient')\n            .attr('id', `pattern-${c1[1]}-to-${c2[1]}-to-${c3[1]}-origin`)\n            .attr('x1', '0%')\n            .attr('y1', '0%')\n            .attr('x2', '100%')\n            .attr('y2', '0%')\n\n          gradient.append('stop')\n            .attr('offset', '0%')\n            .attr('stop-color', d3.interpolateRgb('white', c1[0])(1))\n\n          gradient.append('stop')\n            .attr('offset', '50%')\n            .attr('stop-color', d3.interpolateRgb('white', c2[0])(1))\n\n          gradient.append('stop')\n            .attr('offset', '100%')\n            .attr('stop-color', d3.interpolateRgb('white', c3[0])(1))\n        }\n      }\n    }\n  }\n\n\n\n  const contriValues = [].concat(...raw.lines.map(d => d.line.map(e => Math.abs(e.contri)))).sort((a, b) => a - b)\n  let contriThres\n  if (n_cols * n_rows < 60) {\n    contriThres = contriValues[~~(0.36 * contriValues.length)]\n  } else if (n_cols * n_rows < 120) {\n    contriThres = contriValues[~~(0.48 * contriValues.length)]\n  } else {\n    contriThres = contriValues[~~(0.6 * contriValues.length)]\n  }\n  if (contriThres == 0) {\n    contriThres = contriValues.filter(d => d > 0)[0]\n  }\n  const contriMax = contriValues[contriValues.length - 1]\n\n  data.forEach(d => {\n    for (let i = 1; i < d.line.length - 1; ++i) {\n      let t1 = d.line[i - 1].contri\n      let t2 = d.line[i + 1].contri\n      if ((Math.abs(t1) < contriThres && Math.abs(t2) < contriThres || Math.abs(t1) > contriThres && Math.abs(t2) > contriThres) && t1 * t2 > 0) {\n        d.line[i].contri = (t1 + t2) * 0.5\n      }\n    }\n  })\n\n  const contriValues2 = [].concat(...raw.lines.map(d => d.line.filter(e => e.display).map(e => Math.abs(e.contri)))).sort((a, b) => a - b)\n  const contriThres2 = contriValues2[~~(0.66 * contriValues2.length)]\n\n  const widthScale = (() => {\n    let left = contriThres2\n    let right = contriMax\n    let max_width = 12\n    let mid_width = 1.8\n    if (left * 2 > right) {\n      mid_width = 4\n    }\n    let scale1 = d3.scaleLinear().range([1.2, mid_width, max_width]).domain([0, left, right])\n    if (testmode) {\n      scale1 = d3.scaleLinear().range([1.2, 1.5, 12]).domain([0, left, right])\n    }\n    return function (x) {\n      x = Math.abs(x)\n      // if (x < left) return 1\n      // x = Math.min(9, scale1(x))\n      return scale1(x)\n    }\n  })()\n\n  const contriScale = (() => {\n    let thres = contriThres\n    let left = -thres\n    let right = thres\n    return function (x) {\n      if (x <= left + 1e-5) {\n        return positiveColor\n      } else if (x >= right - 1e-5) {\n        return negativeColor\n      } else {\n        return neutralColor\n      }\n    }\n  })()\n\n  const lineGenerator = (x1, x2, y1, y2, y3, y4, flag = 0) => {\n    let m1 = x1 + (x2 - x1) * 0.5//r1\n    let m2 = x1 + (x2 - x1) * 0.5//r2\n    let x3 = x1 + (x2 - x1) * 0.15\n    let x4 = x1 + (x2 - x1) * 0.85\n    if (flag || Math.abs(y4 - y2) < 40) {\n      x3 = x1\n      x4 = x2\n      m1 = x1 + (x2 - x1) * 0.5\n      m2 = x1 + (x2 - x1) * 0.5\n    }\n    return `M${x1} ${y1}L${x1} ${y2} L${x3} ${y2} C${m1} ${y2} ${m2} ${y4} ${x4} ${y4} L${x2} ${y4} L${x2} ${y3} L${x4} ${y3} C${m2} ${y3} ${m1} ${y1} ${x3} ${y1} z`\n  }\n\n  const baselineGenerator = (x1, x2, y1, y2, y3, y4, r1 = 0.4, r2 = 0.6) => {\n    let m1 = x1 + (x2 - x1) * r1\n    let m2 = x1 + (x2 - x1) * r2\n    y1 = y2 + 8\n    y2 = y4 + 8\n    if (Math.abs(y1 - y2) < 12) {\n      let m = (y1 + y2) / 2\n      y1 = y2 = m\n    }\n    return `M${x1 - 50} ${y1} L ${x1} ${y1}C${m1} ${y1} ${m2} ${y2} ${x2} ${y2} L ${x2 + 50} ${y2}`\n  }\n\n  async function LineChart() {\n    const svg = d3.select(\"#network-svg\")\n    //.attr(\"width\", width)\n    //.attr(\"height\", height)\n\n    svg.selectAll(\"*\").remove()\n    const defs = svg.append('defs')\n    const isalpha = val => /^[a-zA-Z]+$/.test(val)\n\n    // Standard Margin Convention\n    const background = svg.append(\"g\")\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n      .attr('class', 'background')\n\n    // Call the x axis in a group tag\n    const axis = background.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + (height - 10) + \")\")\n      .call(d3.axisBottom(xScale).tickFormat(d => d == 0 ? 'Input' : d))\n\n    axis.select('.domain').remove()\n    axis.selectAll('text')\n      .attr('font-size', '16px')\n      //.style('font-weight', 600)\n      .style(\"font-family\", \"Arial, san-serif\")\n\n    axis.selectAll('line')\n      .style('stroke', 'gray')\n      .style('stroke-width', '2px')\n\n    let shades = getShade(data)\n    let extend_shades = getExtendShade(shades, data)\n\n    shades = shades.sort((a, b) => a.x != b.x ? (a.x - b.x) : (a.top - b.top))\n    for (let i = 1; i < shades.length; ++i) {\n      if (shades[i].x == shades[i - 1].x) {\n        if (shades[i].y3 < shades[i - 1].y4) {\n          let y = (shades[i].y3 + shades[i - 1].y4) * 0.5\n          shades[i].y3 = y\n          shades[i - 1].y4 = y\n        }\n        if (shades[i].y1 < shades[i - 1].y2) {\n          let y = (shades[i].y1 + shades[i - 1].y2) * 0.5\n          shades[i].y1 = y\n          shades[i - 1].y2 = y\n        }\n      }\n    }\n    shades = shades.concat(extend_shades)\n    shades = shades.sort((a, b) => a.x != b.x ? (a.x - b.x) : (a.top - b.top))\n    for (let i = 0; i < shades.length; ++i) {\n      for (let j = i + 1; j < shades.length; ++j) {\n        if (shades[j].x > shades[i].x + 1) {\n          break\n        }\n        if (shades[j].x == shades[i].x + 1) {\n          if (shades[j].top <= shades[i].top && shades[j].bottom >= shades[i].bottom) {\n            if (shades[i].c2 != shades[j].c1) {\n              shades[i].c2 = shades[j].c1\n              shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n              // console.log(shades[i])\n            }\n          } else if (shades[j].top >= shades[i].top && shades[j].bottom <= shades[i].bottom) {\n            if (shades[i].c2 != shades[j].c1) {\n              shades[j].c1 = shades[i].c2\n              shades[j].fill = `url(#pattern-${shades[j].c1}-to-${shades[j].c2})`\n            }\n          }\n        }\n      }\n    }\n    let last_cover = [], current_cover = [], last_layer = -1\n    /*\n    for (let i = shades.length - 1; i >= 0; --i) {\n      console.log(shades[i].x, shades[i].y3, shades[i].y4, shades[i])\n    }*/\n    // console.log('-------------------------')\n    for (let i = shades.length - 1; i >= 0; --i) {\n      if (!(i == shades.length - 1 || shades[i + 1].x == shades[i].x)) {\n        last_cover = []\n        current_cover.sort((a, b) => a[0] != b[0] ? a[0] - b[0] : b[1] - a[1])\n        let start = -1, end = -1\n        for (let i = 0; i < current_cover.length; ++i) {\n          if (current_cover[i][0] <= end) {\n            end = Math.max(end, current_cover[i][1])\n          } else {\n            if (start != -1) {\n              last_cover.push([start, end])\n            }\n            start = current_cover[i][0]\n            end = current_cover[i][1]\n          }\n        }\n        if (start != -1) {\n          last_cover.push([start, end])\n        }\n        last_layer = shades[i + 1].x\n        //console.log('layer', shades[i + 1].x, last_cover)\n        current_cover = []\n      }\n      if (i > 0 && shades[i].x == shades[i - 1].x && shades[i].x + 1 == last_layer) {\n        //console.log(shades[i].x, shades[i - 1].y3, shades[i - 1].y4, shades[i].y3, shades[i].y4)\n        for (let j = 0; j < last_cover.length; ++j) {\n          if (last_cover[j][0] <= shades[i].y3 && last_cover[j][1] >= shades[i].y4) {\n            if (last_cover[j][0] <= shades[i - 1].y3 && last_cover[j][1] >= shades[i - 1].y4) {\n              if (shades[i - 1].y4 < shades[i].y3) {\n                let mid = (shades[i - 1].y4 + shades[i].y3) / 2\n                shades[i - 1].y4 = shades[i].y3 = mid\n                //console.log('merge')\n                //console.log(shades[i].x, shades[i].y1, shades[i].y2, shades[i].y3, shades[i].y4)\n                //console.log(shades[i - 1].x, shades[i - 1].y1, shades[i - 1].y2, shades[i - 1].y3, shades[i - 1].y4)\n              }\n            }\n            break\n          }\n        }\n      }\n      current_cover.push([shades[i].y1, shades[i].y2])\n    }\n    shades.forEach(d => {\n      d.path = lineGenerator(xScale(d.x), xScale(d.x + 1), d.y1, d.y2, d.y3, d.y4)\n    })\n\n    const shadeGroup = background\n      .append('g')\n      .attr('class', 'shade-group')\n\n    const grayShadeElements = shadeGroup.selectAll('.gray-shade')\n      .data(shades.filter(d => d.fill.indexOf('neg') == -1 && d.fill.indexOf('pos') == -1))\n      .enter()\n      .append('g')\n      .attr('class', 'gray-shade')\n\n    grayShadeElements\n      .append('path')\n      .attr('d', d => d.path)\n      .style('stroke', 'none')\n      .style('fill', d => d.fill)\n\n    const coloredShadeElements = shadeGroup.selectAll('.colored-shade')\n      .data(shades.filter(d => d.fill.indexOf('neg') != -1 || d.fill.indexOf('pos') != -1))\n      .enter()\n      .append('g')\n      .attr('class', 'colored-shade')\n\n    coloredShadeElements\n      .append('path')\n      .attr('d', d => d.path)\n      .style('stroke', 'none')\n      .style('fill', d => d.fill)\n\n    const lineGroup = background\n      .append('g')\n      .attr('class', 'line-group')\n\n    const lineElement = lineGroup.selectAll(\".line\")\n      .data(data).enter()\n      .append(\"g\")\n      .attr(\"class\", \"line\")\n\n    const glyphGroup = background\n      .append('g')\n      .attr('class', 'glyph-group')\n\n    const labelGroup = background\n      .append('g')\n      .attr('class', 'label-group')\n    /*\n            labelGroup.append(\"text\")\n                .attr(\"x\", -50)\n                .attr(\"y\", -8)\n                .style(\"font-size\", \"13px\")\n                .style(\"font-family\", \"Roboto, san-serif\")\n                .text('word in sentence')\n    */\n\n    let labels = []\n    for (let d of data) {\n      labels.push({\n        anchor: 'end',\n        baseline: null,\n        x0: 0,\n        y0: yScale(d.line[0].position) + 5,\n        fill: 'rgb(27, 30, 35)',\n        s1: d.text.slice(0, d.pos),\n        s2: d.text.slice(d.pos, d.pos + d.len),\n        s3: d.text.slice(d.pos + d.len),\n      })\n    }\n\n    const signSet = new Set(['.', '', ','])\n\n    let phraseData = rawPhraseData\n      .filter(d => d.type == 'phrase' && d.layer < n_rows)\n      .filter(d => {\n        let x = (xScale(d.layer - 1) * 3 + xScale(d.layer)) / 4\n        let k = 0\n        for (let i = d.top; i < d.bottom; ++i) {\n          if (data[i].line[d.layer - 1].label != data[i + 1].line[d.layer - 1].label) {\n            k = i\n            break\n          }\n        }\n        return (d.top != 0 && data[k].line[d.layer].display && data[k + 1].line[d.layer].display)\n      })\n      .filter(d => {\n        return !signSet.has(data[d.top].text) && !signSet.has(data[d.bottom].text)\n      })\n\n    let relationData = rawPhraseData\n      .filter(d => d.type == 'relation')\n      .filter(d => d.layer < n_rows)\n      .filter(d => data[d.top].line[d.layer - 1].display && data[d.bottom].line[d.layer].display)\n\n    //if (testmode) relationData = []\n    //console.log('relationData', relationData)\n    \n    relationData.forEach(d => d.removed = false)\n    if (n_rows == 12) {\n      for (let i = 0; i < relationData.length; ++i) if (!relationData[i].removed) {\n        let t1 = relationData[i].top\n        let b1 = relationData[i].bottom\n        for (let j = i + 1; j < relationData.length; ++j) {\n          let t2 = relationData[j].top\n          let b2 = relationData[j].bottom\n          if ((t1 == t2 && b1 == b2 || t1 == b2 && b1 == t2) && (Math.abs(relationData[i].layer - relationData[j].layer) <= 2)) {\n            relationData[j].removed = true\n          }\n        }\n      }\n    }\n    \n    relationData.forEach(d => {\n      d.weight = Math.abs(data[d.top].line[d.layer - 1].contri * data[d.bottom].line[d.layer].contri)\n      if (data[d.top].tot_contri > top_3_contri || data[d.bottom].tot_contri > top_3_contri) {\n        d.weight *= 2\n      }\n    })\n\n    relationData = relationData\n      .filter(d => !d.removed)\n      //widthScale\n      .sort((a, b) => b.weight - a.weight)\n    // console.log(relationData, n_cols)\n    relationData = relationData.filter(d => {\n      if (d.layer < 3 && Math.abs(d.top - d.bottom) > 8 && n_rows > 10) return 0\n      const prev = contriScale(data[d.top].line[d.layer - 1].contri)\n      const curr = contriScale(data[d.bottom].line[d.layer - 1].contri)\n      const next = contriScale(data[d.bottom].line[d.layer].contri)\n      if (d.layer + 1 >= n_rows) return d.bottom == 0 && prev == next\n      if (prev == negativeColor && curr == positiveColor && next == positiveColor) {\n        return 0\n      } else if (prev == positiveColor && curr == negativeColor && next == negativeColor) {\n        return 0\n      }\n      return 1\n    })\n    //console.log(relationData)\n    for (let r of relationData) {\n      console.log(r.text, r.layer)\n    }\n    relationData.forEach(d => d.cross = 0)\n    relationData.forEach(d => d.removed = 0)\n    const max_relations = n_cols * 0.65\n    if (relationData.length > max_relations) {\n      const max_cross = 1\n      for (let i = 0; i < relationData.length; ++i) {\n        let flag = false\n        for (let j = 0; j < i; ++j) {\n          if (relationData[j].layer == relationData[i].layer) {\n            if (relationData[j].top > relationData[i].bottom && relationData[j].bottom < relationData[i].top ||\n              relationData[j].bottom > relationData[i].top && relationData[j].top < relationData[i].bottom) {\n                if (relationData[j].cross == max_cross) {\n                  flag = true\n                  break\n                }\n              }\n          }\n        }\n        if (flag) {\n          relationData[i].removed = 1\n          continue\n        }\n        for (let j = 0; j < i; ++j) {\n          if (relationData[j].layer == relationData[i].layer) {\n            if (relationData[j].top > relationData[i].bottom && relationData[j].bottom < relationData[i].top ||\n              relationData[j].bottom > relationData[i].top && relationData[j].top < relationData[i].bottom) {\n                relationData[j].cross += 1\n              }\n          }\n        }\n      }\n    }\n    \n    relationData = relationData\n      .filter(d => !d.removed)\n      .slice(0, max_relations)\n\n    let changeData = relationData\n      .map(d => ({\n        x: d.layer,\n        y: d.bottom,\n        left: data[d.bottom].line[d.layer - 1].contri,\n        right: data[d.bottom].line[d.layer].contri,\n      }))\n      .filter(d => d.x < n_rows - 2)\n\n    changeData = changeData.map(d => ({\n      x: (xScale(d.x) + xScale(d.x - 1)) / 2,\n      y: (yScale(data[d.y].line[d.x].position) + yScale(data[d.y].line[d.x - 1].position)) / 2,\n      row: d.y,\n      col: d.x,\n      delta: Math.abs(d.left - d.right) * (d.left * d.right < 0 ? 2 : 1),\n      left: d.left,\n      right: d.right,\n      removed: false,\n    }))\n\n    changeData = changeData\n      .filter(d => contriScale(d.left) != contriScale(d.right))\n      .sort((a, b) => b.delta - a.delta)\n      .slice(0, 3)\n\n    for (let i = 0; i < changeData.length; ++i) if (!changeData[i].removed) {\n      for (let j = i + 1; j < changeData.length; ++j) {\n        if (Math.abs(changeData[i].row - changeData[j].row) + Math.abs(changeData[i].col - changeData[j].col) <= 1) {\n          changeData[j].removed = true\n        }\n      }\n    }\n\n    changeData = changeData.filter(d => !d.removed)\n\n    changeData.forEach(d => {\n      data[d.row].line[d.col - 1].has_rseg = 1\n    })\n\n    const phraseElement = glyphGroup.selectAll(\".phrase\")\n      .data(phraseData)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"phrase\")\n      .style(\"display\", \"none\")\n\n    phraseElement.append('path')\n      .attr('d', d => {\n        let x = (xScale(d.layer - 1) * 3 + xScale(d.layer)) / 4\n        let k = 0\n        for (let i = d.top; i < d.bottom; ++i) {\n          if (data[i].line[d.layer - 1].label != data[i + 1].line[d.layer - 1].label) {\n            k = i\n            break\n          }\n        }\n        if (!data[d.top].line[d.layer - 1].display || !data[k + 1].line[d.layer - 1].display) return ''\n        data[k].line[d.layer - 1].has_rseg = 1\n        data[k + 1].line[d.layer - 1].has_rseg = 1\n        let y = yScale((data[k].line[d.layer - 1].position + data[k + 1].line[d.layer - 1].position) / 2)\n        let y1 = yScale(data[k].line[d.layer - 1].position)\n        let y2 = yScale(data[k + 1].line[d.layer - 1].position)\n        return `M${x - 20} ${y1} Q${x - 10} ${y - 2} ${x} ${y - 2} M${x - 20} ${y2} Q${x - 10} ${y + 2} ${x} ${y + 2}`\n      })\n      .style('fill', 'none')\n      .style('stroke', 'rgb(27, 30, 35)')\n      .style('opacity', .6)\n      .style('stroke-width', '2px')\n\n    phraseElement.append('path')\n      .attr('transform', d => {\n        let x = (xScale(d.layer - 1) * 3 + xScale(d.layer)) / 4\n        let k = 0\n        for (let i = d.top; i < d.bottom; ++i) {\n          if (data[i].line[d.layer - 1].label != data[i + 1].line[d.layer - 1].label) {\n            k = i\n            break\n          }\n        }\n        if (!data[d.top].line[d.layer - 1].display || !data[k + 1].line[d.layer - 1].display) return ''\n        let y = yScale((data[k].line[d.layer - 1].position + data[k + 1].line[d.layer - 1].position) / 2)\n        return `translate(${x + 3},${y})`\n      })\n      .attr('d', d => `M${1 * 6} ${0} L${-0.5 * 6} ${0.866 * 6} L${-0.5 * 6} ${-0.866 * 6} Z`)\n      .style('fill', 'rgb(27, 30, 35)')\n      .style('stroke', 'none')\n      .style('opacity', .6)\n      .style('stroke-width', '2px')\n\n    const relationElement = shadeGroup.selectAll(\".relation\")\n      .data(relationData)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"relation\")\n\n    relationElement\n      .append(\"path\")\n      .attr(\"d\", d => {\n        let y1 = yScale(d.y1)\n        let y2 = yScale(d.y2)\n        if (testmode) {\n          if (d.top == 2) d.top = 6\n          if (d.top == 3) d.top = 4\n          if (d.top == 6 && d.bottom == 9) d.layer -= 2\n          y1 = yScale(data[d.top].line[d.layer - 1].position)\n          y2 = yScale(data[d.bottom].line[d.layer].position)\n        }\n        let x0 = xScale(d.layer - 2)\n        let x1 = xScale(d.layer - 1)\n        let x2 = xScale(d.layer)\n        let c1 = data[d.top].line[d.layer - 1].contri\n        let c2 = data[d.top].line[d.layer].contri\n        let c3 = data[d.bottom].line[d.layer - 1].contri\n        let c4 = data[d.bottom].line[d.layer].contri\n        let w1 = (widthScale(c1) + widthScale(c2)) / 4 - 0.5\n        let w2 = (widthScale(c3) + widthScale(c4)) / 4 - 0.5\n        let minw = Math.min(w1, w2)\n        let x3 = (x0 + x1) / 2\n        let x4 = (x1 + x2) / 2\n        if (Math.abs(yScale(data[d.top].line[d.layer - 1].position) - yScale(data[d.top].line[d.layer - 2].position)) > 12) {\n          x3 = x1\n          y1 = yScale(data[d.top].line[d.layer - 1].position)\n        }\n        if (Math.abs(yScale(data[d.bottom].line[d.layer - 1].position) - yScale(data[d.bottom].line[d.layer].position)) > 12) {\n          x4 = x2\n          y2 = yScale(data[d.bottom].line[d.layer].position)\n        }\n        w1 = Math.min(w1, minw * 3)\n        w2 = Math.min(w2, minw * 3)\n        let path = lineGenerator(x3, x4, y1 - w1, y1 + w1, y2 - w2, y2 + w2, 1)\n        // console.log('relation', d.top, d.bottom, data[d.top].line[d.layer].label, data[d.bottom].line[d.layer].label)\n        return path\n      })\n      .style(\"stroke-width\", testmode ? 2 : .5)\n      // .style(\"stroke-dasharray\", \"8,8\")\n      .style(\"stroke\", d => {\n        let c1 = data[d.top].line[d.layer - 2].contri\n        let c2 = data[d.top].line[d.layer - 1].contri\n        let c3 = data[d.bottom].line[d.layer].contri\n        c1 = getColorName(contriScale(c1))\n        c2 = getColorName(contriScale(c2))\n        c3 = getColorName(contriScale(c3))\n        let fill = `url(#pattern-${c1}-to-${c2}-to-${c3}-origin)`\n        return fill\n      })\n      .style(\"fill\", d => {\n        let c1 = data[d.top].line[d.layer - 2].contri\n        let c2 = data[d.top].line[d.layer - 1].contri\n        let c3 = data[d.bottom].line[d.layer].contri\n        c1 = getColorName(contriScale(c1))\n        c2 = getColorName(contriScale(c2))\n        c3 = getColorName(contriScale(c3))\n        let fill = `url(#pattern-${c1}-to-${c2}-to-${c3}-origin)`\n        return fill\n      })\n\n    let changeElement = glyphGroup.selectAll('.represent')\n      .data(changeData).enter()\n      .append('g')\n      .attr('class', 'represent')\n      .attr('transform', d => `translate(${d.x},${d.y})`)\n\n    if (testmode) {\n      changeElement.append('rect')\n        .attr('x', -12)\n        .attr('y', d => -6.5)\n        .attr('width', 24)\n        .attr('height', d => 13)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('stroke', d => contriScale(d.right))\n        .style('stroke-width', 1)\n        .style('fill', d => contriScale(d.right))\n\n      changeElement.append('rect')\n        .attr('x', -12)\n        .attr('y', d => -6.5)\n        .attr('width', 12)\n        .attr('height', d => 13)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('fill', d => contriScale(d.left))\n\n    } else {\n      changeElement.append('rect')\n        .attr('x', -9)\n        .attr('y', d => -5)\n        .attr('width', 18)\n        .attr('height', d => 10)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('stroke', d => contriScale(d.right))\n        .style('stroke-width', 1)\n        .style('fill', d => contriScale(d.right))\n\n      changeElement.append('rect')\n        .attr('x', -9)\n        .attr('y', d => -5)\n        .attr('width', 9)\n        .attr('height', d => 10)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('fill', d => contriScale(d.left))\n\n    }\n    addGradientColor(defs)\n\n    let segments = []\n    data.forEach(function (d, index) {\n      for (let i = 0; i + 1 < d.line.length; ++i) {\n        d.line[i].has_shade = false\n        let w1 = widthScale(d.line[i].contri)\n        let w2 = widthScale(d.line[i + 1].contri)\n        if (!d.line[i + 1].display) {\n          break\n        } else if (i + 2 < d.line.length && !d.line[i + 2].display) {\n          w2 = 0.5\n        }\n        let x1, x2, y1, y2, y3, y4\n\n        x1 = xScale(d.line[i].layer)\n        x2 = xScale(d.line[i + 1].layer)\n        y1 = yScale(d.line[i].position) - w1 * 0.5\n        y3 = yScale(d.line[i + 1].position) - w2 * 0.5\n\n        let linearGradient = defs.append('linearGradient')\n          .attr('id', `pattern-${d.line[i].fill_id}`)\n          .attr('x1', '0%')\n          .attr('y1', '0%')\n          .attr('x2', '100%')\n          .attr('y2', '0%')\n\n        linearGradient.append('stop')\n          .attr('offset', '0%')\n          .attr('stop-color', contriScale(d.line[i].contri))\n\n        linearGradient.append('stop')\n          .attr('offset', '100%')\n          .attr('stop-color', contriScale(d.line[i + 1].contri))\n\n        if (d.line[i].show_label && isalpha(d.text)) {\n          let tw = measure(d.text)[0]\n          let t = Math.min(y1, y3)\n          let b = Math.max(y1 + w1, y3 + w2)\n          let x3 = Math.max(x1, (x1 + x2) / 2 - tw * (testmode ? (d.text == 'the' ? 0.15 : 0.45) : 0.48))// - delta)\n          let x4 = Math.min(x2, (x1 + x2) / 2 + tw * (testmode ? (d.text == 'the' ? 0.15 : 0.45) : 0.48))// + delta)\n          defs.append('clipPath')\n            .attr('id', `clipping-${d.line[i].fill_id}`)\n            .append('path')\n            .attr('d', `M${x1} ${t} L${x1} ${b} L${x3} ${b} L${x3} ${t} M${x4} ${t} L${x4} ${b} L${x2} ${b} L${x2} ${t}`)\n\n          /*\n          svg.append('defs')\n            .append('path')\n            .attr('id', `labelbaseline-${d.line[i].fill_id}`)\n            .attr('d', path)\n            */\n        }\n\n        segments.push({\n          d: lineGenerator(x1, x2, y1, y1 + w1, y3, y3 + w2),\n          opacity: 1,\n          fill_id: d.line[i].fill_id,\n          center: { x: (x1 + x2) / 2, y: (y1 + y3) / 2 },\n          baseline: d.line[i].show_label && isalpha(d.text) ? [x1, x2, y1, y1 + w1, y3, y3 + w2] : null,\n          label: d.line[i].show_label && !d.line[i].has_rseg ? { text: d.text, pos: d.pos, len: d.len } : null,\n          x: i,\n          y: index,\n        })\n      }\n    })\n\n    const segElement = lineGroup\n      .selectAll('.segment')\n      .data(segments).enter()\n      .append('g')\n      .attr('class', 'segment')\n\n    const segLine = segElement\n      .append('path')\n      .attr('d', d => d.d)\n      .style('clip-path', d => d.label ? `url(#clipping-${d.fill_id})` : 'none')\n      .style('fill', d => `url(#pattern-${d.fill_id})`)\n      .style('stroke', 'none')\n      .style('opacity', d => d.opacity)\n\n    for (let d of segments) {\n      if (d.baseline == null || d.label == null) continue\n      labels.push({\n        anchor: 'middle',\n        x0: d.center.x,\n        y0: d.center.y,\n        fill: 'rgb(27, 30, 35)',\n        baseline: d.baseline,\n        s1: d.label.text.slice(0, d.label.pos),\n        s2: d.label.text.slice(d.label.pos, d.label.pos + d.label.len),\n        s3: d.label.text.slice(d.label.pos + d.label.len),\n      })\n    }\n\n    for (let d of data) {\n      labels.push({\n        anchor: 'start',\n        is_end: d.end_point == d.line.length - 1 ? 1 : 0,\n        contri: Math.abs(d.line[d.end_point].contri),\n        x0: xScale(d.end_point) + 8,\n        y0: yScale(d.line[d.end_point].position) + 3,\n        baseline: null,\n        fill: d.end_point + 1 < d.line.length ? contriScale(d.line[d.end_point].contri) : 'rgb(27, 30, 35)',\n        s1: d.text.slice(0, d.pos),\n        s2: d.text.slice(d.pos, d.pos + d.len),\n        s3: d.text.slice(d.pos + d.len),\n      })\n    }\n    const endLabelGroup = labelGroup\n      .selectAll('.end-label')\n      .data(data).enter()\n      .append('g')\n      .attr('class', 'end-label')\n\n    const endGlyph = endLabelGroup.filter(d => !d.line[n_rows - 1].display)\n\n    endGlyph\n      .append('circle')\n      .attr('cx', d => xScale(d.end_point))\n      .attr('cy', d => yScale(d.line[d.end_point].position))\n      .attr('r', 3)\n      .style('fill', d => contriScale(d.line[d.end_point].contri))//'#ccc')\n      .style('stroke', d => contriScale(d.line[d.end_point].contri))\n      .style('stroke-width', 1.5)\n\n    labels.forEach(d => {\n      d.all_pieces = [[d.s1, 0.4], [d.s2, 1], [d.s3, 0.4]].filter(e => e[0].length > 0)\n      d.pieces = []\n      let shortcut = ''\n      for (let e of d.all_pieces) {\n        if (e[0].length + shortcut.length > max_text_len) {\n          const curr = e[0].slice(0, max_text_len - shortcut.length) + '...'\n          d.pieces.push([curr, e[1]])\n          shortcut += curr\n          break\n        } else {\n          d.pieces.push(e)\n          shortcut += e[0]\n        }\n      }\n      const m = measure(shortcut)\n      d.width = m[0]\n      d.height = m[1] * 0.7\n      if (d.anchor == 'end') {\n        d.x0 -= d.width\n        d.anchor = 'start'\n      } else if (d.anchor == 'middle') {\n        d.x0 -= d.width * 0.5\n        d.y0 += d.height// * 0.5\n      }\n      d.x = d.x0\n      d.y = d.y0\n    })\n\n\n    let endLabels = labels\n      .filter(d => d.is_end)\n      .sort((a, b) => Math.abs(b.contri) - Math.abs(a.contri))\n    labels = labels.filter(d => !d.is_end)\n    for (let i = 0; i < endLabels.length; ++i) {\n      endLabels[i].display = 1\n    }\n    for (let i = 6; i < endLabels.length; ++i) {\n      for (let j = 0; j < i; ++j) if (endLabels[j].display && Math.abs(endLabels[i].y - endLabels[j].y) < 10) {\n        endLabels[i].display = 0\n      }\n    }\n    endLabels = endLabels.filter(d => d.display)\n    labels = labels.concat(endLabels)\n    const simulation = d3.forceSimulation(labels)\n      .force(\"x\", d3.forceX(0).strength(0.0))\n      .force(\"y\", d3.forceY(0).strength(0.0))\n      .force(\"collide\", forceCollide())\n\n    for (let i = 0; i < 50; ++i) {\n      await simulation.tick()\n    }\n\n    // paint labels with\n    const allLabel = background.selectAll('.label')\n      .data(labels).enter()\n      .append('text')\n      .attr('class', 'label')\n      .attr('fill', d => d.fill)\n      .attr('text-anchor', d => d.anchor)\n      .style('font-size', label_size)\n      .style('font-family', label_font)\n\n    let labelWithPath = allLabel.filter(d => d.baseline)\n    let labelNoPath = allLabel.filter(d => !d.baseline)\n\n    labelWithPath\n      .append('defs').append('path')\n      .attr('id', (d, i) => `labelbaseline-${i}`)\n      .attr('d', d => {\n        let dx = d.x - d.x0\n        let dy = d.y - d.y0\n        let v = d.baseline\n        return baselineGenerator(v[0] + dx, v[1] + dx, v[2] + dy, v[3] + dy, v[4] + dy, v[5] + dy)\n      })\n\n    let labelText = labelWithPath\n      .append('textPath')\n      .attr('href', (d, i) => `#labelbaseline-${i}`)\n      .attr('startOffset', '50%')\n\n    labelText.selectAll(\"tspan\")\n      .data(d => d.pieces).enter()\n      .append(\"tspan\")\n      .style(\"opacity\", d => d[1])\n      .text(d => d[0])\n\n    let labelText2 = labelNoPath\n      .attr('x', d => d.x)\n      .attr('y', d => d.y)\n\n    labelText2.selectAll(\"tspan\")\n      .data(d => d.pieces).enter()\n      .append(\"tspan\")\n      .style(\"opacity\", d => d[1])\n      .text(d => d[0])\n\n    d3.select(\"body\").selectAll(\".svg-tooltip\").remove()\n\n    const tooltip = d3.select(\"body\").append(\"div\")\n      .attr(\"class\", \"svg-tooltip\")\n        .style(\"position\", \"absolute\")\n        .style(\"visibility\", \"hidden\")\n\n    const update_tooltip = (d) => {\n      tooltip.selectAll(\"span\")\n        .data(d.all_pieces).enter()\n        .append(\"span\")\n        .text(e => e[0])\n\n      tooltip.selectAll(\"span\")\n        .data(d.all_pieces)\n        .style(\"opacity\", e => e[1])\n        .text(e => e[0] + ' ')\n\n      tooltip.selectAll(\"span\")\n        .data(d.all_pieces)\n        .exit().remove()\n\n    }\n\n    labelWithPath\n      .on(\"mouseover\", function(d){\n        update_tooltip(d)\n        return tooltip.style(\"visibility\", \"visible\");\n      })\n      .on(\"mousemove\", function(){\n        return tooltip.style(\"top\", (d3.event.pageY-10)+\"px\").style(\"left\",(d3.event.pageX+10)+\"px\");\n      })\n      .on(\"mouseout\", function(){\n        return tooltip.style(\"visibility\", \"hidden\");\n      })\n\n    labelNoPath\n      .on(\"mouseover\", function(d){\n        update_tooltip(d)\n        return tooltip.style(\"visibility\", \"visible\");\n      })\n      .on(\"mousemove\", function(){\n        return tooltip.style(\"top\", (d3.event.pageY-10)+\"px\").style(\"left\",(d3.event.pageX+10)+\"px\");\n      })\n      .on(\"mouseout\", function(){\n        return tooltip.style(\"visibility\", \"hidden\");\n      })\n  }\n\n  LineChart()\n}\n\nexport default paintSampleComposition\n","<template>\n  <v-app style=\"position: relative\" ref=\"mainview\">\n    <info-tooltip\n      :left=\"tooltip.left\"\n      :top=\"tooltip.top\"\n      :show=\"tooltip.show\"\n      :content=\"tooltip.content\"\n    >\n    </info-tooltip>\n    <!--v-app-bar dense flat app color=\"grey darken-4\" dark>\n      <div class=\"d-flex align-center headline\">DeepNLP Vis</div>\n      <v-spacer></v-spacer>\n      <div class=\"d-flex align-center\">SST2, 67349 training samples</div>\n      <v-btn icon>\n        <v-icon>mdi-chevron-down</v-icon>\n      </v-btn>\n    </v-app-bar-->\n\n    <v-content>\n      <v-container fluid class=\"core-view fill-height\" id=\"nlpvis\">\n        <v-row class=\"fill-height\">\n          <v-col cols=\"4\" class=\"fill-height py-0 pr-0\">\n            <v-card class=\"nlpvis-view\" height=\"40%\" v-intro-step=\"2\" v-intro=\"'In the distribution view, user can identify important samples and words for further analysis.'\">\n              <!--v-row class=\"pa-1 pl-4 nlpvis-title\"> Corpus </v-row-->\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"left_top_view\"\n                >\n                  <v-btn value=\"matrix\">\n                    <span class=\"nlpvis-title\">Class</span>\n                  </v-btn>\n\n                  <v-btn value=\"corpus\">\n                    <span class=\"nlpvis-title\">Distribution</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <v-checkbox\n                  v-model=\"is_lasso_select_all\"\n                  style=\"padding-top: 12px\"\n                  color=\"darkgray\"\n                >\n                <template v-slot:prepend>\n                  <v-img width=\"115px\" height=\"24px\" src=\"./assets/figure1.png\"></v-img>\n                </template>\n                </v-checkbox>\n                <!--v-radio-group\n                  v-model=\"row\"\n                  row\n                >\n                  <template v-slot:label>\n                    <div>\n                      <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n                        viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512; width: 16px; height: 16px; opacity: .5\" xml:space=\"preserve\">\n                      <g>\n                        <g>\n                          <g>\n                            <path d=\"M453.072,140.002l24.448-20.656c-7.542-8.861-15.869-17.022-24.88-24.384l-20.304,24.704\n                              C439.842,125.811,446.782,132.617,453.072,140.002z\"/>\n                            <path d=\"M424.528,75.202c-9.74-5.814-19.835-11.014-30.224-15.568l-12.8,29.312c9.156,3.984,18.045,8.559,26.608,13.696\n                              L424.528,75.202z\"/>\n                            <path d=\"M512,208.002c-0.068-20.623-5.094-40.927-14.656-59.2l-28.464,14.624c7.238,13.748,11.052,29.039,11.12,44.576\n                              c0,79.408-100.48,144-224,144c-10.944,0-21.648-0.656-32.16-1.6c-0.758-35.232-29.934-63.179-65.166-62.421\n                              c-20.341,0.438-39.253,10.549-50.914,27.221C60.176,287.906,32,248.722,32,208.002c0-79.408,100.48-144,224-144\n                              c32.916-0.152,65.664,4.703,97.12,14.4l9.6-30.528C328.16,37.19,292.173,31.838,256,32.002c-141.152,0-256,78.96-256,176\n                              c0,53.92,35.904,104.768,96.624,137.888c-0.313,2.025-0.522,4.065-0.624,6.112c-0.057,35.284,28.501,63.934,63.786,63.99\n                              c21.914,0.035,42.317-11.164,54.054-29.67c34.527,11.019,58.016,43.037,58.16,79.28v14.4h32v-14.4\n                              c-0.055-30.856-12.454-60.406-34.432-82.064C404.4,378.626,512,301.906,512,208.002z M160,384.002c-17.673,0-32-14.327-32-32\n                              c0-17.673,14.327-32,32-32s32,14.327,32,32C192,369.675,177.673,384.002,160,384.002z\"/>\n                          </g>\n                        </g>\n                      </g>\n                      </svg>\n                    </div>\n                  </template>\n                  <v-radio value=\"radio-1\">\n                    <template v-slot:label>\n                      <div>Allow\n                      </div>\n                    </template>\n                  </v-radio>\n                  <v-radio value=\"radio-2\">\n                    <template v-slot:label>\n                      <div>Of course it's <strong class=\"success--text\">Google</strong></div>\n                    </template>\n                  </v-radio>\n                </v-radio-group-->\n\n                <!--v-icon size=\"18\"\n                  class=\"px-2\"\n                  :color=\"show_trending_down ? 'orange darken-2' : '#777'\"\n                  @click=\"show_trending_down = !show_trending_down\"\n                >\n                  mdi-trending-down\n                </v-icon-->\n              </v-toolbar> \n              <hr/>\n              <svg id=\"overview-svg\" class=\"ma-1\" v-intro-step=\"1\"\n              v-intro=\"'Click on an element in the matrix to start the analysis of any two classes.'\">\n                <g id=\"overview-g\" v-show=\"left_top_view == 'corpus'\"></g>\n                <word-group v-show=\"left_top_view == 'corpus'\"\n                  :tooltip=\"enable_tooltip\"\n                  :transform=\"`translate(${bubble.left},${0})`\"\n                  :data=\"overviewWords\"\n                  :interaction=\"enable_word_filter ? 'filter' : 'DAG'\"\n                ></word-group>\n                <g id=\"matrix-g\" v-show=\"left_top_view == 'matrix'\">\n                  <g transform=\"translate(30, 10)\">\n                    <image x=\"0\" y=\"18\" width=\"320\" height=\"10\" preserveAspectRatio=\"none\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAH0lEQVQ4T2P8////fwYGBgYoNUpDgmM0HEbDYUSkAwCp0H+QW+DsjwAAAABJRU5ErkJggg==\"></image>\n                    <g transform=\"translate(0,28)\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"middle\"><g class=\"tick\" opacity=\"1\" transform=\"translate(0.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" y=\"9\" font-size=\"18px\" font-family=\"Arial\" dy=\"0.71em\">0.0</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(143.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" y=\"9\" font-size=\"18px\" font-family=\"Arial\" dy=\"0.71em\">0.2</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(203.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text font-size=\"18px\" font-family=\"Arial\" fill=\"currentColor\" y=\"9\" dy=\"0.71em\">0.4</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(249.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" y=\"9\" font-size=\"18px\" font-family=\"Arial\" dy=\"0.71em\">0.6</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(287.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" font-size=\"18px\" font-family=\"Arial\" y=\"9\" dy=\"0.71em\">0.8</text></g><text x=\"0\" y=\"-16\" font-size=\"18px\" font-family=\"Arial\" fill=\"currentColor\" text-anchor=\"start\" font-weight=\"bold\">Percentage</text></g>\n                  </g>\n                </g>\n              </svg>\n            </v-card>\n            <v-card class=\"nlpvis-view pa-1 mt-2\" min-height=\"calc(53% - 48px)\"\n            v-intro=\"'In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.'\"\n            v-intro-step=\"4\">\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"left_bottom_view\"\n                >\n                  <v-btn value=\"samples\">\n                    <span class=\"nlpvis-title\">Sample List</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <template v-if=\"!search_expand\">\n                  <span class=\"pa-1 nlpvis-title disabled\"></span>\n                  <template v-if=\"left_top_view == 'corpus'\">\n                    <span :key=\"`legend${index}`\" v-for=\"index in selected_class\" class=\"color-legend\" :style=\"`--color: ${color_scheme[index]}`\">\n                      {{ labels[index] && labels[index].name }}\n                    </span>\n                  </template>\n                </template>\n                <template v-else>\n                <v-combobox\n                  v-model=\"chips\"\n                  chips\n                  clearable\n                  label=\"Enter a word or sample number here\"\n                  multiple\n                  solo\n                >\n                  <template v-slot:selection=\"{ attrs, item, selected }\">\n                    <v-chip\n                      v-bind=\"attrs\"\n                      :input-value=\"selected\"\n                      close\n                      @click=\"clickSearchItem(item)\"\n                      @contextmenu.prevent=\"rightClickSearchItem(item)\"\n                      @click:close=\"removeSearchItem(item)\"\n                    >\n                      <strong>{{ item }}</strong>&nbsp;\n                      <span>{{ isNaN(+item) ? '(Word)' : '(Sample)'}}</span>\n                    </v-chip>\n                  </template>\n                </v-combobox>\n                </template>\n                <v-btn icon @click=\"onClickSearch()\">\n                  <v-icon size=\"26\">mdi-magnify</v-icon>\n                </v-btn>\n              </v-toolbar> \n              <hr/>\n              <v-simple-table\n                dense\n                ref=\"simpletable\"\n                style=\"\n                  overflow-x: hidden;\n                  max-height: calc(52vh - 96px);\n                  max-width: 100%;\n                  overflow-y: scroll;\n                \"\n\n              >\n                <template v-slot:default>\n                  <thead>\n                    <tr>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        ID<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\">\n                        Passage<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        Label<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        Score<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        ...<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody style=\"\n                  overflow-x: hidden;\n                  max-height: calc(52% - 96px);\n                  overflow-y: scroll;\n                \"\n>\n                    <template v-for=\"item in view_samples\">\n                      <tr :key=\"`filter${item.index}`\" v-if=\"item.show_filter\">\n                        <td class=\"pa-1 nlpvis-text\"></td>\n                        <td class=\"pa-1 nlpvis-text\" style=\"color: #777\">\n                          There are {{filter_info.pos}} negative samples and {{filter_info.neg}} positive samples include \"{{filter_info.word}}\"  \n                        </td>\n                        <td class=\"pa-1 nlpvis-text\" style=\"white-space: nowrap\">\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                        </td>\n                      </tr>\n                      <tr\n                        :key=\"item.index\"\n                        @mouseenter=\"highlightGrid([item.index])\"\n                        @mouseleave=\"highlightGrid(null)\"\n                        @click=\"addSentenceDAG(item.index)\"\n                      >\n                        <td class=\"pa-1 nlpvis-text\">{{ item.index }}</td>\n                        <td class=\"pa-1 nlpvis-text\" :style=\"{ color: item.pred == 'N/A' ? '#777' : 'black' }\">\n                          <span\n                            v-for=\"(word, index) in item.text\"\n                            :key=\"index\"\n                            :style=\"{\n                              background: word[1] ? 'orange' : 'none',\n                            }\"\n                          >\n                            {{ word[0] }}\n                          </span>\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\" style=\"white-space: nowrap\">\n                          {{ item.label }}\n                          <span\n                            style=\"\n                              display: inline-block;\n                              width: 16px;\n                              height: 16px;\n                            \"\n                            :style=\"{\n                              'background-color': getLabelColor(item.label),\n                            }\"\n                          ></span>\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                          {{ isNaN(item.score) ? 'N/A' : Number(item.score).toFixed(2) }}\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                          <v-icon v-if=\"item.pred == item.label\"\n                            >mdi-check</v-icon size='16'\n                          >\n                          <v-icon v-else-if=\"item.pred != 'N/A'\">mdi-close</v-icon>\n                        </td>\n                      </tr>\n                    </template>\n                  </tbody>\n                </template>\n              </v-simple-table>\n            </v-card>\n            <v-card class=\"nlpvis-script pa-1 mt-2\" height=\"calc(7% + 8px)\">\n              <v-toolbar flat dense style=\"margin-top: 2.5%\">\n                <v-select\n                  :items=\"datasets\"\n                  label=\"SST-2\"\n                  class=\"nlpvis-text\"\n                  outlined\n                  style=\"margin-top: 3.5%\"\n                ></v-select>\n                <v-select\n                  :items=\"models\"\n                  label=\"12-layer BERT\"\n                  class=\"nlpvis-text ml-2\"\n                  outlined\n                  style=\"margin-top: 3.5%\"\n                ></v-select>\n                <v-dialog\n                  transition=\"dialog-bottom-transition\"\n                  :max-width=\"config.dialog_width\"\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      icon\n                      large\n                      style=\"margin-left: 4px\"\n                      v-bind=\"attrs\"\n                      v-on=\"on\"\n                      @click=\"onDialogOpen()\"\n                    >\n                      <v-icon>mdi-cog</v-icon>\n                    </v-btn>\n                  </template>\n                  <template v-slot:default=\"dialog\">\n                    <v-card\n                      width=\"600\"\n                    >\n                      <v-toolbar\n                        color=\"secondary\"\n                        class=\"text-h4\"\n                        dark\n                      >Color and parameter settings</v-toolbar>\n                      <v-card-text>\n                        <v-radio-group v-model=\"current_color_scheme\">\n                          <template v-slot:label>\n                            <div class=\"text-h5\"><strong>Color scheme</strong></div>\n                          </template>\n                          <v-radio :value=\"i\" v-for=\"(scheme, i) in color_candidates\" :key = \"`color${i}`\">\n                            <template v-slot:label>\n                              <div class=\"text-h6\" v-if=\"i == 0\"><strong> Default </strong></div>\n                              <div class=\"text-h6\" v-else><strong> Colorblind-safe </strong></div>\n                              <div class=\"ml-2\">\n                                <span :key=\"`legend${i}_${index}`\" v-for=\"(t, index) in scheme\" class=\"color-legend-type2\" :style=\"`--color: ${t}`\">\n                                </span>\n                              </div>\n                            </template>\n                          </v-radio>\n                        </v-radio-group>\n                        <hr class=\"mt-2 mb-2\"/>\n                        <div class=\"text-h5 mt-4\"><strong>Parameters</strong></div>\n                        <v-subheader class=\"text-h6  mt-2 mb-2\">\n                          ξ for differentiating class-relevant and -irrelevant words.\n                        </v-subheader>\n                        <svg ref=\"xi_distribution\" :width=\"config.histogram_width\" :height=\"config.histogram_height\"></svg>\n                        <v-slider\n                          v-model=\"xi_threshold\"\n                          :max=\"parameters.xi_range[1]\"\n                          :min=\"parameters.xi_range[0]\"\n                          :step=\"(parameters.xi_range[1] - parameters.xi_range[0]) / 1000\"\n                        >\n                          <template v-slot:append>\n                            <v-text-field\n                              v-model=\"xi_threshold\"\n                              class=\"mt-0 pt-0\"\n                              type=\"number\"\n                              style=\"width: 60px\"\n                            ></v-text-field>\n                          </template>\n                        </v-slider>\n                        <!--v-subheader class=\"text-h6 mt-2 mb-2\">\n                          γ for identifying words discarded by the model\n                        </v-subheader>\n                        <svg ref=\"gamma_distribution\" :width=\"config.histogram_width\" :height=\"config.histogram_height\"></svg>\n                        <v-slider\n                          v-model=\"gamma_threshold\"\n                          :max=\"parameters.gamma_range[1]\"\n                          :min=\"parameters.gamma_range[0]\"\n                          :step=\"(parameters.gamma_range[1] - parameters.gamma_range[0]) / 1000\"\n                        >\n                          <template v-slot:append>\n                            <v-text-field\n                              v-model=\"gamma_threshold\"\n                              class=\"mt-0 pt-0\"\n                              type=\"number\"\n                              style=\"width: 60px\"\n                            ></v-text-field>\n                          </template>\n                        </v-slider>-->\n                      </v-card-text>\n                      <v-card-actions class=\"justify-end\">\n                        <v-btn\n                          secondary\n                          @click=\"dialog.value = false\"\n                        >Save</v-btn>\n                        <v-btn\n                          default\n                          @click=\"dialog.value = false\"\n                        >Close</v-btn>\n                      </v-card-actions>\n                    </v-card>\n                  </template>\n                </v-dialog>\n              </v-toolbar>\n            </v-card>\n          </v-col>\n          <v-col cols=\"8\" class=\"fill-height py-0\">\n            <v-card class=\"nlpvis-view\" height=\"40%\" v-intro-step=\"3\" v-intro=\"'In the word contribution view, it shows how words are leveraged at different layers for prediction.'\">\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"right_top_view\"\n                >\n                  <v-btn value=\"word\">\n                    <span class=\"nlpvis-title\">Word Contribution</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <v-icon size=\"26\"\n                  class=\"px-2\"\n                  :color=\"show_trending_down ? '#333' : '#ccc'\"\n                  @click=\"show_trending_down = !show_trending_down\"\n                >\n                  mdi-trending-down\n                </v-icon>\n                <v-icon size=\"26\"\n                  class=\"px-2\"\n                  :color=\"show_trending_up ? '#333' : '#ccc'\"\n                  @click=\"show_trending_up = !show_trending_up\"\n                >\n                  mdi-trending-up\n                </v-icon>\n                <!--v-icon size=\"18\"\n                  class=\"px-2\"\n                  :color=\"enable_tooltip ? 'orange darken-2' : '#777'\"\n                  @click=\"enable_tooltip = !enable_tooltip\"\n                >\n                  mdi-message\n                </v-icon>\n                <v-icon size=\"18\"\n                  @click=\"enable_word_filter = !enable_word_filter\"\n                  class=\"px-2\"\n                  :color=\"enable_word_filter ? 'orange darken-2' : '#777'\"\n                >\n                  mdi-filter\n                </v-icon-->\n                <!--v-menu\n                  v-model=\"enable_word_attr\"\n                  :close-on-content-click=\"false\"\n                  :nudge-width=\"200\"\n                  offset-x\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      x-small\n                      outlined\n                      v-bind=\"attrs\"\n                      class=\"mx-1\"\n                      color=\"orange darken-2\"\n                      v-on=\"on\"\n                    >\n                      word weight\n                      <v-icon>mdi-chevron-down</v-icon>\n                    </v-btn>\n                  </template>\n\n                  <v-card>\n                    <v-subheader>Word ranking weight</v-subheader>\n                    <v-subheader>Uncertainty</v-subheader>\n                    <v-card-text class=\"py-0\">\n                      <v-slider\n                        v-model=\"uncertainty_weight\"\n                        min=\"0\"\n                        max=\"10\"\n                      ></v-slider>\n                    </v-card-text>\n                    <v-subheader>Frequency</v-subheader>\n                    <v-card-text class=\"py-0\">\n                      <v-slider\n                        v-model=\"frequency_weight\"\n                        min=\"0\"\n                        max=\"10\"\n                      ></v-slider>\n                    </v-card-text>\n\n                    <v-subheader>Entropy</v-subheader>\n                    <v-card-text class=\"py-0\">\n                      <v-slider\n                        v-model=\"entropy_weight\"\n                        min=\"0\"\n                        max=\"10\"\n                      ></v-slider>\n                    </v-card-text>\n\n                    <v-card-text>\n                      <v-btn text @click=\"enable_word_attr = false\"\n                        >Cancel</v-btn\n                      >\n                      <v-btn color=\"primary\" text @click=\"saveWordAttr()\"\n                        >Save</v-btn\n                      >\n                    </v-card-text>\n                  </v-card>\n                </v-menu-->\n              </v-toolbar>\n              <hr/>\n              <svg id=\"linechart-svg\" class=\"ma-1\">\n                <g id=\"linechart-g\" v-show=\"is_wordview_init\">\n                  <template v-if=\"show_trending_up\">\n                    <path transform=\"translate(0, 0)\"\n                          v-for=\"(path, index) in trending_up_lines\"\n                          :key=\"index\" :d=\"path\" fill=\"none\"\n                          stroke=\"#dbdedb\" stroke-width=\"15px\"\n                          style=\"opacity: 1\"\n                    >\n                    </path>\n                    <g transform=\"translate(0, 0)\" \n                          :key=\"index\" \n                          v-for=\"(underlines, index) in trending_up_underlines\">\n                      <line v-for=\"(line, index2) in underlines\"\n                            :key=\"index2\" fill=\"none\"\n                            style=\"opacity: 1; stroke-width: 3px; stroke:gray;\"\n                            :x1=\"line.x1\"\n                            :x2=\"line.x2\"\n                            :y1=\"line.y1\"\n                            :y2=\"line.y2\"\n                      >\n                      </line>\n                    </g>\n                  </template>\n                  <template v-if=\"show_trending_down\">\n                    <path transform=\"translate(0, 0)\"\n                          v-for=\"(path, index) in trending_down_lines\"\n                          :key=\"index\" :d=\"path\" fill=\"none\"\n                          stroke=\"#dbdedb\" stroke-width=\"15px\"\n                          style=\"opacity: 1\"\n                    >\n                    </path>\n                    <g transform=\"translate(0, 0)\" \n                          :key=\"index\" \n                          v-for=\"(underlines, index) in trending_down_underlines\">\n                      <line v-for=\"(line, index2) in underlines\"\n                            :key=\"index2\" fill=\"none\"\n                            style=\"opacity: 1; stroke-width: 3px; stroke:gray;\"\n                            :x1=\"line.x1\"\n                            :x2=\"line.x2\"\n                            :y1=\"line.y1\"\n                            :y2=\"line.y2\"\n                      >\n                      </line>\n                    </g>\n                  </template>\n                  <word-group\n                    :tooltip=\"enable_tooltip\"\n                    :transform=\"`translate(${linechart.padding},${0})`\"\n                    :data=\"infolossWords\"\n                    :highlight=\"\n                      enable_word_highlight && current_viewtype == 'sentence'\n                    \"\n                    :highlight_text=\"current_text\"\n                    :interaction=\"enable_word_filter ? 'filter' : 'DAG'\"\n                  ></word-group>\n                </g>\n              </svg>\n            </v-card>\n            <v-card class=\"nlpvis-view pa-1 mt-2\" height=\"calc(53% - 48px)\" v-intro-step=\"5\" v-intro=\"'In the information flow, user can analyze how NLP models process a sample through layers in a unified way.'\">\n\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"right_bottom_view\"\n                >\n                  <v-btn value=\"info_flow\" @click=\"changeRightBottomView()\">\n                    <span class=\"nlpvis-title\">Information Flow</span>\n                  </v-btn>\n\n                  <v-btn value=\"word_ctx\" @click=\"changeRightBottomView()\" v-intro-step=\"6\" v-intro=\"'In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.'\">\n                    <span class=\"nlpvis-title\">Word Context</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <template v-if=\"left_top_view == 'corpus'\">\n                  <span class=\"color-legend\" :style=\"`--color: rgb(153,153,153)`\">\n                    Irrelevant\n                  </span>\n                  <span :key=\"`legend${index}`\" v-for=\"index in selected_class\" class=\"color-legend\" :style=\"`--color: ${color_scheme[index]}`\">\n                    {{ labels[index] && labels[index].name }}\n                  </span>\n                </template>\n              </v-toolbar>\n              <hr/>\n              <svg id=\"network-svg\">\n                <!--g id=\"dag-g\"></g-->\n              </svg>\n            </v-card>\n            <v-card class=\"nlpvis-script pa-1 mt-2\" height=\"calc(7% + 8px)\">\n              <v-img height=\"76\" width=\"1160\" src=\"./assets/legend1.png\"></v-img>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport * as d3 from \"d3\"\nimport HistogramChart from './plugins/histogram'\nimport { mapState, mapMutations, mapActions, mapGetters } from \"vuex\"\nimport { hexbin } from \"d3-hexbin\"\nimport axios from \"axios\"\nimport wordcloud from \"./plugins/wordcloud\"\nimport lasso from \"./plugins/lasso\"\nimport bus from \"./plugins/bus\"\nimport { stepSizeScale, getValuesByEntropy, getWordColor } from \"./plugins/utils\"\nimport { paintLineChart } from \"./layout/word_contribution_layout\"\nimport { paintWordDAG, paintWordcloud } from \"./layout/word_dag_layout\"\nimport WordGroup from \"./components/wordgroup\"\nimport InfoTooltip from \"./components/infotooltip\"\n\nconst isalpha = (val) => /^[a-zA-Z]+$/.test(val)\n\nimport paintSampleComposition from \"./layout/sentence_layout.js\";\n\n\nexport default {\n  name: \"App\",\n\n  computed: {\n    ...mapState([\n      \"DAG\",\n      \"viewbox\",\n      \"linechart\",\n      \"bubble\",\n      \"showed_layers\",\n      \"config\",\n      \"labels\",\n      \"color_scheme\",\n      \"neuron_clusters\",\n      \"all_samples\",\n      \"color_candidates\",\n      \"selected_class\",\n      \"treemap\",\n      \"current_node\",\n      \"current_layers\",\n      \"edges\",\n      \"layers\",\n      \"sentenceclusters\",\n      \"scatterplot\",\n      \"current_viewtype\",\n      \"layout\",\n      \"tooltip\",\n      \"server_url\",\n      \"filter_info\",\n      \"matrix\",\n      \"parameters\",\n    ]),\n    ...mapGetters([\n      \"getSamples\",\n      \"getWordIdxs\",\n      \"view_samples\",\n      \"selected_label\",\n      \"fontSizeRange\",\n      \"getSample\",\n      \"positiveColor\",\n      \"negativeColor\",\n      \"neutralColor\",\n      \"neutralColorGray\",\n      \"getLabelColor\",\n    ]),\n    word_attrs() {\n      return {\n        frequency: this.frequency_weight / 10,\n        uncertainty: this.uncertainty_weight / 10,\n        entropy: this.entropy_weight / 10,\n      };\n    },\n  },\n  components: {\n    WordGroup: WordGroup,\n    InfoTooltip: InfoTooltip,\n  },\n  data: () => ({\n    datasets: ['SST-2'],// 'AGNews'],\n    models: ['BERT 12-Layer'],// 'Bi-LSTM 4-Layer'],\n    chips: [],\n    is_lasso_select_all: true,\n    enable_word_filter: false,\n    left_top_view: \"matrix\",\n    is_wordview_init: false,\n    right_bottom_view: \"info_flow\",\n    left_bottom_view: \"samples\",\n    right_top_view: \"word\",\n    enable_word_attr: false,\n    enable_tooltip: false,\n    show_trending_up: false,\n    show_trending_down: false,\n    trending_down_lines: [],\n    trending_up_lines: [],\n    trending_down_underlines: [],\n    trending_up_underlines: [],\n    enable_word_highlight: false,\n    current_color_scheme: 0,\n    dataset_name: \"\",\n    n_layer: 0,\n    sentences: null,\n    current_text: \"\",\n    frequency_weight: 10,\n    uncertainty_weight: 10,\n    entropy_weight: 10,\n    infolossWords: [],\n    overviewWords: [],\n    selectedSentence: null,\n    current_items: [],\n    current: { items: [], keywords: [] },\n    currentGrids: null,\n    currentGridsData: null,\n    selectedGrids: null,\n    lasso: null,\n    listOrderKey: \"p score\",\n    listOrder: 1,\n    word_cache: {},\n    total_accuracy: 100,\n    search_expand: false,\n    is_refreshing: false,\n    lastInfoFlow: null,\n    lastWordContext: null,\n    // gamma_threshold: 0.562,\n    xi_threshold: 0.02,\n    labelColor: [\"#d7191c\", \"#1a9641\", \"#1f77b4\", \"#ff7f0e\"],\n  }),\n  methods: {\n    ...mapMutations([\n      \"calcDAG\",\n      \"updatePosition\",\n      \"setViewtype\",\n      \"setLayers\",\n      \"setNetwork\",\n      \"calcEdges\",\n      \"showTooltip\",\n      \"hideTooltip\",\n      'addHoverTimer',\n      'removeHoverTimer',\n      'setHoverWord',\n    ]),\n    ...mapActions([\n      \"changeCurrentSamples\",\n      \"fetchAllSample\",\n      \"fetchLayerInfo\",\n      \"fetchWordIndex\",\n      \"changeFilteredWord\",\n      \"startSync\",\n      \"endSync\",\n      \"fetchScatterplot\",\n      \"selectClass\",\n      \"fetchMatrix\",\n    ]),\n    onDialogOpen(){\n      setTimeout(() => {\n        let chart = HistogramChart()\n          .data(this.parameters.xi_values.map(d => ({ value: d })))\n          .datatype('number')\n          .x('value')\n          .scale('log')\n          .width(this.config.histogram_width)\n          .height(this.config.histogram_height)\n          .color(this.config.histogram_color)\n\n        d3.select(this.$refs.xi_distribution).selectAll('*').remove()\n        d3.select(this.$refs.xi_distribution)\n          .append(\"g\")\n          .attr(\"class\", \"histogram\")\n          .attr(\"transform\", `translate(0, 0)`)\n          .call(chart)\n\n        /*\n        chart = HistogramChart()\n          .data(this.parameters.gamma_values.map(d => ({ value: d })))\n          .datatype('number')\n          .x('value')\n          .scale('linear')\n          .width(this.config.histogram_width)\n          .height(this.config.histogram_height)\n          .color(this.config.histogram_color)\n\n        d3.select(this.$refs.gamma_distribution).selectAll('*').remove()\n        d3.select(this.$refs.gamma_distribution)\n          .append(\"g\")\n          .attr(\"class\", \"histogram\")\n          .attr(\"transform\", `translate(0, 0)`)\n          .call(chart)\n          */\n      }, 50)\n    },\n    async rightClickSearchItem(d) {\n      if (isNaN(+d)) {\n        await this.fetchWordIndex(d)\n        let idxs = this.getWordIdxs(d)\n        if (idxs.length >= 8) {\n          bus.$emit('add_word_DAG', d)\n        }\n      } else {\n      }\n    },\n    async changeRightBottomView() {\n      if (this.right_bottom_view == 'word_ctx') {\n        this.right_bottom_view = 'info_flow'\n        await this.addSentenceDAG(this.lastInfoFlow)\n      } else {\n        this.right_bottom_view = 'word_ctx'\n        await this.addWordDAG(this.lastWordContext)\n      }\n    },\n    async clickSearchItem(d) {\n      if (isNaN(+d)) {\n        await this.fetchWordIndex(d)\n        await this.changeFilteredWord(d)\n      } else {\n        if (+d == 145) d -= 10\n        await this.addSentenceDAG(+d)\n      }\n    },\n    removeSearchItem() {\n      this.chips.splice(this.chips.indexOf(item), 1)\n      this.chips = [...this.chips]\n    },\n    onClickSearch() {\n      if (this.search_expand == false) {\n        this.search_expand = true\n      } else {\n        this.search_expand = false\n      }\n    },\n    wordInteraction(word) {\n      let hover_word_item = null;\n      let has_request = false;\n      let self = this;\n      return word\n        .on(\"click\", async (d) => {\n          let resp = self.word_cache[d.text];\n          let idxs = resp.data.idxs;\n          if (idxs.length >= 10) self.addWordDAG(d.text);\n        })\n        .on(\"mouseover\", (d) => {\n          if (\n            !isalpha(d.text) ||\n            d.text.length <= 1 ||\n            d.text.indexOf(\"_\") != -1\n          ) {\n            return;\n          }\n          hover_word_item = d.text;\n          let left = d3.event.pageX + 10;\n          let top = d3.event.pageY - 10;\n          const show_detail = async () => {\n            let resp = null;\n            if (self.word_cache[d.text]) {\n              resp = self.word_cache[d.text];\n            } else {\n              resp = await axios.post(`${self.server_url}/api/word`, {\n                word: d.text,\n              });\n              self.word_cache[d.text] = resp;\n            }\n            let idxs = resp.data.idxs;\n            let info = resp.data.info;\n            for (let i = 1; i < info.length; ++i) {\n              info[i] = Math.min(info[i - 1], info[i]);\n            }\n            self.highlightGrid(idxs);\n            let text = `<p>${d.text}, ${idxs.length} samples </p>`;\n\n            resp = await self.getSamples(idxs);\n            text =\n              text +\n              resp\n                .slice(0, 8)\n                .map((e, index) => `#${index + 1}: ${e.text}`)\n                .join(\"</br>\");\n            if (hover_word_item == d.text) {\n              self.showTooltip({ top, left, content: text });\n            }\n          };\n          setTimeout(() => {\n            if (hover_word_item == d.text) {\n              show_detail();\n            }\n          }, 500);\n        })\n        .on(\"mouseout\", (d) => {\n          hover_word_item = null;\n          self.hideTooltip();\n          self.highlightGrid(null);\n        });\n    },\n    brushGrid(idxs) {\n      if (!idxs || idxs.length == 0) {\n        this.currentGrids.style(\"opacity\", 1);\n        idxs = [];\n      } else {\n        idxs = new Set(idxs);\n        this.currentGrids.style(\"opacity\", (d) => {\n          for (let i = 0; i < d.length; ++i) {\n            if (idxs.has(d[i].index)) {\n              return 1;\n            }\n          }\n          return 0.4;\n        });\n      }\n      this.changeCurrentSamples([...idxs]);\n    },\n    getWordFillColor(d) {\n      let color = this.getWordColor(d);\n      if (color == this.neutralColorGray) return \"rgb(172, 196, 220)\";\n      return color;\n    },\n    getWordColor(d) {\n      return getWordColor(this, d)\n    },\n    highlightGrid(idxs) {\n      if (!idxs || idxs.length == 0) {\n        idxs = new Set();\n        this.currentGrids\n          .select(\"path.hexagon\")\n          .style(\"stroke\", \"white\")\n          .style(\"stroke-width\", 0.5)\n          .style(\"opacity\", 1);\n      } else {\n        idxs = new Set(idxs);\n        let grids0 = this.currentGrids.filter((d) => {\n          for (let i = 0; i < d.length; ++i) {\n            if (idxs.has(d[i].index)) {\n              return true;\n            }\n          }\n          return false;\n        });\n        let grids1 = this.currentGrids.filter((d) => {\n          for (let i = 0; i < d.length; ++i) {\n            if (idxs.has(d[i].index)) {\n              return false;\n            }\n          }\n          return true;\n        });\n        // console.log(grids0.select('path.hexagon'), grids1.select('path.hexagon'))\n\n        grids1\n          .select(\"path.hexagon\")\n          .style(\"stroke\", \"white\")\n          .style(\"stroke-width\", 0.5)\n          .style(\"opacity\", 0.5);\n\n        grids0\n          .select(\"path.hexagon\")\n          .style(\"stroke\", \"orange\")\n          .style(\"stroke-width\", 1)\n          .style(\"opacity\", 1);\n      }\n    },\n    svgResize() {\n      let network_rect = document\n        .getElementById(\"network-svg\")\n        .parentElement.getBoundingClientRect();\n\n      let bubble_rect = document\n        .getElementById(\"overview-svg\")\n        .parentElement.getBoundingClientRect();\n\n      let linechart_rect = document\n        .getElementById(\"linechart-svg\")\n        .parentElement.getBoundingClientRect();\n\n      network_rect.width -= 8;\n      bubble_rect.width -= 8;\n      linechart_rect.width -= 8;\n      network_rect.height -= 8;\n      bubble_rect.height -= 8 + 30;\n      linechart_rect.height -= 8 + 24;\n\n      // console.log(network_rect)\n      d3.select(\"#network-svg\")\n        .attr(\"width\", network_rect.width)\n        .attr(\"height\", network_rect.height)\n        .attr(\"viewBox\", `0 10 ${this.viewbox.network.width + 10} ${this.viewbox.network.height + 40}`)\n\n      d3.select(\"#overview-svg\")\n        .attr(\"width\", bubble_rect.width)\n        .attr(\"height\", bubble_rect.height)\n        .attr(\"viewBox\", `0 10 ${this.viewbox.overview.width + 10} ${this.viewbox.overview.height + 40}`)\n\n      d3.select(\"#linechart-svg\")\n        .attr(\"width\", linechart_rect.width)\n        .attr(\"height\", linechart_rect.height)\n        .attr(\"viewBox\", `0 10 ${this.viewbox.linechart.width + 10} ${this.viewbox.linechart.height + 40}`)\n\n      /*\n      d3.select(\"#network-svg\")\n        .attr(\"width\", this.viewbox.network.width)\n        .attr(\"height\", this.viewbox.network.height);\n\n      d3.select(\"#overview-svg\")\n        .attr(\"width\", this.viewbox.overview.width)\n        .attr(\"height\", this.viewbox.overview.height);\n\n      d3.select(\"#linechart-svg\")\n        .attr(\"width\", this.viewbox.linechart.width)\n        .attr(\"height\", this.viewbox.linechart.height);\n      */\n      this.updatePosition({\n        network: network_rect,\n        bubble: bubble_rect,\n        linechart: linechart_rect,\n      });\n\n      let linechart = d3\n        .select(\"#linechart-g\")\n        .attr(\n          \"transform\",\n          `translate(${this.linechart.x},${this.linechart.y})`\n        );\n\n      //let DAG = d3.select('#dag-g')\n      //  .attr('transform', `translate(${this.DAG.x},${this.DAG.y})`)\n    },\n    async paintWordcloud() {\n      await paintWordcloud(this)\n    },\n    async paintMatrix() {\n      const self = this;\n      const svgDOM = d3.select(\"#matrix-g\").attr(\"class\", \"matrixdiagram\");\n\n      let margin = { left: 120, top: 150, right: 10, bottom: 10 }\n      let padding = 50\n      let width = this.viewbox.overview.width\n      let height = this.viewbox.overview.height\n      let data = this.matrix;\n      const row_sum = data.data.map((d) => d.reduce((a, b) => a + b));\n      const ids = data.labels;\n      const matrix = ids.map((source, i) =>\n        ids.map((target, j) => ({\n          source,\n          target,\n          classes: [i, j],\n          val: data.data[i][j] / row_sum[i],\n        }))\n      );\n\n      let color_tp = d3.scaleSequentialSqrt((t) =>\n        d3.interpolate(\"white\", \"gray\")(t)\n      );\n      let color_fn = d3.scaleSequentialSqrt((t) =>\n        d3.interpolate(\"white\", \"gray\")(t)\n      );\n      color_fn.domain([\n        0,\n        d3.max(\n          matrix\n            .flat()\n            .filter((d) => d.source != d.target)\n            .map((d) => Number(d.val))\n        ),\n      ]);\n      color_tp.domain([\n        0,\n        d3.max(\n          matrix\n            .flat()\n            .filter((d) => d.source == d.target)\n            .map((d) => Number(d.val))\n        ),\n      ]);\n\n      let w = width - margin.left - margin.right\n      let h = height - margin.top - margin.bottom\n      w = h = Math.min(w, h) - padding\n      let x = d3\n        .scaleBand()\n        .rangeRound([0, w])\n        .paddingInner(0.0)\n        .align(0)\n        .domain(ids);\n\n      let svg = svgDOM\n        .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      function colored(d) {\n        const val = d.val;\n        if (d.source == d.target) return color_tp(+val);\n        return color_tp(+val);\n        if (+val > 0) return color_fn(+val);\n        return \"white\";\n      }\n\n      // text label for the axis\n      svg\n        .append(\"text\")\n        .attr(\"x\", w / 2)\n        .attr(\"y\", -41)\n        .style(\"text-anchor\", \"middle\")\n        .text(\"Predicted Class\");\n\n      svg\n        .append(\"text\")\n        .attr(\"x\", -w / 2)\n        .attr(\"y\", -100)\n        .attr(\"transform\", \"rotate(270)\")\n        .style(\"text-anchor\", \"middle\")\n        .text(\"Ground Truth\");\n\n      let row_line = svg\n        .selectAll(\"g.row\")\n        .data(matrix)\n        .enter()\n        .append(\"g\")\n        .attr(\"transform\", (d) => `translate(10,${x(d[0].source)})`)\n        .each(makeRow);\n\n      let row = row_line\n        .append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"x\", -4)\n        .attr(\"y\", x.bandwidth() / 2)\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"text-anchor\", \"end\")\n        .text((d) => d[0].source);\n\n      let column = svg\n        .selectAll(\"g.column\")\n        .data(matrix)\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"column label\")\n        .attr(\n          \"transform\",\n          (d) => `translate(${x(d[0].source)},${-x.bandwidth() / 2 - 10})`\n        ) //rotate(-90)`)\n        .attr(\"x\", 4)\n        .attr(\"y\", x.bandwidth() / 2)\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"dx\", \"0.32em\")\n        .text((d) => d[0].source);\n\n      function makeRow(rowData) {\n        let cell = d3\n          .select(this)\n          .selectAll(\".cell\")\n          .data(rowData)\n          .enter()\n          .append(\"g\")\n          .attr(\"class\", \"cell\")\n          .attr(\"transform\", (d) => `translate(${x(d.target)}, 0)`);\n\n        cell\n          .append(\"rect\")\n          .attr(\"width\", x.bandwidth())\n          .attr(\"height\", x.bandwidth())\n          .style(\"fill-opacity\", 1)\n          .style(\"stroke\", \"lightgray\")\n          .style(\"stroke-width\", 0.0)\n          .style(\"fill\", (d) => colored(d));\n\n        cell\n          .append(\"text\")\n          .attr(\"x\", x.bandwidth() / 2)\n          .attr(\"y\", x.bandwidth() / 2 + 7)\n          .style(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"18px\")\n          .style(\"font-weight\", 500)\n          .style(\"fill\", (d) => (d.val > 0.9 ? \"white\" : \"black\"))\n          .text((d) => Number(d.val).toFixed(3));\n\n        cell\n          .on(\"mouseover\", (d) => {\n            d3.selectAll(\".cell\").style(\"opacity\", \"0.1\");\n\n            d3.selectAll(\".cell\")\n              .filter(\n                (e) =>\n                  (e.source == d.source || e.source == d.target) &&\n                  (e.target == d.source || e.target == d.target)\n              )\n              .style(\"opacity\", \"1\")\n              .append(\"rect\")\n              .attr(\"class\", \"hovered\")\n              .attr(\"width\", x.bandwidth())\n              .attr(\"height\", x.bandwidth())\n              .style(\"fill\", \"none\")\n              .style(\"stroke\", \"gray\")\n              .style(\"stroke-width\", 1.5);\n\n            row\n              .filter((e) => e[0].source === d.source)\n              .style(\"fill\", \"#000\")\n              .style(\"font-weight\", \"bold\");\n\n            column\n              .filter((e) => e[0].source === d.target)\n              .style(\"fill\", \"#000\")\n              .style(\"font-weight\", \"bold\");\n          })\n          .on(\"mouseout\", () => {\n            d3.selectAll(\".cell\").style(\"opacity\", \"1\");\n\n            d3.selectAll(\".cell\").select(\".hovered\").remove();\n\n            row.style(\"fill\", null).style(\"font-weight\", null);\n            column.style(\"fill\", null).style(\"font-weight\", null);\n          })\n          .on(\"click\", async (d) => {\n            await self.onSelectClass(d.classes)\n            self.left_top_view = \"corpus\"\n            self.is_wordview_init = 1\n          });\n        cell.append(\"title\").text((d) => d.val);\n      }\n    },\n    async paintScatterplot() {\n      const svg = d3.select(\"#overview-g\");\n      let margin_left = this.bubble.left;\n      let margin_top = 15;\n      let margin_right = this.bubble.top;\n      let margin_bottom = 8;\n      let width = this.viewbox.overview.width - margin_left - margin_right;\n      let height = this.viewbox.overview.height - margin_top - margin_bottom - 18;\n      let data = this.scatterplot;\n      let self = this;\n      self.dataset_name = this.scatterplot.dataset;\n      self.n_layer = this.scatterplot.n_layer;\n\n      const disappear_time = 200;\n      const animation_time = 2000;\n      const glyph_margin = 10\n\n      svg\n        .append(\"clipPath\")\n        .attr(\"id\", \"clip_path\")\n        .append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n\n      const main_g = svg\n        .append(\"g\")\n        .attr(\"class\", \"main_layer\")\n        .attr(\"transform\", `translate(${margin_left}, ${margin_top})`);\n\n      const word_g = svg\n        .append(\"g\")\n        .attr(\"class\", \"word_layer\")\n        .attr(\"transform\", `translate(${margin_left}, ${margin_top})`);\n\n      const label_g = svg\n        .append(\"g\")\n        .attr(\"class\", \"label_layer\")\n        .attr(\"transform\", `translate(${margin_left}, ${margin_top})`)\n        .style(\"font-family\", \"sans-serif\")\n        .style(\"font-size\", 16);\n\n      label_g\n        .append(\"g\")\n        .attr(\"transform\", `translate(${3},${-2})`)\n        .append(\"text\")\n        //.attr('transform', 'rotate(90)')\n        .style(\"font-family\", \"Roboto, san-serif\")\n        .text(\"Prediction Score\");\n\n      /*\n      label_g\n        .append(\"g\")\n        .attr(\"transform\", `translate(${width - 6},${-2})`)\n        .append(\"text\")\n        //.attr('transform', 'rotate(90)')\n        .attr(\"text-anchor\", \"end\")\n        .style(\"font-family\", \"Roboto, san-serif\")\n        .text(\"Accuracy\");\n        */\n      /*\n          label_g.append('text')\n            .attr('x', width - 6)\n            .attr('y', height)\n            .attr('text-anchor', 'end')\n            .text('Embedding t-SNE')\n            */\n\n      let strip_step = 0.0625;\n      let xdomain0 = d3.extent(data.scatters, (d) => d.x)\n      let xdomain = [0, 1];\n      data.scatters.forEach(\n        (d) =>\n          (d.x =\n            ((d.x - xdomain0[0]) / (xdomain0[1] - xdomain0[0])) *\n              (xdomain[1] - xdomain[0]) *\n              0.97 +\n            0.015)\n      );\n      console.log(xdomain);\n      xdomain[0] = Math.floor(xdomain[0] * 20) / 20;\n      xdomain[1] = Math.ceil(xdomain[1] * 20) / 20;\n      let n_strips = Math.floor((xdomain[1] - xdomain[0]) / strip_step + 1e-7);\n      let focus_strip = null;\n      let ydomain = d3.extent(data.scatters, (d) => d.y);\n      let grid_size = ((width / n_strips / 4) * 0.5) / Math.sqrt(0.75);\n      let grid_h = grid_size * Math.sqrt(0.75);\n\n      let ticks = [];\n      let strips = [];\n      for (let i = 0; i < n_strips; ++i) {\n        let left = xdomain[0] + (i * (xdomain[1] - xdomain[0])) / n_strips;\n        let right =\n          xdomain[0] + ((i + 1) * (xdomain[1] - xdomain[0])) / n_strips;\n        ticks.push(left);\n        let counts = [0, 0];\n        data.scatters\n          .filter((d) => d.x >= left && d.x < right)\n          .forEach((d) => {\n            let label = +(d.label == self.selected_label[0]);\n            counts[label] = (counts[label] || 0) + 1;\n          });\n        let p = 0;\n        if (counts[0] + counts[1] > 0) {\n          p =\n            (left < 0.5 - 1e-7 ? counts[1] : counts[0]) /\n            (counts[0] + counts[1]);\n        }\n        strips.push({\n          left,\n          right,\n          counts,\n          weight: 1,\n          index: i,\n          is_top: left < 0.5 - 1e-7,\n          p,\n        });\n      }\n      //console.log('strips', strips)\n      ticks.push(xdomain[1]);\n\n      let min_counts = Math.min(\n        ...strips.map((d) => Math.min(d.counts[0], d.counts[1]))\n      );\n      let max_counts = Math.max(\n        ...strips.map((d) => Math.max(d.counts[0], d.counts[1]))\n      );\n      let countScale = d3\n        .scaleLog()\n        .domain([1, max_counts + 1])\n        .range([0.03, 0.35]);\n\n      let get_rangex = (width, strips) => {\n        let tot_weight = 0;\n        for (let d of strips) tot_weight += d.weight;\n        let ret = [1];\n        for (let i = 0; i < strips.length; ++i)\n          ret.push(ret[i] - strips[i].weight / tot_weight);\n        return ret.map((d) => d * width);\n      };\n\n      let last_grids = null;\n      let last_keywords = [];\n      paintMainScatter();\n\n      async function paintMainScatter() {\n        let plotview_width = width - (glyph_margin + height / n_strips);\n        let rangex = get_rangex(height, strips);\n        let rangey = [10, plotview_width];\n        let xScale = d3.scaleLinear(ticks, rangex);\n        let yScale = d3.scaleLinear(ydomain, rangey);\n        let yAxis = d3\n          .axisLeft(xScale)\n          .tickValues(ticks)\n          .tickFormat((d) => Number(d).toFixed(2));\n        //let yAxis = d3.axisLeft(yScale)\n\n        let rrange = [(height / n_strips) * 0.15, (height / n_strips) * 0.4];\n        let rScale = d3.scaleSqrt(\n          d3.extent(strips, (d) => d.counts[0] + d.counts[1]),\n          rrange\n        );\n        let hex = hexbin()\n          .radius(grid_size)\n          .x((d) => d.x)\n          .y((d) => d.y);\n        let plots = data.scatters.map((d, index) => ({\n          x: yScale(d.y),\n          y: xScale(d.x),\n          is_correct: d.is_correct,\n          pred: d.pred,\n          label: d.label,\n          index: d.id,\n        }));\n        let raw_grids = hex(plots);\n        // data.keywords.forEach((d) => (d.value = d.weight))\n        raw_grids.forEach((d, index) => {\n          d.count = 0;\n          d.error = 0;\n          //d.x += grid_h\n          //d.y += grid_h\n          if (d.length >= 1) {\n            if (d[0].pred == self.selected_label[0]) {\n              d.color = self.positiveColor;\n              d.error_color = self.negativeColor;\n            } else {\n              d.color = self.negativeColor;\n              d.error_color = self.positiveColor;\n            }\n          } else {\n            d.color = \"gray\";\n          }\n          for (let i = 0; i < d.length; ++i) {\n            if (d[i].is_correct) {\n              d.count += 1;\n            } else {\n              d.error += 1;\n            }\n          }\n        });\n        let currentGrids = raw_grids;\n        self.currentGridsData = currentGrids;\n        // console.log(currentGrids)\n        let gridCountDomain = [\n          0,\n          1,\n          Math.max(...raw_grids.map((d) => d.count)),\n        ];\n        let gridCountScale = d3.scaleLinear(gridCountDomain, [0, 0.3, 0.8]);\n        let gridErrorDomain = [\n          0,\n          1,\n          Math.max(...raw_grids.map((d) => d.error || 0)),\n        ];\n\n        let gridErrorScale = d3.scaleLinear(gridErrorDomain, [0, 0.5, 0.8]);\n        let total_acc = 0;\n        let total_sample = 0;\n        strips.forEach((d, i) => {\n          d.height = xScale(d.left) - xScale(d.right);\n          d.r = rScale(d.counts[0] + d.counts[1]);\n          let right_sample = i * 2 + 2 <= n_strips ? d.counts[0] : d.counts[1];\n          d.acc = Number(\n            (right_sample / (d.counts[0] + d.counts[1])) * 100\n          ).toFixed(2);\n          total_acc += right_sample;\n          total_sample += d.counts[0] + d.counts[1];\n          console.log(\n            i,\n            right_sample,\n            d.counts[0] + d.counts[1],\n            Number((right_sample / (d.counts[0] + d.counts[1])) * 100).toFixed(\n              2\n            )\n          );\n        });\n        self.total_accuracy = Number((total_acc / total_sample) * 100).toFixed(\n          2\n        );\n\n        let arc = d3\n          .arc()\n          .startAngle((d) => -d.p * Math.PI)\n          .endAngle((d) => d.p * Math.PI)\n          .innerRadius((d) => 0)\n          .outerRadius((d) => rScale(d.counts[0] + d.counts[1]));\n\n        main_g\n          .selectAll(\".strip\")\n          .data(strips)\n          .join(\n            (enter) => {\n              let g = enter\n                .append(\"g\")\n                .attr(\"class\", \"strip\")\n                .attr(\"transform\", (d) => `translate(0, ${xScale(d.right)})`);\n\n              g.append(\"rect\")\n                .attr(\"width\", width)\n                .attr(\"height\", (d) => d.height)\n                .attr(\"fill\", (d, i) =>\n                  strips[i].is_top ? self.negativeColor : self.positiveColor\n                )\n                .style(\"stroke\", \"none\")\n                .style(\"stroke-width\", 1)\n                .style(\"stroke-opacity\", (d, i) => {\n                  let value =\n                    2 *\n                    countScale((strips[i].is_top ? d.counts[0] : d.counts[1]) + 1);\n                  return value > 0.25 ? 0 : value;\n                })\n                .style(\"fill-opacity\", (d, i) =>\n                  countScale((strips[i].is_top ? d.counts[0] : d.counts[1]) + 1)\n                )\n                .on(\"dblclick\", (d, i) => {\n                  if (focus_strip == null) {\n                    d.weight = 5;\n                    focus_strip = d;\n                  } else if (focus_strip.index == i) {\n                    d.weight = 1;\n                    focus_strip = null;\n                  } else if (focus_strip != null) {\n                    focus_strip.weight = 1;\n                    d.weight = 5;\n                    focus_strip = d;\n                  }\n                  endLoading()\n                  paintMainScatter();\n                });\n\n              let percent_g = g\n                .filter((d) => d.counts[0] + d.counts[1] > 0)\n                .append(\"g\")\n                .attr(\"class\", \"percentage\")\n                .attr(\n                  \"transform\",\n                  (d, i) =>\n                    `translate(${width - glyph_margin - 8}, ${d.height / 2})`\n                );\n\n              percent_g\n                .append(\"circle\")\n                .attr(\"r\", (d) => d.r)\n                .attr(\"fill\", (d, i) =>\n                  d.counts[0] >= d.counts[1]\n                    ? self.negativeColor\n                    : self.positiveColor\n                )\n                .style(\"opacity\", 1)\n                .on(\"click\", (e) => {\n                  let idxs = data.scatters\n                    .filter(\n                      (d) => d.x >= e.left && d.x < e.right && !d.is_correct\n                    )\n                    .map((d) => d.id);\n                  bus.$emit(\"brush_grid\", idxs);\n                });\n\n              percent_g\n                .append(\"path\")\n                .attr(\"d\", arc)\n                .attr(\"fill\", (d, i) =>\n                  d.counts[0] < d.counts[1]\n                    ? self.negativeColor\n                    : self.positiveColor\n                )\n                .style(\"opacity\", 1)\n                .on(\"click\", (e) => {\n                  let idxs = data.scatters\n                    .filter(\n                      (d) => d.x >= e.left && d.x < e.right && !d.is_correct\n                    )\n                    .map((d) => d.id);\n                  bus.$emit(\"brush_grid\", idxs);\n                });\n\n              /*\n              percent_g\n                .append(\"text\")\n                .text((d, i) => (d.acc >= 99.999 ? \"100.0%\" : `${d.acc}%`))\n                .attr(\"dx\", 15)\n                .attr(\"dy\", 5)\n                .attr(\"font-size\", \"16px\");\n              */\n              return g;\n            },\n            (update) => {\n              update\n                .transition()\n                .duration(animation_time)\n                .attr(\"transform\", (d) => `translate(0, ${xScale(d.right)})`);\n\n              update\n                .select(\"rect\")\n                .transition()\n                .duration(animation_time)\n                .attr(\"height\", (d) => d.height);\n\n              update\n                .filter((d) => d.counts[0] + d.counts[1] > 0)\n                .select(\"g.percentage\")\n                .transition()\n                .duration(animation_time)\n                .attr(\n                  \"transform\",\n                  (d, i) =>\n                    `translate(${width - glyph_margin - 8}, ${d.height / 2})`\n                );\n            }\n          );\n\n        main_g\n          .selectAll(\".grid\")\n          .data(\n            currentGrids,\n            (d) => Math.floor(d.y) * ~~plotview_width + Math.floor(d.x)\n          )\n          .join(\n            (enter) => {\n              let grid = enter\n                .append(\"g\")\n                .attr(\"class\", \"grid\")\n                .style(\"opacity\", 0);\n\n              grid\n                .append(\"path\")\n                .attr(\"class\", \"hexagon\")\n                //.attr(\"clip-path\", \"url(#clip_path)\")\n                .attr(\"d\", function (d) {\n                  return `M ${d.x} ${d.y} ${hex.hexagon()}`;\n                })\n                .style(\"stroke\", (d) => (d.count == 0 ? \"none\" : \"white\"))\n                .style(\"stroke-width\", .5)\n                .style(\"fill\", (d) => d.color)\n                .style(\"fill-opacity\", (d) => gridCountScale(d.count));\n\n              grid\n                .append(\"path\")\n                .attr(\"class\", \"cross\")\n                .attr(\"transform\", (d) => `translate(${d.x},${d.y})`)\n                .attr(\"d\", `M -3 -3 L 3 3 M 3 -3 L -3 3`)\n                .style(\"stroke\", (d) => d.error_color)\n                .style(\"stroke-width\", 2.5)\n                //.style(\"opacity\", (d) => (d.error ? 0.7 : 0));\n                .style(\"opacity\", (d) => gridErrorScale(d.error));\n\n              let hover_grid_item = null;\n              grid\n                .on(\"mouseover\", function (d) {\n                  hover_grid_item = d;\n                  d3.select(this)\n                    .append(\"path\")\n                    .attr(\"class\", \"hexagon_outline\")\n                    .attr(\"d\", function (d) {\n                      return `M ${d.x} ${d.y} ${hex.hexagon()}`;\n                    })\n                    .style(\"stroke\", \"orange\")\n                    .style(\"stroke-width\", 2)\n                    .style(\"fill\", \"none\");\n                  /*\n                  let text = \"\";\n                  if (d.count && d.error) {\n                    text = `${d.count} correct samples and ${d.error} wrong samples`;\n                  } else if (d.count) {\n                    text = `${d.count} correct samples`;\n                  } else {\n                    text = `${d.error} wrong samples`;\n                  }\n                  text = `<p>${text}</p>`;\n                  let left = d3.event.pageX + 10;\n                  let top = d3.event.pageY - 10;\n                  self.showTooltip({ top, left, content: text });\n\n                  const show_detail = async () => {\n                    let resp = await self.getSamples(d.map((e) => e.index));\n                    text =\n                      text +\n                      resp\n                        .slice(0, 5)\n                        .map((e, index) => `#${index + 1}: ${e.text}`)\n                        .join(\"</br>\");\n\n                    self.showTooltip({ top, left, content: text });\n                  };\n                  setTimeout(() => {\n                    if (hover_grid_item == d) {\n                      show_detail();\n                    }\n                  }, 500);\n                  */\n                })\n                .on(\"mouseout\", function (d) {\n                  hover_grid_item = null;\n                  d3.select(this).select(\"path.hexagon_outline\").remove();\n                  //self.hideTooltip();\n                })\n                .on(\"click\", function (d) {\n                  //bus.$emit(\"toggle_grids\", d.map((e) => e.index))\n                  let idxs = d.map((e) => e.index)\n                  let idxset = new Set(idxs)\n                  if (idxset.has(145)) {\n                    self.addSentenceDAG(145)\n                  } else if (idxset.has(1733)) {\n                    self.addSentenceDAG(1733)\n                  } else {\n                    self.addSentenceDAG(idxs[0])\n                  }\n                  self.refreshSelection(idxs);\n                });\n\n              grid.transition().duration(animation_time).style(\"opacity\", 1);\n            },\n            (update) => {\n              update\n                .select(\"path.hexagon\")\n                .transition()\n                .duration(animation_time)\n                .attr(\"d\", function (d) {\n                  return `M ${d.x} ${d.y} ${hex.hexagon()}`;\n                })\n                .style(\"fill\", (d) => d.color)\n                .style(\"fill-opacity\", (d) => gridCountScale(d.count));\n\n              update\n                .select(\"path.cross\")\n                .transition()\n                .duration(animation_time)\n                .attr(\"transform\", (d) => `translate(${d.x},${d.y})`)\n                .style(\"stroke\", (d) => d.error_color)\n                .style(\"opacity\", (d) => (d.error ? 0.7 : 0));\n            },\n            (exit) => {\n              exit\n                .transition()\n                .duration(animation_time)\n                .style(\"opacity\", 0)\n                .remove();\n            }\n          );\n\n        let grids = main_g.selectAll(\".grid\");\n        self.currentGrids = grids;\n\n        let lasso_start = () => {\n          //console.log('start')\n        };\n\n        let lasttime = 0;\n        let lasso_draw = () => {\n          if (new Date() - lasttime <= 100) {\n            return;\n          }\n          lasttime = new Date();\n          current_lasso.possibleItems().style(\"opacity\", 1.0);\n\n          if (current_lasso.possibleItems().nodes().length > 0) {\n            current_lasso.notPossibleItems().style(\"opacity\", 0.4);\n          } else {\n            current_lasso.notPossibleItems().style(\"opacity\", 1);\n          }\n        };\n\n        let lasso_end = () => {\n          setTimeout(() => {\n            if (self.is_refreshing) return\n            if (current_lasso.selectedItems().nodes().length > 0) {\n              current_lasso.notSelectedItems().style(\"stroke\", 0.4);\n            } else {\n              current_lasso.notSelectedItems().style(\"stroke\", 1);\n            }\n            current_lasso.selectedItems().style(\"opacity\", 1);\n\n            let grids_ = current_lasso.selectedItems().data();\n            let idxs = [].concat(...grids_.map((d) => d.map((e) => e.index)));\n            console.log(\"self.is_lasso_select_all\", self.is_lasso_select_all);\n            if (!self.is_lasso_select_all) {\n              idxs = idxs.filter((d) => self.all_samples[d].wrong);\n            }\n            self.refreshSelection(idxs, grids_);\n          }, 100)\n        };\n\n        const current_lasso = lasso()\n          .closePathDistance(305)\n          .closePathSelect(true)\n          .targetArea(main_g)\n          .items(grids)\n          .on(\"start\", lasso_start)\n          .on(\"draw\", lasso_draw)\n          .on(\"end\", lasso_end);\n        self.lasso = current_lasso;\n\n        main_g.select(\"g.grid-lasso\").remove();\n        main_g\n          .append(\"g\")\n          .attr(\"class\", \"grid-lasso\")\n          //.attr('transform', `translate(${0},${0})`)\n          .call(current_lasso);\n\n        main_g.select(\"g.x-axis\").remove();\n\n        let axis = main_g\n          .append(\"g\")\n          .attr(\"class\", \"x-axis\")\n          .attr(\"transform\", `translate(${0},${0})`)\n          .call(yAxis);\n\n        axis\n          // remove the line between the ticks and the chart\n          .select(\".domain\")\n          .remove();\n\n        axis\n          .selectAll(\"text\")\n          .attr(\"font-size\", \"16px\")\n          //.style('font-weight', 600)\n          .style(\"font-family\", \"Roboto, san-serif\");\n        let keywords = data.keywords\n        getValuesByEntropy(keywords, self, -1)\n\n        window.keywords = keywords;\n        // keywords = keywords.slice(0, 200);\n        keywords = JSON.parse(JSON.stringify(keywords));\n        let valueRange = d3.extent(keywords, (d) => d.value);\n\n        let nwords = keywords\n          .filter((d) => self.getWordColor(d) == self.negativeColor)\n          .sort((a, b) => b.value - a.value);\n        let pwords = keywords\n          .filter((d) => self.getWordColor(d) == self.positiveColor)\n          .sort((a, b) => b.value - a.value);\n\n        for (let i = 0; i < pwords.length && i < nwords.length; ++i) {\n          if (nwords[i].value < pwords[i].value) {\n            nwords[i].value = pwords[i].value - 0.001;\n          } else {\n            pwords[i].value = nwords[i].value - 0.001;\n          }\n        }\n\n        keywords = keywords.sort((a, b) => b.value - a.value);\n        let sizeScale;\n\n        if (self.n_layer == 4) {\n          sizeScale = stepSizeScale(\n            self.fontSizeRange,\n            keywords.map((d) => d.value),\n            4,\n            [4, 10, 12]\n          );\n        } else {\n          sizeScale = stepSizeScale(\n            self.fontSizeRange,\n            keywords.map((d) => d.value),\n            4,\n            [4, 8, 10]\n          );\n        }\n        keywords.forEach(\n          (d) =>\n            (d.size = Math.min(sizeScale(d.value), self.fontSizeRange[1]))\n        );\n\n        //console.log(JSON.stringify(strwords))\n        /*\n        if (!last_font_size_distribution) {\n          let max_size = global_font_size_range[1];\n          last_font_size_distribution = keywords.map(\n            (d) => sizeScale(d.value) / max_size\n          );\n        }\n        */\n        // console.log(JSON.parse(JSON.stringify(keywords)))\n\n        //word_g.selectAll('.keyword').remove()\n        let barriers = [];\n\n        function add_barriers(top, bottom) {\n          let filtered_grids = currentGrids.filter(\n            (d) => d && d.y >= top && d.y < bottom\n          );\n          filtered_grids = filtered_grids.sort((a, b) => a.x - b.x);\n          if (filtered_grids.length == 0) return;\n          let last = filtered_grids[0].x;\n          for (let j = 1; j <= filtered_grids.length; ++j) {\n            if (\n              j != filtered_grids.length &&\n              filtered_grids[j].x - filtered_grids[j - 1].x <= grid_size * 30\n            ) {\n              continue;\n            } else {\n              let x1 = filtered_grids[j - 1].x + grid_size;\n              if (x1 + grid_size * 10 > plotview_width) {\n                x1 = plotview_width;\n              }\n              barriers.push({\n                x0: last - grid_size - 5,\n                x1: x1 + 5,\n                y0: top - 5,\n                y1: bottom + 5,\n              });\n              if (j != filtered_grids.length) {\n                last = filtered_grids[j].x;\n              }\n            }\n          }\n        }\n\n        for (let i = 0; i < n_strips; ++i) {\n          let top = xScale(strips[i].right);\n          let bottom = xScale(strips[i].left);\n          if (strips[i].weight > 1) {\n            let step = (bottom - top) / 3;\n            for (let k = 0; k < 3; ++k) {\n              add_barriers(top + k * step, top + (k + 1) * step);\n            }\n          } else {\n            add_barriers(top, bottom);\n          }\n          barriers.push({\n            x0: i * 2 <= n_strips ? 0 : plotview_width * 0.66,\n            x1: i * 2 <= n_strips ? plotview_width * 0.33 : plotview_width,\n            y0: top,\n            y1: bottom,\n          });\n          /*\n              barriers.push({\n                x0: 0,\n                x1: plotview_width,\n                y0: bottom - 1,\n                y1: bottom + 1,\n              })\n              */\n        }\n        barriers.push({\n          x0: plotview_width - 40,\n          x1: plotview_width,\n          y0: height - 15,\n          y1: height,\n        });\n        barriers.push({\n          x0: 0,\n          x1: plotview_width,\n          y0: 0,\n          y1: 20,\n        });\n        barriers.push({\n          x0: 0,\n          x1: plotview_width,\n          y0: height - 20,\n          y1: height,\n        });\n        barriers.push({\n          x0: 0,\n          x1: 10,\n          y0: 0,\n          y1: 100,\n        });\n        // barriers = barriers.filter(d => d.x1 - d.x0 > 15)\n        let dict = {};\n        last_keywords.forEach((d, i) => {\n          dict[d.word] = i;\n          d.is_new = false;\n        });\n\n        wordcloud()\n          .size([plotview_width, height])\n          .data(keywords)\n          .text((d) => d.word)\n          .barriers(barriers)\n          .rangex((d) => {\n            if (dict[d.word]) {\n              let mid = last_keywords[dict[d.word]].x / plotview_width;\n              let left = mid - 0.1;\n              let right = mid + 0.1;\n              return [Math.max(0, left), Math.min(right, 1)];\n            } else {\n              if (self.getWordColor(d) == self.positiveColor) {\n                return [0, 0.5, 0.25];\n              } else if (self.getWordColor(d) == self.negativeColor) {\n                return [0.6, 1, 0.82];\n              } else {\n                return [0.3, 0.8, 0.55];\n              }\n            }\n          })\n          .padding(6)\n          .rangey((d) => {\n            if (dict[d.word]) {\n              let mid = last_keywords[dict[d.word]].y / height;\n              let left = mid - 0.1;\n              let right = mid + 0.1;\n              return [Math.max(0, left), Math.min(right, 1), mid];\n            } else {\n              if (self.getWordColor(d) == self.positiveColor) {\n                return [0.1, 0.4, 0.25];\n              } else if (self.getWordColor(d) == self.negativeColor) {\n                return [0.4, 1, 0.65];\n              } else {\n                return [0.2, 0.6, 0.5];\n              }\n              let alpha = 1,\n                beta = 1;\n              if (d.score.mean < 0.47) (alpha = 0.5), (beta = 1.5);\n              if (d.score.mean > 0.53) (alpha = 1.5), (beta = 0.5);\n              let std = Math.max(0.05, d.score.std);\n              let left = xScale(d.score.mean + std * alpha) / height;\n              let right = xScale(d.score.mean - std * beta) / height;\n              let mid = xScale(d.score.mean) / height;\n              if (left < 0.5) mid = left;\n              else if (right > 0.5) mid = right;\n              return [Math.max(0, left), Math.min(1, right), mid];\n            }\n          })\n          .fontSize((d) => d.size)\n          .font(\"Roboto\")\n          .fontWeight((d) => (sizeScale(d.value) >= 0 ? \"bold\" : \"normal\"))\n          .start((words) => {\n            // console.log(words)\n            let all_words = words\n              .filter((d) => d.display)\n              .map((d) => ({\n                x: d.x,\n                y: d.y,\n                layer: 0,\n                size: d.size,\n                text: d.text,\n                display: d.display,\n                width: d.width,\n                height: d.height,\n                weight: \"bold\",\n                id: 'corpus',\n                highlight: d.highlight,\n                fill: self.getWordColor(d),\n                contri: d.contri,\n                /*\n                  d.score.mean < 0.465\n                    ? self.negativeColor\n                    : d.score.mean > 0.535\n                    ? self.positiveColor\n                    : \"gray\",\n                    */\n              }));\n            let nwords = all_words.filter(\n              (d) => self.getWordColor(d) == self.negativeColor\n            );\n            let pwords = all_words.filter(\n              (d) => self.getWordColor(d) == self.positiveColor\n            );\n            let mwords = all_words.filter(\n              (d) =>\n                self.getWordColor(d) != self.negativeColor &&\n                self.getWordColor(d) != self.positiveColor\n            );\n            self.overviewWords = nwords\n              .slice(0, 25)\n              .concat(pwords.slice(0, 25))\n              .concat(mwords.slice(0, 20));\n          });\n      }\n    },\n    async paintLinechart(highlight_word = null) {\n      await paintLineChart(this, highlight_word, this.fontSizeRange);\n    },\n    saveWordAttr() {\n      this.enable_word_attr = false;\n      this.refreshLinechart();\n    },\n    async refreshLinechart() {\n      await this.fetchLayerInfo({\n        idxs: (this.current && this.current.idxs) || null,\n        attrs: this.word_attrs,\n      })\n      this.paintLinechart()\n    },\n    async refreshSelection(idxs, grids = null) {\n      this.is_refreshing = true\n      let self = this\n      await this.fetchLayerInfo({ idxs, attrs: this.word_attrs })\n      this.current = {};\n      let resp = await self.getSamples(idxs);\n      this.current_items = resp.sort((a, b) => a.score - b.score);\n      this.current.grids = grids;\n      this.current.idxs = idxs;\n      this.paintLinechart();\n      this.brushGrid(idxs);\n      this.is_refreshing = false\n    },\n    async addSentenceDAG(index) {\n      this.lastInfoFlow = index\n      await this.refreshDAG(\"sentence\", index)\n      await this.paintLinechart()\n    },\n    async addWordDAG(word) {\n      this.lastWordContext = word\n      await this.refreshDAG(\"word\", word)\n    },\n    async refreshDAG(type, idx) {\n      let req = { level: type, layers: this.showed_layers }\n      if (type == \"sentence\") {\n        req.idx = idx\n      } else {\n        req.word = idx\n      }\n      this.setViewtype(type)\n      startLoading()\n      let resp = await axios.post(`${this.server_url}/api/networks`, req)\n      if (type == \"sentence\") {\n        this.current_text = this.getSample(idx).text\n        this.setLayers(resp.data.linechart)\n      }\n      this.setNetwork(resp)\n      this.calcDAG()\n      this.paintDAG()\n      endLoading()\n    },\n    async paintDAG() {\n      if (this.current_viewtype == \"word\") {\n        this.right_bottom_view = \"word_ctx\";\n        paintWordDAG(this);\n        await this.paintWordcloud();\n      } else if (this.current_viewtype == \"sentence\") {\n        this.right_bottom_view = \"info_flow\";\n        await paintSampleComposition(this);\n      }\n    },\n    async onSelectClass(classes) {\n      await this.selectClass(classes)\n      await this.fetchScatterplot()\n      await this.paintScatterplot();\n      await this.refreshSelection(null);\n    }\n  },\n  async mounted() {\n    startLoading()\n    function createPdf(elem_id=\"body\") {\n      let options = {\n          useCSS: true,\n      };\n      let area = document.getElementById(elem_id);\n      let w = Number(area.getAttribute(\"width\"));\n      let h = Number(area.getAttribute(\"height\"));\n      // let w = 1920, h = 1080;\n      let doc = new PDFDocument({compress: false, size: [w, h]});\n      console.log(w, h);\n      SVGtoPDF(doc, area, 0, 0, options);\n      let stream = doc.pipe(blobStream());\n      stream.on('finish', function() {\n        let blob = stream.toBlob('application/pdf');\n        if (navigator.msSaveOrOpenBlob) {\n          navigator.msSaveOrOpenBlob(blob, 'File.pdf');\n        } else {\n          document.getElementById('pdf-file').contentWindow.location.replace(URL.createObjectURL(blob));\n        }\n      });\n      doc.end();\n    }\n    window.createPdf = createPdf\n    /*\n    if (window.innerWidth < 2800) {\n      console.log('document.body.style.zoom', window.innerWidth / 2800)\n      const ratio = window.innerWidth / 2800 \n      document.body.parentElement.style.zoom = ratio\n      const height = window.innerHeight / ratio - 50\n      document.body.parentElement.style.height = `${height}px`\n      document.body.style.height = `${height}px`\n      console.log(this.$refs.mainview)\n      this.$refs.mainview.$el.style.height =  `${height}px`\n      this.$refs.simpletable.$el.style['max-height'] =  `${height * 0.52 - 96}px`\n    }\n    */\n    const self = this\n    self.svgResize();\n    //document.getElementsByClassName(\"lds-facebook\")[0].style.display = \"none\";\n    window.onresize = () => {\n      // self.svgResize();\n    };\n    this.$intro().start()\n    await this.fetchMatrix()\n    await this.fetchAllSample();\n    this.paintMatrix();\n    \n    bus.$on(\"add_word_DAG\", (word) => self.addWordDAG(word));\n    bus.$on(\"add_sentence_DAG\", (idx) => self.addSentenceDAG(idx));\n    bus.$on(\"highlight_grid\", (idxs) => self.highlightGrid(idxs));\n    bus.$on(\"brush_grid\", (idxs) => self.brushGrid(idxs))\n    endLoading()\n  },\n};\n</script>\n\n<style>\n.lds-facebook {\n  display: none;\n  position: relative;\n  z-index: 10;\n  left: 45vw;\n  top: 45%;\n}\n\nhtml, body {\n  height: 100%;\n  width: 100%;\n}\n\n#app {\n  z-index: 1;\n}\n\n.lds-facebook div {\n  display: inline-block;\n  position: absolute;\n  left: 16px;\n  width: 32px;\n  background: #555;\n  animation: lds-facebook 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;\n}\n.lds-facebook div:nth-child(1) {\n  left: 16px;\n  animation-delay: -0.24s;\n}\n.lds-facebook div:nth-child(2) {\n  left: 64px;\n  animation-delay: -0.12s;\n}\n.lds-facebook div:nth-child(3) {\n  left: 112px;\n  animation-delay: 0;\n}\n@keyframes lds-facebook {\n  0% {\n    top: 16px;\n    height: 128px;\n  }\n  50%,\n  100% {\n    top: 48px;\n    height: 64px;\n  }\n}\n#overview-svg {\n  width: 100%;\n  height: 100%;\n}\n\n#linechart-svg {\n  width: 100%;\n  height: 100%;\n}\n\n#network-svg {\n  width: 100%;\n  height: 100%;\n  -webkit-transition: opacity 1s ease-in-out;\n  -moz-transition: opacity 1s ease-in-out;\n  -o-transition: opacity 1s ease-in-out;\n  transition: opacity 1s ease-in-out;\n}\n\n.core-view {\n  height: 100%;\n  background-color: #dddddd;\n}\n\n.max-height {\n  height: 100%;\n}\n\n.my-subtitle {\n  font-size: 18px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n.corpus-view {\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.nlpvis-view {\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.nlpvis-script {\n  background: rgba(255, 255, 255, 0.99);\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.nlpvis-tab {\n  border-left: 1px solid rgba(0, 0, 0, 0.4);\n  border-top: 1px solid rgba(0, 0, 0, 0.4);\n  border-bottom: 1px solid white;\n}\n\n.nlpvis-last-tab {\n  border-left: 1px solid rgba(0, 0, 0, 0.4);\n  border-right: 1px solid rgba(0, 0, 0, 0.4);\n  border-top: 1px solid rgba(0, 0, 0, 0.4);\n  border-bottom: 1px solid white;\n}\n\n.network-view {\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.lasso path {\n  stroke: gray;\n  stroke-width: 2px;\n}\n\n.lasso .drawn {\n  fill-opacity: 0.05;\n}\n\n.lasso .loop_close {\n  fill: none;\n  stroke-dasharray: 4, 4;\n}\n\n.lasso .origin {\n  fill: #3399ff;\n  fill-opacity: 0.5;\n}\n\n.nlpvis-text {\n  font-size: 20px !important;\n}\n\n.text-singleline {\n  white-space: nowrap;\n}\n.nlpvis-tab {\n  border-radius: 0.5rem 0.5rem 0 0 !important;\n  border: 0 solid #111;\n}\n\n.nlpvis-title {\n  font-size: 20px !important;\n  font-weight: 700 !important;\n  text-transform: capitalize !important;\n  font-family: Roboto, sans-serif !important;\n  justify-content: baseline !important;\n  letter-spacing: 0em !important;\n  color: #444;\n}\n\n.nlpvis-title.disabled {\n  color: gray;\n}\n\nsvg {\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  -khtml-user-select: none;\n  user-select: none;\n}\n\n.color-legend-type2 {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 0em;\n  font-size: 18px;\n}\n\n.color-legend-type2::before {\n  content: \"\";\n  width: 18px;\n  height: 18px;\n  margin-right: 0em;\n  background: var(--color);\n}\n\n.color-legend {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n  font-size: 18px;\n}\n\n.color-legend::before {\n  content: \"\";\n  width: 18px;\n  height: 18px;\n  margin-right: 0.5em;\n  background: var(--color);\n}\n\n.svg-tooltip {\n  font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\",\n    Helvetica, Roboto, sans-serif, \"Apple   Color Emoji\", \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\";\n  background: rgba(250, 250, 250, 0.9);\n  border-radius: 0.1rem;\n  border: 1px solid #111;\n  color: #222;\n  display: block;\n  font-size: 18px;\n  padding: 0.2rem 0.4rem;\n  position: absolute;\n  text-overflow: ellipsis;\n  white-space: pre;\n  z-index: 300;\n  padding: 0.4rem 0.6rem;\n  visibility: hidden;\n}\n\nsvg.matrixdiagram {\n  font: 20px sans-serif;\n}\n\nsvg.matrixdiagram .label {\n  fill: #999;\n  font-size: 20px;\n  text-anchor: end;\n}\n\nsvg.matrixdiagram .column.label {\n  text-anchor: start;\n}\n\nsvg.matrixdiagram rect {\n  fill: #eee;\n  /* stroke: #d62333; */\n  stroke: #fff;\n  stroke-width: 0;\n}\n\nsvg.matrixdiagram rect:hover {\n  stroke-width: 2px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=307ce012&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCardActions } from 'vuetify/lib/components/VCard';\nimport { VCardText } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VCombobox } from 'vuetify/lib/components/VCombobox';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VDialog } from 'vuetify/lib/components/VDialog';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRadio } from 'vuetify/lib/components/VRadioGroup';\nimport { VRadioGroup } from 'vuetify/lib/components/VRadioGroup';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSlider } from 'vuetify/lib/components/VSlider';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VSubheader } from 'vuetify/lib/components/VSubheader';\nimport { VTextField } from 'vuetify/lib/components/VTextField';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VBtn,VBtnToggle,VCard,VCardActions,VCardText,VCheckbox,VChip,VCol,VCombobox,VContainer,VContent,VDialog,VIcon,VImg,VRadio,VRadioGroup,VRow,VSelect,VSimpleTable,VSlider,VSpacer,VSubheader,VTextField,VToolbar})\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\nimport { layoutDAGEdges, layoutSentenceDAGNodes } from '../layout/word_dag_layout'\n\n\nVue.use(Vuex)\n\nlet cache = {\n  corpus_layers: null,\n}\n\nexport default new Vuex.Store({\n  state: {\n    server_url: './',//'http://166.111.81.51:5004',\n    DAG: {},\n    linechart: {},\n    scatterplot: {},\n    bubble: {\n      left: 40,\n      top: 10,\n    },\n    viewbox: {\n      overview: {\n        width: 712.7361450195312,\n        height: 440.5694580078125,\n      },\n      linechart: {\n        width: 1433.4722900390625,\n        height: 446.5694580078125,\n      },\n      network: {\n        width: 1433.4722900390625,\n        height: 578.1111450195312,\n      }\n    },\n    config: {\n      linechart: { scale: 0.3, padding: 20 },\n      DAG: { padding: { top: 5, left: 24 } },\n      network: {\n        padding: { left: 20, top: 20, right: 20, bottom: 20 },\n        node_scale: 0.6,\n        node_padding: 20,\n      },\n      data_table: {\n        max_table_len: 3000,\n        min_text_len: 30,\n        target_text_len: 45,\n      },\n      dialog_width: 600,\n      histogram_width: 550,\n      histogram_height: 120,\n      histogram_color: 'gray',\n    },\n    color_candidates: [\n      [\"#d7191c\", \"#1a9641\", \"#ff7f0e\", \"#1f77b4\", \"#e377c2\", \"#9467bd\", '#8c564b'],\n      ['rgb(230, 159, 0)', 'rgb(86, 180, 233)', 'rgb(0, 158, 115)', 'rgb(240, 228, 66)', 'rgb(0, 114, 178)', 'rgb(213, 94, 0)', 'rgb(204, 121, 167)'],\n    ],\n    color_scheme: [\"#d7191c\", \"#1a9641\", \"#ff7f0e\", \"#1f77b4\", \"#e377c2\", \"#9467bd\"],\n    neuron_clusters: [],\n    edges: [],\n    showed_layers: [0, 3, 6, 9, 10, 12],\n    layers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],\n    current_layers: [],\n    current_viewtype: 'sentence',\n    layout: null,\n    sentenceclusters: [],\n    all_samples: [],\n    hover_word: null,\n    hover_timer: null,\n    current_samples: [],\n    word_indexs: {},\n    word_index_pos: {},\n    filtered_words: [],\n    labels: [],\n    filter_info: {},\n    parameters: {},\n    tooltip: {\n      top: 0,\n      left: 0,\n      show: false,\n      content: '',\n    },\n    selected_class: [1, 0],\n  },\n  getters: {\n    positiveColor: (state) => state.color_scheme[state.selected_class[0]],\n    negativeColor: (state) => state.color_scheme[state.selected_class[1]],\n    neutralColor: (state) => 'gray',\n    neutralColorGray: (state) => \"#777\",\n    fontSizeRange: (state) => [17, 35],\n    getSample: (state) => (idx) => {\n      return state.all_samples[idx]\n    },\n    checkWordIndex: (state) => (key) => {\n      return !!state.word_indexs[key]\n    },\n    getLabelColor: (state) => (label) => {\n      for (let i = 0; i < state.labels.length; ++i) {\n        if (state.labels[i].label == label) {\n          return state.color_scheme[i]\n        }\n      }\n      return 'gray'\n    },\n    selected_label: (state) => {\n      return state.selected_class.map(d => state.labels[d].label)\n    },\n    getSamples: (state) => (idxs) => {\n      let ret\n      const max_len = state.config.data_table.max_table_len\n      const target_len = state.config.data_table.target_text_len\n      //console.log(idxs)\n      if (idxs && idxs.length > 0) {\n        ret = idxs.map(idx => state.all_samples[idx])\n          .sort((a, b) => Math.abs(a.text.length - target_len) - Math.abs(b.text.length - target_len))\n          .slice(0, max_len)\n      } else {\n        ret = state.all_samples\n          .filter(d => d.text.length > state.config.data_table.min_text_len)\n          .slice(0, max_len)\n          .sort((a, b) => Math.abs(a.text.length - target_len) - Math.abs(b.text.length - target_len))\n      }\n      //console.log(ret)\n      return ret\n    },\n    getWordIdxs: (state) => (key) => {\n      return state.word_indexs[key]\n    },\n    view_samples: (state) => {\n      let oldidxs = new Set(state.current_samples.map(d => d.index))\n      let newidxs = new Set()\n      for (let word of state.filtered_words) {\n        for (let idx of state.word_indexs[word]) {\n          newidxs.add(idx)\n          if (oldidxs.has(idx)) {\n            oldidxs.delete(idx)\n          }\n        }\n      }\n      oldidxs = [...oldidxs]\n      oldidxs.sort((a, b) => a - b)\n      let idxs = [...newidxs].concat(oldidxs)\n      function highlight(texts) {\n        let words = []\n        texts = texts.split(' ')\n        for (let text of texts) {\n          let flag = 1\n          for (let word of state.filtered_words) {\n            if (text.indexOf(word) != -1) {\n              flag = 0\n              let p = text.indexOf(word)\n              if (p > 0) {\n                words.push([text.slice(0, p), false])\n              }\n              words.push([word, true])\n              if (word.length + p < text.length) {\n                words.push([text.slice(word.length + p), false])\n              }\n              break\n            }\n          }\n          if (flag) {\n            words.push([text, false])\n          }\n        }\n        return words\n      }\n      let ret = idxs.map(idx => state.all_samples[idx])\n        .map(d => {\n          let words = highlight(d.text)\n\t\t\t\t\tlet x1 = d.score[state.selected_class[0]]\n\t\t\t\t\tlet x2 = d.score[state.selected_class[1]]\n          return {\n            index: d.index,\n            text: words,\n            pred: d.pred,\n            label: d.label,\n            score: x1 / (x1 + x2),\n            show_filter: false,\n          }\n        })\n      if (newidxs.size > 0) {\n        ret[0].show_filter = true\n        ret = ret.slice(0, newidxs.size)\n          .concat(state.filter_info.sentences\n            .filter(d => !newidxs.has(d.index) && d.text.indexOf(` ${state.filtered_words[0]} `) != -1 && d.index >= 5000)\n            .map(d => ({\n              index: d.index,\n              text: highlight(d.text),\n              pred: 'N/A',\n              label: d.label,\n              score: 'N/A',\n              show_filter: false,\n            }))\n            .sort((a, b) => {\n              if (a.index == 60312) return -1\n              else if (b.index == 60312) return 1\n              return (a.index - b.index)\n            })\n          )\n          .concat(ret.slice(newidxs.size))\n      }\n      return ret.slice(0, 500)\n    }\n  },\n  mutations: {\n    addHoverTimer(state, timer) {\n      clearTimeout(state.hover_timer)\n      state.hover_timer = timer\n    },\n    removeHoverTimer(state) {\n      clearTimeout(state.hover_timer)\n    },\n    setHoverWord(state, key) {\n      state.hover_word = key\n    },\n    updatePosition(state, payload) {\n      const padding = state.config.network.padding\n      const width = payload.network.width - padding.left - padding.right\n      const height = payload.network.height - padding.top - padding.bottom\n      state.bubble.width = payload.bubble.width\n      state.bubble.height = payload.bubble.height\n      state.linechart.padding = state.config.linechart.padding\n      state.linechart.width = payload.linechart.width - state.linechart.padding\n      state.linechart.height = payload.linechart.height - state.linechart.padding\n      state.linechart.x = state.linechart.padding\n      state.linechart.y = state.linechart.padding\n      state.DAG.width = width\n      state.DAG.height = height\n      state.DAG.x = state.config.DAG.padding.left\n      state.DAG.y = state.config.DAG.padding.top\n    },\n    setViewtype(state, type) {\n      state.current_viewtype = type\n    },\n    setScatterplot(state, payload) {\n      state.scatterplot = payload.data\n    },\n    setLayers(state, data) {\n      state.layers = data\n    },\n    calcEdges(state, layers) {\n      layoutDAGEdges(state, layers)\n    },\n    calcDAG(state) {\n      if (state.current_viewtype == 'word') {\n        layoutSentenceDAGNodes(state)\n        this.commit('calcEdges', state.current_layers)\n      }\n    },\n    changeFilteredWord(state, { key, sentences, pos, neg }) {\n      const idx = state.filtered_words.indexOf(key)\n      if (idx != -1) {\n        state.filtered_words.splice(idx, 1)\n      } else {\n        state.filtered_words = [key]\n        state.filter_info = {\n          sentences, pos, neg, word: key,\n        }\n      }\n    },\n    setNetwork(state, payload) {\n      if (state.current_viewtype == 'sentence') {\n        state.layout = payload.data.layout\n      } else if (state.current_viewtype == 'word') {\n        state.neuron_clusters = payload.data.neuron_clusters\n        state.edges = payload.data.edges\n      }\n      //console.log(state.neuron_clusters)\n    },\n    setAllSamples(state, data) {\n      state.all_samples = data.sort((a, b) => a.id - b.id)\n    },\n    setCurrentSamples(state, data) {\n      state.current_samples = data\n    },\n    setWordIndex(state, { key, idxs, pos }) {\n      state.word_indexs[key] = idxs\n      state.word_index_pos[key] = pos\n    },\n    showTooltip(state, { top, left, content }) {\n      state.tooltip.top = top + 10\n      state.tooltip.left = left + 10\n      state.tooltip.content = content\n      state.tooltip.show = true\n    },\n    setSelectedClass(state, { selection }) {\n      if (selection[1] > selection[0]) {\n        const t = selection[0]\n        selection[0] = selection[1]\n        selection[1] = t\n      }\n      state.selected_class = selection\n    },\n    setModelInfo(state, { matrix, labels, label_names, xi_values }) {\n      state.labels = labels.map((d, i) => ({ label: d, name: label_names[i] }))\n      state.matrix = matrix\n      //state.parameters.gamma_values = gamma_values\n      //state.parameters.gamma_range = [Math.min(...gamma_values), Math.max(...gamma_values)]\n      xi_values = xi_values.map(d => Math.abs(d))\n      const max_xi = Math.max(...xi_values)\n      xi_values = xi_values.map(d => d / max_xi)\n      state.parameters.xi_values = xi_values\n      state.parameters.xi_range = [Math.min(...xi_values), Math.max(...xi_values)]\n    },\n    hideTooltip(state) {\n      state.tooltip.show = false\n    }\n  },\n  actions: {\n    async changeCurrentSamples({ commit, getters }, idxs) {\n      commit('setCurrentSamples', getters.getSamples(idxs))\n    },\n    async changeFilteredWord({ commit, state }, key) {\n      const resp = await axios.post(`${state.server_url}/api/word_sentences`, { word: key })\n      const { sentences, pos, neg } = resp.data\n      commit('changeFilteredWord', { key, sentences, pos, neg })\n    },\n    async fetchWordIndex({ commit, state }, key) {\n      if (!!state.word_indexs[key]) {\n        return\n      }\n      const resp = await axios.post(`${state.server_url}/api/word`, { word: key })\n      console.log(resp)\n      const idxs = resp.data.idxs\n      const pos = resp.data.pos\n      commit('setWordIndex', { key, idxs, pos })\n    },\n    async fetchLayerInfo({ commit, state }, { idxs, attrs }) {\n      let resp\n      if (idxs == null && cache.corpus_layers != null) {\n        resp = cache.corpus_layers\n      } else {\n        startLoading()\n        resp = await axios.post(`${state.server_url}/api/layers`, { idxs, attrs })\n        endLoading()\n        if (idxs == null) {\n          cache.corpus_layers = resp\n        }\n      }\n      commit('setLayers', resp.data)\n    },\n    async fetchDAG({ commit, state }, req) {\n      startLoading()\n      let resp = await axios.post(`${state.server_url}/api/networks`, req)\n      commit('setNetwork', resp)\n      commit('calcDAG')\n      endLoading()\n    },\n    async selectClass({ commit, state }, classes) {\n      // console.log('selectClass', classes)\n      startLoading()\n      let resp = await axios.post(`${state.server_url}/api/select_class`, { selected: classes })\n      commit(\"setSelectedClass\", { selection: classes })\n      endLoading()\n    },\n    async fetchMatrix({ commit, state }) {\n      startLoading()\n      let resp = await axios.post(`${state.server_url}/api/model_info`, {})\n      commit('setModelInfo', resp.data)\n      endLoading()\n    },\n    async fetchAllSample({ commit, state, getters }) {\n      startLoading()\n      let resp = await axios.post(`${state.server_url}/api/all_sentences`, {})\n      commit('setAllSamples', resp.data.sentences)\n      // commit('setCurrentSamples', getters.getSamples(null))\n      endLoading()\n    },\n    async fetchScatterplot({ commit, state }) {\n      startLoading()\n      let resp = await axios.post(`${state.server_url}/api/scatterplot`, {});\n      commit(\"setScatterplot\", resp);\n      endLoading()\n    }\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import Vue from 'vue'\nimport App from './App.vue'\nimport store from './store'\nimport vuetify from './plugins/vuetify'\nimport VueIntro from 'vue-introjs'\nVue.use(VueIntro)\n\n\nimport 'intro.js/introjs.css';\n\nVue.config.productionTip = false\n\nnew Vue({\n  store,\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')\n","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=style&index=0&id=72d86f42&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=style&index=0&id=72d86f42&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/figure1.f069d720.png\";","module.exports = __webpack_public_path__ + \"img/legend1.181e0cc3.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=style&index=0&id=ee1705e8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=style&index=0&id=ee1705e8&scoped=true&lang=css&\""],"sourceRoot":""}