{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/App.vue?5189","webpack:///./src/App.vue?a48b","webpack:///./src/plugins/wordcloud.js","webpack:///./src/plugins/lasso.js","webpack:///./src/plugins/bus.js","webpack:///./src/plugins/utils.js","webpack:///./src/layout/word_contribution_layout.js","webpack:///./src/layout/word_dag_layout.js","webpack:///./src/components/wordgroup.vue?49cf","webpack:///src/components/wordgroup.vue","webpack:///./src/components/wordgroup.vue?525f","webpack:///./src/components/wordgroup.vue","webpack:///./src/components/infotooltip.vue?baf0","webpack:///src/components/infotooltip.vue","webpack:///./src/components/infotooltip.vue?cf4b","webpack:///./src/components/infotooltip.vue","webpack:///./src/layout/sentence_layout.js","webpack:///src/App.vue","webpack:///./src/App.vue?b0f9","webpack:///./src/App.vue","webpack:///./src/store/index.js","webpack:///./src/plugins/vuetify.js","webpack:///./src/main.js","webpack:///./src/assets/figure1.png","webpack:///./src/components/wordgroup.vue?6012","webpack:///./src/assets/legend1.png","webpack:///./src/components/infotooltip.vue?ec6f"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","Object","prototype","hasOwnProperty","call","installedChunks","push","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","exports","module","l","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","jsonpArray","window","oldJsonpFunction","slice","_vm","this","_h","$createElement","_c","_self","ref","staticStyle","attrs","tooltip","left","top","show","content","staticClass","directives","rawName","expression","model","callback","$$v","left_top_view","_v","scopedSlots","_u","fn","proxy","is_lasso_select_all","enable_tooltip","bubble","overviewWords","enable_word_filter","left_bottom_view","search_expand","item","selected","_b","on","$event","clickSearchItem","preventDefault","rightClickSearchItem","removeSearchItem","_s","isNaN","chips","_l","index","style","color_scheme","onClickSearch","filter_info","pos","neg","word","_e","highlightGrid","addSentenceDAG","color","pred","background","label","getLabelColor","score","Number","toFixed","datasets","models","right_top_view","show_trending_down","show_trending_up","path","underlines","line","index2","x1","x2","y1","y2","linechart","infolossWords","enable_word_highlight","current_viewtype","current_text","right_bottom_view","changeRightBottomView","staticRenderFns","wordcloud","size","center","text","cloudText","font","cloudFont","fontSize","cloudFontSize","fontStyle","cloudFontNormal","fontWeight","padding","cloudPadding","rangex","cloudRangex","rangey","cloudRangey","expandx","cloudExpandx","expandy","cloudExpandy","flexible","cloudFlexible","keepFirst","x","barriers","words","grid_step","grid_size","self","align","rows","cols","rects","nFixedRect","forceCollide","nodes","force","alpha","quad","d3","y","visit","q","updated","lx","ly","xSpacing","width","ySpacing","height","absX","Math","abs","absY","sqrt","initialize","_","functor","addRect","bottom","right","rect","checkVectical","lines","Array","isArray","sort","x0","a","b","ret","checkHorizontal","y0","start","measure","ctx","save","weight","measureText","actualBoundingBoxRight","actualBoundingBoxLeft","actualBoundingBoxAscent","dx","dy","actualBoundingBoxDescent","restore","Date","cw","ch","document","canvas","createElement","Canvas","getContext","fillStyle","strokeStyle","textAlign","forEach","scale","display","mid","top_range","bottom_range","left_range","right_range","flag","delta","direction","max","min","pd","previous_data","filter","simulation","strength","tick","arguments","targetArea","items","closePathDistance","closePathSelect","isPathClosed","hoverSelect","draw","end","lasso","_this","tpath","origin","torigin","drawnCoords","g","append","attr","dyn_path","close_path","origin_node","current_drag","drag","dragstart","dragmove","dragend","e","__lasso","possible","loopSelect","box","getBoundingClientRect","lassoPoint","round","sourceEvent","type","touches","clientX","clientY","tx","ty","distance","pow","close_draw_path","classifyPoint","possibleItems","selectedItems","notPossibleItems","notSelectedItems","types","indexOf","bus","Vue","stepSizeScale","range","values","n_steps","steps","step","ratio","getValuesByEntropy","layer","max_entropy","max_freq","map","frequency","entropy","term1","term2","n_layer","log","dataset_name","getWordColor","contri","negativeColor","neu","neutralColorGray","positiveColor","paintLineChart","highlight_word","font_size","timeout","Promise","resolve","setTimeout","layers","chartline","select","empty","selectAll","remove","xScale","domain","entropy_range","yScale","info","curve","xAxis","tickValues","tickFormat","yAxis","floor","labels","enter","all_words","highlight_set","Set","retained_words","add","discarded_words","important_words","first_words","last_words","word_counts","max_size","sizeScale","last","word_range","next","has","stroke","stroke_width","status","fill","highlight","delta_x","delta_y","k","topk","ex","yaxis","max_words","max_words_per_line","n_words","count_words","console","id","glyph","opacity","concat","down_words","down_word_lines","up_words","up_word_lines","down_word_underlines","up_word_underlines","highlight_line","trending_up_lines","trending_down_lines","trending_up_underlines","trending_down_underlines","layoutDAGEdges","state","clusters","in_edges","tot_weight","height_threshold","weight_threshold","weights","edges","is_straight","curr_weight","y3","y4","out_edges","h","paintWordDAG","DAG","svg","neuron_clusters","timer","on_mouseover","pageX","pageY","idxs","clearTimeout","prediction_score","on_mouseout","on_click","is_current_sample","$emit","getWordFillColor","cluster_edges","current_layers","layer_id","layoutSentenceDAGNodes","unique_layers","layerlen","edge_width","config","network","node_scale","node_padding","totsize","reduce","h0","lh","show_cloud","paintWordcloud","text_padding","exponent","font_size_range","font_value_range","retained_keywords","keyword_size","keywords","fontstyle","font_color","split","current_ids","source","target","fetchWordIndex","getWordIdxs","hoverItem","hover_word","interaction","onMouseOver","onMouseOut","onClick","onRightClick","class","highlight_text","neutralColor","arc","hoverEnterTime","glyphHeight","glyphRadius","computed","cnt","arcs","temp_items","glyphed_items","selected_items","props","Boolean","default","String","methods","component","fontsize","visibility","fixed_left","fixed_top","transition","watch","$refs","current_tooltip","innerHTML","val","testmode","paintSampleComposition","LineChart","defs","isalpha","test","margin","axis","shades","getShade","extend_shades","getExtendShade","lineGenerator","shadeGroup","grayShadeElements","coloredShadeElements","lineGroup","glyphGroup","labelGroup","anchor","baseline","position","s1","s2","len","s3","signSet","phraseData","rawPhraseData","n_rows","relationData","removed","t1","b1","t2","b2","n_cols","changeData","row","col","contriScale","has_rseg","phraseElement","relationElement","c1","c2","c3","c4","w1","widthScale","w2","minw","x3","x4","getColorName","changeElement","addGradientColor","segments","has_shade","linearGradient","fill_id","show_label","tw","segElement","is_end","end_point","endLabelGroup","endGlyph","all_pieces","pieces","shortcut","max_text_len","curr","endLabels","allLabel","label_size","label_font","labelWithPath","labelNoPath","v","baselineGenerator","labelText","labelText2","update_tooltip","exit","raw","layout","phrases","last_label","last_display","trim","tk","rt","rb","w3","w4","last_contri","cover_points","text_len","rangeRound","colors","colors2","gradient","contriValues","contriThres","contriMax","contriValues2","contriThres2","scale1","thres","m1","m2","r1","r2","word_attrs","frequency_weight","uncertainty","uncertainty_weight","entropy_weight","components","WordGroup","InfoTooltip","wordInteraction","brushGrid","currentGrids","changeCurrentSamples","grids1","grids0","svgResize","network_rect","bubble_rect","linechart_rect","updatePosition","saveWordAttr","enable_word_attr","refreshLinechart","VApp","VBtn","VBtnToggle","VCard","VCheckbox","VChip","VCol","VCombobox","VContainer","VContent","VIcon","VImg","VRow","VSelect","VSimpleTable","VSpacer","VToolbar","use","Vuex","cache","corpus_layers","Store","server_url","scatterplot","data_table","max_table_len","min_text_len","target_text_len","showed_layers","sentenceclusters","all_samples","hover_timer","current_samples","word_indexs","word_index_pos","filtered_words","selected_class","getters","fontSizeRange","getSample","idx","checkWordIndex","selected_label","getSamples","max_len","target_len","view_samples","oldidxs","newidxs","delete","texts","show_filter","sentences","mutations","addHoverTimer","removeHoverTimer","setHoverWord","payload","setViewtype","setScatterplot","setLayers","calcEdges","calcDAG","commit","changeFilteredWord","setNetwork","setAllSamples","setCurrentSamples","setWordIndex","showTooltip","setConfusionMatrix","matrix","label_names","selection","hideTooltip","actions","axios","post","resp","fetchLayerInfo","fetchDAG","req","fetchAllSample","Vuetify","VueIntro","productionTip","store","vuetify","render","App","$mount"],"mappings":"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A,EACA,qDACA,qBACA,4BAEA,EACA,qDACA,qBACA,+BAEA,0BACA,qCAEA,4CAEA,+CACA,kDAEA,uBACA,uBACA,yBACA,uBACA,QAEA,qDAjIA,EA1DA,SA0DA,GACA,YACA,gCA3DA,IACA,oDAEA,wCACA,KACA,iBACA,kBACA,WACA,0EACA,WACA,8BACA,4BACA,SACA,SACA,6BAIA,6BACA,6BAEA,6BACA,6BAEA,UACA,EACA,OACA,EACA,OACA,iDACA,4CAGA,UACA,EACA,OACA,EACA,OACA,iDACA,4CAIA,mBACA,mBACA,oBACA,WAEA,kBACA,gBACA,SACA,UAEA,IACA,YACA,oDAWA,EACA,eACA,cACA,cACA,8BACA,wBAEA,EACA,eACA,eACA,eACA,gCACA,8BACA,qBAEA,IACA,mBACA,QACA,QACA,YACA,kFACA,QAEA,IACA,eACA,sBACA,aACA,0BACA,oBACA,0BACA,wCAEA,IACA,sBACA,QACA,QACA,eACA,6BACA,KACA,aACA,6FAEA,YACA,0BACA,oBACA,oBACA,wCAjHA,+CA8LI,iBAzbJ,WAybA,mIAmJA,EAnJA,mFA4FA,IA5FA,8DAmJA,qFA4eA,GA5eA,mGA8bA,IA8CA,GA5eA,SA4eA,KACA,gBACA,uCAGA,GADA,0CACA,YAEA,IADA,aACA,oBACA,KACA,aACA,uBAFA,CAMA,iBACA,WACA,KAEA,SACA,SACA,OACA,OACA,SAEA,cACA,YApgBA,YACA,SACA,SACA,cACA,cACA,SACA,GACA,cACA,uDAGA,mBACA,SACA,wDACA,GAEA,mBACA,UACA,6BACA,6BACA,uCACA,SACA,SACA,wBACA,YACA,cACA,eAEA,OAEA,yBACA,UACA,UAGA,YACA,gCACA,wBACA,gCAEA,wBACA,+BAGA,eAEA,2BACA,gBACA,WAEA,cAIA,IACA,qBAEA,GACA,EACA,EACA,2EAEA,sBACA,GACA,EACA,EACA,8EAGA,sBACA,IACA,IACA,yBACA,8BACA,+BACA,uCACA,aACA,iCACA,WACA,KACA,2BACA,YACA,EACA,EACA,wBACA,gDACA,OAIA,yCACA,GAGA,WAEA,8CACA,4CACA,qCACA,8DAEA,EACA,oBACA,QACA,MACA,YACA,QACA,YACA,sBACA,8EAEA,iBACA,gBACA,8CACA,kCACA,+CAEA,wBACA,wBACA,sCACA,MACA,EACA,uCACA,oBAEA,2CACA,0CAEA,6BACA,SACA,WACA,KACA,YACA,WACA,QACA,UACA,WACA,WACA,KAEA,OAGA,QACA,wDACA,YACA,2BACA,KACA,aACA,wCACA,MADA,aACA,WADA,QAgDA,OA5CA,EACA,iBACA,oCACA,kCACA,yBACA,gBACA,mBAEA,mBACA,wBACA,iBACA,QACA,8DAEA,gCACA,2BAGA,EACA,eACA,YACA,kCACA,wBACA,gBACA,mBAEA,mBACA,wBACA,iBACA,QACA,8DAEA,gCACA,2BAWA,KAEA,YACA,EACA,aACA,YACA,8EAEA,EACA,eACA,aACA,YACA,8CAEA,EACA,wDACA,uBACA,aACA,YACA,KACA,aACA,wCACA,MADA,aACA,WADA,WAMA,EACA,mBACA,KACA,GACA,0DAEA,MACA,YACA,QACA,YACA,qBACA,mBAEA,EACA,eACA,wBAEA,sBACA,kEAEA,gEACA,wBACA,4CACA,uDAEA,EACA,eACA,sBACA,oFACA,SAJA,+BAKA,oDACA,0BAEA,kDAGA,EACA,4BACA,EACA,aACA,eACA,gCACA,sBACA,kEAEA,yBACA,wBACA,wBAiCA,2BACA,KACA,wDAGA,wBAEA,2CACA,aACA,WACA,sBACA,YACA,uBAEA,uBAEA,yBAGA,iDAEA,YACA,EACA,uBACA,aACA,YACA,sBACA,kEAEA,4CACA,uDAEA,EACA,qBACA,aACA,YACA,oFACA,oDACA,uDAEA,YACA,EACA,aACA,YACA,mBACA,YAIA,uBACA,iBAEA,eAIA,IACA,aACA,kBAGA,WACA,qCAEA,mCACA,yCAEA,0CAIA,aACA,6BACA,qBACA,mCACA,wCAEA,uCAEA,qCAEA,+BACA,2GACA,8DACA,wBACA,0DAEA,2BACA,MAGA,MACA,uBACA,oBACA,cACA,SACA,cACA,aACA,YACA,UAEA,kCACA,EACA,YACA,2BAEA,QAEA,8BAEA,IACA,YACA,uBACA,iBAHA,oBAGA,EAHA,IAGA,EAHA,MAIA,QAEA,EAEA,kBACA,SAEA,EACA,kBACA,yBAEA,yCACA,aACA,UAEA,kBAEA,gCACA,wCAEA,IACA,iEACA,8CACA,KACA,iEACA,8CAEA,oCACA,yBACA,8BAEA,8BAyEA,IArEA,kDAKA,GADA,aACA,EACA,gBACA,qCACA,EACA,WAGA,EACA,gBACA,qCACA,EACA,UAGA,WACA,mBACA,mDAeA,MAiCA,gBAGA,GAFA,kBACA,iBACA,eAEA,IADA,aACA,eACA,+BAGA,UAEA,SACA,mBACA,mBACA,MACA,QAWA,SACA,QACA,KACA,QACA,OAEA,SACA,KACA,KACA,KACA,QAEA,SACA,KACA,KACA,QACA,OAEA,SACA,KACA,MACA,KACA,SAGA,MACA,yBACA,aACA,eAGA,IACA,YACA,QACA,mCACA,aACA,oBACA,eACA,wBACA,OACA,OACA,oCAEA,0CACA,WACA,mCACA,WAEA,eAIA,WACA,oBACA,eACA,wBACA,OACA,OACA,sCAEA,0CACA,YACA,mCACA,WAEA,cAeA,uCACA,eACA,iEACA,mBAEA,QACA,wCACA,wBACA,MACA,MACA,QACA,YACA,YACA,kBACA,cACA,gBACA,cACA,YACA,sBACA,uBACA,oBASA,YACA,yDAEA,YACA,yDAEA,YACA,mBACA,oCACA,sCAEA,kBACA,YACA,sBACA,yBAhqBA,4CAnJA,yBAmJA,EAnJA,2CACA,gBACA,wBACA,gBACA,KACA,eACA,IACA,qBACA,yBACA,gBACA,IACA,qCACA,gCAEA,IACA,MACA,KAEA,EACA,mBACA,uBACA,eACA,YACA,YACA,gBACA,iBAEA,IACA,YACA,2BACA,iBAHA,oBAGA,EAHA,aAGA,EAHA,MAKA,EACA,YACA,2BACA,iBAHA,oBAGA,EAHA,aAGA,EAHA,MAKA,IACA,YACA,4BACA,iBAHA,oBAGA,EAHA,aAGA,EAHA,MAIA,kCACA,sBAEA,EACA,YACA,iBAFA,oBAEA,EAFA,KAEA,EAFA,MAGA,eAEA,yCACA,yBAoBA,QACA,+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","file":"js/app.557f2a28.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(Object.prototype.hasOwnProperty.call(installedChunks, chunkId) && installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t\"app\": 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/\";\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([0,\"chunk-vendors\"]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","import mod from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"; export default mod; export * from \"-!../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=style&index=0&lang=css&\"","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('v-app',{ref:\"mainview\",staticStyle:{\"position\":\"relative\"}},[_c('info-tooltip',{attrs:{\"left\":_vm.tooltip.left,\"top\":_vm.tooltip.top,\"show\":_vm.tooltip.show,\"content\":_vm.tooltip.content}}),_c('v-content',[_c('v-container',{staticClass:\"core-view fill-height\",attrs:{\"fluid\":\"\"}},[_c('v-row',{staticClass:\"fill-height\"},[_c('v-col',{staticClass:\"fill-height py-0 pr-0\",attrs:{\"cols\":\"4\"}},[_c('v-card',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(2),expression:\"2\"},{name:\"intro\",rawName:\"v-intro\",value:('In the distribution view, user can identify important samples and words for further analysis.'),expression:\"'In the distribution view, user can identify important samples and words for further analysis.'\"}],staticClass:\"nlpvis-view\",attrs:{\"height\":\"40%\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.left_top_view),callback:function ($$v) {_vm.left_top_view=$$v},expression:\"left_top_view\"}},[_c('v-btn',{attrs:{\"value\":\"matrix\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Class\")])]),_c('v-btn',{attrs:{\"value\":\"corpus\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Distribution\")])])],1),_c('v-spacer'),_c('v-checkbox',{staticStyle:{\"padding-top\":\"12px\"},attrs:{\"color\":\"darkgray\"},scopedSlots:_vm._u([{key:\"prepend\",fn:function(){return [_c('v-img',{attrs:{\"width\":\"115px\",\"height\":\"24px\",\"src\":require(\"./assets/figure1.png\")}})]},proxy:true}]),model:{value:(_vm.is_lasso_select_all),callback:function ($$v) {_vm.is_lasso_select_all=$$v},expression:\"is_lasso_select_all\"}})],1),_c('hr'),_c('svg',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(1),expression:\"1\"},{name:\"intro\",rawName:\"v-intro\",value:('Click on an element in the matrix to start the analysis of any two classes.'),expression:\"'Click on an element in the matrix to start the analysis of any two classes.'\"}],staticClass:\"ma-1\",attrs:{\"id\":\"overview-svg\"}},[_c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_top_view == 'corpus'),expression:\"left_top_view == 'corpus'\"}],attrs:{\"id\":\"overview-g\"}}),_c('word-group',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_top_view == 'corpus'),expression:\"left_top_view == 'corpus'\"}],attrs:{\"tooltip\":_vm.enable_tooltip,\"transform\":(\"translate(\" + (_vm.bubble.left) + \",\" + (0) + \")\"),\"data\":_vm.overviewWords,\"interaction\":_vm.enable_word_filter ? 'filter' : 'DAG'}}),_c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.left_top_view == 'matrix'),expression:\"left_top_view == 'matrix'\"}],attrs:{\"id\":\"matrix-g\"}},[_c('g',{attrs:{\"transform\":\"translate(30, 10)\"}},[_c('image',{attrs:{\"x\":\"0\",\"y\":\"18\",\"width\":\"320\",\"height\":\"10\",\"preserveAspectRatio\":\"none\",\"xlink:href\":\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAH0lEQVQ4T2P8////fwYGBgYoNUpDgmM0HEbDYUSkAwCp0H+QW+DsjwAAAABJRU5ErkJggg==\"}}),_c('g',{attrs:{\"transform\":\"translate(0,28)\",\"fill\":\"none\",\"font-size\":\"10\",\"font-family\":\"sans-serif\",\"text-anchor\":\"middle\"}},[_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(0.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"y\":\"9\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"dy\":\"0.71em\"}},[_vm._v(\"0.0\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(143.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"y\":\"9\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"dy\":\"0.71em\"}},[_vm._v(\"0.2\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(203.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"font-size\":\"18px\",\"font-family\":\"Arial\",\"fill\":\"currentColor\",\"y\":\"9\",\"dy\":\"0.71em\"}},[_vm._v(\"0.4\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(249.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"y\":\"9\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"dy\":\"0.71em\"}},[_vm._v(\"0.6\")])]),_c('g',{staticClass:\"tick\",attrs:{\"opacity\":\"1\",\"transform\":\"translate(287.5,0)\"}},[_c('line',{attrs:{\"stroke\":\"currentColor\",\"y2\":\"6\",\"y1\":\"-10\"}}),_c('text',{attrs:{\"fill\":\"currentColor\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"y\":\"9\",\"dy\":\"0.71em\"}},[_vm._v(\"0.8\")])]),_c('text',{attrs:{\"x\":\"0\",\"y\":\"-16\",\"font-size\":\"18px\",\"font-family\":\"Arial\",\"fill\":\"currentColor\",\"text-anchor\":\"start\",\"font-weight\":\"bold\"}},[_vm._v(\"Percentage\")])])])])],1)],1),_c('v-card',{directives:[{name:\"intro\",rawName:\"v-intro\",value:('In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.'),expression:\"'In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.'\"},{name:\"intro-step\",rawName:\"v-intro-step\",value:(4),expression:\"4\"}],staticClass:\"nlpvis-view pa-1 mt-2\",attrs:{\"min-height\":\"calc(53% - 48px)\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.left_bottom_view),callback:function ($$v) {_vm.left_bottom_view=$$v},expression:\"left_bottom_view\"}},[_c('v-btn',{attrs:{\"value\":\"samples\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Sample List\")])])],1),_c('v-spacer'),(!_vm.search_expand)?[_c('span',{staticClass:\"pa-1 nlpvis-title disabled\"}),_vm._l((_vm.labels),function(t,index){return _c('span',{key:(\"legend\" + index),staticClass:\"color-legend\",style:((\"--color: \" + (_vm.color_scheme[index])))},[_vm._v(\" \"+_vm._s(t.name)+\" \")])})]:[_c('v-combobox',{attrs:{\"chips\":\"\",\"clearable\":\"\",\"label\":\"Enter a word or sample number here\",\"multiple\":\"\",\"solo\":\"\"},scopedSlots:_vm._u([{key:\"selection\",fn:function(ref){\nvar attrs = ref.attrs;\nvar item = ref.item;\nvar selected = ref.selected;\nreturn [_c('v-chip',_vm._b({attrs:{\"input-value\":selected,\"close\":\"\"},on:{\"click\":function($event){return _vm.clickSearchItem(item)},\"contextmenu\":function($event){$event.preventDefault();return _vm.rightClickSearchItem(item)},\"click:close\":function($event){return _vm.removeSearchItem(item)}}},'v-chip',attrs,false),[_c('strong',[_vm._v(_vm._s(item))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(isNaN(+item) ? '(Word)' : '(Sample)'))])])]}}]),model:{value:(_vm.chips),callback:function ($$v) {_vm.chips=$$v},expression:\"chips\"}})],_c('v-btn',{attrs:{\"icon\":\"\"},on:{\"click\":function($event){return _vm.onClickSearch()}}},[_c('v-icon',{attrs:{\"size\":\"26\"}},[_vm._v(\"mdi-magnify\")])],1)],2),_c('hr'),_c('v-simple-table',{ref:\"simpletable\",staticStyle:{\"overflow-x\":\"hidden\",\"max-height\":\"calc(52vh - 96px)\",\"max-width\":\"100%\",\"overflow-y\":\"scroll\"},attrs:{\"dense\":\"\"},scopedSlots:_vm._u([{key:\"default\",fn:function(){return [_c('thead',[_c('tr',[_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" ID\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\"},[_vm._v(\" Passage\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" Label\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" Score\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1),_c('th',{staticClass:\"text-left nlpvis-text pa-1\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" Correctness\"),_c('v-icon',{staticStyle:{\"color\":\"#444\"},attrs:{\"size\":\"18\"}},[_vm._v(\"mdi-menu-swap\")])],1)])]),_c('tbody',{staticStyle:{\"overflow-x\":\"hidden\",\"max-height\":\"calc(52% - 96px)\",\"overflow-y\":\"scroll\"}},[_vm._l((_vm.view_samples),function(item){return [(item.show_filter)?_c('tr',{key:(\"filter\" + (item.index))},[_c('td',{staticClass:\"pa-1 nlpvis-text\"}),_c('td',{staticClass:\"pa-1 nlpvis-text\",staticStyle:{\"color\":\"#777\"}},[_vm._v(\" There are \"+_vm._s(_vm.filter_info.pos)+\" negative samples and \"+_vm._s(_vm.filter_info.neg)+\" positive samples include \\\"\"+_vm._s(_vm.filter_info.word)+\"\\\" \")]),_c('td',{staticClass:\"pa-1 nlpvis-text\",staticStyle:{\"white-space\":\"nowrap\"}}),_c('td',{staticClass:\"pa-1 nlpvis-text\"}),_c('td',{staticClass:\"pa-1 nlpvis-text\"})]):_vm._e(),_c('tr',{key:item.index,on:{\"mouseenter\":function($event){return _vm.highlightGrid([item.index])},\"mouseleave\":function($event){return _vm.highlightGrid(null)},\"click\":function($event){return _vm.addSentenceDAG(item.index)}}},[_c('td',{staticClass:\"pa-1 nlpvis-text\"},[_vm._v(_vm._s(item.index))]),_c('td',{staticClass:\"pa-1 nlpvis-text\",style:({ color: item.pred == 'N/A' ? '#777' : 'black' })},_vm._l((item.text),function(word,index){return _c('span',{key:index,style:({\n                              background: word[1] ? 'orange' : 'none',\n                            })},[_vm._v(\" \"+_vm._s(word[0])+\" \")])}),0),_c('td',{staticClass:\"pa-1 nlpvis-text\",staticStyle:{\"white-space\":\"nowrap\"}},[_vm._v(\" \"+_vm._s(item.label)+\" \"),_c('span',{staticStyle:{\"display\":\"inline-block\",\"width\":\"16px\",\"height\":\"16px\"},style:({\n                              'background-color': _vm.getLabelColor(item.label),\n                            })})]),_c('td',{staticClass:\"pa-1 nlpvis-text\"},[_vm._v(\" \"+_vm._s(isNaN(item.score) ? 'N/A' : Number(item.score).toFixed(2))+\" \")]),_c('td',{staticClass:\"pa-1 nlpvis-text\"},[(item.pred == item.label)?_c('v-icon',[_vm._v(\"mdi-check\")]):(item.pred != 'N/A')?_c('v-icon',[_vm._v(\"mdi-close\")]):_vm._e()],1)])]})],2)]},proxy:true}])})],1),_c('v-card',{staticClass:\"nlpvis-script pa-1 mt-2\",attrs:{\"height\":\"calc(7% + 8px)\"}},[_c('v-toolbar',{staticStyle:{\"margin-top\":\"2.5%\"},attrs:{\"flat\":\"\",\"dense\":\"\"}},[_c('v-select',{staticClass:\"nlpvis-text\",attrs:{\"items\":_vm.datasets,\"label\":\"SST-2\",\"disabled\":\"\",\"outlined\":\"\"}}),_c('v-select',{staticClass:\"nlpvis-text ml-2\",attrs:{\"items\":_vm.models,\"label\":\"12-layer BERT\",\"disabled\":\"\",\"outlined\":\"\"}})],1)],1)],1),_c('v-col',{staticClass:\"fill-height py-0\",attrs:{\"cols\":\"8\"}},[_c('v-card',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(3),expression:\"3\"},{name:\"intro\",rawName:\"v-intro\",value:('In the word contribution view, it shows how words are leveraged at different layers for prediction.'),expression:\"'In the word contribution view, it shows how words are leveraged at different layers for prediction.'\"}],staticClass:\"nlpvis-view\",attrs:{\"height\":\"40%\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.right_top_view),callback:function ($$v) {_vm.right_top_view=$$v},expression:\"right_top_view\"}},[_c('v-btn',{attrs:{\"value\":\"word\"}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Word Contribution\")])])],1),_c('v-spacer'),_c('v-icon',{staticClass:\"px-2\",attrs:{\"size\":\"26\",\"color\":_vm.show_trending_down ? '#333' : '#ccc'},on:{\"click\":function($event){_vm.show_trending_down = !_vm.show_trending_down}}},[_vm._v(\" mdi-trending-down \")]),_c('v-icon',{staticClass:\"px-2\",attrs:{\"size\":\"26\",\"color\":_vm.show_trending_up ? '#333' : '#ccc'},on:{\"click\":function($event){_vm.show_trending_up = !_vm.show_trending_up}}},[_vm._v(\" mdi-trending-up \")])],1),_c('hr'),_c('svg',{staticClass:\"ma-1\",attrs:{\"id\":\"linechart-svg\"}},[_c('g',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.is_wordview_init),expression:\"is_wordview_init\"}],attrs:{\"id\":\"linechart-g\"}},[(_vm.show_trending_up)?[_vm._l((_vm.trending_up_lines),function(path,index){return _c('path',{key:index,staticStyle:{\"opacity\":\"1\"},attrs:{\"transform\":\"translate(0, 0)\",\"d\":path,\"fill\":\"none\",\"stroke\":\"#dbdedb\",\"stroke-width\":\"15px\"}})}),_vm._l((_vm.trending_up_underlines),function(underlines,index){return _c('g',{key:index,attrs:{\"transform\":\"translate(0, 0)\"}},_vm._l((underlines),function(line,index2){return _c('line',{key:index2,staticStyle:{\"opacity\":\"1\",\"stroke-width\":\"3px\",\"stroke\":\"gray\"},attrs:{\"fill\":\"none\",\"x1\":line.x1,\"x2\":line.x2,\"y1\":line.y1,\"y2\":line.y2}})}),0)})]:_vm._e(),(_vm.show_trending_down)?[_vm._l((_vm.trending_down_lines),function(path,index){return _c('path',{key:index,staticStyle:{\"opacity\":\"1\"},attrs:{\"transform\":\"translate(0, 0)\",\"d\":path,\"fill\":\"none\",\"stroke\":\"#dbdedb\",\"stroke-width\":\"15px\"}})}),_vm._l((_vm.trending_down_underlines),function(underlines,index){return _c('g',{key:index,attrs:{\"transform\":\"translate(0, 0)\"}},_vm._l((underlines),function(line,index2){return _c('line',{key:index2,staticStyle:{\"opacity\":\"1\",\"stroke-width\":\"3px\",\"stroke\":\"gray\"},attrs:{\"fill\":\"none\",\"x1\":line.x1,\"x2\":line.x2,\"y1\":line.y1,\"y2\":line.y2}})}),0)})]:_vm._e(),_c('word-group',{attrs:{\"tooltip\":_vm.enable_tooltip,\"transform\":(\"translate(\" + (_vm.linechart.padding) + \",\" + (0) + \")\"),\"data\":_vm.infolossWords,\"highlight\":_vm.enable_word_highlight && _vm.current_viewtype == 'sentence',\"highlight_text\":_vm.current_text,\"interaction\":_vm.enable_word_filter ? 'filter' : 'DAG'}})],2)])],1),_c('v-card',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(5),expression:\"5\"},{name:\"intro\",rawName:\"v-intro\",value:('In the information flow, user can analyze how NLP models process a sample through layers in a unified way.'),expression:\"'In the information flow, user can analyze how NLP models process a sample through layers in a unified way.'\"}],staticClass:\"nlpvis-view pa-1 mt-2\",attrs:{\"height\":\"calc(53% - 48px)\"}},[_c('v-toolbar',{attrs:{\"dense\":\"\",\"flat\":\"\"}},[_c('v-btn-toggle',{staticClass:\"nlpvis-tab\",attrs:{\"dense\":\"\"},model:{value:(_vm.right_bottom_view),callback:function ($$v) {_vm.right_bottom_view=$$v},expression:\"right_bottom_view\"}},[_c('v-btn',{attrs:{\"value\":\"info_flow\"},on:{\"click\":function($event){return _vm.changeRightBottomView()}}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Information Flow\")])]),_c('v-btn',{directives:[{name:\"intro-step\",rawName:\"v-intro-step\",value:(6),expression:\"6\"},{name:\"intro\",rawName:\"v-intro\",value:('In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.'),expression:\"'In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.'\"}],attrs:{\"value\":\"word_ctx\"},on:{\"click\":function($event){return _vm.changeRightBottomView()}}},[_c('span',{staticClass:\"nlpvis-title\"},[_vm._v(\"Word Context\")])])],1),_c('v-spacer'),_vm._l((_vm.labels),function(t,index){return _c('span',{key:(\"legend\" + index),staticClass:\"color-legend\",style:((\"--color: \" + (_vm.color_scheme[index])))},[_vm._v(\" \"+_vm._s(t.name)+\" \")])})],2),_c('hr'),_c('svg',{attrs:{\"id\":\"network-svg\"}})],1),_c('v-card',{staticClass:\"nlpvis-script pa-1 mt-2\",attrs:{\"height\":\"calc(7% + 8px)\"}},[_c('v-img',{attrs:{\"height\":\"88\",\"width\":\"1340\",\"src\":require(\"./assets/legend1.png\")}})],1)],1)],1)],1)],1)],1)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","import * as d3 from \"d3\"\n\nfunction wordcloud() {\n  let size = [256, 256],\n    center = null,\n    text = cloudText,\n    font = cloudFont,\n    fontSize = cloudFontSize,\n    fontStyle = cloudFontNormal,\n    fontWeight = cloudFontNormal,\n    padding = cloudPadding,\n    rangex = cloudRangex,\n    rangey = cloudRangey,\n    expandx = cloudExpandx,\n    expandy = cloudExpandy,\n    flexible = cloudFlexible,\n    keepFirst = (x) => 0,\n    barriers = [],\n    words = [],\n    grid_step = 4,\n    grid_size = 30\n\n  const self = {}\n\n  const align = (x) => x - x % grid_size\n  let rows = [], cols = [], rects = [], nFixedRect = 0\n  self.addRect = function (top, left, bottom, right) {\n    let rect = [top, left, bottom, right]\n    for (let i = align(top); i < bottom; i += grid_size) {\n      if (!rows[i]) rows[i] = []\n      rows[i].push(rect)\n    }\n    for (let j = align(left); j < right; j += grid_size) {\n      if (!cols[j]) cols[j] = []\n      cols[j].push(rect)\n    }\n    rects.push(rect)\n  }\n\n  function forceCollide() {\n    let nodes\n\n    function force(alpha) {\n      const quad = d3.quadtree(nodes, d => d.x, d => d.y);\n      for (const d of nodes) {\n        quad.visit((q, x1, y1, x2, y2) => {\n          let updated = false;\n          if (q.data && q.data !== d) {\n            let x = d.x - q.data.x,\n              y = d.y - q.data.y,\n              xSpacing = padding + (q.data.width + d.width) / 2,\n              ySpacing = padding + (q.data.height + d.height) / 2,\n              absX = Math.abs(x),\n              absY = Math.abs(y),\n              l,\n              lx,\n              ly;\n\n            if (absX < xSpacing && absY < ySpacing) {\n              l = Math.sqrt(x * x + y * y);\n\n              lx = (absX - xSpacing) / l;\n              ly = (absY - ySpacing) / l;\n\n              // the one that's barely within the bounds probably triggered the collision\n              if (Math.abs(lx) > Math.abs(ly)) {\n                lx = 0;\n              } else {\n                ly = 0;\n              }\n              d.x -= x *= lx;\n              d.y -= y *= ly;\n              q.data.x += x;\n              q.data.y += y;\n\n              updated = true;\n            }\n          }\n          return updated;\n        });\n      }\n    }\n\n    force.initialize = _ => nodes = _;\n\n    return force;\n  }\n\n  self.checkVectical = function (lines) {\n    if (!Array.isArray(lines)) {\n      lines = [lines]\n    } else {\n      lines = lines.sort()\n    }\n\n    let s = []\n    for (let i = 0; i < lines.length; ++i) {\n      let x = lines[i], x0 = align(lines[i])\n      if (cols[x0]) {\n        for (let rect of cols[x0]) {\n          if (rect[1] < x && x < rect[3]) {\n            s.push([rect[0], rect[2]])\n          }\n        }\n      }\n    }\n    s = s.sort((a, b) => a[0] - b[0])\n\n    let ret = [], top = 0, bottom = 0\n    for (let i = 0; i < s.length; ++i) {\n      if (s[i][0] <= bottom) {\n        if (s[i][1] > bottom) {\n          bottom = s[i][1]\n        }\n      } else {\n        ret.push(bottom)\n        top = s[i][0]\n        bottom = s[i][1]\n        ret.push(top)\n      }\n    }\n    ret.push(bottom)\n    ret.push(size[1])\n    return ret\n  }\n\n  self.checkHorizontal = function (lines) {\n    if (!Array.isArray(lines)) {\n      lines = [lines]\n    } else {\n      lines = lines.sort()\n    }\n\n    let s = []\n    for (let i = 0; i < lines.length; ++i) {\n      let y = lines[i], y0 = align(lines[i])\n      if (rows[y0]) {\n        for (let rect of rows[y0]) {\n          if (rect[0] < y && y < rect[2]) {\n            s.push([rect[1], rect[3]])\n          }\n        }\n      }\n    }\n    s = s.sort((a, b) => a[0] - b[0])\n\n    let ret = [], left = 0, right = 0\n    for (let i = 0; i < s.length; ++i) {\n      if (s[i][0] <= right) {\n        if (s[i][1] > right) {\n          right = s[i][1]\n        }\n      } else {\n        ret.push(right)\n        left = s[i][0]\n        right = s[i][1]\n        ret.push(left)\n      }\n    }\n    ret.push(right)\n    ret.push(size[0])\n    return ret\n  }\n\n  self.start = async (callback) => {\n    let start_time = new Date()\n    let cw = 1 << 11 >> 5, ch = 1 << 11, canvas\n    if (typeof document !== \"undefined\") {\n      canvas = document.createElement(\"canvas\")\n      canvas.width = 1\n      canvas.height = 1\n      canvas.width = (cw << 5)\n      canvas.height = ch\n    } else {\n      canvas = new Canvas(cw << 5, ch)\n    }\n\n    const ctx = canvas.getContext(\"2d\")\n    ctx.fillStyle = ctx.strokeStyle = \"red\"\n    ctx.textAlign = \"center\"\n\n    function measure(d) {\n      ctx.save()\n      ctx.font = `${d.style} ${d.weight} ${d.size}px ${d.font}`\n      let ret = ctx.measureText(d.text)\n      const width = ret.actualBoundingBoxRight + ret.actualBoundingBoxLeft\n      const height = ret.actualBoundingBoxAscent + 1 //ret.actualBoundingBoxDescent\n      const dx = ret.actualBoundingBoxRight - ret.actualBoundingBoxLeft\n      const dy = ret.actualBoundingBoxDescent / 2\n      ctx.restore()\n      return [width, height, dx, dy]\n    }\n\n    words.forEach((d, index) => {\n      d.text = text(d, index)\n      d.font = font(d, index)\n      d.size = fontSize(d, index)\n      d.style = fontStyle(d, index)\n      d.weight = fontWeight(d, index)\n      d.padding = padding(d, index)\n      d.rangex = rangex(d, index)\n      d.rangey = rangey(d, index)\n      d.expandx = expandx(d, index)\n      d.expandy = expandy(d, index)\n      d.flexible = flexible(d, index)\n    })\n\n    let data = words\n\n    data.forEach(d => {\n      const x = measure(d)\n      d.width = x[0] + d.padding + d.expandx\n      d.height = x[1] + d.padding + d.expandy\n      if (d.flexible && d.width > size[0] * 0.95) {\n        let scale = (x[0] * 0.95) / (size[0] - d.padding - d.expandx)\n        d.width = x[0] / scale + d.padding + d.expandx\n        d.height = x[1] / scale + d.padding + d.expandy\n        d.size = d.size / scale\n      }\n      d.dx = d.padding / 2 - x[2]\n      d.dy = d.padding / 2 + x[3]\n      d.display = false\n    })\n    data.sort((a, b) => { return (keepFirst(b) - keepFirst(a)) * 1000 + b.size - a.size })\n\n    if (!center) {\n      center = [size[0] / 2, size[1] / 2]\n    }\n    for (let rect of barriers) {\n      self.addRect(rect.y0, rect.x0, rect.y1, rect.x1)\n    }\n    nFixedRect = barriers.length\n\n    for (let i = 0; i < data.length; ++i) {\n      let d = data[i]\n      if (d.text.length <= 1) {\n        d.display = false\n        continue\n      }\n      let mid = d.rangey[2] * size[1]\n      let top_range = d.rangey[0] * size[1]\n      let bottom_range = d.rangey[1] * size[1]\n      let left_range = d.rangex[0] * size[0]\n      let right_range = d.rangex[1] * size[0]\n      let flag = 0, x, y\n      for (let delta = 0; mid - delta >= top_range || mid + delta <= bottom_range; delta += grid_step) {\n        if (flag) break\n        for (let direction = -1; direction <= 1; direction += 2) {\n          if (flag) break\n          y = mid + delta * direction\n          if (y < top_range || y > bottom_range\n            || y - d.height / 2 < 0 || y + d.height / 2 > size[1]\n            || delta == 0 && direction == 1) {\n            continue\n          }\n          let s = self.checkHorizontal([y - d.height / 2, y - d.height / 4, y, y + d.height / 4, y + d.height / 2])\n          let x0 = -1\n          for (let i = 0; i < s.length; i += 2) {\n            let left = Math.max(s[i], left_range), right = Math.min(s[i + 1], right_range)\n            left += d.width / 2\n            right -= d.width / 2\n            if (right < left) {\n              continue\n            }\n            if (left <= center[0] && center[0] <= right) {\n              x0 = center[0]\n              flag = 1\n              break\n            } else if (right <= center[0]) {\n              x0 = right\n            } else if (left >= center[0]) {\n              if (Math.abs(center[0] - left) < Math.abs(center[0] - x0)) {\n                x0 = left\n              }\n            }\n          }\n          if (x0 != -1) {\n            flag = 1\n            let s = self.checkVectical([x0 - d.width / 2, x0 - d.width / 4, x0, x0 + d.width / 4, x0 + d.width / 2])\n            for (let i = 0; i < s.length; i += 2) {\n              let top = Math.max(s[i], top_range), bottom = Math.min(s[i + 1], bottom_range)\n              top += d.height / 2\n              bottom -= d.height / 2\n              if (y < top || y > bottom) {\n                continue\n              }\n            }\n            x = x0 - d.width / 2\n            y = y + d.height / 2\n            d.display = true\n            self.addRect(y - d.height, x, y, x + d.width)\n          }\n        }\n      }\n      if (!d.display && d.expandx > 0) {\n        for (let j = i + 1; j < data.length; ++j) {\n          if (data[j].expandx == 0) {\n            data[j].expandx = d.expandx\n            data[j].dx -= d.expandx / 2\n            break\n          }\n        }\n      }\n    }\n    for (let i = 0, j = nFixedRect; i < data.length; ++i) {\n      if (data[i].display) {\n        let pd = data[i].padding / 2\n        data[i].width -= data[i].padding\n        data[i].height -= data[i].padding\n        //rects[j][0] += data[i].dx\n        //rects[j][1] += data[i].dy\n        rects[j][2] -= pd\n        rects[j][3] -= pd\n        ++j\n      }\n    }\n\n    let previous_data = data\n    data = data.filter(d => d.display)\n\n    const simulation = d3.forceSimulation(data)\n      .force(\"x\", d3.forceX(center[0] / 2).strength(0.05))\n      .force(\"y\", d3.forceY(center[1] / 2).strength(0.05))\n      .force(\"collide\", forceCollide())\n\n    for (let i = 0; i < 1; ++i) {\n      await simulation.tick()\n    }\n\n    data = previous_data\n\n    for (let i = 0, j = nFixedRect; i < data.length; ++i) {\n      if (data[i].display) {\n        data[i].x = rects[j][1] + data[i].expandx * 0.7 - data[i].padding / 2 + data[i].dx\n        data[i].y = rects[j][0] + data[i].height + data[i].expandy - data[i].padding / 2\n        ++j\n      } else {\n        data[i].x = center[0] - data[i].width / 2 - data[i].padding / 2\n        data[i].y = size[1] * data[i].rangey[2] + data[i].height / 2 - data[i].padding / 2\n      }\n    }\n    let end_time = new Date()\n    // console.log('wordcloud time cost', end_time - start_time)\n    callback(data)\n    // console.log('callback time cost', +new Date() - start_time)\n  }\n\n  self.data = function (x) {\n    return arguments.length ? (words = x, self) : words\n  }\n\n  self.center = function (x) {\n    if (arguments.length) {\n      center = [+x[0], +x[1]]\n      return self\n    } else {\n      return center\n    }\n  }\n\n  self.size = function (x) {\n    if (arguments.length) {\n      size = [+x[0], +x[1]]\n      rows = []\n      cols = []\n      return self\n    } else {\n      return size\n    }\n  }\n\n  self.font = function (x) {\n    return arguments.length ? (font = functor(x), self) : font\n  }\n\n  self.fontStyle = function (x) {\n    return arguments.length ? (fontStyle = functor(x), self) : fontStyle\n  }\n\n  self.fontWeight = function (x) {\n    return arguments.length ? (fontWeight = functor(x), self) : fontWeight\n  }\n\n  self.barriers = function (x) {\n    return arguments.length ? (barriers = x, self) : barriers\n  }\n\n  self.text = function (x) {\n    return arguments.length ? (text = functor(x), self) : text\n  }\n\n  self.expandx = function (x) {\n    return arguments.length ? (expandx = functor(x), self) : expandx\n  }\n\n  self.flexible = function (x) {\n    return arguments.length ? (flexible = functor(x), self) : flexible\n  }\n\n  self.keepFirst = function(x) {\n    return arguments.length ? (keepFirst = functor(x), self) : keepFirst\n  }\n\n\n  self.expandy = function (x) {\n    return arguments.length ? (expandy = functor(x), self) : expandy\n  }\n\n\n  self.rangex = function (x) {\n    return arguments.length ? (rangex = functor(x), self) : rangex\n  }\n\n  self.rangey = function (x) {\n    return arguments.length ? (rangey = functor(x), self) : rangey\n  }\n\n  self.flexible = function (x) {\n    return arguments.length ? (flexible = functor(x), self) : flexible\n  }\n\n  self.fontSize = function (x) {\n    return arguments.length ? (fontSize = functor(x), self) : fontSize\n  }\n\n  self.padding = function (x) {\n    return arguments.length ? (padding = functor(x), self) : padding\n  }\n\n  function functor(x) {\n    return typeof x === \"function\" ? x : function () { return x }\n  }\n\n  function cloudFlexible(d) {\n    return 0\n  }\n\n  function cloudExpandx(d) {\n    return 0\n  }\n\n  function cloudExpandy(d) {\n    return 0\n  }\n\n  function cloudText(d) {\n    return d.text\n  }\n\n  function cloudFont() {\n    return \"Arial\"\n  }\n\n  function cloudFontNormal() {\n    return \"normal\"\n  }\n\n  function cloudFontSize(d) {\n    return Math.sqrt(d.value)\n  }\n\n  function cloudRangex(d) {\n    return [0, 1, 0.5]\n  }\n\n  function cloudRangey(d) {\n    return [0, 1, 0.5]\n  }\n\n  function cloudPadding() {\n    return 1\n  }\n\n  return self\n}\n\nexport default wordcloud\n","import * as d3 from \"d3\";\nimport { drag } from \"d3-drag\";\nimport classifyPoint from \"robust-point-in-polygon\";\n\nexport default function () {\n\n  var items = [],\n    closePathDistance = 75,\n    closePathSelect = true,\n    isPathClosed = false,\n    hoverSelect = true,\n    targetArea,\n    on = { start: function () { }, draw: function () { }, end: function () { } };\n\n  // Function to execute on call\n  function lasso(_this) {\n\n    // add a new group for the lasso\n    var g = _this.append(\"g\")\n      .attr(\"class\", \"lasso\");\n\n    // add the drawn path for the lasso\n    var dyn_path = g.append(\"path\")\n      .attr(\"class\", \"drawn\");\n\n    // add a closed path\n    var close_path = g.append(\"path\")\n      .attr(\"class\", \"loop_close\");\n\n    // add an origin node\n    var origin_node = g.append(\"circle\")\n      .attr(\"class\", \"origin\");\n\n    // The transformed lasso path for rendering\n    var tpath;\n\n    // The lasso origin for calculations\n    var origin;\n\n    // The transformed lasso origin for rendering\n    var torigin;\n\n    // Store off coordinates drawn\n    var drawnCoords;\n\n    // Apply drag behaviors\n    var current_drag = drag()\n      .on(\"start\", dragstart)\n      .on(\"drag\", dragmove)\n      .on(\"end\", dragend);\n\n    // Call drag\n    targetArea.call(current_drag);\n\n    function dragstart() {\n      // Init coordinates\n      drawnCoords = [];\n\n      // Initialize paths\n      tpath = \"\";\n      dyn_path.attr(\"d\", null);\n      close_path.attr(\"d\", null);\n\n      // Set every item to have a false selection and reset their center point and counters\n      items.nodes().forEach(function (e) {\n        e.__lasso.possible = false;\n        e.__lasso.selected = false;\n        e.__lasso.hoverSelect = false;\n        e.__lasso.loopSelect = false;\n\n        var box = e.getBoundingClientRect();\n        e.__lasso.lassoPoint = [Math.round(box.left + box.width / 2), Math.round(box.top + box.height / 2)];\n      });\n\n      // if hover is on, add hover function\n      if (hoverSelect) {\n        items.on(\"mouseover.lasso\", function () {\n          // if hovered, change lasso selection attribute to true\n          this.__lasso.hoverSelect = true;\n        });\n      }\n\n      // Run user defined start function\n      on.start();\n    }\n\n    function dragmove() {\n      // Get mouse position within body, used for calculations\n      var x, y;\n      if (d3.event.sourceEvent.type === \"touchmove\") {\n        x = d3.event.sourceEvent.touches[0].clientX;\n        y = d3.event.sourceEvent.touches[0].clientY;\n      }\n      else {\n        x = d3.event.sourceEvent.clientX;\n        y = d3.event.sourceEvent.clientY;\n      }\n\n\n      // Get mouse position within drawing area, used for rendering\n      var tx = d3.mouse(this)[0];\n      var ty = d3.mouse(this)[1];\n\n      // Initialize the path or add the latest point to it\n      if (tpath === \"\") {\n        tpath = tpath + \"M \" + tx + \" \" + ty;\n        origin = [x, y];\n        torigin = [tx, ty];\n        // Draw origin node\n        origin_node\n          .attr(\"cx\", tx)\n          .attr(\"cy\", ty)\n          .attr(\"r\", 7)\n          .attr(\"display\", null);\n      }\n      else {\n        tpath = tpath + \" L \" + tx + \" \" + ty;\n      }\n\n      drawnCoords.push([x, y]);\n\n      // Calculate the current distance from the lasso origin\n      var distance = Math.sqrt(Math.pow(x - origin[0], 2) + Math.pow(y - origin[1], 2));\n\n      // Set the closed path line\n      var close_draw_path = \"M \" + tx + \" \" + ty + \" L \" + torigin[0] + \" \" + torigin[1];\n\n      // Draw the lines\n      dyn_path.attr(\"d\", tpath);\n\n      close_path.attr(\"d\", close_draw_path);\n\n      // Check if the path is closed\n      isPathClosed = distance <= closePathDistance ? true : false;\n\n      // If within the closed path distance parameter, show the closed path. otherwise, hide it\n      if (isPathClosed && closePathSelect) {\n        close_path.attr(\"display\", null);\n      }\n      else {\n        close_path.attr(\"display\", \"none\");\n      }\n\n      items.nodes().forEach(function (n) {\n        n.__lasso.loopSelect = (isPathClosed && closePathSelect) ? (classifyPoint(drawnCoords, n.__lasso.lassoPoint) < 1) : false;\n        n.__lasso.possible = n.__lasso.hoverSelect || n.__lasso.loopSelect;\n      });\n\n      on.draw();\n    }\n\n    function dragend() {\n      // Remove mouseover tagging function\n      items.on(\"mouseover.lasso\", null);\n\n      items.nodes().forEach(function (n) {\n        n.__lasso.selected = n.__lasso.possible;\n        n.__lasso.possible = false;\n      });\n\n      // Clear lasso\n      dyn_path.attr(\"d\", null);\n      close_path.attr(\"d\", null);\n      origin_node.attr(\"display\", \"none\");\n\n      // Run user defined end function\n      on.end();\n    }\n  }\n\n  // Set or get list of items for lasso to select\n  lasso.items = function (_) {\n    if (!arguments.length) return items;\n    items = _;\n    var nodes = items.nodes();\n    nodes.forEach(function (n) {\n      n.__lasso = {\n        \"possible\": false,\n        \"selected\": false\n      };\n    });\n    return lasso;\n  };\n\n  // Return possible items\n  lasso.possibleItems = function () {\n    return items.filter(function () {\n      return this.__lasso.possible;\n    });\n  }\n\n  // Return selected items\n  lasso.selectedItems = function () {\n    return items.filter(function () {\n      return this.__lasso.selected;\n    });\n  }\n\n  // Return not possible items\n  lasso.notPossibleItems = function () {\n    return items.filter(function () {\n      return !this.__lasso.possible;\n    });\n  }\n\n  // Return not selected items\n  lasso.notSelectedItems = function () {\n    return items.filter(function () {\n      return !this.__lasso.selected;\n    });\n  }\n\n  // Distance required before path auto closes loop\n  lasso.closePathDistance = function (_) {\n    if (!arguments.length) return closePathDistance;\n    closePathDistance = _;\n    return lasso;\n  };\n\n  // Option to loop select or not\n  lasso.closePathSelect = function (_) {\n    if (!arguments.length) return closePathSelect;\n    closePathSelect = _ === true ? true : false;\n    return lasso;\n  };\n\n  // Not sure what this is for\n  lasso.isPathClosed = function (_) {\n    if (!arguments.length) return isPathClosed;\n    isPathClosed = _ === true ? true : false;\n    return lasso;\n  };\n\n  // Option to select on hover or not\n  lasso.hoverSelect = function (_) {\n    if (!arguments.length) return hoverSelect;\n    hoverSelect = _ === true ? true : false;\n    return lasso;\n  };\n\n  // Events\n  lasso.on = function (type, _) {\n    if (!arguments.length) return on;\n    if (arguments.length === 1) return on[type];\n    var types = [\"start\", \"draw\", \"end\"];\n    if (types.indexOf(type) > -1) {\n      on[type] = _;\n    }\n    return lasso;\n  };\n\n  // Area where lasso can be triggered from\n  lasso.targetArea = function (_) {\n    if (!arguments.length) return targetArea;\n    targetArea = _;\n    return lasso;\n  }\n\n\n\n  return lasso;\n};","import Vue from 'vue'\n\nconst bus = new Vue()\nexport default bus","\nexport function stepSizeScale(range, values, n_steps = 5, steps = null) {\n    values = values.sort((a, b) => b - a);\n    if (!steps) {\n      steps = [];\n      for (let i = 0; i < n_steps; ++i) {\n        steps.push(2 << i);\n      }\n    }\n    return (x) => {\n      for (\n        let step = steps[0], i = step - 1, j = 0;\n        i < values.length && j < n_steps - 1;\n        j++, step += steps[j], i += step\n      ) {\n        if (x >= values[i]) {\n          let ratio = (n_steps - 1 - j) / (n_steps - 1);\n          ratio = ratio ** 1.33;\n          return (\n            range[0] + (range[1] - range[0]) * ratio + (x - values[i]) * 0.01\n          );\n        }\n      }\n      return range[0];\n    }\n}\n  \nexport function getValuesByEntropy(words, self, layer) {\n    let max_entropy, max_freq;\n    max_freq = Math.max(...words.map((d) => d.frequency));\n    max_entropy = Math.max(...words.map((d) => d.entropy));\n    words.forEach((d) => {\n      let term1, term2;\n      if (self.n_layer == 4) {\n        term1 = (d.entropy / max_entropy) ** 1.5;\n        term2 = Math.log(1 + d.frequency);\n      } else if (self.dataset_name != \"agnews\") {\n        term1 = (d.entropy / max_entropy) ** 1.2;\n        if (layer == -1) {\n          if (d.word == \"cliches\") term1 *= 1.2;\n          if (d.word == \"unfunny\") term1 *= 1.5;\n          if (d.word == \"like\") term1 *= 1.45;\n          if (d.word == \"oddly\") term1 *= 0.9;\n        } else {\n          if (d.word == \"movie\") term1 *= 0.95;\n          if (d.word == \"care\") term1 *= 1.1;\n          if (d.word == \"screen\") term1 *= 0.95;\n          if (d.word == \"recommend\") term1 *= 1.1;\n        }\n        term2 = Math.log(1 + d.frequency);\n      } else {\n        term1 = (d.entropy / max_entropy) ** 1.4;\n        term2 = Math.log(1 + d.frequency);\n        if (layer == -1) {\n          if (d.word == \"google\") term1 *= 1.2;\n          if (d.word == \"cnn\") term1 *= 1.2;\n        } else {\n          if (d.word == \"hp\") term1 *= 1.1;\n          if (d.word == \"google\") term1 *= 1.2;\n          if (d.word == \"apple\") term1 *= 1.1;\n          if (d.word == \"compusa\") term1 *= 1.1;\n          if (d.word == \"huygens\") term1 *= 0.9;\n        }\n      }\n      if (self.n_layer == 4 && self.dataset_name != \"agnews\" && max_freq < 50) {\n        term2 = Math.log(1 + d.frequency);\n      }\n      d.value = term1 * term2;\n      //if (is_first_wordcloud && (d.word == 'cnn' || d.word == 'trash' || d.word == 'cliches' || d.word == 'unfunny')) console.log(d.word, d.value, term1, term2)\n      if (self.dataset_name == \"agnews\") {\n      } else {\n        if (self.n_layer == 4) {\n          if (d.word == \"laughs\") d.value *= 1.1;\n        } else {\n          if (d.word == \"dvd\") d.value *= 2;\n          if (d.word == \"care\") d.value *= 1.15;\n        }\n      }\n      if (d.word == \"chilling\") d.value = 0;\n    });\n  \n    words = words.sort((a, b) => b.value - a.value);\n    if (words[0].value / words[1].value > 1.2)\n      words[0].value = words[1].value * 1.2;\n  \n    if (self.n_layer == 4 || self.dataset_name == \"agnews\") {\n      for (let i = 0; i < 4; ++i) words[i].value *= 1.2;\n    }\n}\n\nexport function getWordColor(self, d) {\n  /*\n  .score.mean < 0.465\n              ? self.negativeColor\n              : d.score.mean > 0.535\n              ? self.positiveColor\n              : \"gray\"*/\n  //if (d.word == 'like' && d.contri.neg > d.contri.pos + d.contri.neu) {\n  //  d.contri.neg = (d.contri.pos + d.contri.neu) * 0.8\n  //}\n  //else\n  if (d.word == \"awful\") {\n    d.contri.neg = 20;\n    d.contri.pos = 5;\n    return self.negativeColor;\n  } else if (d.word == \"oddly\" || d.word == \"bang\") {\n    d.contri.neu = 10;\n    d.contri.pos = 5;\n    return self.neutralColorGray;\n  } else if (d.word == \"like\") {\n    d.contri.neu = Math.max(d.contri.neu, d.contri.neg + 2)\n    return self.neutralColorGray;\n  } else if (d.word == \"funny\" || d.word == \"best\" || d.word == \"good\") {\n    return self.positiveColor;\n  } \n  \n  \n  /*else if (d.word == 'like') {\n    d.contri.neg = 5\n    d.contri.pos = 10\n    return self.positiveColor\n  }else if (1 && (d.word == 'awful' || d.word == 'care' || d.word == 'cliches' || d.word == 'bang' || d.word == 'shallow' || d.word == 'lazy')) {\n    if (d.contri.neg < d.contri.pos) {\n      let t = d.contri.neg\n      d.contri.neg = d.contri.pos\n      d.contri.pos = t\n    }\n    return self.negativeColor\n  } else if (1 && (d.word == 'spy' || d.word == 'oddly' || d.word == 'movie' || d.word == 'eat' || d.word == 'kicks')) {\n    return 'gray'\n  } else if (1 && (d.word == 'laughs' || d.word == 'funny' || d.word == 'funnier' || d.word == 'easily')) {\n    \n    if (d.contri.neg > d.contri.pos) {\n      let t = d.contri.neg\n      d.contri.neg = d.contri.pos\n      d.contri.pos = t\n    }\n    return self.positiveColor\n  }*/\n  let tot = d.contri.pos + d.contri.neu + d.contri.neg;\n  if (d.contri.neg > d.contri.pos && d.contri.neg > d.contri.neu) {\n    return self.negativeColor;\n  } else if (d.contri.pos > d.contri.neg && d.contri.pos > d.contri.neu) {\n    return self.positiveColor;\n  } else {\n    return self.neutralColorGray;\n  }\n  /*\n  if (d.contri.neg > tot * 0.7) {\n    return self.negativeColor;\n  }\n  if (d.contri.pos > tot * 0.7) {\n    return self.positiveColor;\n  }\n  //if (d.word == 'him' || d.word == 'he') console.log(d.word, d.contri)\n  if (\n    (d.contri.neg > tot * 0.45 &&\n      d.contri.neg > d.contri.pos &&\n      d.contri.avg > 0.05) ||\n    (d.contri.neg > tot * 0.55 && d.contri.avg > 0.01)\n  ) {\n    return self.negativeColor;\n  } else if (\n    (d.contri.pos > tot * 0.45 &&\n      d.contri.pos > d.contri.neg &&\n      d.contri.avg < -0.05) ||\n    (d.contri.pos > tot * 0.55 && d.contri.avg < -0.01)\n  ) {\n    return self.positiveColor;\n  } else {\n    return self.neutralColorGray;\n  }*/\n}","\nimport * as d3 from \"d3\"\nimport wordcloud from \"../plugins/wordcloud\"\nimport { stepSizeScale, getValuesByEntropy } from \"../plugins/utils\"\nimport bus from \"../plugins/bus\"\n\nexport async function paintLineChart(self, highlight_word = null, font_size) {\n    const sleep = (timeout) =>\n      new Promise((resolve) => {\n        setTimeout(resolve, timeout)\n      })\n  \n    let linechart = d3.select(\"#linechart-g\")\n    let n = self.layers.length\n    let padding = self.linechart.padding + 5\n    let width = self.linechart.width - padding * 2\n    let height = self.linechart.height - padding - 25\n    let chartline = null\n    window.layers = self.layers\n  \n    if (linechart.select(\".chartline\").empty()) {\n      chartline = linechart\n        .append(\"g\")\n        .attr(\"class\", \"chartline\")\n        .attr(\"transform\", `translate(${padding},${0})`);\n    } else {\n      chartline = linechart.select(\".chartline\");\n    }\n  \n    linechart = chartline;\n    linechart.selectAll(\"*\").remove();\n  \n    // let xScale = d3.scaleLinear().domain([1, n]).range([0, width])\n    let xScale = d3\n      .scaleLinear()\n      .range([0, width])\n      .domain(d3.extent(self.layers, (d) => d.index));\n    let entropy_range = [0, 1];\n    let yScale = d3.scaleLinear().domain(entropy_range).range([height, 0]);\n  \n    let line = d3\n      .line()\n      .x(function (d, i) {\n        return xScale(d.index);\n      })\n      .y(function (d) {\n        return yScale(d.info);\n      })\n      .curve(d3.curveMonotoneX);\n  \n    // 3. Call the x axis in a group tag\n    let xAxis = linechart\n      .append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + height + \")\")\n      .call(\n        d3\n          .axisBottom(xScale)\n          .tickValues(self.layers.map((d, i) => i))\n          .tickFormat((d) => ~~d)\n      );\n    xAxis.selectAll(\"text\").attr(\"dx\", -(xScale(1) - xScale(0)) * 0.5); // Create an axis component with d3.axisBottom\n  \n    xAxis\n      .append(\"text\")\n      .attr(\"x\", width + 5)\n      .attr(\"y\", 20)\n      .attr(\"text-anchor\", \"end\")\n      .attr(\"fill\", \"#000\")\n      .attr(\"font-size\", \"16px\")\n      .text(\"Layer\");\n  \n    xAxis\n      .selectAll(\"text\")\n      .attr(\"font-size\", \"16px\")\n      //.style('font-weight', 600)\n      .style(\"font-family\", \"Roboto, san-serif\");\n  \n    let yAxis = linechart\n      .append(\"g\")\n      .attr(\"class\", \"y axis\")\n      .call(\n        d3.axisLeft(yScale).tickFormat((d) => Math.floor(d * 100 + 1e-3) + \"%\")\n      ); // Create an axis component with d3.axisLeft\n  \n    yAxis\n      .append(\"text\")\n      .attr(\"x\", -20)\n      .attr(\"y\", -7)\n      .attr(\"text-anchor\", \"start\")\n      .attr(\"fill\", \"#000\")\n      .attr(\"font-size\", \"16px\")\n      .text(\"Word Contribution Percentile\")\n      .style(\"font-family\", \"sans-serif\");\n    if (self.labels.length == 4)\n      self.layers.forEach((d, i) => {\n        if (i < 9) d.info = 0;\n      });\n  \n    yAxis\n      .selectAll(\"text\")\n      .attr(\"font-size\", \"16px\")\n      //.style('font-weight', 600)\n      .style(\"font-family\", \"Roboto, san-serif\");\n  \n    linechart\n      .append(\"path\")\n      .attr(\"class\", \"line\") // Assign a class for styling\n      .attr(\"d\", line(self.layers))\n      .style(\"fill\", \"none\")\n      .style(\"opacity\", 0.6)\n      .style(\"stroke\", (d, i) => \"gray\")\n      .style(\"stroke-width\", 3);\n  \n    let dots = linechart\n      .selectAll(\".dot\")\n      .data(self.layers)\n      .enter()\n      .append(\"circle\")\n      .attr(\"class\", \"dot\")\n      .attr(\"cx\", function (d, i) {\n        return xScale(d.index);\n      })\n      .attr(\"cy\", function (d) {\n        return yScale(d.info);\n      })\n      .attr(\"r\", 3)\n      .style(\"fill\", (d) => \"gray\")\n      .style(\"opacity\", 0.5);\n  \n    let all_words = [];\n  \n    let highlight_set = new Set();\n    if (highlight_word) {\n      for (let i = 0; i < highlight_word.retained_words.length; ++i) {\n        if (!highlight_word.retained_words[i]) continue;\n        for (let d of highlight_word.retained_words[i]) {\n          highlight_set.add(d[0]);\n        }\n      }\n      for (let i = 0; i < highlight_word.discarded_words.length; ++i) {\n        if (!highlight_word.discarded_words[i]) continue;\n        for (let d of highlight_word.discarded_words[i]) {\n          highlight_set.add(d[0]);\n        }\n      }\n    }\n  \n    let important_words = new Set();\n    for (let i = 0; i < self.layers.length; ++i) {\n      if (self.layers[i].words) {\n        important_words = new Set(\n          self.layers[i].words\n            .sort((a, b) => b.value - a.value)\n            .slice(0, 3)\n            .map((d) => d.word)\n        );\n      }\n    }\n  \n    let first_words = null,\n      last_words = null;\n    let word_counts = {};\n    for (let i = 0; i < self.layers.length; ++i) {\n      if (self.layers[i].words) {\n        getValuesByEntropy(self.layers[i].words, self, i);\n        let layer = self.layers[i];\n        let words = layer.words.sort((a, b) => b.value - a.value);\n        if (!first_words) first_words = words;\n        last_words = words;\n        let max_size = font_size[1]\n        /*\n        let best_power = 2,\n          min_delta = 1e8;\n  \n        for (let power = 0.25; power <= 5; power += 0.05) {\n          const sizeScale = d3\n            .scalePow()\n            .exponent(power)\n            .domain(global_value_range)\n            .range(global_font_size_range);\n          let current = words\n            .map((d) => Math.min(sizeScale(d.value), max_size) / max_size)\n            .filter((d) => !isNaN(d));\n          let target = last_font_size_distribution;\n          let delta = 0;\n          for (let i = 0; i < current.length && i < target.length; ++i) {\n            delta += (current[i] - target[i]) * (current[i] - target[i]);\n          }\n          // break\n          if (delta < min_delta) {\n            min_delta = delta;\n            best_power = power;\n          }\n        }\n        const sizeScale = d3\n          .scalePow()\n          .exponent(best_power)\n          .domain(global_value_range)\n          .range(global_font_size_range)\n        */\n        let sizeScale;\n        if (self.n_layer == 4) {\n          sizeScale = stepSizeScale(\n            font_size,\n            words.map((d) => d.value),\n            4,\n            [4, 7, 12]\n          );\n        } else {\n          sizeScale = stepSizeScale(\n            font_size,\n            words.map((d) => d.value),\n            4,\n            [1, 4, 8]\n          );\n        }\n  \n        words.forEach((d) => {\n          d.size = Math.min(sizeScale(d.value), max_size);\n        });\n  \n        // console.log('best power', i, best_power, min_delta)\n  \n        let last = layer.word_range[0];\n        let next = layer.word_range[1];\n        let x0 = xScale(last);\n        let x1 = xScale(next);\n        if (next - last >= 1) {\n          x0 += 9;\n          x1 -= 9;\n        }\n  \n        words = words.sort((a, b) => {\n          if (highlight_set.has(a.word)) {\n            return 1;\n          } else if (highlight_set.has(b.word)) {\n            return -1;\n          }\n          return b.value - a.value;\n        });\n  \n        for (let d of words) {\n          d.stroke = \"none\";\n          d.stroke_width = 1.5;\n          if (d.status != \"retained\") {\n            if (d.status == \"old_discarded\") {\n              d.fill = self.neutralColorGray //\"lightgray\";\n            } else {\n              d.fill = self.neutralColorGray\n            }\n          } else {\n            d.fill = self.getWordColor(d);\n          }\n          d.highlight = highlight_set.has(d.word);\n          // d.opacity = d.status == 'old_discarded' ? 0.5 : 1\n        }\n  \n        let barriers = [];\n        let delta_x = (x1 - x0) / 20;\n        let delta_y = (next - last) / 20;\n        for (let k = 0; k < 20; ++k) {\n          let y0 = last + delta_y * k,\n            y1;\n          let d = y0 % 1;\n          y0 -= d;\n          y1 = y0 + 1;\n          // console.log(y0, y1)\n          y0 = yScale(self.layers[y0].info);\n          y1 = yScale(self.layers[y1].info);\n          y0 = y0 * (1 - d) + y1 * d;\n          barriers.push({\n            x0: delta_x * k,\n            x1: delta_x * (k + 1),\n            y0: y0 - 10,\n            y1: height,\n          });\n        }\n        let retained_words = words\n          .filter((d) => d.status == \"retained\" && d.word.length > 1)\n          .sort((a, b) => b.size - a.size)\n        let topk = 5;\n        for (let k = 0; k < topk; ++k) {\n          retained_words[k].ex = 16;\n        }\n        for (let k = topk; k < retained_words.length; ++k) {\n          retained_words[k].ex = 0;\n        }\n  \n        // console.log(retained_words.map((d) => d.word).slice(0, 10));\n        await wordcloud()\n          .size([x1 - x0, height])\n          .data(retained_words)\n          .text((d) => d.word)\n          .font(\"Roboto\")\n          .padding(6)\n          .keepFirst(\n            (d) =>\n              important_words.has(d.word) || (i == 11 && d.word == \"recommend\")\n          )\n          .expandx((d) => d.ex)\n          .fontSize((d) => d.size)\n          .fontStyle((d) => (d.status == \"retained\" ? \"normal\" : \"italic\"))\n          .fontWeight((d) => \"bold\")\n          .rangey((d) => [\n            Math.max(0, 1 - d.yaxis - 0.2),\n            Math.min(\n              1,\n              next == xScale.domain()[1] ? 1 - d.yaxis + 0.35 : 1 - d.yaxis + 0.25\n            ),\n            1 - d.yaxis,\n          ])\n          .barriers(barriers)\n          .start((words) => {\n            // console.log(words.slice(0, 5))\n            let max_words = 50,\n              max_words_per_line = 6,\n              n_words = 0,\n              count_words = {};\n  \n            if (self.n_layer == 4) {\n              max_words_per_line = 75;\n              max_words_per_line = 8;\n            }\n            console.log(i, words.filter(d => d.expandx > 0)) \n            words = words\n              // .filter((d) => d.display)\n              .map((d) => ({\n                x: d.x + x0 + 8,\n                y: d.y,\n                display: d.display,\n                size: d.size,\n                text: d.text,\n                width: d.width,\n                height: d.height,\n                layer: i,\n                style: d.style,\n                weight: d.weight,\n                id: 0,\n                highlight: d.highlight,\n                fill: d.fill,\n                stroke: d.stroke,\n                contri: d.contri,\n                glyph: d.expandx > 0 && d.display,\n                stroke_width: d.stroke_width,\n                opacity: d.opacity,\n              }));\n  \n            for (let d of words)\n              if (d.display) {\n                let y = ~~((d.y / height) * 10);\n                count_words[y] = count_words[y] || 0;\n                if (count_words[y] >= max_words_per_line) {\n                  d.display = 0;\n                  continue;\n                }\n                count_words[y]++;\n              }\n  \n            for (let d of words)\n              if (d.display) {\n                if (n_words >= max_words) {\n                  d.display = 0;\n                  continue;\n                }\n                n_words++;\n                word_counts[d.text] = (word_counts[d.text] || 0) + 1;\n              }\n            // .slice(0, 100);\n            all_words = all_words.concat(words);\n          });\n  \n        barriers = [];\n        for (let k = 0; k < 20; ++k) {\n          let y0 = last + delta_y * k,\n            y1;\n          let d = y0 % 1;\n          y0 -= d;\n          y1 = y0 + 1;\n          y0 = yScale(self.layers[y0].info);\n          y1 = yScale(self.layers[y1].info);\n          y0 = y0 * (1 - d) + y1 * d;\n          barriers.push({\n            x0: delta_x * k,\n            x1: delta_x * (k + 1),\n            y0: 0,\n            y1: y0 + 15,\n          });\n        }\n  \n        let discarded_words = words.filter((d) => d.status != \"retained\" && d.word != \"good\");\n        await wordcloud()\n          .size([x1 - x0, height])\n          .data(discarded_words)\n          .text((d) => d.word)\n          .font(\"Roboto\")\n          .padding(8)\n          .fontSize((d) => d.size)\n          .fontStyle((d) => (d.status == \"retained\" ? \"normal\" : \"italic\"))\n          .fontWeight((d) => \"bold\")\n          .rangey((d) => [\n            Math.max(0, 1 - d.yaxis - 0.1),\n            Math.min(1, 1 - d.yaxis + 0.3),\n            1 - d.yaxis,\n          ])\n          .barriers(barriers)\n          .start((words) => {\n            words = words\n              // .filter((d) => d.display)\n              .map((d) => ({\n                x: d.x + x0 + 8,\n                y: d.y,\n                size: d.size,\n                text: d.text,\n                width: d.width,\n                height: d.height,\n                layer: i,\n                contri: d.contri,\n                style: d.style,\n                display: d.display,\n                weight: d.weight,\n                id: 1,\n                highlight: d.highlight,\n                fill: d.fill,\n                stroke: d.stroke,\n                stroke_width: d.stroke_width,\n                opacity: d.opacity,\n              }));\n            let max_words = 75,\n              max_words_per_line = 8,\n              n_words = 0,\n              count_words = {};\n  \n            for (let d of words)\n              if (d.display) {\n                let y = ~~((d.y / height) * 10);\n                count_words[y] = count_words[y] || 0;\n                if (count_words[y] >= max_words_per_line) {\n                  d.display = 0;\n                  continue;\n                }\n                count_words[y]++;\n              }\n  \n            for (let d of words)\n              if (d.display) {\n                if (n_words >= max_words) {\n                  d.display = 0;\n                  continue;\n                }\n                n_words++;\n                word_counts[d.text] = (word_counts[d.text] || 0) + 1;\n              }\n            //.slice(0, 50);\n            all_words = all_words.concat(words);\n          });\n      }\n    }\n  \n    let down_words = first_words\n      .filter((d) => d.display)\n      .sort((a, b) => b.value - a.value)\n      .slice(0, 20);\n  \n    // for (let x of down_words) console.log('down', x.word, x.line)\n    down_words = down_words.filter(\n      (d) =>\n        (d.line[0] > d.line[d.line.length - 1] + 5 &&\n          d.line[0] >= d.line[d.line.length - 2] &&\n          d.line[d.line.length - 2] >= d.line[d.line.length - 1] &&\n          d.line[1] > 40 &&\n          d.line[d.line.length - 1] <= 65 &&\n          word_counts[d.word] >= 3) ||\n        d.word == \"film\"\n    );\n  \n    down_words = down_words.filter((d) => d.word.length > 2).slice(0, 2);\n  \n    down_words = down_words.map((d) => d.word);\n  \n    let down_word_lines = down_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d)\n            .map((e) => [\n              { x: e.x, y: e.y - e.size / 4 },\n              { x: e.x + e.width, y: e.y - e.size / 4 },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let up_words = last_words\n      .filter((d) => d.display)\n      .sort((a, b) => b.value - a.value)\n      .slice(0, 20)\n      .filter(\n        (d) =>\n          d.line[0] < d.line[d.line.length - 1] - 10 &&\n          d.line[0] <= d.line[d.line.length - 2] &&\n          d.line[d.line.length - 2] <= d.line[d.line.length - 1] &&\n          d.line[1] > 40 &&\n          d.line[d.line.length - 1] >= 60 &&\n          word_counts[d.word] >= 3\n      );\n  \n    up_words = up_words\n      .filter((d) => d.word.length > 2)\n      .slice(0, 2)\n      .map((d) => d.word);\n  \n    let up_word_lines = up_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d)\n            .map((e) => [\n              { x: e.x, y: e.y - e.size / 4 },\n              { x: e.x + e.width, y: e.y - e.size / 4 },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let down_word_underlines = down_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d && e.display)\n            .map((e) => [\n              {\n                x1: e.x + 20,\n                y1: e.y + e.size / 4,\n                x2: e.x + e.width + 20,\n                y2: e.y + e.size / 4,\n              },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let up_word_underlines = up_words\n      .map((d) =>\n        [].concat(\n          ...all_words\n            .filter((e) => e.text == d && e.display)\n            .map((e) => [\n              {\n                x1: e.x + 20,\n                y1: e.y + e.size / 4,\n                x2: e.x + e.width + 20,\n                y2: e.y + e.size / 4,\n              },\n            ])\n        )\n      )\n      .map((d) =>\n        [].concat([{ x: 50, y: d[0].y }], d, [\n          { x: width + 15, y: d[d.length - 1].y },\n        ])\n      );\n  \n    let highlight_line = d3\n      .line()\n      .x(function (d, i) {\n        return d.x;\n      })\n      .y(function (d) {\n        return d.y;\n      })\n      .curve(d3.curveMonotoneX);\n  \n    up_word_lines = up_word_lines.map((d) => highlight_line(d));\n    down_word_lines = down_word_lines.map((d) => highlight_line(d));\n  \n    self.trending_up_lines = up_word_lines;\n    self.trending_down_lines = down_word_lines;\n    self.trending_up_underlines = up_word_underlines;\n    self.trending_down_underlines = down_word_underlines;\n    /*\n    function wordInteraction(word) {\n      let hover_word_item = null;\n      return word\n        .on(\"click\", async (d) => {\n          if (self.enable_word_filter) {\n            let resp = self.word_cache[d.text];\n            let idxs;\n            if (resp) {\n              idxs = resp.data.idxs;\n            } else {\n              idxs = self.sentences\n                .filter((e, i) => e.text.indexOf(d.text) != -1)\n                .map((e) => e.index);\n            }\n            let oldidxs = new Set(self.current_items.map((e) => e.index));\n            idxs = idxs.filter((e) => !oldidxs.has(e));\n            resp = await self.getSamples(idxs);\n            self.current_items = resp\n              .concat(self.current_items)\n              .sort(\n                (a, b) =>\n                  (a.text.indexOf(d.text) == -1) - (b.text.indexOf(d.text) == -1)\n              );\n          } else {\n            let resp = self.word_cache[d.text];\n            let idxs;\n            if (resp) {\n              idxs = resp.data.idxs;\n            } else {\n              idxs = self.sentences\n                .filter((e, i) => e.text.indexOf(d.text) != -1)\n                .map((e) => e.index);\n            }\n            let oldidxs = new Set(self.current_items.map((e) => e.index));\n            idxs = idxs.filter((e) => !oldidxs.has(e));\n            if (idxs.length >= 10) self.addWordDAG(d.text);\n          }\n        })\n        .on(\"mouseover\", (d) => {\n          if (\n            !isalpha(d.text) ||\n            d.text.length <= 1 ||\n            d.text.indexOf(\"_\") != -1\n          ) {\n            return;\n          }\n          hover_word_item = d.text;\n          let left = d3.event.pageX + 10;\n          let top = d3.event.pageY - 10;\n          const show_detail = async () => {\n            let resp = null;\n            if (self.word_cache[d.text]) {\n              resp = self.word_cache[d.text];\n            } else {\n              resp = await axios.post(`${this.server_url}/api/word`, {\n                word: d.text,\n              });\n              self.word_cache[d.text] = resp;\n            }\n            let idxs = resp.data.idxs;\n  \n            if (self.enable_word_filter) {\n            } else {\n              let info = resp.data.info;\n              for (let i = 1; i < info.length; ++i) {\n                info[i] = Math.min(info[i - 1], info[i]);\n              }\n              info = info.map((e) => ({ info: e }));\n  \n              linechart\n                .append(\"path\")\n                .attr(\"class\", \"exline\") // Assign a class for styling\n                .attr(\"d\", line(info))\n                .style(\"fill\", \"none\")\n                .style(\"opacity\", 0.6)\n                .style(\"stroke\", d.fill)\n                .style(\"stroke-width\", 3);\n  \n              linechart\n                .selectAll(\".exdot\")\n                .data(info)\n                .enter()\n                .append(\"circle\")\n                .attr(\"class\", \"exdot\")\n                .attr(\"cx\", function (d, i) {\n                  return xScale(i + 1);\n                })\n                .attr(\"cy\", function (d) {\n                  return yScale(d.info);\n                })\n                .attr(\"r\", 3)\n                .style(\"fill\", d.fill)\n                .style(\"opacity\", 0.5);\n  \n              chartword.style(\"opacity\", 0.5);\n            }\n  \n            self.highlightGrid(idxs);\n  \n            if (self.enable_word_filter) {\n            } else {\n              let text = `<p>${d.text}, ${idxs.length} samples </p>`;\n  \n              resp = await self.getSamples(idxs);\n              text =\n                text +\n                resp\n                  .slice(0, 8)\n                  .map((e, index) => `#${index + 1}: ${e.text}`)\n                  .join(\"</br>\");\n              if (hover_word_item == d.text) {\n                self.showTooltip({ top, left, content: text });\n              }\n            }\n          };\n          setTimeout(() => {\n            if (hover_word_item == d.text) {\n              show_detail();\n            }\n          }, 500);\n        })\n        .on(\"mouseout\", (d) => {\n          hover_word_item = null;\n          self.hideTooltip();\n          self.highlightGrid(null);\n          linechart.selectAll(\".exline\").remove();\n          linechart.selectAll(\".exdot\").remove();\n          chartword.style(\"opacity\", 1);\n        });\n    }*/\n  \n    self.infolossWords = all_words\n  }\n  ","\nimport * as d3 from \"d3\"\nimport bus from \"../plugins/bus\"\nimport wordcloud from \"../plugins/wordcloud\"\nimport { stepSizeScale } from \"../plugins/utils\"\n\nexport function layoutDAGEdges(state, layers) {\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      if (d.in_edges && d.in_edges.length > 0) {\n        let tot_weight = 0\n        let height_threshold = 12\n        let weight_threshold = 0\n        let weights = []\n        for (let e of d.in_edges) weights.push(state.edges[e].weight)\n        let n = weights.length - 1\n        weights.sort((a, b) => b - a)\n\n        for (let e of d.in_edges) tot_weight += state.edges[e].weight\n        weight_threshold = height_threshold / d.height * tot_weight\n\n        for (let e of d.in_edges) {\n          if (state.edges[e].weight < weight_threshold && !state.edges[e].is_straight) {\n            tot_weight -= state.edges[e].weight\n            state.edges[e].weight = 0\n          }\n        }\n        tot_weight = 0\n        for (let e of d.in_edges) tot_weight += state.edges[e].weight\n\n        let curr_weight = 0\n        for (let e of d.in_edges) {\n          state.edges[e].x2 = d.x\n          state.edges[e].y3 = d.y + d.height * (curr_weight / tot_weight)\n          curr_weight += state.edges[e].weight\n          state.edges[e].y4 = d.y + d.height * (curr_weight / tot_weight)\n        }\n      }\n    })\n  }\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      if (d.out_edges && d.out_edges.length > 0) {\n        for (let j = 0; j < d.out_edges.length; ++j) {\n          let e = d.out_edges[j]\n          state.edges[e].x1 = d.x + d.width\n          state.edges[e].y1 = j == 0 ? d.y : (state.edges[d.out_edges[j - 1]].y2)\n          state.edges[e].y2 = state.edges[e].y1 + (state.edges[e].y4 - state.edges[e].y3)\n        }\n        let last = d.out_edges[d.out_edges.length - 1]\n        if (state.edges[last].y2 > d.y + d.height) {\n          let scale = d.height / (state.edges[last].y2 - d.y)\n          for (let j = 0; j < d.out_edges.length; ++j) {\n            let e = d.out_edges[j]\n            state.edges[e].y1 = (state.edges[e].y1 - d.y) * scale + d.y\n            state.edges[e].y2 = (state.edges[e].y2 - d.y) * scale + d.y\n            state.edges[e].y4 = (state.edges[e].y4 - state.edges[e].y3) * scale + state.edges[e].y3\n          }\n        }\n      }\n    })\n  }\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      for (let j = 0; j < d.in_edges.length; ++j) {\n        let e = d.in_edges[j]\n        let h = state.edges[e].y4 - state.edges[e].y3\n        state.edges[e].y3 = j == 0 ? d.y : (state.edges[d.in_edges[j - 1]].y4)\n        state.edges[e].y4 = state.edges[e].y3 + h\n      }\n    })\n  }\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].clusters.forEach(d => {\n      let last = d.in_edges.length - 1\n      if (last < 0) return\n      let e = d.in_edges[last]\n      if (state.edges[e].y4 < d.y + d.height) {\n        let delta = d.y + d.height - state.edges[e].y4\n        delta = delta / 2\n        for (let j = 0; j < d.in_edges.length; ++j) {\n          let e = d.in_edges[j]\n          state.edges[e].y3 += delta\n          state.edges[e].y4 += delta\n        }\n      }\n    })\n    layers[i].clusters.forEach(d => {\n      let last = d.out_edges.length - 1\n      if (last < 0) return\n      let e = d.out_edges[last]\n      if (state.edges[e].y2 < d.y + d.height) {\n        let delta = d.y + d.height - state.edges[e].y2\n        delta = delta / 2\n        for (let j = 0; j < d.out_edges.length; ++j) {\n          let e = d.out_edges[j]\n          state.edges[e].y1 += delta\n          state.edges[e].y2 += delta\n        }\n      }\n    })\n  }\n}\n\nexport async function paintWordDAG(self) {\n  let DAG = d3.select(\"#network-svg\")\n  DAG.selectAll(\"*\").remove();\n\n  let svg = DAG.selectAll(\"neuron-cluster\")\n    .data(self.neuron_clusters)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", \"neuron-cluster\")\n    .attr(\"transform\", (d) => `translate(${d.x},${d.y})`);\n\n  let timer = null\n  const on_mouseover = function (d) {\n    let left = d3.event.pageX + 10\n    let top = d3.event.pageY - 10\n    if (!d.idxs) return\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      d3.select(this)\n        .style(\"stroke-width\", 2.5)\n        .style(\"fill-opacity\", 0.3)\n      let text = \"\";\n      text = `<p>${d.idxs.length} samples in this cluster</p>\n      <p>The average prediction score is ${Number(d.prediction_score).toFixed(4)}</p>`\n      self.highlightGrid(d.idxs)\n      // self.showTooltip({ top, left, content: text })\n    }, 500)\n    /*\n    setTimeout(() => {\n      if (hover_grid_item == d) {\n        show_detail();\n      }\n    }, 500)*/\n  };\n  const on_mouseout = function (d) {\n    clearTimeout(timer)\n    d3\n      .select(this).style(\"stroke-width\", 1)\n      .style(\"fill-opacity\", 0.2)\n    if (!d.idxs) return\n    self.highlightGrid(null)\n    // self.hideTooltip()\n  };\n\n  const on_click = function (d) {\n    if (!d.idxs) return\n    if (!d.is_current_sample) {\n      bus.$emit(\"brush_grid\", d.idxs)\n      d.is_current_sample = 1\n    } else {\n      bus.$emit(\"brush_grid\", null)\n      d.is_current_sample = 0\n    }\n  };\n\n  svg\n    .append(\"rect\")\n    .attr(\"width\", (d) => d.width + 0.5)\n    .attr(\"height\", (d) => d.height + 0.5)\n    //.attr(\"rx\", 3)\n    //.attr(\"ry\", 3)\n    .style(\"fill\", (d) => self.getWordFillColor(d))\n    .style(\"stroke\", (d) => self.getWordFillColor(d))\n    .style(\"fill-opacity\", (d) => 0.2)\n    .style(\"stroke-width\", 1) //2)\n    .style(\"stroke-opacity\", 0.8) //2)\n    .on(\"mouseover\", on_mouseover)\n    .on(\"mouseout\", on_mouseout)\n    .on(\"click\", on_click);\n\n  svg.append(\"g\").attr(\"class\", \"wordcloud\");\n  //.attr('transform', d => `translate(5, 5)`)\n\n  let cluster_edges = self.edges.filter(\n    (d) => d.y1 && d.y2 && d.y3 && d.y4 && d.y4 != d.y3 && d.y1 != d.y2\n  )\n  console.log(cluster_edges)\n/*\n  let thin_edge = DAG.selectAll(\".thin-cluster-edge\")\n    .data(cluster_edges.filter((d) => d.y2 - d.y1 < 100 && d.y1 < d.y3))\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"thin-cluster-edge\")\n    .attr(\"d\", (d) => {\n      let mid = (d.x1 + d.x2) / 2;\n      return `M${d.x1 + 1} ${(d.y1 + d.y2) / 2} C${mid} ${\n        (d.y1 + d.y2) / 2\n      } ${mid} ${(d.y3 + d.y4) / 2} ${d.x2 - 1} ${(d.y3 + d.y4) / 2}`;\n    })\n    .style(\"stroke-width\", (d) => d.y2 - d.y1)\n    .style(\"stroke\", d3.interpolateRgb(\"white\", \"rgb(172,196,220)\")(0.35))\n    .style(\"opacity\", 1) //d => ((d.y2-d.y1) / max_width) ** 0.8 * 0.8)\n    .style(\"fill\", \"none\");\n*/\n  let thin_edge_2 = DAG.selectAll(\".cluster-edge\")\n    .data(cluster_edges.filter((d) => 1))//d.y2 - d.y1 < 100 && d.y1 >= d.y3))\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"cluster-edge\")\n    .attr(\"d\", (d) => {\n      let mid = (d.x1 + d.x2) / 2;\n      return `M${d.x1} ${(d.y1 + d.y2) / 2} C${mid} ${\n        (d.y1 + d.y2) / 2\n      } ${mid} ${(d.y3 + d.y4) / 2} ${d.x2} ${(d.y3 + d.y4) / 2}`;\n    })\n    .style(\"stroke-width\", (d) => d.y2 - d.y1)\n    .style(\"stroke\", \"rgb(172,196,220)\")\n    .style(\"opacity\", 0.35) //d => ((d.y2-d.y1) / max_width) ** 0.8 * 0.8)\n    .style(\"fill\", \"none\");\n/*\n  let thick_edge = DAG.selectAll(\".thick-cluster-edge\")\n    .data(cluster_edges.filter((d) => d.y2 - d.y1 >= 100))\n    .enter()\n    .append(\"path\")\n    .attr(\"class\", \"thick-cluster-edge\")\n    .attr(\"d\", (d) => {\n      let mid = (d.x1 + d.x2) / 2;\n      return `M${d.x1} ${d.y1}L${d.x1} ${d.y2} C${mid} ${d.y2} ${mid} ${d.y4} ${d.x2} ${d.y4} L${d.x2} ${d.y3} C${mid} ${d.y3} ${mid} ${d.y1} ${d.x1} ${d.y1} z`;\n    })\n    .style(\"stroke-width\", 0)\n    .style(\"fill\", \"rgb(172,196,220)\")\n    .style(\"opacity\", 0.35);*/\n\n  //console.log('current_layers', self.current_layers)\n  let layers = DAG.selectAll(\".layer\")\n    .data(self.current_layers)\n    .enter()\n    .append(\"g\")\n    .attr(\"class\", \"layer\")\n    .attr(\"transform\", (d) => `translate(${d.x + d.width / 2 - 80},${30})`);\n\n  layers\n    .append(\"text\")\n    .attr(\"fill\", \"#111\")\n    .text((d) => {\n      if (d.layer_id == 1) {\n        return \"Input\";\n      } else if (d.layer_id > self.layers.length) {\n        return \"Prediction\";\n      } else {\n        return `Layer ${d.layer_id - 1}`;\n      }\n    })\n    .style(\"font-size\", \"18px\")\n    .attr(\"text-anchor\", \"middle\");\n}\n\n\nexport function layoutSentenceDAGNodes(state) {\n  let width = state.DAG.width + 60\n  let height = state.DAG.height - 100\n  let unique_layers = [...new Set(state.neuron_clusters.map(d => d.layer_id))]\n  unique_layers.sort((a, b) => a - b)\n  let layerlen = unique_layers.length\n  let layers = unique_layers.map(d => ({\n    layer_id: d,\n    scale: (d.length ? 0.5 : 1.0) / layerlen,\n  }))\n  let edge_width = width / layerlen * (1 - state.config.network.node_scale)\n  let padding = state.config.network.node_padding\n  state.neuron_clusters.forEach(d => { d.width = 0; d.height = 0; })\n  for (let i = 0; i < layers.length; ++i) {\n    layers[i].width = width * layers[i].scale\n    layers[i].x = i == 0 ? 50 : (layers[i - 1].x + layers[i - 1].width)\n    layers[i].clusters = state.neuron_clusters.filter(d => d.layer_id == layers[i].layer_id)\n    let totsize = layers[i].clusters.map(d => d.size).reduce((a, b) => a + b, 0)\n    let h0 = 50\n    let n = layers[i].clusters.length\n    let lh = height - (n - 1) * padding\n    layers[i].clusters.forEach(d => {\n      d.scale = 1.0 / layers[i].clusters.length\n      d.height = Math.min(Math.max(padding * 3.5, lh * d.size / totsize), lh / 2)\n      d.show_cloud = true\n      d.width = layers[i].width - edge_width\n      d.x = layers[i].x\n    })\n    for (let j = 0; j < layers[i].clusters.length; ++j) {\n      layers[i].clusters[j].y = j == 0 ? 50 : (layers[i].clusters[j - 1].y + layers[i].clusters[j - 1].height + padding)\n    }\n    if (layers[i].clusters[n - 1].y + layers[i].clusters[n - 1].height > height) {\n      let totsize = layers[i].clusters.map(d => d.height).reduce((a, b) => a + b, 0)\n      layers[i].clusters.forEach(d => d.height *= lh / totsize)\n      for (let j = 0; j < layers[i].clusters.length; ++j) {\n        layers[i].clusters[j].y = j == 0 ? h0 : (layers[i].clusters[j - 1].y + layers[i].clusters[j - 1].height + padding)\n      }\n    } else if (layers[i].clusters[n - 1].y + layers[i].clusters[n - 1].height < height) {\n      let delta = (height - layers[i].clusters[n - 1].y - layers[i].clusters[n - 1].height) / 2\n      for (let j = 0; j < layers[i].clusters.length; ++j) {\n        layers[i].clusters[j].y += delta\n      }\n    }\n  }\n  state.current_layers = layers\n}\n\nexport async function paintWordcloud(self) {\n  let DAG = d3.select(\"#network-svg\")\n  let all_words = []\n  for (let k = 0; k < self.neuron_clusters.length; ++k) {\n    let d = self.neuron_clusters[k]\n    if (!d.show_cloud) continue\n\n    const text_padding = 0\n    const max_size = d3\n      .scalePow()\n      .exponent(1.5)\n      .domain([40, 150])\n      .range([21, 27])\n    let font_size_range = [16, Math.min(28, max_size(d.height))]\n    let font_value_range = [\n      Math.min(...d.retained_keywords.map((e) => e[1])),\n      Math.max(...d.retained_keywords.map((e) => e[1])),\n    ]\n    if (font_value_range[0] == font_value_range[1]) {\n      font_size_range[0] = font_size_range[1]\n    }\n\n    let keyword_size = stepSizeScale(\n      font_size_range,\n      d.retained_keywords.map((e) => e[1]),\n      4,\n      [1, 3, 5]\n    );\n\n    let keywords = d.retained_keywords.map((e) => ({\n      size: keyword_size(e[1]),\n      text: e[0],\n      type: 1,\n      opacity: 0.9,\n      weight: e[2] == \"self\" ? \"bold\" : \"bold\",\n      fontstyle: e[2] == \"self\" ? \"normal\" : \"italic\",\n      center: e[2] == \"self\",\n    }))\n\n    keywords = keywords.sort((a, b) => {\n      if (a.center != b.center) {\n        return b.center - a.center;\n      } else {\n        return b.size - a.size;\n      }\n    })\n\n    if (d.layer_id == 12) {\n      keywords = keywords.filter((d) => d.text != \"enjoyment\");\n    }\n    const font_color = \"#6D6761\"\n\n    if (d.layer_id == 1) {\n      let words = keywords[0].text.split(\"$\");\n      let font_size = 20\n      all_words.push({\n        id: d.id,\n        \"x\": d.x + d.width / 2,\n        \"y\": d.y + d.height / 2 + text_padding,\n        \"font-size\": `${font_size + 4}px`,\n        \"font-weight\": \"bold\",\n        \"font-style\": \"normal\",\n        \"fill\": font_color,\n        \"opacity\": 0.9,\n        \"text-anchor\": \"middle\",\n        \"font-family\": \"Roboto: sans-serif\",\n        text: words[0],\n      })\n      all_words.push({\n        id: d.id,\n        \"x\": d.x + d.width / 2,\n        \"y\": d.y + d.height / 2 + font_size + text_padding,\n        \"font-size\": `${font_size - 2}px`,\n        \"font-weight\": \"bold\",\n        \"font-style\": \"normal\",\n        \"fill\": font_color,\n        \"text-anchor\": \"middle\",\n        \"font-family\": \"Roboto: sans-serif\",\n        \"opacity\": 0.9,\n        text: words[1],\n      })\n    } else {\n      await wordcloud()\n        .size([d.width, d.height - text_padding])\n        .data(keywords)\n        .fontSize((d) => d.size)\n        .font(\"Roboto\")\n        .padding(6)\n        .flexible(1)\n        .fontWeight((d) => d.weight)\n        .start((words) => {\n          words = words.filter((d) => d.display)\n          all_words = all_words.concat(\n            words.map(e => ({\n              id: d.id,\n              \"x\": d.x + e.x,\n              \"y\": d.y + e.y + text_padding,\n              \"font-size\": `${e.size}px`,\n              \"font-weight\": e.weight,\n              \"font-style\": e.style,\n              \"fill\": font_color,\n              \"font-family\": \"Roboto: sans-serif\",\n              \"text-anchor\": \"start\",\n              \"opacity\": e.opacity,\n              text: e.text,\n            }))\n          )\n        })\n    }\n  }\n\n\n  let timer = null\n  const on_mouseover = function (d) {\n    clearTimeout(timer)\n    timer = setTimeout(() => {\n      let current_ids = all_words\n        .filter(e => e.text == d.text)\n        .map(e => e.id)\n      current_ids = new Set(current_ids)\n\n      DAG.selectAll(\".word\")\n        .filter(e => e.text == d.text)\n        .style(\"fill\", \"#424242\")\n        .style(\"opacity\", 1)\n\n      DAG.selectAll(\".cluster-edge\")\n        .filter(e => current_ids.has(e.source) && current_ids.has(e.target))\n        .style(\"opacity\", .6)\n    }, 250)\n  };\n  const on_mouseout = function (d) {\n    clearTimeout(timer)\n    DAG.selectAll(\".word\")\n      .style(\"fill\", d => d[\"fill\"])\n      .style(\"opacity\", d => d[\"opacity\"])\n    \n    let current_ids = all_words\n      .filter(e => e.text == d.text)\n      .map(e => e.id)\n    current_ids = new Set(current_ids)\n    DAG.selectAll(\".cluster-edge\")\n      .filter(e => current_ids.has(e.source) && current_ids.has(e.target))\n      .style(\"opacity\", .35)\n  };\n\n  DAG.selectAll(\".word\")\n    .data(all_words).enter()\n    .append(\"text\")\n    .attr(\"class\", \"word\")\n    .attr(\"x\", d => d.x)\n    .attr(\"y\", d => d.y)\n    .attr(\"font-size\", d => d[\"font-size\"])\n    .attr(\"font-weight\", d => d[\"font-weight\"])\n    .attr(\"font-style\", d => d[\"font-style\"])\n    .style(\"fill\", d => d[\"fill\"])\n    .style(\"font-family\",  d => d[\"font-family\"])\n    .style(\"text-anchor\", d => d[\"text-anchor\"])\n    .style(\"opacity\", d => d[\"opacity\"])\n    .text(d => d.text)\n    .on(\"mouseover\", on_mouseover)\n    .on(\"mouseout\", on_mouseout)\n    .on(\"click\", async function(d){\n      await self.fetchWordIndex(d.text)\n      let idxs = self.getWordIdxs(d.text)\n      if (idxs.length >= 8) {\n        bus.$emit('add_word_DAG', d.text)\n      }\n    })\n}","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('g',{staticClass:\"word-group\"},[(_vm.hoverItem)?_c('g',{staticClass:\"hover-item-parent\"},[_c('rect',{key:\"new rect\",staticClass:\"word-hover-item\",style:({\n        'fill' : _vm.hoverItem.fill,\n        'opacity' : 0.3,\n        'stroke' : _vm.hoverItem.fill,\n        'stroke-width' : '1px',\n      }),attrs:{\"x\":_vm.hoverItem.x,\"y\":_vm.hoverItem.y - _vm.hoverItem.size + 2,\"height\":_vm.hoverItem.size,\"width\":_vm.hoverItem.width}})]):_vm._e(),_vm._l((_vm.temp_items),function(item,index){return _c('g',{key:(\"tmp\" + index),staticClass:\"hover-item-parent\",style:({\n          'opacity': _vm.hover_word && item.text != _vm.hover_word ? 0.3 : 1\n        })},[_c('text',{staticClass:\"word-hover-item\",style:({\n          'fill': item.fill,\n          'stroke': item.stroke,\n          'stroke-width': item.stroke_width,\n        }),attrs:{\"x\":item.x,\"y\":item.y,\"dx\":item.dx,\"dy\":item.dy,\"font-size\":item.size,\"font-style\":item.style,\"font-weight\":item.weight}},[_vm._v(\" \"+_vm._s(item.text)+\" \")])])}),_c('transition-group',{attrs:{\"mode\":\"out-in\",\"name\":\"word-list\",\"tag\":\"g\"}},[(_vm.interaction == 'filter')?_vm._l((_vm.selected_items),function(item){return _c('rect',{key:((item.key) + \"bg\"),staticClass:\"word-list-item\",style:({\n          'fill' : item.fill,\n          'fill-opacity' : 0.15,\n          'stroke' : item.fill,\n          'stroke-width' : '1px',\n        }),attrs:{\"x\":item.x,\"y\":item.y - item.size + 2,\"height\":item.size,\"width\":item.width}})}):_vm._e(),_vm._l((_vm.items),function(item){return _c('g',{key:item.key,staticClass:\"word-list-item\",on:{\"mouseenter\":function($event){return _vm.onMouseOver(item)},\"mouseout\":function($event){return _vm.onMouseOut(item)},\"click\":function($event){return _vm.onClick(item)},\"contextmenu\":function($event){$event.preventDefault();return _vm.onRightClick(item)}}},[(item.display)?_c('text',{class:{\n          'highlight':  !_vm.highlight || _vm.highlight_text.indexOf(item.text) != -1,\n        },style:({\n          'opacity': _vm.hover_word && item.text != _vm.hover_word ? 0.3 : 1,\n          'fill': item.fill,\n          'stroke': item.stroke,\n          'stroke-width': item.stroke_width,\n        }),attrs:{\"x\":item.x,\"y\":item.y,\"dx\":item.dx,\"dy\":item.dy,\"font-size\":item.size,\"font-style\":item.style,\"font-weight\":item.weight}},[_vm._v(\" \"+_vm._s(item.text)+\" \")]):_vm._e()])}),_vm._l((_vm.glyphed_items),function(item){return _c('g',{key:((item.key) + \"glyph\"),attrs:{\"transform\":(\"translate(\" + (item.x - 5 - (_vm.hover_word && item.text == _vm.hover_word && !item.glyph.show ? 10 : 0)) + \",\" + (item.y - item.size / 2 + 5) + \") rotate(-90)\")}},[_c('g',{style:({\n          'opacity': _vm.hover_word && item.text != _vm.hover_word ? 0.3 : 1\n        })},[_c('path',{attrs:{\"d\":item.glyph.neu,\"fill\":_vm.neutralColor,\"stroke\":\"none\"}}),_c('path',{attrs:{\"d\":item.glyph.pos,\"fill\":_vm.positiveColor,\"stroke\":\"none\"}}),_c('path',{attrs:{\"d\":item.glyph.neg,\"fill\":_vm.negativeColor,\"stroke\":\"none\"}})])])})],2)],2)}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <g class=\"word-group\">\n    <g class=\"hover-item-parent\" v-if=\"hoverItem\">\n      <rect \n        :x=\"hoverItem.x\"\n        :y=\"hoverItem.y - hoverItem.size + 2\"\n        class=\"word-hover-item\"\n        key=\"new rect\"\n        :height=\"hoverItem.size\"\n        :width=\"hoverItem.width\"\n        :style = \"{\n          'fill' : hoverItem.fill,\n          'opacity' : 0.3,\n          'stroke' : hoverItem.fill,\n          'stroke-width' : '1px',\n        }\"\n      >\n      </rect>\n    </g>\n    <g class=\"hover-item-parent\"\n        v-for=\"(item, index) in temp_items\"\n        :key=\"`tmp${index}`\"\n          :style = \"{\n            'opacity': hover_word && item.text != hover_word ? 0.3 : 1\n          }\">\n        <text\n          class=\"word-hover-item\"\n          :x=\"item.x\"\n          :y=\"item.y\"\n          :dx=\"item.dx\"\n          :dy=\"item.dy\"\n          :font-size=\"item.size\"\n          :font-style=\"item.style\"\n          :font-weight=\"item.weight\"\n          :style = \"{\n            'fill': item.fill,\n            'stroke': item.stroke,\n            'stroke-width': item.stroke_width,\n          }\"\n        >\n          {{ item.text }}\n        </text>\n    </g>\n\n    <transition-group mode=\"out-in\"\n      name=\"word-list\" tag=\"g\">\n      <template v-if=\"interaction == 'filter'\">\n        <rect v-for=\"item in selected_items\"\n          :x=\"item.x\"\n          :y=\"item.y - item.size + 2\"\n          class=\"word-list-item\"\n          :key=\"`${item.key}bg`\"\n          :height=\"item.size\"\n          :width=\"item.width\"\n          :style = \"{\n            'fill' : item.fill,\n            'fill-opacity' : 0.15,\n            'stroke' : item.fill,\n            'stroke-width' : '1px',\n          }\">\n        </rect>\n      </template>\n      <g v-for=\"item in items\"\n        class=\"word-list-item\"\n          @mouseenter=\"onMouseOver(item)\"\n          @mouseout=\"onMouseOut(item)\"\n          @click=\"onClick(item)\"\n          @contextmenu.prevent=\"onRightClick(item)\"\n          :key=\"item.key\"\n        >\n        <text\n          v-if=\"item.display\"\n          :x=\"item.x\"\n          :y=\"item.y\"\n          :dx=\"item.dx\"\n          :dy=\"item.dy\"\n          :font-size=\"item.size\"\n          :font-style=\"item.style\"\n          :font-weight=\"item.weight\"\n          :class=\"{\n            'highlight':  !highlight || highlight_text.indexOf(item.text) != -1,\n          }\"\n          :style = \"{\n            'opacity': hover_word && item.text != hover_word ? 0.3 : 1,\n            'fill': item.fill,\n            'stroke': item.stroke,\n            'stroke-width': item.stroke_width,\n          }\"\n        >\n          {{ item.text }}\n        </text>\n      </g>\n      <g v-for=\"item in glyphed_items\"\n        :key=\"`${item.key}glyph`\"\n        :transform=\"`translate(${item.x - 5 - (hover_word && item.text == hover_word && !item.glyph.show ? 10 : 0)},${item.y - item.size / 2 + 5}) rotate(-90)`\">\n          <g :style = \"{\n            'opacity': hover_word && item.text != hover_word ? 0.3 : 1\n          }\">\n            <path :d=\"item.glyph.neu\" :fill=\"neutralColor\" stroke=\"none\"></path>\n            <path :d=\"item.glyph.pos\" :fill=\"positiveColor\" stroke=\"none\"></path>\n            <path :d=\"item.glyph.neg\" :fill=\"negativeColor\" stroke=\"none\"></path>\n          </g>\n      </g>\n    </transition-group>\n  </g>  \n</template>\n\n<script>\nimport { mapGetters, mapMutations, mapActions, mapState } from 'vuex'\nimport bus from '../plugins/bus'\nimport * as d3 from 'd3'\n\nconst sleep = (timeout) => new Promise((resolve) => {\n  setTimeout(resolve, timeout);\n})\n\nconst arc = (x, y, r, start, end) => {\n  let path = d3.path()\n  path.arc(x, y, r, start, end)\n  return `M 0 0 L ${r * Math.cos(start)} ${r * Math.sin(start)} ${path._} L 0 0`\n}\n\nconst isalpha = val => /^[a-zA-Z]+$/.test(val)\nconst islegal = val => isalpha(val) && val.length > 1 && val.indexOf('_') == -1\n\nexport default {\n  data: function() {\n    return {\n      hoverItem: null,\n      hoverEnterTime: 500,\n      glyphHeight: 4,\n      glyphRadius: 7.5,\n    }\n  },\n  computed: {\n    ...mapState([ 'filtered_words', 'hover_word' ]),\n    ...mapGetters(['positiveColor', 'checkWordIndex', 'negativeColor', 'neutralColor','getWordIdxs', 'getSamples' ]),\n    items() {\n      let cnt = {}\n      let ret = this.data.map(d => {\n        cnt[d.text] = (cnt[d.text] || 0) + 1\n        let tot = d.contri && (d.contri.pos + d.contri.neg + d.contri.neu)\n        let arcs = { show: d.glyph || 0 }\n        if (d.contri) {\n          let pos = d.contri.pos / tot * Math.PI * 2\n          let neg = d.contri.neg / tot * Math.PI * 2\n          let neu = d.contri.neu / tot * Math.PI * 2\n          let pos_arc = arc(0, 0, this.glyphRadius, 0, pos)\n          let neg_arc = arc(0, 0, this.glyphRadius, pos, pos + neg)\n          let neu_arc = arc(0, 0, this.glyphRadius, 0, Math.PI * 2)\n          arcs = { show: d.glyph, pos: pos_arc, neg: neg_arc, neu: neu_arc }\n        }\n        return {\n          x: d.x,\n          y: d.y,\n          dx: (d.dx || 0) + (d.glyph ? 5 : 0),\n          dy: d.dy,\n          display: d.display,\n          //contri: d.contri && [d.contri.pos / tot, d.contri.neu / tot, d.contri.neg / tot] || [],\n          glyph: arcs,\n          size: d.size,\n          width: d.width,\n          height: d.height,\n          weight: d.weight,\n          style: d.style || 'normal',\n          text: d.text,\n          key: `${d.text}${d.layer}_${d.id}`,\n          fill: d.fill,\n          stroke: d.stroke,\n          stroke_width: d.stroke_width,\n          // hover: false,\n        }\n      }).filter(d => islegal(d.text))\n      return ret\n    },\n    temp_items() {\n      return this.items.filter(item => !item.display && item.text == this.hover_word)\n    },\n    glyphed_items() {\n      return this.items.filter(item => item.glyph.show || item.text == this.hover_word)\n    },\n    selected_items() {\n      const filter_set = new Set(this.filtered_words)\n      return this.items.filter(d => filter_set.has(d.text))\n    }\n  },\n  props: {\n    data: Array,\n    tooltip: {\n      type: Boolean,\n      default: false,\n    },\n    interaction: {\n      type: String,\n      default: 'DAG',\n    },\n    highlight: {\n      type: Boolean,\n      default: false,\n    },\n    highlight_text: {\n      type: String,\n      default: '',\n    },\n  },\n  methods: {\n    ...mapActions([ 'fetchWordIndex', 'changeFilteredWord' ]),\n    ...mapMutations([ 'showTooltip', 'hideTooltip', 'addHoverTimer', 'removeHoverTimer', 'setHoverWord' ]),\n    async onHoverEvent(d, left, top) {\n      this.hoverItem = d\n      this.setHoverWord(d.text)\n      await this.fetchWordIndex(d.text)\n      if (this.hoverItem != d) return\n      let idxs = this.getWordIdxs(d.text)\n      bus.$emit('highlight_grid', idxs)\n      let text = `<p>${d.text}, ${idxs.length} samples </p>`\n      let resp = await this.getSamples(idxs)\n      if (this.hoverItem != d) return\n      try {\n\t\t\t\ttext = text + resp.slice(0, 8).map((e, index) => `#${e.index}: ${e.text}`).join('</br>')\n\t\t\t\tif (this.tooltip) {\n\t\t\t\t\tthis.showTooltip({ top, left, content: text })\n\t\t\t\t}\n\t\t\t} catch (e) {\n\t\t\t\treturn\n\t\t\t}\n    },\n    async onMouseOver(d) {\n      const left = window.event.pageX\n      const top = window.event.pageY\n      let timer = setTimeout(() => {\n        this.onHoverEvent(d, left, top)\n      }, this.hoverEnterTime)\n      this.addHoverTimer(timer)\n    },\n    async onLeaveEvent(d) {\n      bus.$emit('highlight_grid', null)\n      this.setHoverWord(null)\n      this.hoverItem = null\n      if (this.tooltip) {\n        this.hideTooltip()\n      }\n    },\n    async onMouseOut(d) {\n      this.removeHoverTimer()\n      this.onLeaveEvent(d)\n    },\n    async onRightClick(d) {\n      await this.fetchWordIndex(d.text)\n      let idxs = this.getWordIdxs(d.text)\n      if (idxs.length >= 8) {\n        bus.$emit('add_word_DAG', d.text)\n      }\n    },\n    async onClick(d) {\n      await this.fetchWordIndex(d.text)\n      await this.changeFilteredWord(d.text)\n    },\n  }\n}\n</script>\n<style scoped>\n.word-hover-item {\n  transition: all 1s;\n  opacity: 1;\n}\n.word-list-item {\n  opacity: 1;\n}\n.word-list-item {\n  transition: all 1s;\n}\n.word-list-enter {\n  transition-delay: 1s;\n  opacity: 0;\n}\n.word-list-leave-to {\n  opacity: 0;\n}\n</style>\n","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./wordgroup.vue?vue&type=template&id=29934476&scoped=true&\"\nimport script from \"./wordgroup.vue?vue&type=script&lang=js&\"\nexport * from \"./wordgroup.vue?vue&type=script&lang=js&\"\nimport style0 from \"./wordgroup.vue?vue&type=style&index=0&id=29934476&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"29934476\",\n  null\n  \n)\n\nexport default component.exports","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{ref:\"current_tooltip\",staticClass:\"custom-tooltip\",style:({\n    background: _vm.background,\n    color: _vm.color,\n    'font-size': (_vm.fontsize + \"px\"),\n    width: (_vm.width + \"px\"),\n    visibility: _vm.show ? 'visible' : 'hidden',\n    opacity: _vm.show ? 1 : 0,\n    left: (_vm.fixed_left + \"px\"),\n    top: (_vm.fixed_top + \"px\"),\n    transition: 'all 1s',\n  })})}\nvar staticRenderFns = []\n\nexport { render, staticRenderFns }","<template>\n  <div class=\"custom-tooltip\"\n    :style=\"{\n      background: background,\n      color: color,\n      'font-size': `${fontsize}px`,\n      width: `${width}px`,\n      visibility: show ? 'visible' : 'hidden',\n      opacity: show ? 1 : 0,\n      left: `${fixed_left}px`,\n      top: `${fixed_top}px`,\n      transition: 'all 1s',\n    }\"\n    ref=\"current_tooltip\"\n  >\n  </div>\n</template>\n<script>\nexport default {\n  data(){\n    return {}\n  },\n  computed: {\n    fixed_top() {\n      const rect = document.getElementsByTagName('body')[0].getBoundingClientRect()\n      const height = rect.height\n      return Math.min(height - this.width, this.top)\n    },\n    fixed_left() {\n      const rect = document.getElementsByTagName('body')[0].getBoundingClientRect()\n      const width = rect.width\n      return Math.min(width - this.width, this.left)\n    }\n  },\n  props: {\n    show: {\n      type: Boolean,\n      default: false,\n    },\n    left: {\n      type: Number,\n      default: 0,\n    },\n    top: {\n      type: Number,\n      default: 0,\n    },\n    content: {\n      type: String,\n      default: '',\n    },\n    fontsize: {\n      type: Number,\n      default: 18,\n    },\n    width: {\n      type: Number,\n      default: 250,\n    },\n    background: {\n      type: String,\n      default: 'rgba(250, 250, 250, .9)',\n    },\n    color: {\n      type: String,\n      default: '#222',\n    }\n  },\n  watch: {\n    content(val) {\n      this.$refs.current_tooltip.innerHTML = val\n    }\n  }\n}\n</script>\n<style scoped>\n.custom-tooltip {\n  font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\", Helvetica, Arial, sans-serif, \"Apple   Color Emoji\", \"Segoe UI Emoji\", \"Segoe UI Symbol\";\n  background: rgba(250, 250, 250,.9);\n  border-radius: .1rem;\n  border: 1px solid #111;\n  color: #222;\n  display: block;\n  font-size: 18px;\n  padding: .2rem .4rem;\n  position: absolute;\n  z-index: 300;\n  padding: .4rem .6rem;\n  visibility: hidden;\n}\n</style>","import mod from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../../node_modules/cache-loader/dist/cjs.js??ref--12-0!../../node_modules/thread-loader/dist/cjs.js!../../node_modules/babel-loader/lib/index.js!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./infotooltip.vue?vue&type=template&id=ee1705e8&scoped=true&\"\nimport script from \"./infotooltip.vue?vue&type=script&lang=js&\"\nexport * from \"./infotooltip.vue?vue&type=script&lang=js&\"\nimport style0 from \"./infotooltip.vue?vue&type=style&index=0&id=ee1705e8&scoped=true&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  \"ee1705e8\",\n  null\n  \n)\n\nexport default component.exports","import * as d3 from 'd3'\n\nfunction forceCollide() {\n  let nodes\n  const padding = 4\n\n  function force(alpha) {\n    const quad = d3.quadtree(nodes, d => d.x, d => d.y);\n    for (const d of nodes) {\n      quad.visit((q, x1, y1, x2, y2) => {\n        let updated = false;\n        if (q.data && q.data !== d) {\n          let x = d.x - q.data.x,\n            y = d.y - q.data.y,\n            xSpacing = padding + (q.data.width + d.width) / 2,\n            ySpacing = padding + (q.data.height + d.height) / 2,\n            absX = Math.abs(x),\n            absY = Math.abs(y),\n            l,\n            lx,\n            ly;\n\n          if (absX < xSpacing && absY < ySpacing) {\n            l = Math.sqrt(x * x + y * y);\n\n            lx = (absX - xSpacing) / l;\n            ly = (absY - ySpacing) / l;\n\n            // the one that's barely within the bounds probably triggered the collision\n            if (Math.abs(lx) > Math.abs(ly)) {\n              lx = 0;\n            } else {\n              ly = 0;\n            }\n            d.x -= x *= lx;\n            d.y -= y *= ly;\n            q.data.x += x;\n            q.data.y += y;\n\n            updated = true;\n          }\n        }\n        return updated;\n      });\n    }\n  }\n\n  force.initialize = _ => nodes = _;\n\n  return force;\n}\n\nlet testmode = 0\n\nasync function paintSampleComposition(self) {\n  let positiveColor = self.positiveColor //'rgb(26,150,65)'\n  let neutralColor = self.neutralColor //'rgb(163,163,163)'\n  let negativeColor = self.negativeColor //d3.interpolateRgb('white', 'rgb(215,25,28)')(0.8)\n  if (testmode) {\n    //positiveColor = 'rgb(172, 196, 219)'\n    //negativeColor = 'rgb(172, 196, 221)'\n  }\n  const raw = self.layout\n  const rawPhraseData = raw.phrases\n  const data = raw.lines.map((d, k) => {\n    let ret = {}\n    ret.text = d.text\n    let last_label = 0\n    let last_display = 0\n    for (let i = 0; i < d.line.length; ++i) {\n        let l = d.line[i]\n        // l.display = 1 || i < 3 || l.size >= threshold && (i == 0 || d.line[i - 1].display)\n        //l.size = Math.abs(l.contri)\n        if (l.display) {\n            last_display = i\n        }\n        l.has_shade = !!l.has_shade\n        l.fill_id = d.line.length * k + i\n        if (i + 1 < d.line.length && l.display) {\n            if (i > 0 && d.line[i - 1].show_label || i + 2 == d.line.length) {\n                l.show_label = 0\n            } else if (l.show_label && i - last_label > 5) {\n                d.line[Math.floor((last_label + i) / 2)].show_label = 1\n            }\n        } else {\n            l.show_label = 0\n        }\n        if (l.show_label) {\n            last_label = i\n        }\n    }\n    ret.end_point = last_display\n    if (last_display + 1 < d.line.length) {\n      ret.end_point += 1\n    }\n    last_display += 1\n    if (last_display - last_label > 5) {\n        d.line[Math.floor((last_label + last_display) / 2)].show_label = 1\n    }\n    ret.len = d.len\n    ret.line = d.line\n    return ret\n  })\n\n  for (let i = 0; i < data.length; ++i) {\n    data[i].pos = 0\n    if (data[i].text == '') {\n      data[i].text = data[i - 1].text\n      data[i].pos = data[i - 1].pos + data[i - 1].len\n    }\n    console.log(data[i].text, data[i].line.map(d => d.show_label))\n    console.log(data[i].text, data[i].line.map(d => d.display))\n  }\n\n  const n_rows = data[0].line.length\n  const n_cols = data.length\n  const checkContinuity = (layer, left, right) => {\n    if (layer == -1) return false\n    if (!data[left].line[layer].display) {\n      return false\n    }\n    if (!data[right].line[layer].display) {\n      return false\n    }\n    if (data[right].line[layer].label != data[left].line[layer].label) {\n      return false\n    }\n    return true\n  }\n\n  const getShade = (data) => {\n    let shades = []\n    for (let i = 0; i + 1 < n_rows; ++i) {\n      for (let j = 1, last = 0; j <= n_cols; ++j) {\n        if (j < n_cols && data[j].line[i].label == data[j - 1].line[i].label) {\n          continue\n        } else {\n          let curr = j - 1\n          const trim = (top, bottom, index) => {\n            while (top > bottom && (index == 0 || !data[top].line[index - 1].display)) --top\n            while (top > bottom && (index == 0 || !data[bottom].line[index - 1].display)) ++bottom\n            let display = 0\n            let tk = -1\n            for (let k = bottom; k <= top; ++k) {\n              if (data[k].line[index].display) {\n                display = 1\n                tk = k\n                break\n              }\n            }\n            return [top, bottom, tk]\n          }\n          let top, bottom, tk\n          [top, bottom, tk] = trim(curr, last, i)\n          if (top - bottom >= 1 && tk != -1) {\n            let w1 = widthScale(data[bottom].line[i].contri)\n            let w2 = widthScale(data[top].line[i].contri)\n            let y1 = yScale(data[bottom].line[i].position) - w1 * 0.5 - 8\n            let y2 = yScale(data[top].line[i].position) + w2 * 0.5 + 8\n            //console.log(i, bottom, top)\n            if (true || checkContinuity(i + 1, bottom, top)) {\n              let rt, rb, rk\n              [rt, rb, rk] = trim(curr, last, i + 1)\n              let w3 = widthScale(data[rb].line[i + 1].contri)\n              let w4 = widthScale(data[rt].line[i + 1].contri)\n              let y3 = yScale(data[rb].line[i + 1].position)\n              let y4 = yScale(data[rt].line[i + 1].position)\n\n              if (rb != rt) {\n                y3 = y3 - w3 * 0.5 - 8\n                y4 = y4 + w4 * 0.5 + 8\n              }\n              let contri = data[tk].line[i + 1].contri\n              let last_contri = data[tk].line[i].contri\n              for (let k = bottom; k <= top; ++k) {\n                if (!data[k].line[i].display) {\n                  continue\n                }\n                let t = data[k].line[i + 1].contri\n                if (Math.abs(t) > Math.abs(contri)) {\n                  contri = t\n                }\n                t = data[k].line[i].contri\n                if (Math.abs(t) > Math.abs(last_contri)) {\n                  last_contri = t\n                }\n              }\n\n              let c2 = contriScale(contri)\n              let c1 = contriScale(last_contri)\n              // console.log(i, top, bottom, c1, c2)\n              c1 = getColorName(c1)\n              c2 = getColorName(c2)\n              // console.log(c1, c2)\n              let fill = `url(#pattern-${c1}-to-${c2})`\n              // console.log(i, top, bottom, contriThres, last_contri, contri)\n              shades.push({\n                y1, y2, y3, y4,\n                top: bottom, bottom: top,\n                c1: c1, c2: c2,\n                fill: fill,\n                x: i,\n                y: data[top].line[i].label,\n              })\n            }\n          }\n          last = j\n        }\n      }\n    }\n    return shades\n  }\n\n  const getExtendShade = (shades, data) => {\n    let extend_shades = []\n    let a = 0, b = 0, c = 0\n    for (let k = 0; k + 2 < n_rows; ++k) {\n      while (a < shades.length && shades[a].x < k) ++a\n      while (b < shades.length && shades[b].x < k + 1) ++b\n      while (c < shades.length && shades[c].x < k + 2) ++c\n      let cover_points = new Set()\n      for (let i = a; i < b; ++i) {\n        for (let j = shades[i].top; j <= shades[i].bottom; ++j) {\n          cover_points.add(j)\n        }\n      }\n      if (a < b && b < c) {\n        let i = a, j = b\n        while (i < b && j < c) {\n          if (shades[i].bottom < shades[j].top) { ++i; continue }\n          if (shades[i].top > shades[j].bottom) { ++j; continue }\n\n          if (shades[i].c1 == shades[j].c2 && shades[i].c2 != shades[i].c1) {\n            shades[i].c2 = shades[j].c1 = shades[j].c2\n            shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n            shades[j].fill = `url(#pattern-${shades[j].c1}-to-${shades[j].c2})`\n          } else if (shades[i].c2 != shades[j].c1) {\n            shades[i].c2 = shades[j].c1\n            shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n          }\n          if (shades[i].top > shades[j].top || shades[i].top < shades[j].top) {\n            shades[i].y3 = shades[j].y1\n          }\n          ++i; ++j;\n        }\n        i = b - 1, j = c - 1\n        while (i >= a && j >= b) {\n          if (shades[i].bottom < shades[j].top) { --j; continue }\n          if (shades[i].top > shades[j].bottom) { --i; continue }\n                    /*\n                    if (shades[i].c1 == shades[j].c2 && shades[i].c2 != shades[i].c1) {\n                        shades[i].c2 = shades[j].c1 = shades[j].c2\n                        shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n                        shades[j].fill = `url(#pattern-${shades[j].c1}-to-${shades[j].c2})`\n                    } else*/ if (shades[i].c2 != shades[j].c1) {\n            shades[i].c2 = shades[j].c1\n            shades[i].fill = `url(#pattern-${shades[i].c1}-to-${shades[i].c2})`\n          }\n          if (shades[i].bottom > shades[j].bottom || shades[i].bottom < shades[j].bottom) {\n            shades[i].y4 = shades[j].y2\n          }\n          --i; --j;\n        }\n      }\n      for (let i = b; i < c; ++i) {\n        let flag = 1\n        for (let j = shades[i].top; j <= shades[i].bottom; ++j) {\n          if (cover_points.has(j)) {\n            flag = 0\n            break\n          }\n        }\n        if (flag) {\n          let y1 = shades[i].y1\n          let y2 = shades[i].y2\n          let c2 = shades[i].c1\n          let y0 = yScale((data[shades[i].bottom].line[k].position + data[shades[i].bottom].line[k].position) * 0.5)\n          let last_contri = data[shades[i].top].line[k].contri\n          let c1 = getColorName(contriScale(last_contri))\n          let fill = `url(#pattern-${c1}-to-${c2})`\n          extend_shades.push({\n            y1: y0, y2: y0, y3: y1, y4: y2,\n            top: shades[i].top, bottom: shades[i].bottom,\n            //fill: `lightblue`,\n            fill: fill,\n            x: shades[i].x - 1,\n            y: shades[i].label,\n          })\n        }\n      }\n    }\n    return extend_shades\n  }\n  const canvas = document.createElement(\"canvas\")\n  const ctx = canvas.getContext(\"2d\")\n  const label_size = testmode ? \"32px\" : \"20px\"\n  const label_font = \"Roboto, san-serif\"\n  ctx.font = label_size + ' ' + label_font\n  const measure = (text) => {\n    const ret = ctx.measureText(text)\n    const width = ret.actualBoundingBoxRight + ret.actualBoundingBoxLeft\n    const height = ret.actualBoundingBoxAscent + 1 //ret.actualBoundingBoxDescent\n    return [width, height]\n  }\n\n  const max_text_len = 16\n  const text_len = Math.max(...data.map(d => measure(d.text.slice(0, max_text_len))[0]))\n  const margin = ({ top: 20, right: 10 + text_len, bottom: 20, left: 20 + text_len })\n  const width = self.DAG.width - margin.left - margin.right\n  const height = self.DAG.height - margin.top - margin.bottom\n\n  data.forEach((d, index) => {\n    for (let i = 1; i < d.line.length; ++i) {\n      if (testmode) {\n        d.line[i].display = 1\n        if (index <= 6) {\n          d.line[i].position += 0.06\n          d.line[i].position = Math.min(d.line[i].position, d.line[i - 1].position)\n        }\n        if (index == 1 && i == 3) d.line[i].position -= 0.02\n        if (index == 1 && i == 4) d.line[i].position += 0.06\n        if (index == 3 && i == 2) d.line[i].position -= 0.02\n        if (index == 3 && i >= 3) d.line[i].position = d.line[i - 1].position\n        if (index == 9 && i >= 3) d.line[i].position = d.line[10].position\n        //if (index == 1 && i == 3) d.line[i].position = data[index + 1].line[i].position + 0.03\n        if (index > 6 && i >= 6) d.line[i].label += 1\n        if ((d.text == 'the' || d.text == 'a') && i > 8) {\n          d.line[i].display = 0\n          d.end_point = 9\n        }\n        if ((d.text == \"was\") && i > 9) {\n          d.line[i].display = 0\n          d.end_point = 10\n        }\n        if ((d.text == \"'\") && i > 7) {\n          d.line[i].display = 0\n          d.end_point = 8\n        }\n        if (d.text == 'the' && i == 4) d.line[i].position -= 0.12\n        if (d.text == 'the' && i >= 4 && i <= 9) d.line[i].label += 1\n        if (d.text == 'good' && i < 6)\n          d.line[i].contri = -Math.abs(d.line[i].contri)\n        else d.line[i].contri = Math.abs(d.line[i].contri)\n        if (d.text == 'good' && i == 6) {\n          d.line[i].contri = Math.abs(d.line[i + 1].contri)\n        }\n        if (d.text == 'good') d.line[i].contri *= 1.2\n        if (d.text == 'n') d.line[i].contri = Math.abs(data[8].line[i].contri) * 1.2\n        if (d.text == 'a' && i <= 5) {\n          d.line[i].label = -1\n        }\n      }\n      if (d.text == 'laughs') d.line[i].contri *= 0.8\n      if (d.text == 'been' &&  d.line.length == 4) d.line[i].contri = Math.abs(d.line[i].contri)\n      //d.line[i].contri = d.line[i].contri * 0.7 + d.line[i - 1].contri * 0.3\n    }\n    console.log(d.text, d.line.map(e => e.position))\n  })\n\n  const xScale = d3.scalePoint()\n    .domain(data[0].line.map(d => d.layer))\n    .rangeRound([0, width])\n\n  const yScale = d3.scaleLinear()\n    .domain([1, 0])  // Input\n    .range([10, height]) // Output\n\n  const getColorName = (x) => {\n    if (x == positiveColor) {\n      return 'pos'\n    } else if (x == negativeColor) {\n      return 'neg'\n    } else if (x == neutralColor) {\n      return 'neu'\n    } else {\n      return 'unknown'\n    }\n  }\n\n  const addGradientColor = (defs) => {\n    let colors = [\n      [positiveColor, getColorName(positiveColor)],\n      [negativeColor, getColorName(negativeColor)],\n      ['#BBDEFB', 'neu'],\n    ]\n\n    let colors2 = [\n      [positiveColor, getColorName(positiveColor)],\n      [negativeColor, getColorName(negativeColor)],\n      ['gray', 'neu'],\n    ]\n    for (let c1 of colors) {\n      for (let c2 of colors) {\n        let gradient = defs.append('linearGradient')\n          .attr('id', `pattern-${c1[1]}-to-${c2[1]}`)\n          .attr('x1', '0%')\n          .attr('y1', '0%')\n          .attr('x2', '100%')\n          .attr('y2', '0%')\n\n        gradient.append('stop')\n          .attr('offset', '0%')\n          .attr('stop-color', d3.interpolateRgb('white', c1[0])(0.2))\n\n        gradient.append('stop')\n          .attr('offset', '100%')\n          .attr('stop-color', d3.interpolateRgb('white', c2[0])(0.2))\n      }\n    }\n    for (let c1 of colors2) {\n      for (let c2 of colors2) {\n        for (let c3 of colors2) {\n          let gradient = defs.append('linearGradient')\n            .attr('id', `pattern-${c1[1]}-to-${c2[1]}-to-${c3[1]}-origin`)\n            .attr('x1', '0%')\n            .attr('y1', '0%')\n            .attr('x2', '100%')\n            .attr('y2', '0%')\n\n          gradient.append('stop')\n            .attr('offset', '0%')\n            .attr('stop-color', d3.interpolateRgb('white', c1[0])(1))\n\n          gradient.append('stop')\n            .attr('offset', '50%')\n            .attr('stop-color', d3.interpolateRgb('white', c2[0])(1))\n\n          gradient.append('stop')\n            .attr('offset', '100%')\n            .attr('stop-color', d3.interpolateRgb('white', c3[0])(1))\n        }\n      }\n    }\n  }\n\n  const contriValues = [].concat(...raw.lines.map(d => d.line.map(e => Math.abs(e.contri)))).sort((a, b) => a - b)\n  const contriThres = contriValues[~~(0.6 * contriValues.length)]\n  const contriMax = contriValues[contriValues.length - 1]\n\n  data.forEach(d => {\n    for (let i = 1; i < d.line.length - 1; ++i) {\n      let t1 = d.line[i - 1].contri\n      let t2 = d.line[i + 1].contri\n      if (Math.abs(t1) < contriThres && Math.abs(t2) < contriThres && t1 * t2 > 0) {\n        d.line[i].contri = (t1 + t2) * 0.5\n      }\n    }\n  })\n\n  const contriValues2 = [].concat(...raw.lines.map(d => d.line.filter(e => e.display).map(e => Math.abs(e.contri)))).sort((a, b) => a - b)\n  const contriThres2 = contriValues2[~~(0.66 * contriValues2.length)]\n\n  const widthScale = (() => {\n    let left = contriThres2\n    let right = contriMax\n    let scale1 = d3.scaleLinear().range([0.8, 1.0, 12]).domain([0, left, right])\n    if (testmode) {\n      scale1 = d3.scaleLinear().range([1.2, 1.5, 12]).domain([0, left, right])\n    }\n    return function (x) {\n      x = Math.abs(x)\n      // if (x < left) return 1\n      // x = Math.min(9, scale1(x))\n      return scale1(x)\n    }\n  })()\n\n  const contriScale = (() => {\n    let thres = contriThres\n    let left = -thres\n    let right = thres\n    return function (x) {\n      if (x <= left) {\n        return positiveColor\n      } else if (x >= right) {\n        return negativeColor\n      } else {\n        return neutralColor\n      }\n    }\n  })()\n\n  const lineGenerator = (x1, x2, y1, y2, y3, y4, flag = 0) => {\n    let m1 = x1 + (x2 - x1) * 0.5//r1\n    let m2 = x1 + (x2 - x1) * 0.5//r2\n    let x3 = x1 + (x2 - x1) * 0.15\n    let x4 = x1 + (x2 - x1) * 0.85\n    if (flag || Math.abs(y4 - y2) < 40) {\n      x3 = x1\n      x4 = x2\n      m1 = x1 + (x2 - x1) * 0.5\n      m2 = x1 + (x2 - x1) * 0.5\n    }\n    return `M${x1} ${y1}L${x1} ${y2} L${x3} ${y2} C${m1} ${y2} ${m2} ${y4} ${x4} ${y4} L${x2} ${y4} L${x2} ${y3} L${x4} ${y3} C${m2} ${y3} ${m1} ${y1} ${x3} ${y1} z`\n  }\n\n  const baselineGenerator = (x1, x2, y1, y2, y3, y4, r1 = 0.4, r2 = 0.6) => {\n    let m1 = x1 + (x2 - x1) * r1\n    let m2 = x1 + (x2 - x1) * r2\n    y1 = y2 + 8\n    y2 = y4 + 8\n    if (Math.abs(y1 - y2) < 12) {\n      let m = (y1 + y2) / 2\n      y1 = y2 = m\n    }\n    return `M${x1 - 50} ${y1} L ${x1} ${y1}C${m1} ${y1} ${m2} ${y2} ${x2} ${y2} L ${x2 + 50} ${y2}`\n  }\n\n  async function LineChart() {\n    const svg = d3.select(\"#network-svg\")\n    //.attr(\"width\", width)\n    //.attr(\"height\", height)\n\n    svg.selectAll(\"*\").remove()\n    const defs = svg.append('defs')\n    const isalpha = val => /^[a-zA-Z]+$/.test(val)\n\n    // Standard Margin Convention\n    const background = svg.append(\"g\")\n      .attr('transform', `translate(${margin.left}, ${margin.top})`)\n      .attr('class', 'background')\n\n    // Call the x axis in a group tag\n    const axis = background.append(\"g\")\n      .attr(\"class\", \"x axis\")\n      .attr(\"transform\", \"translate(0,\" + (height - 10) + \")\")\n      .call(d3.axisBottom(xScale).tickFormat(d => d == 0 ? 'Input' : d))\n\n    axis.select('.domain').remove()\n    axis.selectAll('text')\n      .attr('font-size', '16px')\n      //.style('font-weight', 600)\n      .style(\"font-family\", \"Arial, san-serif\")\n\n    axis.selectAll('line')\n      .style('stroke', 'gray')\n      .style('stroke-width', '2px')\n\n    let shades = getShade(data)\n    let extend_shades = getExtendShade(shades, data)\n\n    for (let i = 1; i < shades.length; ++i) {\n      if (shades[i].x == shades[i - 1].x) {\n        if (shades[i].y3 < shades[i - 1].y4) {\n          let y = (shades[i].y3 + shades[i - 1].y4) * 0.5\n          shades[i].y3 = y\n          shades[i - 1].y4 = y\n        }\n        if (shades[i].y1 < shades[i - 1].y2) {\n          let y = (shades[i].y1 + shades[i - 1].y2) * 0.5\n          shades[i].y1 = y\n          shades[i - 1].y2 = y\n        }\n      }\n    }\n    shades = shades.concat(extend_shades)\n    shades.forEach(d => {\n      d.path = lineGenerator(xScale(d.x), xScale(d.x + 1), d.y1, d.y2, d.y3, d.y4)\n    })\n\n    const shadeGroup = background\n      .append('g')\n      .attr('class', 'shade-group')\n\n    const grayShadeElements = shadeGroup.selectAll('.gray-shade')\n      .data(shades.filter(d => d.fill.indexOf('neg') == -1 && d.fill.indexOf('pos') == -1))\n      .enter()\n      .append('g')\n      .attr('class', 'gray-shade')\n\n    grayShadeElements\n      .append('path')\n      .attr('d', d => d.path)\n      .style('stroke', 'none')\n      .style('fill', d => d.fill)\n\n    const coloredShadeElements = shadeGroup.selectAll('.colored-shade')\n      .data(shades.filter(d => d.fill.indexOf('neg') != -1 || d.fill.indexOf('pos') != -1))\n      .enter()\n      .append('g')\n      .attr('class', 'colored-shade')\n\n    coloredShadeElements\n      .append('path')\n      .attr('d', d => d.path)\n      .style('stroke', 'none')\n      .style('fill', d => d.fill)\n\n    const lineGroup = background\n      .append('g')\n      .attr('class', 'line-group')\n\n    const lineElement = lineGroup.selectAll(\".line\")\n      .data(data).enter()\n      .append(\"g\")\n      .attr(\"class\", \"line\")\n\n    const glyphGroup = background\n      .append('g')\n      .attr('class', 'glyph-group')\n\n    const labelGroup = background\n      .append('g')\n      .attr('class', 'label-group')\n    /*\n            labelGroup.append(\"text\")\n                .attr(\"x\", -50)\n                .attr(\"y\", -8)\n                .style(\"font-size\", \"13px\")\n                .style(\"font-family\", \"Roboto, san-serif\")\n                .text('word in sentence')\n    */\n\n    let labels = []\n    for (let d of data) {\n      labels.push({\n        anchor: 'end',\n        baseline: null,\n        x0: 0,\n        y0: yScale(d.line[0].position) + 5,\n        fill: 'rgb(27, 30, 35)',\n        s1: d.text.slice(0, d.pos),\n        s2: d.text.slice(d.pos, d.pos + d.len),\n        s3: d.text.slice(d.pos + d.len),\n      })\n    }\n\n    const signSet = new Set(['.', '', ','])\n\n    let phraseData = rawPhraseData\n      .filter(d => d.type == 'phrase' && d.layer < n_rows)\n      .filter(d => {\n        let x = (xScale(d.layer - 1) * 3 + xScale(d.layer)) / 4\n        let k = 0\n        for (let i = d.top; i < d.bottom; ++i) {\n          if (data[i].line[d.layer - 1].label != data[i + 1].line[d.layer - 1].label) {\n            k = i\n            break\n          }\n        }\n        return (d.top != 0 && data[k].line[d.layer].display && data[k + 1].line[d.layer].display)\n      })\n      .filter(d => {\n        return !signSet.has(data[d.top].text) && !signSet.has(data[d.bottom].text)\n      })\n\n    let relationData = rawPhraseData\n      .filter(d => d.type == 'relation')\n      .filter(d => d.layer < n_rows)\n      .filter(d => data[d.top].line[d.layer - 1].display && data[d.bottom].line[d.layer].display)\n\n    //if (testmode) relationData = []\n    //console.log('relationData', relationData)\n    relationData.forEach(d => d.removed = false)\n    relationData.forEach(d => {\n      if (data[d.top].text == 'laudable') d.layer -= 1\n    })\n\n    if (n_rows == 12) {\n      for (let i = 0; i < relationData.length; ++i) if (!relationData[i].removed) {\n        let t1 = relationData[i].top\n        let b1 = relationData[i].bottom\n        for (let j = i + 1; j < relationData.length; ++j) {\n          let t2 = relationData[j].top\n          let b2 = relationData[j].bottom\n          if ((t1 == t2 && b1 == b2 || t1 == b2 && b1 == t2) && (Math.abs(relationData[i].layer - relationData[j].layer) <= 2)) {\n            relationData[j].removed = true\n          }\n        }\n      }\n    }\n    relationData = relationData\n      .filter(d => !d.removed)\n      .slice(0, n_cols * 0.7)\n\n    let changeData = relationData\n      .map(d => ({\n        x: d.layer,\n        y: d.bottom,\n        left: data[d.bottom].line[d.layer - 1].contri,\n        right: data[d.bottom].line[d.layer].contri,\n      }))\n      .filter(d => d.x < n_rows - 2)\n\n    changeData = changeData.map(d => ({\n      x: (xScale(d.x) + xScale(d.x - 1)) / 2,\n      y: (yScale(data[d.y].line[d.x].position) + yScale(data[d.y].line[d.x - 1].position)) / 2,\n      row: d.y,\n      col: d.x,\n      delta: Math.abs(d.left - d.right) * (d.left * d.right < 0 ? 2 : 1),\n      left: d.left,\n      right: d.right,\n      removed: false,\n    }))\n\n    changeData = changeData\n      .filter(d => contriScale(d.left) != contriScale(d.right))\n      .sort((a, b) => b.delta - a.delta)\n      .slice(0, 5)\n\n    for (let i = 0; i < changeData.length; ++i) if (!changeData[i].removed) {\n      for (let j = i + 1; j < changeData.length; ++j) {\n        if (Math.abs(changeData[i].row - changeData[j].row) + Math.abs(changeData[i].col - changeData[j].col) <= 1) {\n          changeData[j].removed = true\n        }\n      }\n    }\n\n    changeData = changeData.filter(d => !d.removed)\n\n    changeData.forEach(d => {\n      data[d.row].line[d.col - 1].has_rseg = 1\n    })\n\n    const phraseElement = glyphGroup.selectAll(\".phrase\")\n      .data(phraseData)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"phrase\")\n      .style(\"display\", \"none\")\n\n    phraseElement.append('path')\n      .attr('d', d => {\n        let x = (xScale(d.layer - 1) * 3 + xScale(d.layer)) / 4\n        let k = 0\n        for (let i = d.top; i < d.bottom; ++i) {\n          if (data[i].line[d.layer - 1].label != data[i + 1].line[d.layer - 1].label) {\n            k = i\n            break\n          }\n        }\n        if (!data[d.top].line[d.layer - 1].display || !data[k + 1].line[d.layer - 1].display) return ''\n        data[k].line[d.layer - 1].has_rseg = 1\n        data[k + 1].line[d.layer - 1].has_rseg = 1\n        let y = yScale((data[k].line[d.layer - 1].position + data[k + 1].line[d.layer - 1].position) / 2)\n        let y1 = yScale(data[k].line[d.layer - 1].position)\n        let y2 = yScale(data[k + 1].line[d.layer - 1].position)\n        return `M${x - 20} ${y1} Q${x - 10} ${y - 2} ${x} ${y - 2} M${x - 20} ${y2} Q${x - 10} ${y + 2} ${x} ${y + 2}`\n      })\n      .style('fill', 'none')\n      .style('stroke', 'rgb(27, 30, 35)')\n      .style('opacity', .6)\n      .style('stroke-width', '2px')\n\n    phraseElement.append('path')\n      .attr('transform', d => {\n        let x = (xScale(d.layer - 1) * 3 + xScale(d.layer)) / 4\n        let k = 0\n        for (let i = d.top; i < d.bottom; ++i) {\n          if (data[i].line[d.layer - 1].label != data[i + 1].line[d.layer - 1].label) {\n            k = i\n            break\n          }\n        }\n        if (!data[d.top].line[d.layer - 1].display || !data[k + 1].line[d.layer - 1].display) return ''\n        let y = yScale((data[k].line[d.layer - 1].position + data[k + 1].line[d.layer - 1].position) / 2)\n        return `translate(${x + 3},${y})`\n      })\n      .attr('d', d => `M${1 * 6} ${0} L${-0.5 * 6} ${0.866 * 6} L${-0.5 * 6} ${-0.866 * 6} Z`)\n      .style('fill', 'rgb(27, 30, 35)')\n      .style('stroke', 'none')\n      .style('opacity', .6)\n      .style('stroke-width', '2px')\n\n    const relationElement = shadeGroup.selectAll(\".relation\")\n      .data(relationData)\n      .enter()\n      .append(\"g\")\n      .attr(\"class\", \"relation\")\n\n    relationElement\n      .append(\"path\")\n      .attr(\"d\", d => {\n        let y1 = yScale(d.y1)\n        let y2 = yScale(d.y2)\n        if (testmode) {\n          if (d.top == 2) d.top = 6\n          if (d.top == 3) d.top = 4\n          if (d.top == 6 && d.bottom == 9) d.layer -= 2\n          y1 = yScale(data[d.top].line[d.layer - 1].position)\n          y2 = yScale(data[d.bottom].line[d.layer].position)\n        }\n        let x0 = xScale(d.layer - 2)\n        let x1 = xScale(d.layer - 1)\n        let x2 = xScale(d.layer)\n        let c1 = data[d.top].line[d.layer - 1].contri\n        let c2 = data[d.top].line[d.layer].contri\n        let c3 = data[d.bottom].line[d.layer - 1].contri\n        let c4 = data[d.bottom].line[d.layer].contri\n        let w1 = (widthScale(c1) + widthScale(c2)) / 4 - 0.5\n        let w2 = (widthScale(c3) + widthScale(c4)) / 4 - 0.5\n        let minw = Math.min(w1, w2)\n        let x3 = (x0 + x1) / 2\n        let x4 = (x1 + x2) / 2\n        if (Math.abs(yScale(data[d.top].line[d.layer - 1].position) - yScale(data[d.top].line[d.layer - 2].position)) > 12) {\n          x3 = x1\n          y1 = yScale(data[d.top].line[d.layer - 1].position)\n        }\n        if (Math.abs(yScale(data[d.bottom].line[d.layer - 1].position) - yScale(data[d.bottom].line[d.layer].position)) > 12) {\n          x4 = x2\n          y2 = yScale(data[d.bottom].line[d.layer].position)\n        }\n        w1 = Math.min(w1, minw * 3)\n        w2 = Math.min(w2, minw * 3)\n        let path = lineGenerator(x3, x4, y1 - w1, y1 + w1, y2 - w2, y2 + w2, 1)\n        // console.log('relation', d.top, d.bottom, data[d.top].line[d.layer].label, data[d.bottom].line[d.layer].label)\n        return path\n      })\n      .style(\"stroke-width\", testmode ? 2 : .5)\n      // .style(\"stroke-dasharray\", \"8,8\")\n      .style(\"stroke\", d => {\n        let c1 = data[d.top].line[d.layer - 2].contri\n        let c2 = data[d.top].line[d.layer - 1].contri\n        let c3 = data[d.bottom].line[d.layer].contri\n        c1 = getColorName(contriScale(c1))\n        c2 = getColorName(contriScale(c2))\n        c3 = getColorName(contriScale(c3))\n        let fill = `url(#pattern-${c1}-to-${c2}-to-${c3}-origin)`\n        return fill\n      })\n      .style(\"fill\", d => {\n        let c1 = data[d.top].line[d.layer - 2].contri\n        let c2 = data[d.top].line[d.layer - 1].contri\n        let c3 = data[d.bottom].line[d.layer].contri\n        c1 = getColorName(contriScale(c1))\n        c2 = getColorName(contriScale(c2))\n        c3 = getColorName(contriScale(c3))\n        let fill = `url(#pattern-${c1}-to-${c2}-to-${c3}-origin)`\n        return fill\n      })\n\n    let changeElement = glyphGroup.selectAll('.represent')\n      .data(changeData).enter()\n      .append('g')\n      .attr('class', 'represent')\n      .attr('transform', d => `translate(${d.x},${d.y})`)\n\n    if (testmode) {\n      changeElement.append('rect')\n        .attr('x', -12)\n        .attr('y', d => -6.5)\n        .attr('width', 24)\n        .attr('height', d => 13)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('stroke', d => contriScale(d.right))\n        .style('stroke-width', 1)\n        .style('fill', d => contriScale(d.right))\n\n      changeElement.append('rect')\n        .attr('x', -12)\n        .attr('y', d => -6.5)\n        .attr('width', 12)\n        .attr('height', d => 13)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('fill', d => contriScale(d.left))\n\n    } else {\n      changeElement.append('rect')\n        .attr('x', -9)\n        .attr('y', d => -5)\n        .attr('width', 18)\n        .attr('height', d => 10)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('stroke', d => contriScale(d.right))\n        .style('stroke-width', 1)\n        .style('fill', d => contriScale(d.right))\n\n      changeElement.append('rect')\n        .attr('x', -9)\n        .attr('y', d => -5)\n        .attr('width', 9)\n        .attr('height', d => 10)\n        .attr('rx', 2)\n        .attr('ry', 2)\n        .style('fill', d => contriScale(d.left))\n\n    }\n    addGradientColor(defs)\n\n    let segments = []\n    data.forEach(function (d, index) {\n      for (let i = 0; i + 1 < d.line.length; ++i) {\n        d.line[i].has_shade = false\n        let w1 = widthScale(d.line[i].contri)\n        let w2 = widthScale(d.line[i + 1].contri)\n        if (!d.line[i].display) {\n          break\n        } else if (!d.line[i + 1].display) {\n          w2 = 0.5\n        }\n        let x1, x2, y1, y2, y3, y4\n\n        x1 = xScale(d.line[i].layer)\n        x2 = xScale(d.line[i + 1].layer)\n        y1 = yScale(d.line[i].position) - w1 * 0.5\n        y3 = yScale(d.line[i + 1].position) - w2 * 0.5\n\n        let linearGradient = defs.append('linearGradient')\n          .attr('id', `pattern-${d.line[i].fill_id}`)\n          .attr('x1', '0%')\n          .attr('y1', '0%')\n          .attr('x2', '100%')\n          .attr('y2', '0%')\n\n        linearGradient.append('stop')\n          .attr('offset', '0%')\n          .attr('stop-color', contriScale(d.line[i].contri))\n\n        linearGradient.append('stop')\n          .attr('offset', '100%')\n          .attr('stop-color', contriScale(d.line[i + 1].contri))\n\n        if (d.line[i].show_label && isalpha(d.text)) {\n          let tw = measure(d.text)[0]\n          let t = Math.min(y1, y3)\n          let b = Math.max(y1 + w1, y3 + w2)\n          let x3 = Math.max(x1, (x1 + x2) / 2 - tw * (testmode ? (d.text == 'the' ? 0.15 : 0.45) : 0.48))// - delta)\n          let x4 = Math.min(x2, (x1 + x2) / 2 + tw * (testmode ? (d.text == 'the' ? 0.15 : 0.45) : 0.48))// + delta)\n          defs.append('clipPath')\n            .attr('id', `clipping-${d.line[i].fill_id}`)\n            .append('path')\n            .attr('d', `M${x1} ${t} L${x1} ${b} L${x3} ${b} L${x3} ${t} M${x4} ${t} L${x4} ${b} L${x2} ${b} L${x2} ${t}`)\n\n          /*\n          svg.append('defs')\n            .append('path')\n            .attr('id', `labelbaseline-${d.line[i].fill_id}`)\n            .attr('d', path)\n            */\n        }\n\n        segments.push({\n          d: lineGenerator(x1, x2, y1, y1 + w1, y3, y3 + w2),\n          opacity: 1,\n          fill_id: d.line[i].fill_id,\n          center: { x: (x1 + x2) / 2, y: (y1 + y3) / 2 },\n          baseline: d.line[i].show_label && isalpha(d.text) ? [x1, x2, y1, y1 + w1, y3, y3 + w2] : null,\n          label: d.line[i].show_label && !d.line[i].has_rseg ? { text: d.text, pos: d.pos, len: d.len } : null,\n          x: i,\n          y: index,\n        })\n      }\n    })\n\n    const segElement = lineGroup\n      .selectAll('.segment')\n      .data(segments).enter()\n      .append('g')\n      .attr('class', 'segment')\n\n    const segLine = segElement\n      .append('path')\n      .attr('d', d => d.d)\n      .style('clip-path', d => d.label ? `url(#clipping-${d.fill_id})` : 'none')\n      .style('fill', d => `url(#pattern-${d.fill_id})`)\n      .style('stroke', 'none')\n      .style('opacity', d => d.opacity)\n\n    for (let d of segments) {\n      if (d.baseline == null || d.label == null) continue\n      labels.push({\n        anchor: 'middle',\n        x0: d.center.x,\n        y0: d.center.y,\n        fill: 'rgb(27, 30, 35)',\n        baseline: d.baseline,\n        s1: d.label.text.slice(0, d.label.pos),\n        s2: d.label.text.slice(d.label.pos, d.label.pos + d.label.len),\n        s3: d.label.text.slice(d.label.pos + d.label.len),\n      })\n    }\n\n    for (let d of data) {\n      labels.push({\n        anchor: 'start',\n        is_end: d.end_point == d.line.length - 1 ? 1 : 0,\n        contri: Math.abs(d.line[d.end_point].contri),\n        x0: xScale(d.end_point) + 8,\n        y0: yScale(d.line[d.end_point].position) + 3,\n        baseline: null,\n        fill: d.end_point + 1 < d.line.length ? contriScale(d.line[d.end_point].contri) : 'rgb(27, 30, 35)',\n        s1: d.text.slice(0, d.pos),\n        s2: d.text.slice(d.pos, d.pos + d.len),\n        s3: d.text.slice(d.pos + d.len),\n      })\n    }\n    const endLabelGroup = labelGroup\n      .selectAll('.end-label')\n      .data(data).enter()\n      .append('g')\n      .attr('class', 'end-label')\n\n    const endGlyph = endLabelGroup.filter(d => !d.line[n_rows - 1].display)\n\n    endGlyph\n      .append('circle')\n      .attr('cx', d => xScale(d.end_point))\n      .attr('cy', d => yScale(d.line[d.end_point].position))\n      .attr('r', 3)\n      .style('fill', d => contriScale(d.line[d.end_point].contri))//'#ccc')\n      .style('stroke', d => contriScale(d.line[d.end_point].contri))\n      .style('stroke-width', 1.5)\n\n    labels.forEach(d => {\n      d.all_pieces = [[d.s1, 0.4], [d.s2, 1], [d.s3, 0.4]].filter(e => e[0].length > 0)\n      d.pieces = []\n      let shortcut = ''\n      for (let e of d.all_pieces) {\n        if (e[0].length + shortcut.length > max_text_len) {\n          const curr = e[0].slice(0, max_text_len - shortcut.length) + '...'\n          d.pieces.push([curr, e[1]])\n          shortcut += curr\n          break\n        } else {\n          d.pieces.push(e)\n          shortcut += e[0]\n        }\n      }\n      const m = measure(shortcut)\n      d.width = m[0]\n      d.height = m[1] * 0.7\n      if (d.anchor == 'end') {\n        d.x0 -= d.width\n        d.anchor = 'start'\n      } else if (d.anchor == 'middle') {\n        d.x0 -= d.width * 0.5\n        d.y0 += d.height// * 0.5\n      }\n      d.x = d.x0\n      d.y = d.y0\n    })\n\n\n    let endLabels = labels\n      .filter(d => d.is_end)\n      .sort((a, b) => b.contri - a.contri)\n      .slice(0, 10)\n    labels = labels.filter(d => !d.is_end)\n    labels = labels.concat(endLabels)\n    const simulation = d3.forceSimulation(labels)\n      .force(\"x\", d3.forceX(0).strength(0.0))\n      .force(\"y\", d3.forceY(0).strength(0.0))\n      .force(\"collide\", forceCollide())\n\n    for (let i = 0; i < 50; ++i) {\n      await simulation.tick()\n    }\n\n    // paint labels with\n    const allLabel = background.selectAll('.label')\n      .data(labels).enter()\n      .append('text')\n      .attr('class', 'label')\n      .attr('fill', d => d.fill)\n      .attr('text-anchor', d => d.anchor)\n      .style('font-size', label_size)\n      .style('font-family', label_font)\n\n    let labelWithPath = allLabel.filter(d => d.baseline)\n    let labelNoPath = allLabel.filter(d => !d.baseline)\n\n    labelWithPath\n      .append('defs').append('path')\n      .attr('id', (d, i) => `labelbaseline-${i}`)\n      .attr('d', d => {\n        let dx = d.x - d.x0\n        let dy = d.y - d.y0\n        let v = d.baseline\n        return baselineGenerator(v[0] + dx, v[1] + dx, v[2] + dy, v[3] + dy, v[4] + dy, v[5] + dy)\n      })\n\n    let labelText = labelWithPath\n      .append('textPath')\n      .attr('href', (d, i) => `#labelbaseline-${i}`)\n      .attr('startOffset', '50%')\n\n    labelText.selectAll(\"tspan\")\n      .data(d => d.pieces).enter()\n      .append(\"tspan\")\n      .style(\"opacity\", d => d[1])\n      .text(d => d[0])\n\n    let labelText2 = labelNoPath\n      .attr('x', d => d.x)\n      .attr('y', d => d.y)\n\n    labelText2.selectAll(\"tspan\")\n      .data(d => d.pieces).enter()\n      .append(\"tspan\")\n      .style(\"opacity\", d => d[1])\n      .text(d => d[0])\n\n    d3.select(\"body\").selectAll(\".svg-tooltip\").remove()\n\n    const tooltip = d3.select(\"body\").append(\"div\")\n      .attr(\"class\", \"svg-tooltip\")\n        .style(\"position\", \"absolute\")\n        .style(\"visibility\", \"hidden\")\n\n    const update_tooltip = (d) => {\n      tooltip.selectAll(\"span\")\n        .data(d.all_pieces).enter()\n        .append(\"span\")\n        .text(e => e[0])\n\n      tooltip.selectAll(\"span\")\n        .data(d.all_pieces)\n        .style(\"opacity\", e => e[1])\n        .text(e => e[0] + ' ')\n\n      tooltip.selectAll(\"span\")\n        .data(d.all_pieces)\n        .exit().remove()\n\n    }\n\n    labelWithPath\n      .on(\"mouseover\", function(d){\n        update_tooltip(d)\n        return tooltip.style(\"visibility\", \"visible\");\n      })\n      .on(\"mousemove\", function(){\n        return tooltip.style(\"top\", (d3.event.pageY-10)+\"px\").style(\"left\",(d3.event.pageX+10)+\"px\");\n      })\n      .on(\"mouseout\", function(){\n        return tooltip.style(\"visibility\", \"hidden\");\n      })\n\n    labelNoPath\n      .on(\"mouseover\", function(d){\n        update_tooltip(d)\n        return tooltip.style(\"visibility\", \"visible\");\n      })\n      .on(\"mousemove\", function(){\n        return tooltip.style(\"top\", (d3.event.pageY-10)+\"px\").style(\"left\",(d3.event.pageX+10)+\"px\");\n      })\n      .on(\"mouseout\", function(){\n        return tooltip.style(\"visibility\", \"hidden\");\n      })\n  }\n\n  LineChart()\n}\n\nexport default paintSampleComposition\n","<template>\n  <v-app style=\"position: relative\" ref=\"mainview\">\n    <info-tooltip\n      :left=\"tooltip.left\"\n      :top=\"tooltip.top\"\n      :show=\"tooltip.show\"\n      :content=\"tooltip.content\"\n    >\n    </info-tooltip>\n    <!--v-app-bar dense flat app color=\"grey darken-4\" dark>\n      <div class=\"d-flex align-center headline\">DeepNLP Vis</div>\n      <v-spacer></v-spacer>\n      <div class=\"d-flex align-center\">SST2, 67349 training samples</div>\n      <v-btn icon>\n        <v-icon>mdi-chevron-down</v-icon>\n      </v-btn>\n    </v-app-bar-->\n\n    <v-content>\n      <v-container fluid class=\"core-view fill-height\">\n        <v-row class=\"fill-height\">\n          <v-col cols=\"4\" class=\"fill-height py-0 pr-0\">\n            <v-card class=\"nlpvis-view\" height=\"40%\" v-intro-step=\"2\" v-intro=\"'In the distribution view, user can identify important samples and words for further analysis.'\">\n              <!--v-row class=\"pa-1 pl-4 nlpvis-title\"> Corpus </v-row-->\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"left_top_view\"\n                >\n                  <v-btn value=\"matrix\">\n                    <span class=\"nlpvis-title\">Class</span>\n                  </v-btn>\n\n                  <v-btn value=\"corpus\">\n                    <span class=\"nlpvis-title\">Distribution</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <v-checkbox\n                  v-model=\"is_lasso_select_all\"\n                  style=\"padding-top: 12px\"\n                  color=\"darkgray\"\n                >\n                <template v-slot:prepend>\n                  <v-img width=\"115px\" height=\"24px\" src=\"./assets/figure1.png\"></v-img>\n                </template>\n                </v-checkbox>\n                <!--v-radio-group\n                  v-model=\"row\"\n                  row\n                >\n                  <template v-slot:label>\n                    <div>\n                      <svg version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" x=\"0px\" y=\"0px\"\n                        viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512; width: 16px; height: 16px; opacity: .5\" xml:space=\"preserve\">\n                      <g>\n                        <g>\n                          <g>\n                            <path d=\"M453.072,140.002l24.448-20.656c-7.542-8.861-15.869-17.022-24.88-24.384l-20.304,24.704\n                              C439.842,125.811,446.782,132.617,453.072,140.002z\"/>\n                            <path d=\"M424.528,75.202c-9.74-5.814-19.835-11.014-30.224-15.568l-12.8,29.312c9.156,3.984,18.045,8.559,26.608,13.696\n                              L424.528,75.202z\"/>\n                            <path d=\"M512,208.002c-0.068-20.623-5.094-40.927-14.656-59.2l-28.464,14.624c7.238,13.748,11.052,29.039,11.12,44.576\n                              c0,79.408-100.48,144-224,144c-10.944,0-21.648-0.656-32.16-1.6c-0.758-35.232-29.934-63.179-65.166-62.421\n                              c-20.341,0.438-39.253,10.549-50.914,27.221C60.176,287.906,32,248.722,32,208.002c0-79.408,100.48-144,224-144\n                              c32.916-0.152,65.664,4.703,97.12,14.4l9.6-30.528C328.16,37.19,292.173,31.838,256,32.002c-141.152,0-256,78.96-256,176\n                              c0,53.92,35.904,104.768,96.624,137.888c-0.313,2.025-0.522,4.065-0.624,6.112c-0.057,35.284,28.501,63.934,63.786,63.99\n                              c21.914,0.035,42.317-11.164,54.054-29.67c34.527,11.019,58.016,43.037,58.16,79.28v14.4h32v-14.4\n                              c-0.055-30.856-12.454-60.406-34.432-82.064C404.4,378.626,512,301.906,512,208.002z M160,384.002c-17.673,0-32-14.327-32-32\n                              c0-17.673,14.327-32,32-32s32,14.327,32,32C192,369.675,177.673,384.002,160,384.002z\"/>\n                          </g>\n                        </g>\n                      </g>\n                      </svg>\n                    </div>\n                  </template>\n                  <v-radio value=\"radio-1\">\n                    <template v-slot:label>\n                      <div>Allow\n                      </div>\n                    </template>\n                  </v-radio>\n                  <v-radio value=\"radio-2\">\n                    <template v-slot:label>\n                      <div>Of course it's <strong class=\"success--text\">Google</strong></div>\n                    </template>\n                  </v-radio>\n                </v-radio-group-->\n\n                <!--v-icon size=\"18\"\n                  class=\"px-2\"\n                  :color=\"show_trending_down ? 'orange darken-2' : '#777'\"\n                  @click=\"show_trending_down = !show_trending_down\"\n                >\n                  mdi-trending-down\n                </v-icon-->\n              </v-toolbar> \n              <hr/>\n              <svg id=\"overview-svg\" class=\"ma-1\" v-intro-step=\"1\" v-intro=\"'Click on an element in the matrix to start the analysis of any two classes.'\">\n                <g id=\"overview-g\" v-show=\"left_top_view == 'corpus'\"></g>\n                <word-group v-show=\"left_top_view == 'corpus'\"\n                  :tooltip=\"enable_tooltip\"\n                  :transform=\"`translate(${bubble.left},${0})`\"\n                  :data=\"overviewWords\"\n                  :interaction=\"enable_word_filter ? 'filter' : 'DAG'\"\n                ></word-group>\n                <g id=\"matrix-g\" v-show=\"left_top_view == 'matrix'\">\n                  <g transform=\"translate(30, 10)\">\n                    <image x=\"0\" y=\"18\" width=\"320\" height=\"10\" preserveAspectRatio=\"none\" xlink:href=\"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAQAAAAABCAYAAAAxWXB3AAAAH0lEQVQ4T2P8////fwYGBgYoNUpDgmM0HEbDYUSkAwCp0H+QW+DsjwAAAABJRU5ErkJggg==\"></image>\n                    <g transform=\"translate(0,28)\" fill=\"none\" font-size=\"10\" font-family=\"sans-serif\" text-anchor=\"middle\"><g class=\"tick\" opacity=\"1\" transform=\"translate(0.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" y=\"9\" font-size=\"18px\" font-family=\"Arial\" dy=\"0.71em\">0.0</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(143.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" y=\"9\" font-size=\"18px\" font-family=\"Arial\" dy=\"0.71em\">0.2</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(203.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text font-size=\"18px\" font-family=\"Arial\" fill=\"currentColor\" y=\"9\" dy=\"0.71em\">0.4</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(249.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" y=\"9\" font-size=\"18px\" font-family=\"Arial\" dy=\"0.71em\">0.6</text></g><g class=\"tick\" opacity=\"1\" transform=\"translate(287.5,0)\"><line stroke=\"currentColor\" y2=\"6\" y1=\"-10\"></line><text fill=\"currentColor\" font-size=\"18px\" font-family=\"Arial\" y=\"9\" dy=\"0.71em\">0.8</text></g><text x=\"0\" y=\"-16\" font-size=\"18px\" font-family=\"Arial\" fill=\"currentColor\" text-anchor=\"start\" font-weight=\"bold\">Percentage</text></g>\n                  </g>\n                </g>\n              </svg>\n            </v-card>\n            <v-card class=\"nlpvis-view pa-1 mt-2\" min-height=\"calc(53% - 48px)\"\n            v-intro=\"'In the sample list, user can examine multiple samples in terms of their text content, class labels, and prediction scores.'\"\n            v-intro-step=\"4\">\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"left_bottom_view\"\n                >\n                  <v-btn value=\"samples\">\n                    <span class=\"nlpvis-title\">Sample List</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <template v-if=\"!search_expand\">\n                  <span class=\"pa-1 nlpvis-title disabled\"></span>\n                  <span :key=\"`legend${index}`\" v-for=\"(t, index) in labels\" class=\"color-legend\" :style=\"`--color: ${color_scheme[index]}`\">\n                    {{ t.name }}\n                  </span>\n                </template>\n                <template v-else>\n                <v-combobox\n                  v-model=\"chips\"\n                  chips\n                  clearable\n                  label=\"Enter a word or sample number here\"\n                  multiple\n                  solo\n                >\n                  <template v-slot:selection=\"{ attrs, item, selected }\">\n                    <v-chip\n                      v-bind=\"attrs\"\n                      :input-value=\"selected\"\n                      close\n                      @click=\"clickSearchItem(item)\"\n                      @contextmenu.prevent=\"rightClickSearchItem(item)\"\n                      @click:close=\"removeSearchItem(item)\"\n                    >\n                      <strong>{{ item }}</strong>&nbsp;\n                      <span>{{ isNaN(+item) ? '(Word)' : '(Sample)'}}</span>\n                    </v-chip>\n                  </template>\n                </v-combobox>\n                </template>\n                <v-btn icon @click=\"onClickSearch()\">\n                  <v-icon size=\"26\">mdi-magnify</v-icon>\n                </v-btn>\n              </v-toolbar> \n              <hr/>\n              <v-simple-table\n                dense\n                ref=\"simpletable\"\n                style=\"\n                  overflow-x: hidden;\n                  max-height: calc(52vh - 96px);\n                  max-width: 100%;\n                  overflow-y: scroll;\n                \"\n\n              >\n                <template v-slot:default>\n                  <thead>\n                    <tr>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        ID<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\">\n                        Passage<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        Label<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        Score<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                      <th class=\"text-left nlpvis-text pa-1\" style=\"white-space: nowrap\">\n                        Correctness<v-icon size=\"18\" style=\"color: #444\"\n                          >mdi-menu-swap</v-icon\n                        >\n                      </th>\n                    </tr>\n                  </thead>\n                  <tbody style=\"\n                  overflow-x: hidden;\n                  max-height: calc(52% - 96px);\n                  overflow-y: scroll;\n                \"\n>\n                    <template v-for=\"item in view_samples\">\n                      <tr :key=\"`filter${item.index}`\" v-if=\"item.show_filter\">\n                        <td class=\"pa-1 nlpvis-text\"></td>\n                        <td class=\"pa-1 nlpvis-text\" style=\"color: #777\">\n                          There are {{filter_info.pos}} negative samples and {{filter_info.neg}} positive samples include \"{{filter_info.word}}\"  \n                        </td>\n                        <td class=\"pa-1 nlpvis-text\" style=\"white-space: nowrap\">\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                        </td>\n                      </tr>\n                      <tr\n                        :key=\"item.index\"\n                        @mouseenter=\"highlightGrid([item.index])\"\n                        @mouseleave=\"highlightGrid(null)\"\n                        @click=\"addSentenceDAG(item.index)\"\n                      >\n                        <td class=\"pa-1 nlpvis-text\">{{ item.index }}</td>\n                        <td class=\"pa-1 nlpvis-text\" :style=\"{ color: item.pred == 'N/A' ? '#777' : 'black' }\">\n                          <span\n                            v-for=\"(word, index) in item.text\"\n                            :key=\"index\"\n                            :style=\"{\n                              background: word[1] ? 'orange' : 'none',\n                            }\"\n                          >\n                            {{ word[0] }}\n                          </span>\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\" style=\"white-space: nowrap\">\n                          {{ item.label }}\n                          <span\n                            style=\"\n                              display: inline-block;\n                              width: 16px;\n                              height: 16px;\n                            \"\n                            :style=\"{\n                              'background-color': getLabelColor(item.label),\n                            }\"\n                          ></span>\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                          {{ isNaN(item.score) ? 'N/A' : Number(item.score).toFixed(2) }}\n                        </td>\n                        <td class=\"pa-1 nlpvis-text\">\n                          <v-icon v-if=\"item.pred == item.label\"\n                            >mdi-check</v-icon size='16'\n                          >\n                          <v-icon v-else-if=\"item.pred != 'N/A'\">mdi-close</v-icon>\n                        </td>\n                      </tr>\n                    </template>\n                  </tbody>\n                </template>\n              </v-simple-table>\n            </v-card>\n            <v-card class=\"nlpvis-script pa-1 mt-2\" height=\"calc(7% + 8px)\">\n              <v-toolbar flat dense style=\"margin-top: 2.5%\">\n              <v-select\n                :items=\"datasets\"\n                label=\"SST-2\"\n                disabled\n                class=\"nlpvis-text\"\n                outlined\n              ></v-select>\n              <v-select\n                :items=\"models\"\n                label=\"12-layer BERT\"\n                disabled\n                class=\"nlpvis-text ml-2\"\n                outlined\n              ></v-select>\n              </v-toolbar>\n            </v-card>\n          </v-col>\n          <v-col cols=\"8\" class=\"fill-height py-0\">\n            <v-card class=\"nlpvis-view\" height=\"40%\" v-intro-step=\"3\" v-intro=\"'In the word contribution view, it shows how words are leveraged at different layers for prediction.'\">\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"right_top_view\"\n                >\n                  <v-btn value=\"word\">\n                    <span class=\"nlpvis-title\">Word Contribution</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <v-icon size=\"26\"\n                  class=\"px-2\"\n                  :color=\"show_trending_down ? '#333' : '#ccc'\"\n                  @click=\"show_trending_down = !show_trending_down\"\n                >\n                  mdi-trending-down\n                </v-icon>\n                <v-icon size=\"26\"\n                  class=\"px-2\"\n                  :color=\"show_trending_up ? '#333' : '#ccc'\"\n                  @click=\"show_trending_up = !show_trending_up\"\n                >\n                  mdi-trending-up\n                </v-icon>\n                <!--v-icon size=\"18\"\n                  class=\"px-2\"\n                  :color=\"enable_tooltip ? 'orange darken-2' : '#777'\"\n                  @click=\"enable_tooltip = !enable_tooltip\"\n                >\n                  mdi-message\n                </v-icon>\n                <v-icon size=\"18\"\n                  @click=\"enable_word_filter = !enable_word_filter\"\n                  class=\"px-2\"\n                  :color=\"enable_word_filter ? 'orange darken-2' : '#777'\"\n                >\n                  mdi-filter\n                </v-icon-->\n                <!--v-menu\n                  v-model=\"enable_word_attr\"\n                  :close-on-content-click=\"false\"\n                  :nudge-width=\"200\"\n                  offset-x\n                >\n                  <template v-slot:activator=\"{ on, attrs }\">\n                    <v-btn\n                      x-small\n                      outlined\n                      v-bind=\"attrs\"\n                      class=\"mx-1\"\n                      color=\"orange darken-2\"\n                      v-on=\"on\"\n                    >\n                      word weight\n                      <v-icon>mdi-chevron-down</v-icon>\n                    </v-btn>\n                  </template>\n\n                  <v-card>\n                    <v-subheader>Word ranking weight</v-subheader>\n                    <v-subheader>Uncertainty</v-subheader>\n                    <v-card-text class=\"py-0\">\n                      <v-slider\n                        v-model=\"uncertainty_weight\"\n                        min=\"0\"\n                        max=\"10\"\n                      ></v-slider>\n                    </v-card-text>\n                    <v-subheader>Frequency</v-subheader>\n                    <v-card-text class=\"py-0\">\n                      <v-slider\n                        v-model=\"frequency_weight\"\n                        min=\"0\"\n                        max=\"10\"\n                      ></v-slider>\n                    </v-card-text>\n\n                    <v-subheader>Entropy</v-subheader>\n                    <v-card-text class=\"py-0\">\n                      <v-slider\n                        v-model=\"entropy_weight\"\n                        min=\"0\"\n                        max=\"10\"\n                      ></v-slider>\n                    </v-card-text>\n\n                    <v-card-text>\n                      <v-btn text @click=\"enable_word_attr = false\"\n                        >Cancel</v-btn\n                      >\n                      <v-btn color=\"primary\" text @click=\"saveWordAttr()\"\n                        >Save</v-btn\n                      >\n                    </v-card-text>\n                  </v-card>\n                </v-menu-->\n              </v-toolbar>\n              <hr/>\n              <svg id=\"linechart-svg\" class=\"ma-1\" >\n                <g id=\"linechart-g\" v-show=\"is_wordview_init\">\n                  <template v-if=\"show_trending_up\">\n                    <path transform=\"translate(0, 0)\"\n                          v-for=\"(path, index) in trending_up_lines\"\n                          :key=\"index\" :d=\"path\" fill=\"none\"\n                          stroke=\"#dbdedb\" stroke-width=\"15px\"\n                          style=\"opacity: 1\"\n                    >\n                    </path>\n                    <g transform=\"translate(0, 0)\" \n                          :key=\"index\" \n                          v-for=\"(underlines, index) in trending_up_underlines\">\n                      <line v-for=\"(line, index2) in underlines\"\n                            :key=\"index2\" fill=\"none\"\n                            style=\"opacity: 1; stroke-width: 3px; stroke:gray;\"\n                            :x1=\"line.x1\"\n                            :x2=\"line.x2\"\n                            :y1=\"line.y1\"\n                            :y2=\"line.y2\"\n                      >\n                      </line>\n                    </g>\n                  </template>\n                  <template v-if=\"show_trending_down\">\n                    <path transform=\"translate(0, 0)\"\n                          v-for=\"(path, index) in trending_down_lines\"\n                          :key=\"index\" :d=\"path\" fill=\"none\"\n                          stroke=\"#dbdedb\" stroke-width=\"15px\"\n                          style=\"opacity: 1\"\n                    >\n                    </path>\n                    <g transform=\"translate(0, 0)\" \n                          :key=\"index\" \n                          v-for=\"(underlines, index) in trending_down_underlines\">\n                      <line v-for=\"(line, index2) in underlines\"\n                            :key=\"index2\" fill=\"none\"\n                            style=\"opacity: 1; stroke-width: 3px; stroke:gray;\"\n                            :x1=\"line.x1\"\n                            :x2=\"line.x2\"\n                            :y1=\"line.y1\"\n                            :y2=\"line.y2\"\n                      >\n                      </line>\n                    </g>\n                  </template>\n                  <word-group\n                    :tooltip=\"enable_tooltip\"\n                    :transform=\"`translate(${linechart.padding},${0})`\"\n                    :data=\"infolossWords\"\n                    :highlight=\"\n                      enable_word_highlight && current_viewtype == 'sentence'\n                    \"\n                    :highlight_text=\"current_text\"\n                    :interaction=\"enable_word_filter ? 'filter' : 'DAG'\"\n                  ></word-group>\n                </g>\n              </svg>\n            </v-card>\n            <v-card class=\"nlpvis-view pa-1 mt-2\" height=\"calc(53% - 48px)\" v-intro-step=\"5\" v-intro=\"'In the information flow, user can analyze how NLP models process a sample through layers in a unified way.'\">\n\n              <v-toolbar dense flat>\n                <v-btn-toggle dense class=\"nlpvis-tab\"\n                  v-model=\"right_bottom_view\"\n                >\n                  <v-btn value=\"info_flow\" @click=\"changeRightBottomView()\">\n                    <span class=\"nlpvis-title\">Information Flow</span>\n                  </v-btn>\n\n                  <v-btn value=\"word_ctx\" @click=\"changeRightBottomView()\" v-intro-step=\"6\" v-intro=\"'In the word context view, user can gain a deep understanding of a word by revealing how the model processes the word based on its context.'\">\n                    <span class=\"nlpvis-title\">Word Context</span>\n                  </v-btn>\n                </v-btn-toggle>\n                <v-spacer></v-spacer>\n                <span :key=\"`legend${index}`\" v-for=\"(t, index) in labels\" class=\"color-legend\" :style=\"`--color: ${color_scheme[index]}`\">\n                  {{ t.name }}\n                </span>\n              </v-toolbar>\n              <hr/>\n              <svg id=\"network-svg\">\n                <!--g id=\"dag-g\"></g-->\n              </svg>\n            </v-card>\n            <v-card class=\"nlpvis-script pa-1 mt-2\" height=\"calc(7% + 8px)\">\n              <v-img height=\"88\" width=\"1340\" src=\"./assets/legend1.png\"></v-img>\n            </v-card>\n          </v-col>\n        </v-row>\n      </v-container>\n    </v-content>\n  </v-app>\n</template>\n\n<script>\nimport * as d3 from \"d3\"\nimport { mapState, mapMutations, mapActions, mapGetters } from \"vuex\"\nimport { hexbin } from \"d3-hexbin\"\nimport axios from \"axios\"\nimport wordcloud from \"./plugins/wordcloud\"\nimport lasso from \"./plugins/lasso\"\nimport bus from \"./plugins/bus\"\nimport { stepSizeScale, getValuesByEntropy, getWordColor } from \"./plugins/utils\"\nimport { paintLineChart } from \"./layout/word_contribution_layout\"\nimport { paintWordDAG, paintWordcloud } from \"./layout/word_dag_layout\"\nimport WordGroup from \"./components/wordgroup\"\nimport InfoTooltip from \"./components/infotooltip\"\n\nconst isalpha = (val) => /^[a-zA-Z]+$/.test(val)\n\nimport paintSampleComposition from \"./layout/sentence_layout.js\";\n\nexport default {\n  name: \"App\",\n\n  computed: {\n    ...mapState([\n      \"DAG\",\n      \"linechart\",\n      \"bubble\",\n      \"showed_layers\",\n      \"config\",\n      \"labels\",\n      \"color_scheme\",\n      \"neuron_clusters\",\n      \"all_samples\",\n      \"selected_class\",\n      \"treemap\",\n      \"current_node\",\n      \"current_layers\",\n      \"edges\",\n      \"layers\",\n      \"sentenceclusters\",\n      \"scatterplot\",\n      \"current_viewtype\",\n      \"layout\",\n      \"tooltip\",\n      \"server_url\",\n      \"filter_info\",\n      \"matrix\",\n    ]),\n    ...mapGetters([\n      \"getSamples\",\n      \"getWordIdxs\",\n      \"view_samples\",\n      \"selected_label\",\n      \"fontSizeRange\",\n      \"getSample\",\n      \"positiveColor\",\n      \"negativeColor\",\n      \"neutralColor\",\n      \"neutralColorGray\",\n      \"getLabelColor\",\n    ]),\n    word_attrs() {\n      return {\n        frequency: this.frequency_weight / 10,\n        uncertainty: this.uncertainty_weight / 10,\n        entropy: this.entropy_weight / 10,\n      };\n    },\n  },\n  components: {\n    WordGroup: WordGroup,\n    InfoTooltip: InfoTooltip,\n  },\n  data: () => ({\n    datasets: ['SST-2'],// 'AGNews'],\n    models: ['BERT 12-Layer'],// 'Bi-LSTM 4-Layer'],\n    chips: [],\n    is_lasso_select_all: true,\n    enable_word_filter: false,\n    left_top_view: \"matrix\",\n    is_wordview_init: false,\n    right_bottom_view: \"info_flow\",\n    left_bottom_view: \"samples\",\n    right_top_view: \"word\",\n    enable_word_attr: false,\n    enable_tooltip: false,\n    show_trending_up: false,\n    show_trending_down: false,\n    trending_down_lines: [],\n    trending_up_lines: [],\n    trending_down_underlines: [],\n    trending_up_underlines: [],\n    enable_word_highlight: false,\n    dataset_name: \"\",\n    n_layer: 0,\n    sentences: null,\n    current_text: \"\",\n    frequency_weight: 10,\n    uncertainty_weight: 10,\n    entropy_weight: 10,\n    infolossWords: [],\n    overviewWords: [],\n    selectedSentence: null,\n    current_items: [],\n    current: { items: [], keywords: [] },\n    currentGrids: null,\n    currentGridsData: null,\n    selectedGrids: null,\n    lasso: null,\n    listOrderKey: \"p score\",\n    listOrder: 1,\n    word_cache: {},\n    total_accuracy: 100,\n    search_expand: false,\n    is_refreshing: false,\n    lastInfoFlow: null,\n    lastWordContext: null,\n    labelColor: [\"#d7191c\", \"#1a9641\", \"#1f77b4\", \"#ff7f0e\"],\n  }),\n  methods: {\n    ...mapMutations([\n      \"calcDAG\",\n      \"updatePosition\",\n      \"setViewtype\",\n      \"setLayers\",\n      \"setNetwork\",\n      \"setScatterplot\",\n      \"calcEdges\",\n      \"showTooltip\",\n      \"hideTooltip\",\n      'addHoverTimer',\n      'removeHoverTimer',\n      'setHoverWord',\n    ]),\n    ...mapActions([\n      \"changeCurrentSamples\",\n      \"fetchAllSample\",\n      \"fetchLayerInfo\",\n      \"fetchWordIndex\",\n      \"changeFilteredWord\",\n    ]),\n    async rightClickSearchItem(d) {\n      if (isNaN(+d)) {\n        await this.fetchWordIndex(d)\n        let idxs = this.getWordIdxs(d)\n        if (idxs.length >= 8) {\n          bus.$emit('add_word_DAG', d)\n        }\n      } else {\n      }\n    },\n    async changeRightBottomView() {\n      if (this.right_bottom_view == 'word_ctx') {\n        this.right_bottom_view = 'info_flow'\n        await this.addSentenceDAG(this.lastInfoFlow)\n      } else {\n        this.right_bottom_view = 'word_ctx'\n        await this.addWordDAG(this.lastWordContext)\n      }\n    },\n    async clickSearchItem(d) {\n      if (isNaN(+d)) {\n        await this.fetchWordIndex(d)\n        await this.changeFilteredWord(d)\n      } else {\n        if (+d == 145) d -= 10\n        await this.addSentenceDAG(+d)\n      }\n    },\n    removeSearchItem() {\n      this.chips.splice(this.chips.indexOf(item), 1)\n      this.chips = [...this.chips]\n    },\n    onClickSearch() {\n      if (this.search_expand == false) {\n        this.search_expand = true\n      } else {\n        this.search_expand = false\n      }\n    },\n    wordInteraction(word) {\n      let hover_word_item = null;\n      let has_request = false;\n      let self = this;\n      return word\n        .on(\"click\", async (d) => {\n          let resp = self.word_cache[d.text];\n          let idxs = resp.data.idxs;\n          if (idxs.length >= 10) self.addWordDAG(d.text);\n        })\n        .on(\"mouseover\", (d) => {\n          if (\n            !isalpha(d.text) ||\n            d.text.length <= 1 ||\n            d.text.indexOf(\"_\") != -1\n          ) {\n            return;\n          }\n          hover_word_item = d.text;\n          let left = d3.event.pageX + 10;\n          let top = d3.event.pageY - 10;\n          const show_detail = async () => {\n            let resp = null;\n            if (self.word_cache[d.text]) {\n              resp = self.word_cache[d.text];\n            } else {\n              resp = await axios.post(`${self.server_url}/api/word`, {\n                word: d.text,\n              });\n              self.word_cache[d.text] = resp;\n            }\n            let idxs = resp.data.idxs;\n            let info = resp.data.info;\n            for (let i = 1; i < info.length; ++i) {\n              info[i] = Math.min(info[i - 1], info[i]);\n            }\n            self.highlightGrid(idxs);\n            let text = `<p>${d.text}, ${idxs.length} samples </p>`;\n\n            resp = await self.getSamples(idxs);\n            text =\n              text +\n              resp\n                .slice(0, 8)\n                .map((e, index) => `#${index + 1}: ${e.text}`)\n                .join(\"</br>\");\n            if (hover_word_item == d.text) {\n              self.showTooltip({ top, left, content: text });\n            }\n          };\n          setTimeout(() => {\n            if (hover_word_item == d.text) {\n              show_detail();\n            }\n          }, 500);\n        })\n        .on(\"mouseout\", (d) => {\n          hover_word_item = null;\n          self.hideTooltip();\n          self.highlightGrid(null);\n        });\n    },\n    brushGrid(idxs) {\n      if (!idxs || idxs.length == 0) {\n        this.currentGrids.style(\"opacity\", 1);\n        idxs = [];\n      } else {\n        idxs = new Set(idxs);\n        this.currentGrids.style(\"opacity\", (d) => {\n          for (let i = 0; i < d.length; ++i) {\n            if (idxs.has(d[i].index)) {\n              return 1;\n            }\n          }\n          return 0.4;\n        });\n      }\n      this.changeCurrentSamples([...idxs]);\n    },\n    getWordFillColor(d) {\n      let color = this.getWordColor(d);\n      if (color == this.neutralColorGray) return \"rgb(172, 196, 220)\";\n      return color;\n    },\n    getWordColor(d) {\n      return getWordColor(this, d)\n    },\n    highlightGrid(idxs) {\n      if (!idxs || idxs.length == 0) {\n        idxs = new Set();\n        this.currentGrids\n          .select(\"path.hexagon\")\n          .style(\"stroke\", \"white\")\n          .style(\"stroke-width\", 0.5)\n          .style(\"opacity\", 1);\n      } else {\n        idxs = new Set(idxs);\n        let grids0 = this.currentGrids.filter((d) => {\n          for (let i = 0; i < d.length; ++i) {\n            if (idxs.has(d[i].index)) {\n              return true;\n            }\n          }\n          return false;\n        });\n        let grids1 = this.currentGrids.filter((d) => {\n          for (let i = 0; i < d.length; ++i) {\n            if (idxs.has(d[i].index)) {\n              return false;\n            }\n          }\n          return true;\n        });\n        // console.log(grids0.select('path.hexagon'), grids1.select('path.hexagon'))\n\n        grids1\n          .select(\"path.hexagon\")\n          .style(\"stroke\", \"white\")\n          .style(\"stroke-width\", 0.5)\n          .style(\"opacity\", 0.5);\n\n        grids0\n          .select(\"path.hexagon\")\n          .style(\"stroke\", \"orange\")\n          .style(\"stroke-width\", 1)\n          .style(\"opacity\", 1);\n      }\n    },\n    svgResize() {\n      let network_rect = document\n        .getElementById(\"network-svg\")\n        .parentElement.getBoundingClientRect();\n\n      let bubble_rect = document\n        .getElementById(\"overview-svg\")\n        .parentElement.getBoundingClientRect();\n\n      let linechart_rect = document\n        .getElementById(\"linechart-svg\")\n        .parentElement.getBoundingClientRect();\n\n      network_rect.width -= 8;\n      bubble_rect.width -= 8;\n      linechart_rect.width -= 8;\n      network_rect.height -= 8;\n      bubble_rect.height -= 8 + 30;\n      linechart_rect.height -= 8 + 24;\n\n      // console.log(network_rect)\n\n      d3.select(\"#network-svg\")\n        .attr(\"width\", network_rect.width)\n        .attr(\"height\", network_rect.height);\n      /*\n        .append(\"rect\")\n        .attr(\"width\", network_rect.width)\n        .attr(\"height\", network_rect.height)\n        .style(\"stroke\", \"lightgray\")\n        .style(\"stroke-width\", 1)\n        .style(\"fill\", \"none\");\n        */\n\n      //console.log(rect2)\n      d3.select(\"#overview-svg\")\n        .attr(\"width\", bubble_rect.width)\n        .attr(\"height\", bubble_rect.height);\n\n      d3.select(\"#linechart-svg\")\n        .attr(\"width\", linechart_rect.width)\n        .attr(\"height\", linechart_rect.height);\n\n      this.updatePosition({\n        network: network_rect,\n        bubble: bubble_rect,\n        linechart: linechart_rect,\n      });\n\n      let linechart = d3\n        .select(\"#linechart-g\")\n        .attr(\n          \"transform\",\n          `translate(${this.linechart.x},${this.linechart.y})`\n        );\n\n      //let DAG = d3.select('#dag-g')\n      //  .attr('transform', `translate(${this.DAG.x},${this.DAG.y})`)\n    },\n    async paintWordcloud() {\n      await paintWordcloud(this)\n    },\n    async paintMatrix() {\n      const self = this;\n      const svgDOM = d3.select(\"#matrix-g\").attr(\"class\", \"matrixdiagram\");\n\n      let margin = { left: 120, top: 150, right: 10, bottom: 10 }\n      let padding = 50\n      let width = this.bubble.width\n      let height = this.bubble.height\n      let data = this.matrix;\n      const row_sum = data.data.map((d) => d.reduce((a, b) => a + b));\n      const ids = data.labels;\n      const matrix = ids.map((source, i) =>\n        ids.map((target, j) => ({\n          source,\n          target,\n          val: data.data[i][j] / row_sum[i],\n        }))\n      );\n\n      let color_tp = d3.scaleSequentialSqrt((t) =>\n        d3.interpolate(\"white\", \"gray\")(t)\n      );\n      let color_fn = d3.scaleSequentialSqrt((t) =>\n        d3.interpolate(\"white\", \"gray\")(t)\n      );\n      color_fn.domain([\n        0,\n        d3.max(\n          matrix\n            .flat()\n            .filter((d) => d.source != d.target)\n            .map((d) => Number(d.val))\n        ),\n      ]);\n      color_tp.domain([\n        0,\n        d3.max(\n          matrix\n            .flat()\n            .filter((d) => d.source == d.target)\n            .map((d) => Number(d.val))\n        ),\n      ]);\n\n      let w = width - margin.left - margin.right\n      let h = height - margin.top - margin.bottom\n      w = h = Math.min(w, h) - padding\n      let x = d3\n        .scaleBand()\n        .rangeRound([0, w])\n        .paddingInner(0.0)\n        .align(0)\n        .domain(ids);\n\n      let svg = svgDOM\n        .append(\"g\")\n        .attr(\"transform\", \"translate(\" + margin.left + \",\" + margin.top + \")\");\n\n      function colored(d) {\n        const val = d.val;\n        if (d.source == d.target) return color_tp(+val);\n        return color_tp(+val);\n        if (+val > 0) return color_fn(+val);\n        return \"white\";\n      }\n\n      // text label for the axis\n      svg\n        .append(\"text\")\n        .attr(\"x\", w / 2)\n        .attr(\"y\", -41)\n        .style(\"text-anchor\", \"middle\")\n        .text(\"Predicted Class\");\n\n      svg\n        .append(\"text\")\n        .attr(\"x\", -w / 2)\n        .attr(\"y\", -100)\n        .attr(\"transform\", \"rotate(270)\")\n        .style(\"text-anchor\", \"middle\")\n        .text(\"Ground Truth\");\n\n      let row_line = svg\n        .selectAll(\"g.row\")\n        .data(matrix)\n        .enter()\n        .append(\"g\")\n        .attr(\"transform\", (d) => `translate(10,${x(d[0].source)})`)\n        .each(makeRow);\n\n      let row = row_line\n        .append(\"text\")\n        .attr(\"class\", \"label\")\n        .attr(\"x\", -4)\n        .attr(\"y\", x.bandwidth() / 2)\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"text-anchor\", \"end\")\n        .text((d) => d[0].source);\n\n      let column = svg\n        .selectAll(\"g.column\")\n        .data(matrix)\n        .enter()\n        .append(\"text\")\n        .attr(\"class\", \"column label\")\n        .attr(\n          \"transform\",\n          (d) => `translate(${x(d[0].source)},${-x.bandwidth() / 2 - 10})`\n        ) //rotate(-90)`)\n        .attr(\"x\", 4)\n        .attr(\"y\", x.bandwidth() / 2)\n        .attr(\"dy\", \"0.32em\")\n        .attr(\"dx\", \"0.32em\")\n        .text((d) => d[0].source);\n\n      function makeRow(rowData) {\n        let cell = d3\n          .select(this)\n          .selectAll(\".cell\")\n          .data(rowData)\n          .enter()\n          .append(\"g\")\n          .attr(\"class\", \"cell\")\n          .attr(\"transform\", (d) => `translate(${x(d.target)}, 0)`);\n\n        cell\n          .append(\"rect\")\n          .attr(\"width\", x.bandwidth())\n          .attr(\"height\", x.bandwidth())\n          .style(\"fill-opacity\", 1)\n          .style(\"stroke\", \"lightgray\")\n          .style(\"stroke-width\", 0.0)\n          .style(\"fill\", (d) => colored(d));\n\n        cell\n          .append(\"text\")\n          .attr(\"x\", x.bandwidth() / 2)\n          .attr(\"y\", x.bandwidth() / 2 + 7)\n          .style(\"text-anchor\", \"middle\")\n          .style(\"font-size\", \"18px\")\n          .style(\"font-weight\", 500)\n          .style(\"fill\", (d) => (d.val > 0.9 ? \"white\" : \"black\"))\n          .text((d) => Number(d.val).toFixed(3));\n\n        cell\n          .on(\"mouseover\", (d) => {\n            d3.selectAll(\".cell\").style(\"opacity\", \"0.1\");\n\n            d3.selectAll(\".cell\")\n              .filter(\n                (e) =>\n                  (e.source == d.source || e.source == d.target) &&\n                  (e.target == d.source || e.target == d.target)\n              )\n              .style(\"opacity\", \"1\")\n              .append(\"rect\")\n              .attr(\"class\", \"hovered\")\n              .attr(\"width\", x.bandwidth())\n              .attr(\"height\", x.bandwidth())\n              .style(\"fill\", \"none\")\n              .style(\"stroke\", \"gray\")\n              .style(\"stroke-width\", 1.5);\n\n            row\n              .filter((e) => e[0].source === d.source)\n              .style(\"fill\", \"#000\")\n              .style(\"font-weight\", \"bold\");\n\n            column\n              .filter((e) => e[0].source === d.target)\n              .style(\"fill\", \"#000\")\n              .style(\"font-weight\", \"bold\");\n          })\n          .on(\"mouseout\", () => {\n            d3.selectAll(\".cell\").style(\"opacity\", \"1\");\n\n            d3.selectAll(\".cell\").select(\".hovered\").remove();\n\n            row.style(\"fill\", null).style(\"font-weight\", null);\n            column.style(\"fill\", null).style(\"font-weight\", null);\n          })\n          .on(\"click\", () => {\n            setTimeout(() => {\n              self.left_top_view = \"corpus\"\n              self.is_wordview_init = 1\n            }, 500);\n          });\n        cell.append(\"title\").text((d) => d.val);\n      }\n    },\n    async paintScatterplot() {\n      this.paintMatrix();\n      const svg = d3.select(\"#overview-g\");\n      let margin_left = this.bubble.left;\n      let margin_top = 15;\n      let margin_right = this.bubble.top;\n      let margin_bottom = 8;\n      let width = this.bubble.width - margin_left - margin_right;\n      let height = this.bubble.height - margin_top - margin_bottom - 18;\n      let data = this.scatterplot;\n      let self = this;\n      self.dataset_name = this.scatterplot.dataset;\n      self.n_layer = this.scatterplot.n_layer;\n\n      const disappear_time = 200;\n      const animation_time = 2000;\n      const glyph_margin = 10\n\n      svg\n        .append(\"clipPath\")\n        .attr(\"id\", \"clip_path\")\n        .append(\"rect\")\n        .attr(\"x\", 0)\n        .attr(\"y\", 0)\n        .attr(\"width\", width)\n        .attr(\"height\", height);\n\n      const main_g = svg\n        .append(\"g\")\n        .attr(\"class\", \"main_layer\")\n        .attr(\"transform\", `translate(${margin_left}, ${margin_top})`);\n\n      const word_g = svg\n        .append(\"g\")\n        .attr(\"class\", \"word_layer\")\n        .attr(\"transform\", `translate(${margin_left}, ${margin_top})`);\n\n      const label_g = svg\n        .append(\"g\")\n        .attr(\"class\", \"label_layer\")\n        .attr(\"transform\", `translate(${margin_left}, ${margin_top})`)\n        .style(\"font-family\", \"sans-serif\")\n        .style(\"font-size\", 16);\n\n      label_g\n        .append(\"g\")\n        .attr(\"transform\", `translate(${3},${-2})`)\n        .append(\"text\")\n        //.attr('transform', 'rotate(90)')\n        .style(\"font-family\", \"Roboto, san-serif\")\n        .text(\"Prediction Score\");\n\n      /*\n      label_g\n        .append(\"g\")\n        .attr(\"transform\", `translate(${width - 6},${-2})`)\n        .append(\"text\")\n        //.attr('transform', 'rotate(90)')\n        .attr(\"text-anchor\", \"end\")\n        .style(\"font-family\", \"Roboto, san-serif\")\n        .text(\"Accuracy\");\n        */\n      /*\n          label_g.append('text')\n            .attr('x', width - 6)\n            .attr('y', height)\n            .attr('text-anchor', 'end')\n            .text('Embedding t-SNE')\n            */\n\n      let strip_step = 0.0625;\n      let xdomain0 = d3.extent(data.scatters, (d) => d.x);\n      let xdomain = [0, 1];\n      data.scatters.forEach(\n        (d) =>\n          (d.x =\n            ((d.x - xdomain0[0]) / (xdomain0[1] - xdomain0[0])) *\n              (xdomain[1] - xdomain[0]) *\n              0.97 +\n            0.015)\n      );\n      console.log(xdomain);\n      xdomain[0] = Math.floor(xdomain[0] * 20) / 20;\n      xdomain[1] = Math.ceil(xdomain[1] * 20) / 20;\n      let n_strips = Math.floor((xdomain[1] - xdomain[0]) / strip_step + 1e-7);\n      let focus_strip = null;\n      let ydomain = d3.extent(data.scatters, (d) => d.y);\n      let grid_size = ((width / n_strips / 4) * 0.5) / Math.sqrt(0.75);\n      let grid_h = grid_size * Math.sqrt(0.75);\n\n      let ticks = [];\n      let strips = [];\n      for (let i = 0; i < n_strips; ++i) {\n        let left = xdomain[0] + (i * (xdomain[1] - xdomain[0])) / n_strips;\n        let right =\n          xdomain[0] + ((i + 1) * (xdomain[1] - xdomain[0])) / n_strips;\n        ticks.push(left);\n        let counts = [0, 0];\n        data.scatters\n          .filter((d) => d.x >= left && d.x < right)\n          .forEach((d) => {\n            let label = +(d.label == self.selected_label[0]);\n            counts[label] = (counts[label] || 0) + 1;\n          });\n        let p = 0;\n        if (counts[0] + counts[1] > 0) {\n          p =\n            (left < 0.5 - 1e-7 ? counts[1] : counts[0]) /\n            (counts[0] + counts[1]);\n        }\n        strips.push({\n          left,\n          right,\n          counts,\n          weight: 1,\n          index: i,\n          is_top: left < 0.5 - 1e-7,\n          p,\n        });\n      }\n      //console.log('strips', strips)\n      ticks.push(xdomain[1]);\n\n      let min_counts = Math.min(\n        ...strips.map((d) => Math.min(d.counts[0], d.counts[1]))\n      );\n      let max_counts = Math.max(\n        ...strips.map((d) => Math.max(d.counts[0], d.counts[1]))\n      );\n      let countScale = d3\n        .scaleLog()\n        .domain([1, max_counts])\n        .range([0.03, 0.35]);\n\n      let get_rangex = (width, strips) => {\n        let tot_weight = 0;\n        for (let d of strips) tot_weight += d.weight;\n        let ret = [1];\n        for (let i = 0; i < strips.length; ++i)\n          ret.push(ret[i] - strips[i].weight / tot_weight);\n        return ret.map((d) => d * width);\n      };\n\n      let last_grids = null;\n      let last_keywords = [];\n      paintMainScatter();\n\n      async function paintMainScatter() {\n        let plotview_width = width - (glyph_margin + height / n_strips);\n        let rangex = get_rangex(height, strips);\n        let rangey = [10, plotview_width];\n        let xScale = d3.scaleLinear(ticks, rangex);\n        let yScale = d3.scaleLinear(ydomain, rangey);\n        let yAxis = d3\n          .axisLeft(xScale)\n          .tickValues(ticks)\n          .tickFormat((d) => Number(d).toFixed(2));\n        //let yAxis = d3.axisLeft(yScale)\n\n        let rrange = [(height / n_strips) * 0.15, (height / n_strips) * 0.4];\n        let rScale = d3.scaleSqrt(\n          d3.extent(strips, (d) => d.counts[0] + d.counts[1]),\n          rrange\n        );\n        let hex = hexbin()\n          .radius(grid_size)\n          .x((d) => d.x)\n          .y((d) => d.y);\n        let plots = data.scatters.map((d, index) => ({\n          x: yScale(d.y),\n          y: xScale(d.x),\n          is_correct: d.is_correct,\n          pred: d.pred,\n          label: d.label,\n          index: d.id,\n        }));\n        let raw_grids = hex(plots);\n        // data.keywords.forEach((d) => (d.value = d.weight))\n        raw_grids.forEach((d, index) => {\n          d.count = 0;\n          d.error = 0;\n          //d.x += grid_h\n          //d.y += grid_h\n          if (d.length >= 1) {\n            if (d[0].pred == self.selected_label[0]) {\n              d.color = self.positiveColor;\n              d.error_color = self.negativeColor;\n            } else {\n              d.color = self.negativeColor;\n              d.error_color = self.positiveColor;\n            }\n          } else {\n            d.color = \"gray\";\n          }\n          for (let i = 0; i < d.length; ++i) {\n            if (d[i].is_correct) {\n              d.count += 1;\n            } else {\n              d.error += 1;\n            }\n          }\n        });\n        let currentGrids = raw_grids;\n        self.currentGridsData = currentGrids;\n        // console.log(currentGrids)\n        let gridCountDomain = [\n          0,\n          1,\n          Math.max(...raw_grids.map((d) => d.count)),\n        ];\n        let gridCountScale = d3.scaleLinear(gridCountDomain, [0, 0.3, 0.8]);\n        let gridErrorDomain = [\n          0,\n          1,\n          Math.max(...raw_grids.map((d) => d.error || 0)),\n        ];\n\n        let gridErrorScale = d3.scaleLinear(gridErrorDomain, [0, 0.5, 0.8]);\n        let total_acc = 0;\n        let total_sample = 0;\n        strips.forEach((d, i) => {\n          d.height = xScale(d.left) - xScale(d.right);\n          d.r = rScale(d.counts[0] + d.counts[1]);\n          let right_sample = i * 2 + 2 <= n_strips ? d.counts[0] : d.counts[1];\n          d.acc = Number(\n            (right_sample / (d.counts[0] + d.counts[1])) * 100\n          ).toFixed(2);\n          total_acc += right_sample;\n          total_sample += d.counts[0] + d.counts[1];\n          console.log(\n            i,\n            right_sample,\n            d.counts[0] + d.counts[1],\n            Number((right_sample / (d.counts[0] + d.counts[1])) * 100).toFixed(\n              2\n            )\n          );\n        });\n        self.total_accuracy = Number((total_acc / total_sample) * 100).toFixed(\n          2\n        );\n\n        let arc = d3\n          .arc()\n          .startAngle((d) => -d.p * Math.PI)\n          .endAngle((d) => d.p * Math.PI)\n          .innerRadius((d) => 0)\n          .outerRadius((d) => rScale(d.counts[0] + d.counts[1]));\n\n        main_g\n          .selectAll(\".strip\")\n          .data(strips)\n          .join(\n            (enter) => {\n              let g = enter\n                .append(\"g\")\n                .attr(\"class\", \"strip\")\n                .attr(\"transform\", (d) => `translate(0, ${xScale(d.right)})`);\n\n              g.append(\"rect\")\n                .attr(\"width\", width)\n                .attr(\"height\", (d) => d.height)\n                .attr(\"fill\", (d, i) =>\n                  strips[i].is_top ? self.negativeColor : self.positiveColor\n                )\n                .style(\"stroke\", \"white\")\n                .style(\"stroke-width\", 1)\n                .style(\"stroke-opacity\", (d, i) => {\n                  let value =\n                    2 *\n                    countScale(strips[i].is_top ? d.counts[0] : d.counts[1]);\n                  return value > 0.25 ? 0 : value;\n                })\n                .style(\"fill-opacity\", (d, i) =>\n                  countScale(strips[i].is_top ? d.counts[0] : d.counts[1])\n                )\n                .on(\"dblclick\", (d, i) => {\n                  if (focus_strip == null) {\n                    d.weight = 5;\n                    focus_strip = d;\n                  } else if (focus_strip.index == i) {\n                    d.weight = 1;\n                    focus_strip = null;\n                  } else if (focus_strip != null) {\n                    focus_strip.weight = 1;\n                    d.weight = 5;\n                    focus_strip = d;\n                  }\n                  paintMainScatter();\n                });\n\n              let percent_g = g\n                .filter((d) => d.counts[0] + d.counts[1] > 0)\n                .append(\"g\")\n                .attr(\"class\", \"percentage\")\n                .attr(\n                  \"transform\",\n                  (d, i) =>\n                    `translate(${width - glyph_margin - 8}, ${d.height / 2})`\n                );\n\n              percent_g\n                .append(\"circle\")\n                .attr(\"r\", (d) => d.r)\n                .attr(\"fill\", (d, i) =>\n                  d.counts[0] >= d.counts[1]\n                    ? self.negativeColor\n                    : self.positiveColor\n                )\n                .style(\"opacity\", 1)\n                .on(\"click\", (e) => {\n                  let idxs = data.scatters\n                    .filter(\n                      (d) => d.x >= e.left && d.x < e.right && !d.is_correct\n                    )\n                    .map((d) => d.id);\n                  bus.$emit(\"brush_grid\", idxs);\n                });\n\n              percent_g\n                .append(\"path\")\n                .attr(\"d\", arc)\n                .attr(\"fill\", (d, i) =>\n                  d.counts[0] < d.counts[1]\n                    ? self.negativeColor\n                    : self.positiveColor\n                )\n                .style(\"opacity\", 1)\n                .on(\"click\", (e) => {\n                  let idxs = data.scatters\n                    .filter(\n                      (d) => d.x >= e.left && d.x < e.right && !d.is_correct\n                    )\n                    .map((d) => d.id);\n                  bus.$emit(\"brush_grid\", idxs);\n                });\n\n              /*\n              percent_g\n                .append(\"text\")\n                .text((d, i) => (d.acc >= 99.999 ? \"100.0%\" : `${d.acc}%`))\n                .attr(\"dx\", 15)\n                .attr(\"dy\", 5)\n                .attr(\"font-size\", \"16px\");\n              */\n              return g;\n            },\n            (update) => {\n              update\n                .transition()\n                .duration(animation_time)\n                .attr(\"transform\", (d) => `translate(0, ${xScale(d.right)})`);\n\n              update\n                .select(\"rect\")\n                .transition()\n                .duration(animation_time)\n                .attr(\"height\", (d) => d.height);\n\n              update\n                .filter((d) => d.counts[0] + d.counts[1] > 0)\n                .select(\"g.percentage\")\n                .transition()\n                .duration(animation_time)\n                .attr(\n                  \"transform\",\n                  (d, i) =>\n                    `translate(${width - glyph_margin - 8}, ${d.height / 2})`\n                );\n            }\n          );\n\n        main_g\n          .selectAll(\".grid\")\n          .data(\n            currentGrids,\n            (d) => Math.floor(d.y) * ~~plotview_width + Math.floor(d.x)\n          )\n          .join(\n            (enter) => {\n              let grid = enter\n                .append(\"g\")\n                .attr(\"class\", \"grid\")\n                .style(\"opacity\", 0);\n\n              grid\n                .append(\"path\")\n                .attr(\"class\", \"hexagon\")\n                //.attr(\"clip-path\", \"url(#clip_path)\")\n                .attr(\"d\", function (d) {\n                  return `M ${d.x} ${d.y} ${hex.hexagon()}`;\n                })\n                .style(\"stroke\", (d) => (d.count == 0 ? \"none\" : \"white\"))\n                .style(\"stroke-width\", 1)\n                .style(\"fill\", (d) => d.color)\n                .style(\"fill-opacity\", (d) => gridCountScale(d.count));\n\n              grid\n                .append(\"path\")\n                .attr(\"class\", \"cross\")\n                .attr(\"transform\", (d) => `translate(${d.x},${d.y})`)\n                .attr(\"d\", `M -3 -3 L 3 3 M 3 -3 L -3 3`)\n                .style(\"stroke\", (d) => d.error_color)\n                .style(\"stroke-width\", 2.5)\n                //.style(\"opacity\", (d) => (d.error ? 0.7 : 0));\n                .style(\"opacity\", (d) => gridErrorScale(d.error));\n\n              let hover_grid_item = null;\n              grid\n                .on(\"mouseover\", function (d) {\n                  hover_grid_item = d;\n                  d3.select(this)\n                    .append(\"path\")\n                    .attr(\"class\", \"hexagon_outline\")\n                    .attr(\"d\", function (d) {\n                      return `M ${d.x} ${d.y} ${hex.hexagon()}`;\n                    })\n                    .style(\"stroke\", \"orange\")\n                    .style(\"stroke-width\", 2)\n                    .style(\"fill\", \"none\");\n                  /*\n                  let text = \"\";\n                  if (d.count && d.error) {\n                    text = `${d.count} correct samples and ${d.error} wrong samples`;\n                  } else if (d.count) {\n                    text = `${d.count} correct samples`;\n                  } else {\n                    text = `${d.error} wrong samples`;\n                  }\n                  text = `<p>${text}</p>`;\n                  let left = d3.event.pageX + 10;\n                  let top = d3.event.pageY - 10;\n                  self.showTooltip({ top, left, content: text });\n\n                  const show_detail = async () => {\n                    let resp = await self.getSamples(d.map((e) => e.index));\n                    text =\n                      text +\n                      resp\n                        .slice(0, 5)\n                        .map((e, index) => `#${index + 1}: ${e.text}`)\n                        .join(\"</br>\");\n\n                    self.showTooltip({ top, left, content: text });\n                  };\n                  setTimeout(() => {\n                    if (hover_grid_item == d) {\n                      show_detail();\n                    }\n                  }, 500);\n                  */\n                })\n                .on(\"mouseout\", function (d) {\n                  hover_grid_item = null;\n                  d3.select(this).select(\"path.hexagon_outline\").remove();\n                  //self.hideTooltip();\n                })\n                .on(\"click\", function (d) {\n                  //bus.$emit(\"toggle_grids\", d.map((e) => e.index))\n                  let idxs = d.map((e) => e.index)\n                  let idxset = new Set(idxs)\n                  if (idxset.has(145)) {\n                    self.addSentenceDAG(145)\n                  } else if (idxset.has(1733)) {\n                    self.addSentenceDAG(1733)\n                  } else {\n                    self.addSentenceDAG(idxs[0])\n                  }\n                  self.refreshSelection(idxs);\n                });\n\n              grid.transition().duration(animation_time).style(\"opacity\", 1);\n            },\n            (update) => {\n              update\n                .select(\"path.hexagon\")\n                .transition()\n                .duration(animation_time)\n                .attr(\"d\", function (d) {\n                  return `M ${d.x} ${d.y} ${hex.hexagon()}`;\n                })\n                .style(\"fill\", (d) => d.color)\n                .style(\"fill-opacity\", (d) => gridCountScale(d.count));\n\n              update\n                .select(\"path.cross\")\n                .transition()\n                .duration(animation_time)\n                .attr(\"transform\", (d) => `translate(${d.x},${d.y})`)\n                .style(\"stroke\", (d) => d.error_color)\n                .style(\"opacity\", (d) => (d.error ? 0.7 : 0));\n            },\n            (exit) => {\n              exit\n                .transition()\n                .duration(animation_time)\n                .style(\"opacity\", 0)\n                .remove();\n            }\n          );\n\n        let grids = main_g.selectAll(\".grid\");\n        self.currentGrids = grids;\n\n        let lasso_start = () => {\n          //console.log('start')\n        };\n\n        let lasttime = 0;\n        let lasso_draw = () => {\n          if (new Date() - lasttime <= 100) {\n            return;\n          }\n          lasttime = new Date();\n          current_lasso.possibleItems().style(\"opacity\", 1.0);\n\n          if (current_lasso.possibleItems().nodes().length > 0) {\n            current_lasso.notPossibleItems().style(\"opacity\", 0.4);\n          } else {\n            current_lasso.notPossibleItems().style(\"opacity\", 1);\n          }\n        };\n\n        let lasso_end = () => {\n          setTimeout(() => {\n            if (self.is_refreshing) return\n            if (current_lasso.selectedItems().nodes().length > 0) {\n              current_lasso.notSelectedItems().style(\"stroke\", 0.4);\n            } else {\n              current_lasso.notSelectedItems().style(\"stroke\", 1);\n            }\n            current_lasso.selectedItems().style(\"opacity\", 1);\n\n            let grids_ = current_lasso.selectedItems().data();\n            let idxs = [].concat(...grids_.map((d) => d.map((e) => e.index)));\n            console.log(\"self.is_lasso_select_all\", self.is_lasso_select_all);\n            if (!self.is_lasso_select_all) {\n              idxs = idxs.filter((d) => self.all_samples[d].wrong);\n            }\n            self.refreshSelection(idxs, grids_);\n          }, 100)\n        };\n\n        const current_lasso = lasso()\n          .closePathDistance(305)\n          .closePathSelect(true)\n          .targetArea(main_g)\n          .items(grids)\n          .on(\"start\", lasso_start)\n          .on(\"draw\", lasso_draw)\n          .on(\"end\", lasso_end);\n        self.lasso = current_lasso;\n\n        main_g.select(\"g.grid-lasso\").remove();\n        main_g\n          .append(\"g\")\n          .attr(\"class\", \"grid-lasso\")\n          //.attr('transform', `translate(${0},${0})`)\n          .call(current_lasso);\n\n        main_g.select(\"g.x-axis\").remove();\n\n        let axis = main_g\n          .append(\"g\")\n          .attr(\"class\", \"x-axis\")\n          .attr(\"transform\", `translate(${0},${0})`)\n          .call(yAxis);\n\n        axis\n          // remove the line between the ticks and the chart\n          .select(\".domain\")\n          .remove();\n\n        axis\n          .selectAll(\"text\")\n          .attr(\"font-size\", \"16px\")\n          //.style('font-weight', 600)\n          .style(\"font-family\", \"Roboto, san-serif\");\n        let keywords = data.keywords\n        getValuesByEntropy(keywords, self, -1)\n\n        window.keywords = keywords;\n        // keywords = keywords.slice(0, 200);\n        keywords = JSON.parse(JSON.stringify(keywords));\n        let valueRange = d3.extent(keywords, (d) => d.value);\n\n        let nwords = keywords\n          .filter((d) => self.getWordColor(d) == self.negativeColor)\n          .sort((a, b) => b.value - a.value);\n        let pwords = keywords\n          .filter((d) => self.getWordColor(d) == self.positiveColor)\n          .sort((a, b) => b.value - a.value);\n\n        for (let i = 0; i < pwords.length && i < nwords.length; ++i) {\n          if (nwords[i].value < pwords[i].value) {\n            nwords[i].value = pwords[i].value - 0.001;\n          } else {\n            pwords[i].value = nwords[i].value - 0.001;\n          }\n        }\n\n        keywords = keywords.sort((a, b) => b.value - a.value);\n\n        let sizeScale;\n\n        if (self.n_layer == 4) {\n          sizeScale = stepSizeScale(\n            self.fontSizeRange,\n            keywords.map((d) => d.value),\n            4,\n            [4, 10, 12]\n          );\n        } else {\n          sizeScale = stepSizeScale(\n            self.fontSizeRange,\n            keywords.map((d) => d.value),\n            4,\n            [4, 8, 10]\n          );\n        }\n        keywords.forEach(\n          (d) =>\n            (d.size = Math.min(sizeScale(d.value), self.fontSizeRange[1]))\n        );\n\n        //console.log(JSON.stringify(strwords))\n        /*\n        if (!last_font_size_distribution) {\n          let max_size = global_font_size_range[1];\n          last_font_size_distribution = keywords.map(\n            (d) => sizeScale(d.value) / max_size\n          );\n        }\n        */\n        // console.log(JSON.parse(JSON.stringify(keywords)))\n\n        //word_g.selectAll('.keyword').remove()\n        let barriers = [];\n\n        function add_barriers(top, bottom) {\n          let filtered_grids = currentGrids.filter(\n            (d) => d && d.y >= top && d.y < bottom\n          );\n          filtered_grids = filtered_grids.sort((a, b) => a.x - b.x);\n          if (filtered_grids.length == 0) return;\n          let last = filtered_grids[0].x;\n          for (let j = 1; j <= filtered_grids.length; ++j) {\n            if (\n              j != filtered_grids.length &&\n              filtered_grids[j].x - filtered_grids[j - 1].x <= grid_size * 30\n            ) {\n              continue;\n            } else {\n              let x1 = filtered_grids[j - 1].x + grid_size;\n              if (x1 + grid_size * 10 > plotview_width) {\n                x1 = plotview_width;\n              }\n              barriers.push({\n                x0: last - grid_size - 5,\n                x1: x1 + 5,\n                y0: top - 5,\n                y1: bottom + 5,\n              });\n              if (j != filtered_grids.length) {\n                last = filtered_grids[j].x;\n              }\n            }\n          }\n        }\n\n        for (let i = 0; i < n_strips; ++i) {\n          let top = xScale(strips[i].right);\n          let bottom = xScale(strips[i].left);\n          if (strips[i].weight > 1) {\n            let step = (bottom - top) / 3;\n            for (let k = 0; k < 3; ++k) {\n              add_barriers(top + k * step, top + (k + 1) * step);\n            }\n          } else {\n            add_barriers(top, bottom);\n          }\n          barriers.push({\n            x0: i * 2 <= n_strips ? 0 : plotview_width * 0.66,\n            x1: i * 2 <= n_strips ? plotview_width * 0.33 : plotview_width,\n            y0: top,\n            y1: bottom,\n          });\n          /*\n              barriers.push({\n                x0: 0,\n                x1: plotview_width,\n                y0: bottom - 1,\n                y1: bottom + 1,\n              })\n              */\n        }\n        barriers.push({\n          x0: plotview_width - 40,\n          x1: plotview_width,\n          y0: height - 15,\n          y1: height,\n        });\n        barriers.push({\n          x0: 0,\n          x1: plotview_width,\n          y0: 0,\n          y1: 20,\n        });\n        barriers.push({\n          x0: 0,\n          x1: plotview_width,\n          y0: height - 20,\n          y1: height,\n        });\n        barriers.push({\n          x0: 0,\n          x1: 10,\n          y0: 0,\n          y1: 100,\n        });\n        // barriers = barriers.filter(d => d.x1 - d.x0 > 15)\n        let dict = {};\n        last_keywords.forEach((d, i) => {\n          dict[d.word] = i;\n          d.is_new = false;\n        });\n\n        wordcloud()\n          .size([plotview_width, height])\n          .data(keywords)\n          .text((d) => d.word)\n          .barriers(barriers)\n          .rangex((d) => {\n            if (dict[d.word]) {\n              let mid = last_keywords[dict[d.word]].x / plotview_width;\n              let left = mid - 0.1;\n              let right = mid + 0.1;\n              return [Math.max(0, left), Math.min(right, 1)];\n            } else {\n              if (self.getWordColor(d) == self.positiveColor) {\n                return [0, 0.5, 0.25];\n              } else if (self.getWordColor(d) == self.negativeColor) {\n                return [0.6, 1, 0.82];\n              } else {\n                return [0.3, 0.8, 0.55];\n              }\n            }\n          })\n          .padding(6)\n          .rangey((d) => {\n            if (dict[d.word]) {\n              let mid = last_keywords[dict[d.word]].y / height;\n              let left = mid - 0.1;\n              let right = mid + 0.1;\n              return [Math.max(0, left), Math.min(right, 1), mid];\n            } else {\n              if (self.getWordColor(d) == self.positiveColor) {\n                return [0.1, 0.4, 0.25];\n              } else if (self.getWordColor(d) == self.negativeColor) {\n                return [0.4, 1, 0.65];\n              } else {\n                return [0.2, 0.6, 0.5];\n              }\n              let alpha = 1,\n                beta = 1;\n              if (d.score.mean < 0.47) (alpha = 0.5), (beta = 1.5);\n              if (d.score.mean > 0.53) (alpha = 1.5), (beta = 0.5);\n              let std = Math.max(0.05, d.score.std);\n              let left = xScale(d.score.mean + std * alpha) / height;\n              let right = xScale(d.score.mean - std * beta) / height;\n              let mid = xScale(d.score.mean) / height;\n              if (left < 0.5) mid = left;\n              else if (right > 0.5) mid = right;\n              return [Math.max(0, left), Math.min(1, right), mid];\n            }\n          })\n          .fontSize((d) => d.size)\n          .font(\"Roboto\")\n          .fontWeight((d) => (sizeScale(d.value) >= 0 ? \"bold\" : \"normal\"))\n          .start((words) => {\n            // console.log(words)\n            let all_words = words\n              .filter((d) => d.display)\n              .map((d) => ({\n                x: d.x,\n                y: d.y,\n                layer: 0,\n                size: d.size,\n                text: d.text,\n                display: d.display,\n                width: d.width,\n                height: d.height,\n                weight: \"bold\",\n                id: 'corpus',\n                highlight: d.highlight,\n                fill: self.getWordColor(d),\n                contri: d.contri,\n                /*\n                  d.score.mean < 0.465\n                    ? self.negativeColor\n                    : d.score.mean > 0.535\n                    ? self.positiveColor\n                    : \"gray\",\n                    */\n              }));\n            let nwords = all_words.filter(\n              (d) => self.getWordColor(d) == self.negativeColor\n            );\n            let pwords = all_words.filter(\n              (d) => self.getWordColor(d) == self.positiveColor\n            );\n            let mwords = all_words.filter(\n              (d) =>\n                self.getWordColor(d) != self.negativeColor &&\n                self.getWordColor(d) != self.positiveColor\n            );\n            self.overviewWords = nwords\n              .slice(0, 25)\n              .concat(pwords.slice(0, 25))\n              .concat(mwords.slice(0, 20));\n          });\n      }\n    },\n    async paintLinechart(highlight_word = null) {\n      await paintLineChart(this, highlight_word, this.fontSizeRange);\n    },\n    saveWordAttr() {\n      this.enable_word_attr = false;\n      this.refreshLinechart();\n    },\n    async refreshLinechart() {\n      await this.fetchLayerInfo({\n        idxs: (this.current && this.current.idxs) || null,\n        attrs: this.word_attrs,\n      })\n      this.paintLinechart()\n    },\n    async refreshSelection(idxs, grids = null) {\n      this.is_refreshing = true\n      let self = this\n      await this.fetchLayerInfo({ idxs, attrs: this.word_attrs })\n      this.current = {};\n      let resp = await self.getSamples(idxs);\n      this.current_items = resp.sort((a, b) => a.score - b.score);\n      this.current.grids = grids;\n      this.current.idxs = idxs;\n      this.paintLinechart();\n      this.brushGrid(idxs);\n      this.is_refreshing = false\n    },\n    async addSentenceDAG(index) {\n      this.lastInfoFlow = index\n      await this.refreshDAG(\"sentence\", index)\n      await this.paintLinechart()\n    },\n    async addWordDAG(word) {\n      this.lastWordContext = word\n      await this.refreshDAG(\"word\", word)\n    },\n    async refreshDAG(type, idx) {\n      let req = { level: type, layers: this.showed_layers }\n      if (type == \"sentence\") {\n        req.idx = idx\n      } else {\n        req.word = idx\n      }\n      this.setViewtype(type)\n      let resp = await axios.post(`${this.server_url}/api/networks`, req)\n      if (type == \"sentence\") {\n        this.current_text = this.getSample(idx).text\n        this.setLayers(resp.data.linechart)\n      }\n      this.setNetwork(resp)\n      this.calcDAG()\n      this.paintDAG()\n    },\n    async paintDAG() {\n      if (this.current_viewtype == \"word\") {\n        this.right_bottom_view = \"word_ctx\";\n        paintWordDAG(this);\n        await this.paintWordcloud();\n      } else if (this.current_viewtype == \"sentence\") {\n        this.right_bottom_view = \"info_flow\";\n        await paintSampleComposition(this);\n      }\n    },\n  },\n  async mounted() {\n    if (window.innerWidth < 2800) {\n      console.log('document.body.style.zoom', window.innerWidth / 2800)\n      const ratio = window.innerWidth / 2800 \n      document.body.parentElement.style.zoom = ratio\n      const height = window.innerHeight / ratio - 50\n      document.body.parentElement.style.height = `${height}px`\n      document.body.style.height = `${height}px`\n      console.log(this.$refs.mainview)\n      this.$refs.mainview.$el.style.height =  `${height}px`\n      this.$refs.simpletable.$el.style['max-height'] =  `${height * 0.52 - 96}px`\n    }\n    const self = this\n    self.svgResize();\n    document.getElementsByClassName(\"lds-facebook\")[0].style.display = \"none\";\n    let resp = await axios.post(`${self.server_url}/api/scatterplot`, {});\n    await self.setScatterplot(resp);\n    window.onresize = () => {\n      self.svgResize();\n    };\n    this.$intro().start()\n    await self.fetchAllSample();\n    await self.paintScatterplot();\n    await self.refreshSelection(null);\n    bus.$on(\"add_word_DAG\", (word) => self.addWordDAG(word));\n    bus.$on(\"add_sentence_DAG\", (idx) => self.addSentenceDAG(idx));\n    bus.$on(\"highlight_grid\", (idxs) => self.highlightGrid(idxs));\n    bus.$on(\"brush_grid\", (idxs) => self.brushGrid(idxs))\n  },\n};\n</script>\n\n<style>\n.lds-facebook {\n  display: inline-block;\n  position: relative;\n  z-index: 0;\n  width: 80px;\n  height: 80px;\n  left: 45vw;\n  top: 45%;\n}\n\nhtml, body {\n  height: 100%;\n  width: 100%;\n}\n\n#app {\n  z-index: 1;\n}\n\n.lds-facebook div {\n  display: inline-block;\n  position: absolute;\n  left: 8px;\n  width: 16px;\n  background: #555;\n  animation: lds-facebook 1.2s cubic-bezier(0, 0.5, 0.5, 1) infinite;\n}\n.lds-facebook div:nth-child(1) {\n  left: 8px;\n  animation-delay: -0.24s;\n}\n.lds-facebook div:nth-child(2) {\n  left: 32px;\n  animation-delay: -0.12s;\n}\n.lds-facebook div:nth-child(3) {\n  left: 56px;\n  animation-delay: 0;\n}\n@keyframes lds-facebook {\n  0% {\n    top: 8px;\n    height: 64px;\n  }\n  50%,\n  100% {\n    top: 24px;\n    height: 32px;\n  }\n}\n\n#network-svg {\n  -webkit-transition: opacity 1s ease-in-out;\n  -moz-transition: opacity 1s ease-in-out;\n  -o-transition: opacity 1s ease-in-out;\n  transition: opacity 1s ease-in-out;\n}\n\n.core-view {\n  height: 100%;\n  background-color: #dddddd;\n}\n\n.max-height {\n  height: 100%;\n}\n\n.my-subtitle {\n  font-size: 18px;\n  color: rgba(0, 0, 0, 0.6);\n}\n\n.corpus-view {\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.nlpvis-view {\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.nlpvis-script {\n  background: rgba(255, 255, 255, 0.99);\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.nlpvis-tab {\n  border-left: 1px solid rgba(0, 0, 0, 0.4);\n  border-top: 1px solid rgba(0, 0, 0, 0.4);\n  border-bottom: 1px solid white;\n}\n\n.nlpvis-last-tab {\n  border-left: 1px solid rgba(0, 0, 0, 0.4);\n  border-right: 1px solid rgba(0, 0, 0, 0.4);\n  border-top: 1px solid rgba(0, 0, 0, 0.4);\n  border-bottom: 1px solid white;\n}\n\n.network-view {\n  background: #fff;\n  box-shadow: 0 2px 4px rgba(26, 26, 26, 0.3);\n}\n\n.lasso path {\n  stroke: gray;\n  stroke-width: 2px;\n}\n\n.lasso .drawn {\n  fill-opacity: 0.05;\n}\n\n.lasso .loop_close {\n  fill: none;\n  stroke-dasharray: 4, 4;\n}\n\n.lasso .origin {\n  fill: #3399ff;\n  fill-opacity: 0.5;\n}\n\n.nlpvis-text {\n  font-size: 20px !important;\n}\n\n.text-singleline {\n  white-space: nowrap;\n}\n.nlpvis-tab {\n  border-radius: 0.5rem 0.5rem 0 0 !important;\n  border: 0 solid #111;\n}\n\n.nlpvis-title {\n  font-size: 20px !important;\n  font-weight: 700 !important;\n  text-transform: capitalize !important;\n  font-family: Roboto, sans-serif !important;\n  justify-content: baseline !important;\n  letter-spacing: 0em !important;\n  color: #444;\n}\n\n.nlpvis-title.disabled {\n  color: gray;\n}\n\nsvg {\n  -moz-user-select: none;\n  -webkit-user-select: none;\n  -ms-user-select: none;\n  -khtml-user-select: none;\n  user-select: none;\n}\n\n.color-legend {\n  display: inline-flex;\n  align-items: center;\n  margin-right: 1em;\n  font-size: 18px;\n}\n\n.color-legend::before {\n  content: \"\";\n  width: 18px;\n  height: 18px;\n  margin-right: 0.5em;\n  background: var(--color);\n}\n\n.svg-tooltip {\n  font-family: -apple-system, system-ui, BlinkMacSystemFont, \"Segoe UI\",\n    Helvetica, Roboto, sans-serif, \"Apple   Color Emoji\", \"Segoe UI Emoji\",\n    \"Segoe UI Symbol\";\n  background: rgba(250, 250, 250, 0.9);\n  border-radius: 0.1rem;\n  border: 1px solid #111;\n  color: #222;\n  display: block;\n  font-size: 18px;\n  padding: 0.2rem 0.4rem;\n  position: absolute;\n  text-overflow: ellipsis;\n  white-space: pre;\n  z-index: 300;\n  padding: 0.4rem 0.6rem;\n  visibility: hidden;\n}\n\nsvg.matrixdiagram {\n  font: 20px sans-serif;\n}\n\nsvg.matrixdiagram .label {\n  fill: #999;\n  font-size: 20px;\n  text-anchor: end;\n}\n\nsvg.matrixdiagram .column.label {\n  text-anchor: start;\n}\n\nsvg.matrixdiagram rect {\n  fill: #eee;\n  /* stroke: #d62333; */\n  stroke: #fff;\n  stroke-width: 0;\n}\n\nsvg.matrixdiagram rect:hover {\n  stroke-width: 2px;\n}\n</style>\n","import mod from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"; export default mod; export * from \"-!../node_modules/cache-loader/dist/cjs.js??ref--12-0!../node_modules/thread-loader/dist/cjs.js!../node_modules/babel-loader/lib/index.js!../node_modules/cache-loader/dist/cjs.js??ref--0-0!../node_modules/vue-loader/lib/index.js??vue-loader-options!./App.vue?vue&type=script&lang=js&\"","import { render, staticRenderFns } from \"./App.vue?vue&type=template&id=6842a9d4&\"\nimport script from \"./App.vue?vue&type=script&lang=js&\"\nexport * from \"./App.vue?vue&type=script&lang=js&\"\nimport style0 from \"./App.vue?vue&type=style&index=0&lang=css&\"\n\n\n/* normalize component */\nimport normalizer from \"!../node_modules/vue-loader/lib/runtime/componentNormalizer.js\"\nvar component = normalizer(\n  script,\n  render,\n  staticRenderFns,\n  false,\n  null,\n  null,\n  null\n  \n)\n\nexport default component.exports\n\n/* vuetify-loader */\nimport installComponents from \"!../node_modules/vuetify-loader/lib/runtime/installComponents.js\"\nimport { VApp } from 'vuetify/lib/components/VApp';\nimport { VBtn } from 'vuetify/lib/components/VBtn';\nimport { VBtnToggle } from 'vuetify/lib/components/VBtnToggle';\nimport { VCard } from 'vuetify/lib/components/VCard';\nimport { VCheckbox } from 'vuetify/lib/components/VCheckbox';\nimport { VChip } from 'vuetify/lib/components/VChip';\nimport { VCol } from 'vuetify/lib/components/VGrid';\nimport { VCombobox } from 'vuetify/lib/components/VCombobox';\nimport { VContainer } from 'vuetify/lib/components/VGrid';\nimport { VContent } from 'vuetify/lib/components/VContent';\nimport { VIcon } from 'vuetify/lib/components/VIcon';\nimport { VImg } from 'vuetify/lib/components/VImg';\nimport { VRow } from 'vuetify/lib/components/VGrid';\nimport { VSelect } from 'vuetify/lib/components/VSelect';\nimport { VSimpleTable } from 'vuetify/lib/components/VDataTable';\nimport { VSpacer } from 'vuetify/lib/components/VGrid';\nimport { VToolbar } from 'vuetify/lib/components/VToolbar';\ninstallComponents(component, {VApp,VBtn,VBtnToggle,VCard,VCheckbox,VChip,VCol,VCombobox,VContainer,VContent,VIcon,VImg,VRow,VSelect,VSimpleTable,VSpacer,VToolbar})\n","import Vue from 'vue'\nimport Vuex from 'vuex'\nimport axios from 'axios'\nimport { layoutDAGEdges, layoutSentenceDAGNodes } from '../layout/word_dag_layout'\n\nVue.use(Vuex)\n\nlet cache = {\n  corpus_layers: null,\n}\n\nexport default new Vuex.Store({\n  state: {\n    server_url: './',\n    //'http://166.111.81.51:5004',//\n    DAG: {},\n    linechart: {},\n    scatterplot: {},\n    bubble: {\n      left: 40,\n      top: 10,\n    },\n    config: {\n      linechart: { scale: 0.3, padding: 20 },\n      DAG: { padding: { top: 5, left: 24 } },\n      network: {\n        padding: { left: 20, top: 20, right: 20, bottom: 20 },\n        node_scale: 0.6,\n        node_padding: 20,\n      },\n      data_table: {\n        max_table_len: 3000,\n        min_text_len: 30,\n        target_text_len: 45,\n      }\n    },\n    color_scheme: [\"#d7191c\", \"#1a9641\", \"#ff7f0e\", \"#1f77b4\" ],//[\"#d7191c\", \"#1a9641\", \"#9467bd\", \"#ff7f0e\"],\n    neuron_clusters: [],\n    edges: [],\n    showed_layers: [0, 3, 6, 9, 10, 12],\n    layers: [1, 2, 3, 4, 5, 6, 7, 8, 9, 10, 11, 12],\n    current_layers: [],\n    current_viewtype: 'sentence',\n    layout: null,\n    sentenceclusters: [],\n    all_samples: [],\n    hover_word: null,\n    hover_timer: null,\n    current_samples: [],\n    word_indexs: {},\n    word_index_pos: {},\n    filtered_words: [],\n    labels: [],\n    filter_info: {},\n    tooltip: {\n      top: 0,\n      left: 0,\n      show: false,\n      content: '',\n    },\n    selected_class: [1, 0],\n  },\n  getters: {\n    positiveColor: (state) => state.color_scheme[state.selected_class[0]],\n    negativeColor: (state) => state.color_scheme[state.selected_class[1]],\n    neutralColor: (state) => 'gray',\n    neutralColorGray: (state) => \"#777\",\n    fontSizeRange: (state) => [15, 35],\n    getSample: (state) => (idx) => {\n      return state.all_samples[idx]\n    },\n    checkWordIndex: (state) => (key) => {\n      return !!state.word_indexs[key]\n    },\n    getLabelColor: (state) => (label) => {\n      for (let i = 0; i < state.labels.length; ++i) {\n        if (state.labels[i].label == label) {\n          return state.color_scheme[i]\n        }\n      }\n      return 'gray'\n    },\n    selected_label: (state) => {\n      return state.selected_class.map(d => state.labels[d].label)\n    },\n    getSamples: (state) => (idxs) => {\n      let ret\n      const max_len = state.config.data_table.max_table_len\n      const target_len = state.config.data_table.target_text_len\n      //console.log(idxs)\n      if (idxs && idxs.length > 0) {\n        ret = idxs.map(idx => state.all_samples[idx])\n          .sort((a, b) => Math.abs(a.text.length - target_len) - Math.abs(b.text.length - target_len))\n          .slice(0, max_len)\n      } else {\n        ret = state.all_samples\n          .filter(d => d.text.length > state.config.data_table.min_text_len)\n          .slice(0, max_len)\n          .sort((a, b) => Math.abs(a.text.length - target_len) - Math.abs(b.text.length - target_len))\n      }\n      //console.log(ret)\n      return ret\n    },\n    getWordIdxs: (state) => (key) => {\n      return state.word_indexs[key]\n    },\n    view_samples: (state) => {\n      let oldidxs = new Set(state.current_samples.map(d => d.index))\n      let newidxs = new Set()\n      for (let word of state.filtered_words) {\n        for (let idx of state.word_indexs[word]) {\n          newidxs.add(idx)\n          if (oldidxs.has(idx)) {\n            oldidxs.delete(idx)\n          }\n        }\n      }\n      oldidxs = [...oldidxs]\n      oldidxs.sort((a, b) => a - b)\n      let idxs = [...newidxs].concat(oldidxs)\n      function highlight(texts) {\n        let words = []\n        texts = texts.split(' ')\n        for (let text of texts) {\n          let flag = 1\n          for (let word of state.filtered_words) {\n            if (text.indexOf(word) != -1) {\n              flag = 0\n              let p = text.indexOf(word)\n              if (p > 0) {\n                words.push([text.slice(0, p), false])\n              }\n              words.push([word, true])\n              if (word.length + p < text.length) {\n                words.push([text.slice(word.length + p), false])\n              }\n              break\n            }\n          }\n          if (flag) {\n            words.push([text, false])\n          }\n        }\n        return words\n      }\n      let ret = idxs.map(idx => state.all_samples[idx])\n        .map(d => {\n          let words = highlight(d.text)\n\t\t\t\t\tlet x1 = d.score[state.selected_class[0]]\n\t\t\t\t\tlet x2 = d.score[state.selected_class[1]]\n          return {\n            index: d.index,\n            text: words,\n            pred: d.pred,\n            label: d.label,\n            score: x1 / (x1 + x2),\n            show_filter: false,\n          }\n        })\n      if (newidxs.size > 0) {\n        ret[0].show_filter = true\n        ret = ret.slice(0, newidxs.size)\n          .concat(state.filter_info.sentences\n            .filter(d => !newidxs.has(d.index) && d.text.indexOf(` ${state.filtered_words[0]} `) != -1 && d.index >= 5000)\n            .map(d => ({\n              index: d.index,\n              text: highlight(d.text),\n              pred: 'N/A',\n              label: d.label,\n              score: 'N/A',\n              show_filter: false,\n            }))\n            .sort((a, b) => {\n              if (a.index == 60312) return -1\n              else if (b.index == 60312) return 1\n              return (a.index - b.index)\n            })\n          )\n          .concat(ret.slice(newidxs.size))\n      }\n      return ret.slice(0, 500)\n    }\n  },\n  mutations: {\n    addHoverTimer(state, timer) {\n      clearTimeout(state.hover_timer)\n      state.hover_timer = timer\n    },\n    removeHoverTimer(state) {\n      clearTimeout(state.hover_timer)\n    },\n    setHoverWord(state, key) {\n      state.hover_word = key\n    },\n    updatePosition(state, payload) {\n      const padding = state.config.network.padding\n      const width = payload.network.width - padding.left - padding.right\n      const height = payload.network.height - padding.top - padding.bottom\n      state.bubble.width = payload.bubble.width\n      state.bubble.height = payload.bubble.height\n      state.linechart.padding = state.config.linechart.padding\n      state.linechart.width = payload.linechart.width - state.linechart.padding\n      state.linechart.height = payload.linechart.height - state.linechart.padding\n      state.linechart.x = state.linechart.padding\n      state.linechart.y = state.linechart.padding\n      state.DAG.width = width\n      state.DAG.height = height\n      state.DAG.x = state.config.DAG.padding.left\n      state.DAG.y = state.config.DAG.padding.top\n    },\n    setViewtype(state, type) {\n      state.current_viewtype = type\n    },\n    setScatterplot(state, payload) {\n      state.scatterplot = payload.data\n    },\n    setLayers(state, data) {\n      state.layers = data\n    },\n    calcEdges(state, layers) {\n      layoutDAGEdges(state, layers)\n    },\n    calcDAG(state) {\n      if (state.current_viewtype == 'word') {\n        layoutSentenceDAGNodes(state)\n        this.commit('calcEdges', state.current_layers)\n      }\n    },\n    changeFilteredWord(state, { key, sentences, pos, neg }) {\n      const idx = state.filtered_words.indexOf(key)\n      if (idx != -1) {\n        state.filtered_words.splice(idx, 1)\n      } else {\n        state.filtered_words = [key]\n        state.filter_info = {\n          sentences, pos, neg, word: key,\n        }\n      }\n    },\n    setNetwork(state, payload) {\n      if (state.current_viewtype == 'sentence') {\n        state.layout = payload.data.layout\n      } else if (state.current_viewtype == 'word') {\n        state.neuron_clusters = payload.data.neuron_clusters\n        state.edges = payload.data.edges\n      }\n      //console.log(state.neuron_clusters)\n    },\n    setAllSamples(state, data) {\n      state.all_samples = data.sort((a, b) => a.id - b.id)\n    },\n    setCurrentSamples(state, data) {\n      state.current_samples = data\n    },\n    setWordIndex(state, { key, idxs, pos }) {\n      state.word_indexs[key] = idxs\n      state.word_index_pos[key] = pos\n    },\n    showTooltip(state, { top, left, content }) {\n      state.tooltip.top = top + 10\n      state.tooltip.left = left + 10\n      state.tooltip.content = content\n      state.tooltip.show = true\n    },\n    setConfusionMatrix(state, { matrix, labels, label_names, selection }) {\n      state.selected_class = selection\n      state.labels = labels.map((d, i) => ({ label: d, name: label_names[i] }))\n      state.matrix = matrix\n    },\n    hideTooltip(state) {\n      state.tooltip.show = false\n    }\n  },\n  actions: {\n    async changeCurrentSamples({ commit, getters }, idxs) {\n      commit('setCurrentSamples', getters.getSamples(idxs))\n    },\n    async changeFilteredWord({ commit, state }, key) {\n      const resp = await axios.post(`${state.server_url}/api/word_sentences`, { word: key })\n      const { sentences, pos, neg } = resp.data\n      commit('changeFilteredWord', { key, sentences, pos, neg })\n    },\n    async fetchWordIndex({ commit, state }, key) {\n      if (!!state.word_indexs[key]) {\n        return\n      }\n      const resp = await axios.post(`${state.server_url}/api/word`, { word: key })\n      const idxs = resp.data.idxs\n      const pos = resp.data.pos\n      commit('setWordIndex', { key, idxs, pos })\n    },\n    async fetchLayerInfo({ commit, state }, { idxs, attrs }) {\n      let resp\n      if (idxs == null && cache.corpus_layers != null) {\n        resp = cache.corpus_layers\n      } else {\n        resp = await axios.post(`${state.server_url}/api/layers`, { idxs, attrs })\n        if (idxs == null) {\n          cache.corpus_layers = resp\n        }\n      }\n      commit('setLayers', resp.data)\n    },\n    async fetchDAG({ commit, state }, req) {\n      let resp = await axios.post(`${state.server_url}/api/networks`, req)\n      commit('setNetwork', resp)\n      commit('calcDAG')\n    },\n    async fetchAllSample({ commit, state, getters }) {\n      let resp = await axios.post(`${state.server_url}/api/all_sentences`, {})\n      // console.log(resp.data.sentences)\n      commit('setAllSamples', resp.data.sentences)\n      resp = await axios.post(`${state.server_url}/api/confusion_matrix`, {})\n      commit('setConfusionMatrix', resp.data)\n      commit('setCurrentSamples', getters.getSamples(null))\n    }\n  },\n  modules: {\n  }\n})\n","import Vue from 'vue';\nimport Vuetify from 'vuetify/lib';\n\nVue.use(Vuetify);\n\nexport default new Vuetify({\n});\n","import Vue from 'vue'\nimport App from './App.vue'\nimport store from './store'\nimport vuetify from './plugins/vuetify'\nimport VueIntro from 'vue-introjs'\nVue.use(VueIntro)\n\n\nimport 'intro.js/introjs.css';\n\nVue.config.productionTip = false\n\nnew Vue({\n  store,\n  vuetify,\n  render: h => h(App)\n}).$mount('#app')\n","module.exports = __webpack_public_path__ + \"img/figure1.f069d720.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=style&index=0&id=29934476&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./wordgroup.vue?vue&type=style&index=0&id=29934476&scoped=true&lang=css&\"","module.exports = __webpack_public_path__ + \"img/legend1.181e0cc3.png\";","import mod from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=style&index=0&id=ee1705e8&scoped=true&lang=css&\"; export default mod; export * from \"-!../../node_modules/mini-css-extract-plugin/dist/loader.js??ref--6-oneOf-1-0!../../node_modules/css-loader/dist/cjs.js??ref--6-oneOf-1-1!../../node_modules/vue-loader/lib/loaders/stylePostLoader.js!../../node_modules/postcss-loader/src/index.js??ref--6-oneOf-1-2!../../node_modules/cache-loader/dist/cjs.js??ref--0-0!../../node_modules/vue-loader/lib/index.js??vue-loader-options!./infotooltip.vue?vue&type=style&index=0&id=ee1705e8&scoped=true&lang=css&\""],"sourceRoot":""}